(self.webpackChunk_terrestris_react_geo=self.webpackChunk_terrestris_react_geo||[]).push([[780],{13491:function(h){(function(){var g,d,f,x,b,S;"undefined"!=typeof performance&&null!==performance&&performance.now?h.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(h.exports=function(){return(g()-b)/1e6},d=process.hrtime,x=(g=function(){var h;return 1e9*(h=d())[0]+h[1]})(),S=1e9*process.uptime(),b=x-S):Date.now?(h.exports=function(){return Date.now()-f},f=Date.now()):(h.exports=function(){return(new Date).getTime()-f},f=(new Date).getTime())}).call(this)},93146:(h,g,d)=>{for(var f=d(13491),x="undefined"==typeof window?d.g:window,b=["moz","webkit"],S="AnimationFrame",w=x["request"+S],A=x["cancel"+S]||x["cancelRequest"+S],C=0;!w&&C<b.length;C++)w=x[b[C]+"Request"+S],A=x[b[C]+"Cancel"+S]||x[b[C]+"CancelRequest"+S];if(!w||!A){var P=0,E=0,N=[],_=1e3/60;w=function(h){if(0===N.length){var g=f(),d=Math.max(0,_-(g-P));P=d+g,setTimeout((function(){var h=N.slice(0);N.length=0;for(var g=0;g<h.length;g++)if(!h[g].cancelled)try{h[g].callback(P)}catch(h){setTimeout((function(){throw h}),0)}}),Math.round(d))}return N.push({handle:++E,callback:h,cancelled:!1}),E},A=function(h){for(var g=0;g<N.length;g++)N[g].handle===h&&(N[g].cancelled=!0)}}h.exports=function(h){return w.call(x,h)},h.exports.cancel=function(){A.apply(x,arguments)},h.exports.polyfill=function(h){h||(h=x),h.requestAnimationFrame=w,h.cancelAnimationFrame=A}},82855:h=>{h.exports=function(h){this.ok=!1,this.alpha=1,"#"==h.charAt(0)&&(h=h.substr(1,6)),h=(h=h.replace(/ /g,"")).toLowerCase();var g={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};h=g[h]||h;for(var d=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),parseFloat(h[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],f=0;f<d.length;f++){var x=d[f].re,b=d[f].process,S=x.exec(h);if(S){var w=b(S);this.r=w[0],this.g=w[1],this.b=w[2],w.length>3&&(this.alpha=w[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var h=this.r.toString(16),g=this.g.toString(16),d=this.b.toString(16);return 1==h.length&&(h="0"+h),1==g.length&&(g="0"+g),1==d.length&&(d="0"+d),"#"+h+g+d},this.getHelpXML=function(){for(var h=new Array,f=0;f<d.length;f++)for(var x=d[f].example,b=0;b<x.length;b++)h[h.length]=x[b];for(var S in g)h[h.length]=S;var w=document.createElement("ul");w.setAttribute("id","rgbcolor-examples");for(f=0;f<h.length;f++)try{var A=document.createElement("li"),C=new RGBColor(h[f]),P=document.createElement("div");P.style.cssText="margin: 3px; border: 1px solid black; background:"+C.toHex()+"; color:"+C.toHex(),P.appendChild(document.createTextNode("test"));var E=document.createTextNode(" "+h[f]+" -> "+C.toRGB()+" -> "+C.toHex());A.appendChild(P),A.appendChild(E),w.appendChild(A)}catch(h){}return w}}},6469:(h,g,d)=>{"use strict";var f=d(78227),x=d(2360),b=d(24913).f,S=f("unscopables"),w=Array.prototype;void 0===w[S]&&b(w,S,{configurable:!0,value:x(null)}),h.exports=function(h){w[S][h]=!0}},90679:(h,g,d)=>{"use strict";var f=d(1625),x=TypeError;h.exports=function(h,g){if(f(g,h))return h;throw new x("Incorrect invocation")}},80926:(h,g,d)=>{"use strict";var f=d(79306),x=d(48981),b=d(47055),S=d(26198),w=TypeError,A="Reduce of empty array with no initial value",createMethod=function(h){return function(g,d,C,P){var E=x(g),N=b(E),_=S(E);if(f(d),0===_&&C<2)throw new w(A);var M=h?_-1:0,R=h?-1:1;if(C<2)for(;;){if(M in N){P=N[M],M+=R;break}if(M+=R,h?M<0:_<=M)throw new w(A)}for(;h?M>=0:_>M;M+=R)M in N&&(P=d(P,N[M],M,E));return P}};h.exports={left:createMethod(!1),right:createMethod(!0)}},84428:(h,g,d)=>{"use strict";var f=d(78227)("iterator"),x=!1;try{var b=0,S={next:function(){return{done:!!b++}},return:function(){x=!0}};S[f]=function(){return this},Array.from(S,(function(){throw 2}))}catch(h){}h.exports=function(h,g){try{if(!g&&!x)return!1}catch(h){return!1}var d=!1;try{var b={};b[f]=function(){return{next:function(){return{done:d=!0}}}},h(b)}catch(h){}return d}},41436:(h,g,d)=>{"use strict";var f=d(78227)("match");h.exports=function(h){var g=/./;try{"/./"[h](g)}catch(d){try{return g[f]=!1,"/./"[h](g)}catch(h){}}return!1}},12211:(h,g,d)=>{"use strict";var f=d(79039);h.exports=!f((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},62529:h=>{"use strict";h.exports=function(h,g){return{value:h,done:g}}},44265:(h,g,d)=>{"use strict";var f=d(82839);h.exports=/ipad|iphone|ipod/i.test(f)&&"undefined"!=typeof Pebble},89544:(h,g,d)=>{"use strict";var f=d(82839);h.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(f)},16193:(h,g,d)=>{"use strict";var f=d(84215);h.exports="NODE"===f},7860:(h,g,d)=>{"use strict";var f=d(82839);h.exports=/web0s(?!.*chrome)/i.test(f)},84215:(h,g,d)=>{"use strict";var f=d(44576),x=d(82839),b=d(22195),userAgentStartsWith=function(h){return x.slice(0,h.length)===h};h.exports=userAgentStartsWith("Bun/")?"BUN":userAgentStartsWith("Cloudflare-Workers")?"CLOUDFLARE":userAgentStartsWith("Deno/")?"DENO":userAgentStartsWith("Node.js/")?"NODE":f.Bun&&"string"==typeof Bun.version?"BUN":f.Deno&&"object"==typeof Deno.version?"DENO":"process"===b(f.process)?"NODE":f.window&&f.document?"BROWSER":"REST"},50851:(h,g,d)=>{"use strict";var f=d(36955),x=d(55966),b=d(64117),S=d(26269),w=d(78227)("iterator");h.exports=function(h){if(!b(h))return x(h,w)||x(h,"@@iterator")||S[f(h)]}},70081:(h,g,d)=>{"use strict";var f=d(69565),x=d(79306),b=d(28551),S=d(16823),w=d(50851),A=TypeError;h.exports=function(h,g){var d=arguments.length<2?w(h):g;if(x(d))return b(f(d,h));throw new A(S(h)+" is not iterable")}},90757:h=>{"use strict";h.exports=function(h,g){try{1===arguments.length?console.error(h):console.error(h,g)}catch(h){}}},44209:(h,g,d)=>{"use strict";var f=d(78227),x=d(26269),b=f("iterator"),S=Array.prototype;h.exports=function(h){return void 0!==h&&(x.Array===h||S[b]===h)}},72652:(h,g,d)=>{"use strict";var f=d(76080),x=d(69565),b=d(28551),S=d(16823),w=d(44209),A=d(26198),C=d(1625),P=d(70081),E=d(50851),N=d(9539),_=TypeError,Result=function(h,g){this.stopped=h,this.result=g},M=Result.prototype;h.exports=function(h,g,d){var R,V,k,D,L,B,z,U=d&&d.that,j=!(!d||!d.AS_ENTRIES),X=!(!d||!d.IS_RECORD),Y=!(!d||!d.IS_ITERATOR),Q=!(!d||!d.INTERRUPTED),W=f(g,U),stop=function(h){return R&&N(R,"normal",h),new Result(!0,h)},callFn=function(h){return j?(b(h),Q?W(h[0],h[1],stop):W(h[0],h[1])):Q?W(h,stop):W(h)};if(X)R=h.iterator;else if(Y)R=h;else{if(!(V=E(h)))throw new _(S(h)+" is not iterable");if(w(V)){for(k=0,D=A(h);D>k;k++)if((L=callFn(h[k]))&&C(M,L))return L;return new Result(!1)}R=P(h,V)}for(B=X?h.next:R.next;!(z=x(B,R)).done;){try{L=callFn(z.value)}catch(h){N(R,"throw",h)}if("object"==typeof L&&L&&C(M,L))return L}return new Result(!1)}},9539:(h,g,d)=>{"use strict";var f=d(69565),x=d(28551),b=d(55966);h.exports=function(h,g,d){var S,w;x(h);try{if(!(S=b(h,"return"))){if("throw"===g)throw d;return d}S=f(S,h)}catch(h){w=!0,S=h}if("throw"===g)throw d;if(w)throw S;return x(S),d}},33994:(h,g,d)=>{"use strict";var f=d(57657).IteratorPrototype,x=d(2360),b=d(6980),S=d(10687),w=d(26269),returnThis=function(){return this};h.exports=function(h,g,d,A){var C=g+" Iterator";return h.prototype=x(f,{next:b(+!A,d)}),S(h,C,!1,!0),w[C]=returnThis,h}},51088:(h,g,d)=>{"use strict";var f=d(46518),x=d(69565),b=d(96395),S=d(10350),w=d(94901),A=d(33994),C=d(42787),P=d(52967),E=d(10687),N=d(66699),_=d(36840),M=d(78227),R=d(26269),V=d(57657),k=S.PROPER,D=S.CONFIGURABLE,L=V.IteratorPrototype,B=V.BUGGY_SAFARI_ITERATORS,z=M("iterator"),U="keys",j="values",X="entries",returnThis=function(){return this};h.exports=function(h,g,d,S,M,V,Y){A(d,g,S);var Q,W,q,getIterationMethod=function(h){if(h===M&&J)return J;if(!B&&h&&h in Z)return Z[h];switch(h){case U:return function keys(){return new d(this,h)};case j:return function values(){return new d(this,h)};case X:return function entries(){return new d(this,h)}}return function(){return new d(this)}},G=g+" Iterator",$=!1,Z=h.prototype,K=Z[z]||Z["@@iterator"]||M&&Z[M],J=!B&&K||getIterationMethod(M),tt="Array"===g&&Z.entries||K;if(tt&&(Q=C(tt.call(new h)))!==Object.prototype&&Q.next&&(b||C(Q)===L||(P?P(Q,L):w(Q[z])||_(Q,z,returnThis)),E(Q,G,!0,!0),b&&(R[G]=returnThis)),k&&M===j&&K&&K.name!==j&&(!b&&D?N(Z,"name",j):($=!0,J=function values(){return x(K,this)})),M)if(W={values:getIterationMethod(j),keys:V?J:getIterationMethod(U),entries:getIterationMethod(X)},Y)for(q in W)(B||$||!(q in Z))&&_(Z,q,W[q]);else f({target:g,proto:!0,forced:B||$},W);return b&&!Y||Z[z]===J||_(Z,z,J,{name:M}),R[g]=J,W}},57657:(h,g,d)=>{"use strict";var f,x,b,S=d(79039),w=d(94901),A=d(20034),C=d(2360),P=d(42787),E=d(36840),N=d(78227),_=d(96395),M=N("iterator"),R=!1;[].keys&&("next"in(b=[].keys())?(x=P(P(b)))!==Object.prototype&&(f=x):R=!0),!A(f)||S((function(){var h={};return f[M].call(h)!==h}))?f={}:_&&(f=C(f)),w(f[M])||E(f,M,(function(){return this})),h.exports={IteratorPrototype:f,BUGGY_SAFARI_ITERATORS:R}},26269:h=>{"use strict";h.exports={}},91955:(h,g,d)=>{"use strict";var f,x,b,S,w,A=d(44576),C=d(93389),P=d(76080),E=d(59225).set,N=d(18265),_=d(89544),M=d(44265),R=d(7860),V=d(16193),k=A.MutationObserver||A.WebKitMutationObserver,D=A.document,L=A.process,B=A.Promise,z=C("queueMicrotask");if(!z){var U=new N,flush=function(){var h,g;for(V&&(h=L.domain)&&h.exit();g=U.get();)try{g()}catch(h){throw U.head&&f(),h}h&&h.enter()};_||V||R||!k||!D?!M&&B&&B.resolve?((S=B.resolve(void 0)).constructor=B,w=P(S.then,S),f=function(){w(flush)}):V?f=function(){L.nextTick(flush)}:(E=P(E,A),f=function(){E(flush)}):(x=!0,b=D.createTextNode(""),new k(flush).observe(b,{characterData:!0}),f=function(){b.data=x=!x}),z=function(h){U.head||f(),U.add(h)}}h.exports=z},36043:(h,g,d)=>{"use strict";var f=d(79306),x=TypeError,PromiseCapability=function(h){var g,d;this.promise=new h((function(h,f){if(void 0!==g||void 0!==d)throw new x("Bad Promise constructor");g=h,d=f})),this.resolve=f(g),this.reject=f(d)};h.exports.f=function(h){return new PromiseCapability(h)}},60511:(h,g,d)=>{"use strict";var f=d(60788),x=TypeError;h.exports=function(h){if(f(h))throw new x("The method doesn't accept regular expressions");return h}},42787:(h,g,d)=>{"use strict";var f=d(39297),x=d(94901),b=d(48981),S=d(66119),w=d(12211),A=S("IE_PROTO"),C=Object,P=C.prototype;h.exports=w?C.getPrototypeOf:function(h){var g=b(h);if(f(g,A))return g[A];var d=g.constructor;return x(d)&&g instanceof d?d.prototype:g instanceof C?P:null}},1103:h=>{"use strict";h.exports=function(h){try{return{error:!1,value:h()}}catch(h){return{error:!0,value:h}}}},10916:(h,g,d)=>{"use strict";var f=d(44576),x=d(80550),b=d(94901),S=d(92796),w=d(33706),A=d(78227),C=d(84215),P=d(96395),E=d(39519),N=x&&x.prototype,_=A("species"),M=!1,R=b(f.PromiseRejectionEvent),V=S("Promise",(function(){var h=w(x),g=h!==String(x);if(!g&&66===E)return!0;if(P&&(!N.catch||!N.finally))return!0;if(!E||E<51||!/native code/.test(h)){var d=new x((function(h){h(1)})),FakePromise=function(h){h((function(){}),(function(){}))};if((d.constructor={})[_]=FakePromise,!(M=d.then((function(){}))instanceof FakePromise))return!0}return!(g||"BROWSER"!==C&&"DENO"!==C||R)}));h.exports={CONSTRUCTOR:V,REJECTION_EVENT:R,SUBCLASSING:M}},80550:(h,g,d)=>{"use strict";var f=d(44576);h.exports=f.Promise},93438:(h,g,d)=>{"use strict";var f=d(28551),x=d(20034),b=d(36043);h.exports=function(h,g){if(f(h),x(g)&&g.constructor===h)return g;var d=b.f(h);return(0,d.resolve)(g),d.promise}},90537:(h,g,d)=>{"use strict";var f=d(80550),x=d(84428),b=d(10916).CONSTRUCTOR;h.exports=b||!x((function(h){f.all(h).then(void 0,(function(){}))}))},18265:h=>{"use strict";var Queue=function(){this.head=null,this.tail=null};Queue.prototype={add:function(h){var g={item:h,next:null},d=this.tail;d?d.next=g:this.head=g,this.tail=g},get:function(){var h=this.head;if(h)return null===(this.head=h.next)&&(this.tail=null),h.item}},h.exports=Queue},93389:(h,g,d)=>{"use strict";var f=d(44576),x=d(43724),b=Object.getOwnPropertyDescriptor;h.exports=function(h){if(!x)return f[h];var g=b(f,h);return g&&g.value}},59225:(h,g,d)=>{"use strict";var f,x,b,S,w=d(44576),A=d(18745),C=d(76080),P=d(94901),E=d(39297),N=d(79039),_=d(20397),M=d(67680),R=d(4055),V=d(22812),k=d(89544),D=d(16193),L=w.setImmediate,B=w.clearImmediate,z=w.process,U=w.Dispatch,j=w.Function,X=w.MessageChannel,Y=w.String,Q=0,W={},q="onreadystatechange";N((function(){f=w.location}));var run=function(h){if(E(W,h)){var g=W[h];delete W[h],g()}},runner=function(h){return function(){run(h)}},eventListener=function(h){run(h.data)},globalPostMessageDefer=function(h){w.postMessage(Y(h),f.protocol+"//"+f.host)};L&&B||(L=function setImmediate(h){V(arguments.length,1);var g=P(h)?h:j(h),d=M(arguments,1);return W[++Q]=function(){A(g,void 0,d)},x(Q),Q},B=function clearImmediate(h){delete W[h]},D?x=function(h){z.nextTick(runner(h))}:U&&U.now?x=function(h){U.now(runner(h))}:X&&!k?(S=(b=new X).port2,b.port1.onmessage=eventListener,x=C(S.postMessage,S)):w.addEventListener&&P(w.postMessage)&&!w.importScripts&&f&&"file:"!==f.protocol&&!N(globalPostMessageDefer)?(x=globalPostMessageDefer,w.addEventListener("message",eventListener,!1)):x=q in R("script")?function(h){_.appendChild(R("script"))[q]=function(){_.removeChild(this),run(h)}}:function(h){setTimeout(runner(h),0)}),h.exports={set:L,clear:B}},22812:h=>{"use strict";var g=TypeError;h.exports=function(h,d){if(h<d)throw new g("Not enough arguments");return h}},23792:(h,g,d)=>{"use strict";var f=d(25397),x=d(6469),b=d(26269),S=d(91181),w=d(24913).f,A=d(51088),C=d(62529),P=d(96395),E=d(43724),N="Array Iterator",_=S.set,M=S.getterFor(N);h.exports=A(Array,"Array",(function(h,g){_(this,{type:N,target:f(h),index:0,kind:g})}),(function(){var h=M(this),g=h.target,d=h.index++;if(!g||d>=g.length)return h.target=null,C(void 0,!0);switch(h.kind){case"keys":return C(d,!1);case"values":return C(g[d],!1)}return C([d,g[d]],!1)}),"values");var R=b.Arguments=b.Array;if(x("keys"),x("values"),x("entries"),!P&&E&&"values"!==R.name)try{w(R,"name",{value:"values"})}catch(h){}},72712:(h,g,d)=>{"use strict";var f=d(46518),x=d(80926).left,b=d(34598),S=d(39519);f({target:"Array",proto:!0,forced:!d(16193)&&S>79&&S<83||!b("reduce")},{reduce:function reduce(h){var g=arguments.length;return x(this,h,g,g>1?arguments[1]:void 0)}})},94490:(h,g,d)=>{"use strict";var f=d(46518),x=d(79504),b=d(34376),S=x([].reverse),w=[1,2];f({target:"Array",proto:!0,forced:String(w)===String(w.reverse())},{reverse:function reverse(){return b(this)&&(this.length=this.length),S(this)}})},16499:(h,g,d)=>{"use strict";var f=d(46518),x=d(69565),b=d(79306),S=d(36043),w=d(1103),A=d(72652);f({target:"Promise",stat:!0,forced:d(90537)},{all:function all(h){var g=this,d=S.f(g),f=d.resolve,C=d.reject,P=w((function(){var d=b(g.resolve),S=[],w=0,P=1;A(h,(function(h){var b=w++,A=!1;P++,x(d,g,h).then((function(h){A||(A=!0,S[b]=h,--P||f(S))}),C)})),--P||f(S)}));return P.error&&C(P.value),d.promise}})},82003:(h,g,d)=>{"use strict";var f=d(46518),x=d(96395),b=d(10916).CONSTRUCTOR,S=d(80550),w=d(97751),A=d(94901),C=d(36840),P=S&&S.prototype;if(f({target:"Promise",proto:!0,forced:b,real:!0},{catch:function(h){return this.then(void 0,h)}}),!x&&A(S)){var E=w("Promise").prototype.catch;P.catch!==E&&C(P,"catch",E,{unsafe:!0})}},10436:(h,g,d)=>{"use strict";var f,x,b,S=d(46518),w=d(96395),A=d(16193),C=d(44576),P=d(69565),E=d(36840),N=d(52967),_=d(10687),M=d(87633),R=d(79306),V=d(94901),k=d(20034),D=d(90679),L=d(2293),B=d(59225).set,z=d(91955),U=d(90757),j=d(1103),X=d(18265),Y=d(91181),Q=d(80550),W=d(10916),q=d(36043),G="Promise",$=W.CONSTRUCTOR,Z=W.REJECTION_EVENT,K=W.SUBCLASSING,J=Y.getterFor(G),tt=Y.set,et=Q&&Q.prototype,rt=Q,it=et,nt=C.TypeError,st=C.document,at=C.process,ot=q.f,ht=ot,lt=!!(st&&st.createEvent&&C.dispatchEvent),ut="unhandledrejection",isThenable=function(h){var g;return!(!k(h)||!V(g=h.then))&&g},callReaction=function(h,g){var d,f,x,b=g.value,S=1===g.state,w=S?h.ok:h.fail,A=h.resolve,C=h.reject,E=h.domain;try{w?(S||(2===g.rejection&&onHandleUnhandled(g),g.rejection=1),!0===w?d=b:(E&&E.enter(),d=w(b),E&&(E.exit(),x=!0)),d===h.promise?C(new nt("Promise-chain cycle")):(f=isThenable(d))?P(f,d,A,C):A(d)):C(b)}catch(h){E&&!x&&E.exit(),C(h)}},notify=function(h,g){h.notified||(h.notified=!0,z((function(){for(var d,f=h.reactions;d=f.get();)callReaction(d,h);h.notified=!1,g&&!h.rejection&&onUnhandled(h)})))},dispatchEvent=function(h,g,d){var f,x;lt?((f=st.createEvent("Event")).promise=g,f.reason=d,f.initEvent(h,!1,!0),C.dispatchEvent(f)):f={promise:g,reason:d},!Z&&(x=C["on"+h])?x(f):h===ut&&U("Unhandled promise rejection",d)},onUnhandled=function(h){P(B,C,(function(){var g,d=h.facade,f=h.value;if(isUnhandled(h)&&(g=j((function(){A?at.emit("unhandledRejection",f,d):dispatchEvent(ut,d,f)})),h.rejection=A||isUnhandled(h)?2:1,g.error))throw g.value}))},isUnhandled=function(h){return 1!==h.rejection&&!h.parent},onHandleUnhandled=function(h){P(B,C,(function(){var g=h.facade;A?at.emit("rejectionHandled",g):dispatchEvent("rejectionhandled",g,h.value)}))},bind=function(h,g,d){return function(f){h(g,f,d)}},internalReject=function(h,g,d){h.done||(h.done=!0,d&&(h=d),h.value=g,h.state=2,notify(h,!0))},internalResolve=function(h,g,d){if(!h.done){h.done=!0,d&&(h=d);try{if(h.facade===g)throw new nt("Promise can't be resolved itself");var f=isThenable(g);f?z((function(){var d={done:!1};try{P(f,g,bind(internalResolve,d,h),bind(internalReject,d,h))}catch(g){internalReject(d,g,h)}})):(h.value=g,h.state=1,notify(h,!1))}catch(g){internalReject({done:!1},g,h)}}};if($&&(it=(rt=function Promise(h){D(this,it),R(h),P(f,this);var g=J(this);try{h(bind(internalResolve,g),bind(internalReject,g))}catch(h){internalReject(g,h)}}).prototype,(f=function Promise(h){tt(this,{type:G,done:!1,notified:!1,parent:!1,reactions:new X,rejection:!1,state:0,value:null})}).prototype=E(it,"then",(function then(h,g){var d=J(this),f=ot(L(this,rt));return d.parent=!0,f.ok=!V(h)||h,f.fail=V(g)&&g,f.domain=A?at.domain:void 0,0===d.state?d.reactions.add(f):z((function(){callReaction(f,d)})),f.promise})),x=function(){var h=new f,g=J(h);this.promise=h,this.resolve=bind(internalResolve,g),this.reject=bind(internalReject,g)},q.f=ot=function(h){return h===rt||undefined===h?new x(h):ht(h)},!w&&V(Q)&&et!==Object.prototype)){b=et.then,K||E(et,"then",(function then(h,g){var d=this;return new rt((function(h,g){P(b,d,h,g)})).then(h,g)}),{unsafe:!0});try{delete et.constructor}catch(h){}N&&N(et,it)}S({global:!0,constructor:!0,wrap:!0,forced:$},{Promise:rt}),_(rt,G,!1,!0),M(G)},3362:(h,g,d)=>{"use strict";d(10436),d(16499),d(82003),d(7743),d(51481),d(40280)},7743:(h,g,d)=>{"use strict";var f=d(46518),x=d(69565),b=d(79306),S=d(36043),w=d(1103),A=d(72652);f({target:"Promise",stat:!0,forced:d(90537)},{race:function race(h){var g=this,d=S.f(g),f=d.reject,C=w((function(){var S=b(g.resolve);A(h,(function(h){x(S,g,h).then(d.resolve,f)}))}));return C.error&&f(C.value),d.promise}})},51481:(h,g,d)=>{"use strict";var f=d(46518),x=d(36043);f({target:"Promise",stat:!0,forced:d(10916).CONSTRUCTOR},{reject:function reject(h){var g=x.f(this);return(0,g.reject)(h),g.promise}})},40280:(h,g,d)=>{"use strict";var f=d(46518),x=d(97751),b=d(96395),S=d(80550),w=d(10916).CONSTRUCTOR,A=d(93438),C=x("Promise"),P=b&&!w;f({target:"Promise",stat:!0,forced:b||w},{resolve:function resolve(h){return A(P&&this===C?S:this,h)}})},21830:(h,g,d)=>{"use strict";var f,x=d(46518),b=d(27476),S=d(77347).f,w=d(18014),A=d(655),C=d(60511),P=d(67750),E=d(41436),N=d(96395),_=b("".slice),M=Math.min,R=E("endsWith");x({target:"String",proto:!0,forced:!!(N||R||(f=S(String.prototype,"endsWith"),!f||f.writable))&&!R},{endsWith:function endsWith(h){var g=A(P(this));C(h);var d=arguments.length>1?arguments[1]:void 0,f=g.length,x=void 0===d?f:M(w(d),f),b=A(h);return _(g,x-b.length,x)===b}})},21699:(h,g,d)=>{"use strict";var f=d(46518),x=d(79504),b=d(60511),S=d(67750),w=d(655),A=d(41436),C=x("".indexOf);f({target:"String",proto:!0,forced:!A("includes")},{includes:function includes(h){return!!~C(w(S(this)),w(b(h)),arguments.length>1?arguments[1]:void 0)}})},11392:(h,g,d)=>{"use strict";var f,x=d(46518),b=d(27476),S=d(77347).f,w=d(18014),A=d(655),C=d(60511),P=d(67750),E=d(41436),N=d(96395),_=b("".slice),M=Math.min,R=E("startsWith");x({target:"String",proto:!0,forced:!!(N||R||(f=S(String.prototype,"startsWith"),!f||f.writable))&&!R},{startsWith:function startsWith(h){var g=A(P(this));C(h);var d=w(M(arguments.length>1?arguments[1]:void 0,g.length)),f=A(h);return _(g,d,d+f.length)===f}})},62953:(h,g,d)=>{"use strict";var f=d(44576),x=d(67400),b=d(79296),S=d(23792),w=d(66699),A=d(10687),C=d(78227)("iterator"),P=S.values,handlePrototype=function(h,g){if(h){if(h[C]!==P)try{w(h,C,P)}catch(g){h[C]=P}if(A(h,g,!0),x[g])for(var d in S)if(h[d]!==S[d])try{w(h,d,S[d])}catch(g){h[d]=S[d]}}};for(var E in x)handlePrototype(f[E]&&f[E].prototype,E);handlePrototype(b,"DOMTokenList")},37780:(h,g,d)=>{"use strict";d.r(g),d.d(g,{AElement:()=>Qt,AnimateColorElement:()=>zt,AnimateElement:()=>Ft,AnimateTransformElement:()=>Ut,BoundingBox:()=>mt,CB1:()=>CB1,CB2:()=>CB2,CB3:()=>CB3,CB4:()=>CB4,Canvg:()=>ge,CircleElement:()=>Ot,ClipPathElement:()=>re,DefsElement:()=>Vt,DescElement:()=>le,Document:()=>ce,Element:()=>dt,EllipseElement:()=>Pt,FeColorMatrixElement:()=>te,FeCompositeElement:()=>ae,FeDropShadowElement:()=>ne,FeGaussianBlurElement:()=>oe,FeMorphologyElement:()=>se,FilterElement:()=>ie,Font:()=>ft,FontElement:()=>Ht,FontFaceElement:()=>jt,GElement:()=>kt,GlyphElement:()=>bt,GradientElement:()=>It,ImageElement:()=>Gt,LineElement:()=>Et,LinearGradientElement:()=>Dt,MarkerElement:()=>Rt,MaskElement:()=>ee,Matrix:()=>ht,MissingGlyphElement:()=>Xt,Mouse:()=>K,PSEUDO_ZERO:()=>q,Parser:()=>nt,PathElement:()=>xt,PathParser:()=>yt,PatternElement:()=>Mt,Point:()=>Z,PolygonElement:()=>_t,PolylineElement:()=>Nt,Property:()=>G,QB1:()=>QB1,QB2:()=>QB2,QB3:()=>QB3,RadialGradientElement:()=>Lt,RectElement:()=>Ct,RenderedElement:()=>vt,Rotate:()=>at,SVGElement:()=>At,SVGFontLoader:()=>Zt,Scale:()=>ot,Screen:()=>et,Skew:()=>lt,SkewX:()=>ut,SkewY:()=>ct,StopElement:()=>Bt,StyleElement:()=>Kt,SymbolElement:()=>$t,TRefElement:()=>Yt,TSpanElement:()=>wt,TextElement:()=>St,TextPathElement:()=>Wt,TitleElement:()=>he,Transform:()=>gt,Translate:()=>st,UnknownElement:()=>pt,UseElement:()=>Jt,ViewPort:()=>$,compressSpaces:()=>compressSpaces,default:()=>ge,getSelectorSpecificity:()=>getSelectorSpecificity,normalizeAttributeName:()=>normalizeAttributeName,normalizeColor:()=>normalizeColor,parseExternalUrl:()=>parseExternalUrl,presets:()=>L,toNumbers:()=>toNumbers,trimLeft:()=>trimLeft,trimRight:()=>trimRight,vectorMagnitude:()=>vectorMagnitude,vectorsAngle:()=>vectorsAngle,vectorsRatio:()=>vectorsRatio});d(3362);var f=d(10467),x=(d(71761),d(25440),d(11392),d(23792),d(62953),d(64467)),b=(d(72712),d(21830),d(90744),d(93146)),S=(d(42762),d(82855)),w=(d(25276),d(21699),d(94490),function(h,g){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(h[d]=g[d])})(h,g)});function r(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function i(){this.constructor=h}w(h,g),h.prototype=null===g?Object.create(g):(i.prototype=g.prototype,new i)}function e(h){var g="";Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var f=h[d];if(f.type===M.CLOSE_PATH)g+="z";else if(f.type===M.HORIZ_LINE_TO)g+=(f.relative?"h":"H")+f.x;else if(f.type===M.VERT_LINE_TO)g+=(f.relative?"v":"V")+f.y;else if(f.type===M.MOVE_TO)g+=(f.relative?"m":"M")+f.x+" "+f.y;else if(f.type===M.LINE_TO)g+=(f.relative?"l":"L")+f.x+" "+f.y;else if(f.type===M.CURVE_TO)g+=(f.relative?"c":"C")+f.x1+" "+f.y1+" "+f.x2+" "+f.y2+" "+f.x+" "+f.y;else if(f.type===M.SMOOTH_CURVE_TO)g+=(f.relative?"s":"S")+f.x2+" "+f.y2+" "+f.x+" "+f.y;else if(f.type===M.QUAD_TO)g+=(f.relative?"q":"Q")+f.x1+" "+f.y1+" "+f.x+" "+f.y;else if(f.type===M.SMOOTH_QUAD_TO)g+=(f.relative?"t":"T")+f.x+" "+f.y;else{if(f.type!==M.ARC)throw new Error('Unexpected command type "'+f.type+'" at index '+d+".");g+=(f.relative?"a":"A")+f.rX+" "+f.rY+" "+f.xRot+" "+ +f.lArcFlag+" "+ +f.sweepFlag+" "+f.x+" "+f.y}}return g}function i(h,g){var d=h[0],f=h[1];return[d*Math.cos(g)-f*Math.sin(g),d*Math.sin(g)+f*Math.cos(g)]}function a(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];for(var d=0;d<h.length;d++)if("number"!=typeof h[d])throw new Error("assertNumbers arguments["+d+"] is not a number. "+typeof h[d]+" == typeof "+h[d]);return!0}var A=Math.PI;function o(h,g,d){h.lArcFlag=0===h.lArcFlag?0:1,h.sweepFlag=0===h.sweepFlag?0:1;var f=h.rX,x=h.rY,b=h.x,S=h.y;f=Math.abs(h.rX),x=Math.abs(h.rY);var w=i([(g-b)/2,(d-S)/2],-h.xRot/180*A),C=w[0],P=w[1],E=Math.pow(C,2)/Math.pow(f,2)+Math.pow(P,2)/Math.pow(x,2);1<E&&(f*=Math.sqrt(E),x*=Math.sqrt(E)),h.rX=f,h.rY=x;var N=Math.pow(f,2)*Math.pow(P,2)+Math.pow(x,2)*Math.pow(C,2),_=(h.lArcFlag!==h.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(f,2)*Math.pow(x,2)-N)/N)),M=f*P/x*_,R=-x*C/f*_,V=i([M,R],h.xRot/180*A);h.cX=V[0]+(g+b)/2,h.cY=V[1]+(d+S)/2,h.phi1=Math.atan2((P-R)/x,(C-M)/f),h.phi2=Math.atan2((-P-R)/x,(-C-M)/f),0===h.sweepFlag&&h.phi2>h.phi1&&(h.phi2-=2*A),1===h.sweepFlag&&h.phi2<h.phi1&&(h.phi2+=2*A),h.phi1*=180/A,h.phi2*=180/A}function s(h,g,d){a(h,g,d);var f=h*h+g*g-d*d;if(0>f)return[];if(0===f)return[[h*d/(h*h+g*g),g*d/(h*h+g*g)]];var x=Math.sqrt(f);return[[(h*d+g*x)/(h*h+g*g),(g*d-h*x)/(h*h+g*g)],[(h*d-g*x)/(h*h+g*g),(g*d+h*x)/(h*h+g*g)]]}var C,P=Math.PI/180;function c(h,g,d){return(1-d)*h+d*g}function y(h,g,d,f){return h+Math.cos(f/180*A)*g+Math.sin(f/180*A)*d}function p(h,g,d,f){var x=1e-6,b=g-h,S=d-g,w=3*b+3*(f-d)-6*S,A=6*(S-b),C=3*b;return Math.abs(w)<x?[-C/A]:function(h,g,d){void 0===d&&(d=1e-6);var f=h*h/4-g;if(f<-d)return[];if(f<=d)return[-h/2];var x=Math.sqrt(f);return[-h/2-x,-h/2+x]}(A/w,C/w,x)}function m(h,g,d,f,x){var b=1-x;return h*(b*b*b)+g*(3*b*b*x)+d*(3*b*x*x)+f*(x*x*x)}!function(h){function r(){return u((function(h,g,d){return h.relative&&(void 0!==h.x1&&(h.x1+=g),void 0!==h.y1&&(h.y1+=d),void 0!==h.x2&&(h.x2+=g),void 0!==h.y2&&(h.y2+=d),void 0!==h.x&&(h.x+=g),void 0!==h.y&&(h.y+=d),h.relative=!1),h}))}function e(){var h=NaN,g=NaN,d=NaN,f=NaN;return u((function(x,b,S){return x.type&M.SMOOTH_CURVE_TO&&(x.type=M.CURVE_TO,h=isNaN(h)?b:h,g=isNaN(g)?S:g,x.x1=x.relative?b-h:2*b-h,x.y1=x.relative?S-g:2*S-g),x.type&M.CURVE_TO?(h=x.relative?b+x.x2:x.x2,g=x.relative?S+x.y2:x.y2):(h=NaN,g=NaN),x.type&M.SMOOTH_QUAD_TO&&(x.type=M.QUAD_TO,d=isNaN(d)?b:d,f=isNaN(f)?S:f,x.x1=x.relative?b-d:2*b-d,x.y1=x.relative?S-f:2*S-f),x.type&M.QUAD_TO?(d=x.relative?b+x.x1:x.x1,f=x.relative?S+x.y1:x.y1):(d=NaN,f=NaN),x}))}function n(){var h=NaN,g=NaN;return u((function(d,f,x){if(d.type&M.SMOOTH_QUAD_TO&&(d.type=M.QUAD_TO,h=isNaN(h)?f:h,g=isNaN(g)?x:g,d.x1=d.relative?f-h:2*f-h,d.y1=d.relative?x-g:2*x-g),d.type&M.QUAD_TO){h=d.relative?f+d.x1:d.x1,g=d.relative?x+d.y1:d.y1;var b=d.x1,S=d.y1;d.type=M.CURVE_TO,d.x1=((d.relative?0:f)+2*b)/3,d.y1=((d.relative?0:x)+2*S)/3,d.x2=(d.x+2*b)/3,d.y2=(d.y+2*S)/3}else h=NaN,g=NaN;return d}))}function u(h){var g=0,d=0,f=NaN,x=NaN;return function(b){if(isNaN(f)&&!(b.type&M.MOVE_TO))throw new Error("path must start with moveto");var S=h(b,g,d,f,x);return b.type&M.CLOSE_PATH&&(g=f,d=x),void 0!==b.x&&(g=b.relative?g+b.x:b.x),void 0!==b.y&&(d=b.relative?d+b.y:b.y),b.type&M.MOVE_TO&&(f=g,x=d),S}}function O(h,g,d,f,x,b){return a(h,g,d,f,x,b),u((function(S,w,A,C){var P=S.x1,E=S.x2,N=S.relative&&!isNaN(C),_=void 0!==S.x?S.x:N?0:w,R=void 0!==S.y?S.y:N?0:A;function l(h){return h*h}S.type&M.HORIZ_LINE_TO&&0!==g&&(S.type=M.LINE_TO,S.y=S.relative?0:A),S.type&M.VERT_LINE_TO&&0!==d&&(S.type=M.LINE_TO,S.x=S.relative?0:w),void 0!==S.x&&(S.x=S.x*h+R*d+(N?0:x)),void 0!==S.y&&(S.y=_*g+S.y*f+(N?0:b)),void 0!==S.x1&&(S.x1=S.x1*h+S.y1*d+(N?0:x)),void 0!==S.y1&&(S.y1=P*g+S.y1*f+(N?0:b)),void 0!==S.x2&&(S.x2=S.x2*h+S.y2*d+(N?0:x)),void 0!==S.y2&&(S.y2=E*g+S.y2*f+(N?0:b));var V=h*f-g*d;if(void 0!==S.xRot&&(1!==h||0!==g||0!==d||1!==f))if(0===V)delete S.rX,delete S.rY,delete S.xRot,delete S.lArcFlag,delete S.sweepFlag,S.type=M.LINE_TO;else{var k=S.xRot*Math.PI/180,D=Math.sin(k),L=Math.cos(k),B=1/l(S.rX),z=1/l(S.rY),U=l(L)*B+l(D)*z,j=2*D*L*(B-z),X=l(D)*B+l(L)*z,Y=U*f*f-j*g*f+X*g*g,Q=j*(h*f+g*d)-2*(U*d*f+X*h*g),W=U*d*d-j*h*d+X*h*h,q=(Math.atan2(Q,Y-W)+Math.PI)%Math.PI/2,G=Math.sin(q),$=Math.cos(q);S.rX=Math.abs(V)/Math.sqrt(Y*l($)+Q*G*$+W*l(G)),S.rY=Math.abs(V)/Math.sqrt(Y*l(G)-Q*G*$+W*l($)),S.xRot=180*q/Math.PI}return void 0!==S.sweepFlag&&0>V&&(S.sweepFlag=+!S.sweepFlag),S}))}h.ROUND=function(h){function r(g){return Math.round(g*h)/h}return void 0===h&&(h=1e13),a(h),function(h){return void 0!==h.x1&&(h.x1=r(h.x1)),void 0!==h.y1&&(h.y1=r(h.y1)),void 0!==h.x2&&(h.x2=r(h.x2)),void 0!==h.y2&&(h.y2=r(h.y2)),void 0!==h.x&&(h.x=r(h.x)),void 0!==h.y&&(h.y=r(h.y)),void 0!==h.rX&&(h.rX=r(h.rX)),void 0!==h.rY&&(h.rY=r(h.rY)),h}},h.TO_ABS=r,h.TO_REL=function(){return u((function(h,g,d){return h.relative||(void 0!==h.x1&&(h.x1-=g),void 0!==h.y1&&(h.y1-=d),void 0!==h.x2&&(h.x2-=g),void 0!==h.y2&&(h.y2-=d),void 0!==h.x&&(h.x-=g),void 0!==h.y&&(h.y-=d),h.relative=!0),h}))},h.NORMALIZE_HVZ=function(h,g,d){return void 0===h&&(h=!0),void 0===g&&(g=!0),void 0===d&&(d=!0),u((function(f,x,b,S,w){if(isNaN(S)&&!(f.type&M.MOVE_TO))throw new Error("path must start with moveto");return g&&f.type&M.HORIZ_LINE_TO&&(f.type=M.LINE_TO,f.y=f.relative?0:b),d&&f.type&M.VERT_LINE_TO&&(f.type=M.LINE_TO,f.x=f.relative?0:x),h&&f.type&M.CLOSE_PATH&&(f.type=M.LINE_TO,f.x=f.relative?S-x:S,f.y=f.relative?w-b:w),f.type&M.ARC&&(0===f.rX||0===f.rY)&&(f.type=M.LINE_TO,delete f.rX,delete f.rY,delete f.xRot,delete f.lArcFlag,delete f.sweepFlag),f}))},h.NORMALIZE_ST=e,h.QT_TO_C=n,h.INFO=u,h.SANITIZE=function(h){void 0===h&&(h=0),a(h);var g=NaN,d=NaN,f=NaN,x=NaN;return u((function(b,S,w,A,C){var P=Math.abs,E=!1,N=0,_=0;if(b.type&M.SMOOTH_CURVE_TO&&(N=isNaN(g)?0:S-g,_=isNaN(d)?0:w-d),b.type&(M.CURVE_TO|M.SMOOTH_CURVE_TO)?(g=b.relative?S+b.x2:b.x2,d=b.relative?w+b.y2:b.y2):(g=NaN,d=NaN),b.type&M.SMOOTH_QUAD_TO?(f=isNaN(f)?S:2*S-f,x=isNaN(x)?w:2*w-x):b.type&M.QUAD_TO?(f=b.relative?S+b.x1:b.x1,x=b.relative?w+b.y1:b.y2):(f=NaN,x=NaN),b.type&M.LINE_COMMANDS||b.type&M.ARC&&(0===b.rX||0===b.rY||!b.lArcFlag)||b.type&M.CURVE_TO||b.type&M.SMOOTH_CURVE_TO||b.type&M.QUAD_TO||b.type&M.SMOOTH_QUAD_TO){var R=void 0===b.x?0:b.relative?b.x:b.x-S,V=void 0===b.y?0:b.relative?b.y:b.y-w;N=isNaN(f)?void 0===b.x1?N:b.relative?b.x:b.x1-S:f-S,_=isNaN(x)?void 0===b.y1?_:b.relative?b.y:b.y1-w:x-w;var k=void 0===b.x2?0:b.relative?b.x:b.x2-S,D=void 0===b.y2?0:b.relative?b.y:b.y2-w;P(R)<=h&&P(V)<=h&&P(N)<=h&&P(_)<=h&&P(k)<=h&&P(D)<=h&&(E=!0)}return b.type&M.CLOSE_PATH&&P(S-A)<=h&&P(w-C)<=h&&(E=!0),E?[]:b}))},h.MATRIX=O,h.ROTATE=function(h,g,d){void 0===g&&(g=0),void 0===d&&(d=0),a(h,g,d);var f=Math.sin(h),x=Math.cos(h);return O(x,f,-f,x,g-g*x+d*f,d-g*f-d*x)},h.TRANSLATE=function(h,g){return void 0===g&&(g=0),a(h,g),O(1,0,0,1,h,g)},h.SCALE=function(h,g){return void 0===g&&(g=h),a(h,g),O(h,0,0,g,0,0)},h.SKEW_X=function(h){return a(h),O(1,0,Math.atan(h),1,0,0)},h.SKEW_Y=function(h){return a(h),O(1,Math.atan(h),0,1,0,0)},h.X_AXIS_SYMMETRY=function(h){return void 0===h&&(h=0),a(h),O(-1,0,0,1,h,0)},h.Y_AXIS_SYMMETRY=function(h){return void 0===h&&(h=0),a(h),O(1,0,0,-1,0,h)},h.A_TO_C=function(){return u((function(h,g,d){return M.ARC===h.type?function(h,g,d){var f,x,b,S;h.cX||o(h,g,d);for(var w=Math.min(h.phi1,h.phi2),A=Math.max(h.phi1,h.phi2)-w,C=Math.ceil(A/90),E=new Array(C),N=g,_=d,R=0;R<C;R++){var V=c(h.phi1,h.phi2,R/C),k=c(h.phi1,h.phi2,(R+1)/C),D=k-V,L=4/3*Math.tan(D*P/4),B=[Math.cos(V*P)-L*Math.sin(V*P),Math.sin(V*P)+L*Math.cos(V*P)],z=B[0],U=B[1],j=[Math.cos(k*P),Math.sin(k*P)],X=j[0],Y=j[1],Q=[X+L*Math.sin(k*P),Y-L*Math.cos(k*P)],W=Q[0],q=Q[1];E[R]={relative:h.relative,type:M.CURVE_TO};var H=function(g,d){var f=i([g*h.rX,d*h.rY],h.xRot),x=f[0],b=f[1];return[h.cX+x,h.cY+b]};f=H(z,U),E[R].x1=f[0],E[R].y1=f[1],x=H(W,q),E[R].x2=x[0],E[R].y2=x[1],b=H(X,Y),E[R].x=b[0],E[R].y=b[1],h.relative&&(E[R].x1-=N,E[R].y1-=_,E[R].x2-=N,E[R].y2-=_,E[R].x-=N,E[R].y-=_),N=(S=[E[R].x,E[R].y])[0],_=S[1]}return E}(h,h.relative?0:g,h.relative?0:d):h}))},h.ANNOTATE_ARCS=function(){return u((function(h,g,d){return h.relative&&(g=0,d=0),M.ARC===h.type&&o(h,g,d),h}))},h.CLONE=function l(){return function(h){var g={};for(var d in h)g[d]=h[d];return g}},h.CALCULATE_BOUNDS=function(){var t=function(h){var g={};for(var d in h)g[d]=h[d];return g},h=r(),g=n(),d=e(),f=u((function(x,b,S){var w=d(g(h(t(x))));function O(h){h>f.maxX&&(f.maxX=h),h<f.minX&&(f.minX=h)}function l(h){h>f.maxY&&(f.maxY=h),h<f.minY&&(f.minY=h)}if(w.type&M.DRAWING_COMMANDS&&(O(b),l(S)),w.type&M.HORIZ_LINE_TO&&O(w.x),w.type&M.VERT_LINE_TO&&l(w.y),w.type&M.LINE_TO&&(O(w.x),l(w.y)),w.type&M.CURVE_TO){O(w.x),l(w.y);for(var A=0,C=p(b,w.x1,w.x2,w.x);A<C.length;A++)0<(Y=C[A])&&1>Y&&O(m(b,w.x1,w.x2,w.x,Y));for(var P=0,E=p(S,w.y1,w.y2,w.y);P<E.length;P++)0<(Y=E[P])&&1>Y&&l(m(S,w.y1,w.y2,w.y,Y))}if(w.type&M.ARC){O(w.x),l(w.y),o(w,b,S);for(var N=w.xRot/180*Math.PI,_=Math.cos(N)*w.rX,R=Math.sin(N)*w.rX,V=-Math.sin(N)*w.rY,k=Math.cos(N)*w.rY,D=w.phi1<w.phi2?[w.phi1,w.phi2]:-180>w.phi2?[w.phi2+360,w.phi1+360]:[w.phi2,w.phi1],L=D[0],B=D[1],I=function(h){var g=h[0],d=h[1],f=180*Math.atan2(d,g)/Math.PI;return f<L?f+360:f},z=0,U=s(V,-_,0).map(I);z<U.length;z++)(Y=U[z])>L&&Y<B&&O(y(w.cX,_,V,Y));for(var j=0,X=s(k,-R,0).map(I);j<X.length;j++){var Y;(Y=X[j])>L&&Y<B&&l(y(w.cY,R,k,Y))}}return x}));return f.minX=1/0,f.maxX=-1/0,f.minY=1/0,f.maxY=-1/0,f}}(C||(C={}));var E,N=function(){function t(){}return t.prototype.round=function(h){return this.transform(C.ROUND(h))},t.prototype.toAbs=function(){return this.transform(C.TO_ABS())},t.prototype.toRel=function(){return this.transform(C.TO_REL())},t.prototype.normalizeHVZ=function(h,g,d){return this.transform(C.NORMALIZE_HVZ(h,g,d))},t.prototype.normalizeST=function(){return this.transform(C.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(C.QT_TO_C())},t.prototype.aToC=function(){return this.transform(C.A_TO_C())},t.prototype.sanitize=function(h){return this.transform(C.SANITIZE(h))},t.prototype.translate=function(h,g){return this.transform(C.TRANSLATE(h,g))},t.prototype.scale=function(h,g){return this.transform(C.SCALE(h,g))},t.prototype.rotate=function(h,g,d){return this.transform(C.ROTATE(h,g,d))},t.prototype.matrix=function(h,g,d,f,x,b){return this.transform(C.MATRIX(h,g,d,f,x,b))},t.prototype.skewX=function(h){return this.transform(C.SKEW_X(h))},t.prototype.skewY=function(h){return this.transform(C.SKEW_Y(h))},t.prototype.xSymmetry=function(h){return this.transform(C.X_AXIS_SYMMETRY(h))},t.prototype.ySymmetry=function(h){return this.transform(C.Y_AXIS_SYMMETRY(h))},t.prototype.annotateArcs=function(){return this.transform(C.ANNOTATE_ARCS())},t}(),T=function(h){return" "===h||"\t"===h||"\r"===h||"\n"===h},v=function(h){return"0".charCodeAt(0)<=h.charCodeAt(0)&&h.charCodeAt(0)<="9".charCodeAt(0)},_=function(h){function e(){var g=h.call(this)||this;return g.curNumber="",g.curCommandType=-1,g.curCommandRelative=!1,g.canParseCommandOrComma=!0,g.curNumberHasExp=!1,g.curNumberHasExpDigits=!1,g.curNumberHasDecimal=!1,g.curArgs=[],g}return r(e,h),e.prototype.finish=function(h){if(void 0===h&&(h=[]),this.parse(" ",h),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return h},e.prototype.parse=function(h,g){var d=this;void 0===g&&(g=[]);for(var i=function(h){g.push(h),d.curArgs.length=0,d.canParseCommandOrComma=!0},f=0;f<h.length;f++){var x=h[f],b=!(this.curCommandType!==M.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),S=v(x)&&("0"===this.curNumber&&"0"===x||b);if(!v(x)||S)if("e"!==x&&"E"!==x)if("-"!==x&&"+"!==x||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==x||this.curNumberHasExp||this.curNumberHasDecimal||b){if(this.curNumber&&-1!==this.curCommandType){var w=Number(this.curNumber);if(isNaN(w))throw new SyntaxError("Invalid number ending at "+f);if(this.curCommandType===M.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>w)throw new SyntaxError('Expected positive number, got "'+w+'" at index "'+f+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+f+'"');this.curArgs.push(w),this.curArgs.length===R[this.curCommandType]&&(M.HORIZ_LINE_TO===this.curCommandType?i({type:M.HORIZ_LINE_TO,relative:this.curCommandRelative,x:w}):M.VERT_LINE_TO===this.curCommandType?i({type:M.VERT_LINE_TO,relative:this.curCommandRelative,y:w}):this.curCommandType===M.MOVE_TO||this.curCommandType===M.LINE_TO||this.curCommandType===M.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),M.MOVE_TO===this.curCommandType&&(this.curCommandType=M.LINE_TO)):this.curCommandType===M.CURVE_TO?i({type:M.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===M.SMOOTH_CURVE_TO?i({type:M.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===M.QUAD_TO?i({type:M.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===M.ARC&&i({type:M.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!T(x))if(","===x&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==x&&"-"!==x&&"."!==x)if(S)this.curNumber=x,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+f+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+x+'" at index '+f+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==x&&"Z"!==x)if("h"===x||"H"===x)this.curCommandType=M.HORIZ_LINE_TO,this.curCommandRelative="h"===x;else if("v"===x||"V"===x)this.curCommandType=M.VERT_LINE_TO,this.curCommandRelative="v"===x;else if("m"===x||"M"===x)this.curCommandType=M.MOVE_TO,this.curCommandRelative="m"===x;else if("l"===x||"L"===x)this.curCommandType=M.LINE_TO,this.curCommandRelative="l"===x;else if("c"===x||"C"===x)this.curCommandType=M.CURVE_TO,this.curCommandRelative="c"===x;else if("s"===x||"S"===x)this.curCommandType=M.SMOOTH_CURVE_TO,this.curCommandRelative="s"===x;else if("q"===x||"Q"===x)this.curCommandType=M.QUAD_TO,this.curCommandRelative="q"===x;else if("t"===x||"T"===x)this.curCommandType=M.SMOOTH_QUAD_TO,this.curCommandRelative="t"===x;else{if("a"!==x&&"A"!==x)throw new SyntaxError('Unexpected character "'+x+'" at index '+f+".");this.curCommandType=M.ARC,this.curCommandRelative="a"===x}else g.push({type:M.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=x,this.curNumberHasDecimal="."===x}else this.curNumber+=x,this.curNumberHasDecimal=!0;else this.curNumber+=x;else this.curNumber+=x,this.curNumberHasExp=!0;else this.curNumber+=x,this.curNumberHasExpDigits=this.curNumberHasExp}return g},e.prototype.transform=function(h){return Object.create(this,{parse:{value:function(g,d){void 0===d&&(d=[]);for(var f=0,x=Object.getPrototypeOf(this).parse.call(this,g);f<x.length;f++){var b=x[f],S=h(b);Array.isArray(S)?d.push.apply(d,S):d.push(S)}return d}}})},e}(N),M=function(h){function i(g){var d=h.call(this)||this;return d.commands="string"==typeof g?i.parse(g):g,d}return r(i,h),i.prototype.encode=function(){return i.encode(this.commands)},i.prototype.getBounds=function(){var h=C.CALCULATE_BOUNDS();return this.transform(h),h},i.prototype.transform=function(h){for(var g=[],d=0,f=this.commands;d<f.length;d++){var x=h(f[d]);Array.isArray(x)?g.push.apply(g,x):g.push(x)}return this.commands=g,this},i.encode=function(h){return e(h)},i.parse=function(h){var g=new _,d=[];return g.parse(h,d),g.finish(d),d},i.CLOSE_PATH=1,i.MOVE_TO=2,i.HORIZ_LINE_TO=4,i.VERT_LINE_TO=8,i.LINE_TO=16,i.CURVE_TO=32,i.SMOOTH_CURVE_TO=64,i.QUAD_TO=128,i.SMOOTH_QUAD_TO=256,i.ARC=512,i.LINE_COMMANDS=i.LINE_TO|i.HORIZ_LINE_TO|i.VERT_LINE_TO,i.DRAWING_COMMANDS=i.HORIZ_LINE_TO|i.VERT_LINE_TO|i.LINE_TO|i.CURVE_TO|i.SMOOTH_CURVE_TO|i.QUAD_TO|i.SMOOTH_QUAD_TO|i.ARC,i}(N),R=((E={})[M.MOVE_TO]=2,E[M.LINE_TO]=2,E[M.HORIZ_LINE_TO]=1,E[M.VERT_LINE_TO]=1,E[M.CLOSE_PATH]=0,E[M.QUAD_TO]=4,E[M.SMOOTH_QUAD_TO]=2,E[M.CURVE_TO]=6,E[M.SMOOTH_CURVE_TO]=4,E[M.ARC]=7,E);d(38781);function _typeof(h){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},_typeof(h)}function _classCallCheck(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}var V=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],k=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function getImageDataFromCanvas(h,g,d,f,x){if("string"==typeof h&&(h=document.getElementById(h)),!h||"object"!==_typeof(h)||!("getContext"in h))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var b=h.getContext("2d");try{return b.getImageData(g,d,f,x)}catch(h){throw new Error("unable to access image data: "+h)}}function processCanvasRGBA(h,g,d,f,x,b){if(!(isNaN(b)||b<1)){b|=0;var S=getImageDataFromCanvas(h,g,d,f,x);S=processImageDataRGBA(S,g,d,f,x,b),h.getContext("2d").putImageData(S,g,d)}}function processImageDataRGBA(h,g,d,f,x,b){for(var S,w=h.data,A=2*b+1,C=f-1,P=x-1,E=b+1,N=E*(E+1)/2,_=new D,M=_,R=1;R<A;R++)M=M.next=new D,R===E&&(S=M);M.next=_;for(var L=null,B=null,z=0,U=0,j=V[b],X=k[b],Y=0;Y<x;Y++){M=_;for(var Q=w[U],W=w[U+1],q=w[U+2],G=w[U+3],$=0;$<E;$++)M.r=Q,M.g=W,M.b=q,M.a=G,M=M.next;for(var Z=0,K=0,J=0,tt=0,et=E*Q,rt=E*W,it=E*q,nt=E*G,st=N*Q,at=N*W,ot=N*q,ht=N*G,lt=1;lt<E;lt++){var ut=U+((C<lt?C:lt)<<2),ct=w[ut],gt=w[ut+1],dt=w[ut+2],pt=w[ut+3],ft=E-lt;st+=(M.r=ct)*ft,at+=(M.g=gt)*ft,ot+=(M.b=dt)*ft,ht+=(M.a=pt)*ft,Z+=ct,K+=gt,J+=dt,tt+=pt,M=M.next}L=_,B=S;for(var mt=0;mt<f;mt++){var yt=ht*j>>>X;if(w[U+3]=yt,0!==yt){var vt=255/yt;w[U]=(st*j>>>X)*vt,w[U+1]=(at*j>>>X)*vt,w[U+2]=(ot*j>>>X)*vt}else w[U]=w[U+1]=w[U+2]=0;st-=et,at-=rt,ot-=it,ht-=nt,et-=L.r,rt-=L.g,it-=L.b,nt-=L.a;var xt=mt+b+1;xt=z+(xt<C?xt:C)<<2,st+=Z+=L.r=w[xt],at+=K+=L.g=w[xt+1],ot+=J+=L.b=w[xt+2],ht+=tt+=L.a=w[xt+3],L=L.next;var bt=B,St=bt.r,wt=bt.g,Tt=bt.b,At=bt.a;et+=St,rt+=wt,it+=Tt,nt+=At,Z-=St,K-=wt,J-=Tt,tt-=At,B=B.next,U+=4}z+=f}for(var Ct=0;Ct<f;Ct++){var Ot=w[U=Ct<<2],Pt=w[U+1],Et=w[U+2],Nt=w[U+3],_t=E*Ot,Mt=E*Pt,Rt=E*Et,Vt=E*Nt,kt=N*Ot,It=N*Pt,Dt=N*Et,Lt=N*Nt;M=_;for(var Bt=0;Bt<E;Bt++)M.r=Ot,M.g=Pt,M.b=Et,M.a=Nt,M=M.next;for(var Ft=f,zt=0,Ut=0,Ht=0,jt=0,Xt=1;Xt<=b;Xt++){U=Ft+Ct<<2;var Yt=E-Xt;kt+=(M.r=Ot=w[U])*Yt,It+=(M.g=Pt=w[U+1])*Yt,Dt+=(M.b=Et=w[U+2])*Yt,Lt+=(M.a=Nt=w[U+3])*Yt,jt+=Ot,zt+=Pt,Ut+=Et,Ht+=Nt,M=M.next,Xt<P&&(Ft+=f)}U=Ct,L=_,B=S;for(var Qt=0;Qt<x;Qt++){var Wt=U<<2;w[Wt+3]=Nt=Lt*j>>>X,Nt>0?(Nt=255/Nt,w[Wt]=(kt*j>>>X)*Nt,w[Wt+1]=(It*j>>>X)*Nt,w[Wt+2]=(Dt*j>>>X)*Nt):w[Wt]=w[Wt+1]=w[Wt+2]=0,kt-=_t,It-=Mt,Dt-=Rt,Lt-=Vt,_t-=L.r,Mt-=L.g,Rt-=L.b,Vt-=L.a,Wt=Ct+((Wt=Qt+E)<P?Wt:P)*f<<2,kt+=jt+=L.r=w[Wt],It+=zt+=L.g=w[Wt+1],Dt+=Ut+=L.b=w[Wt+2],Lt+=Ht+=L.a=w[Wt+3],L=L.next,_t+=Ot=B.r,Mt+=Pt=B.g,Rt+=Et=B.b,Vt+=Nt=B.a,jt-=Ot,zt-=Pt,Ut-=Et,Ht-=Nt,B=B.next,U+=f}}return h}var D=function BlurStack(){_classCallCheck(this,BlurStack),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};var L=Object.freeze({__proto__:null,offscreen:function offscreen(){var{DOMParser:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:h,createCanvas(h,g){return new OffscreenCanvas(h,g)},createImage(h){return(0,f.A)((function*(){var g=yield fetch(h),d=yield g.blob();return yield createImageBitmap(d)}))()}};return"undefined"==typeof DOMParser&&void 0!==h||Reflect.deleteProperty(g,"DOMParser"),g},node:function node(h){var{DOMParser:g,canvas:d,fetch:f}=h;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:g,fetch:f,createCanvas:d.createCanvas,createImage:d.loadImage}}});function compressSpaces(h){return h.replace(/(?!\u3000)\s+/gm," ")}function trimLeft(h){return h.replace(/^[\n \t]+/,"")}function trimRight(h){return h.replace(/[\n \t]+$/,"")}function toNumbers(h){return((h||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}var B=/^[A-Z-]+$/;function normalizeAttributeName(h){return B.test(h)?h.toLowerCase():h}function parseExternalUrl(h){var g=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(h)||[];return g[2]||g[3]||g[4]}function normalizeColor(h){if(!h.startsWith("rgb"))return h;var g=3;return h.replace(/\d+(\.\d+)?/g,((h,d)=>g--&&d?String(Math.round(parseFloat(h))):h))}var z=/(\[[^\]]+\])/g,U=/(#[^\s+>~.[:]+)/g,j=/(\.[^\s+>~.[:]+)/g,X=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Y=/(:[\w-]+\([^)]*\))/gi,Q=/(:[^\s+>~.[:]+)/g,W=/([^\s+>~.[:]+)/g;function findSelectorMatch(h,g){var d=g.exec(h);return d?[h.replace(g," "),d.length]:[h,0]}function getSelectorSpecificity(h){var g=[0,0,0],d=h.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),f=0;return[d,f]=findSelectorMatch(d,z),g[1]+=f,[d,f]=findSelectorMatch(d,U),g[0]+=f,[d,f]=findSelectorMatch(d,j),g[1]+=f,[d,f]=findSelectorMatch(d,X),g[2]+=f,[d,f]=findSelectorMatch(d,Y),g[1]+=f,[d,f]=findSelectorMatch(d,Q),g[1]+=f,d=d.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[d,f]=findSelectorMatch(d,W),g[2]+=f,g.join("")}var q=1e-8;function vectorMagnitude(h){return Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2))}function vectorsRatio(h,g){return(h[0]*g[0]+h[1]*g[1])/(vectorMagnitude(h)*vectorMagnitude(g))}function vectorsAngle(h,g){return(h[0]*g[1]<h[1]*g[0]?-1:1)*Math.acos(vectorsRatio(h,g))}function CB1(h){return h*h*h}function CB2(h){return 3*h*h*(1-h)}function CB3(h){return 3*h*(1-h)*(1-h)}function CB4(h){return(1-h)*(1-h)*(1-h)}function QB1(h){return h*h}function QB2(h){return 2*h*(1-h)}function QB3(h){return(1-h)*(1-h)}class G{constructor(h,g,d){this.document=h,this.name=g,this.value=d,this.isNormalizedColor=!1}static empty(h){return new G(h,"EMPTY","")}split(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",{document:g,name:d}=this;return compressSpaces(this.getString()).trim().split(h).map((h=>new G(g,d,h)))}hasValue(h){var{value:g}=this;return null!==g&&""!==g&&(h||0!==g)&&void 0!==g}isString(h){var{value:g}=this,d="string"==typeof g;return d&&h?h.test(g):d}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var h=this.getString();switch(!0){case h.endsWith("px"):case/^[0-9]+$/.test(h):return!0;default:return!1}}setValue(h){return this.value=h,this}getValue(h){return void 0===h||this.hasValue()?this.value:h}getNumber(h){if(!this.hasValue())return void 0===h?0:parseFloat(h);var{value:g}=this,d=parseFloat(g);return this.isString(/%$/)&&(d/=100),d}getString(h){return void 0===h||this.hasValue()?void 0===this.value?"":String(this.value):String(h)}getColor(h){var g=this.getString(h);return this.isNormalizedColor||(this.isNormalizedColor=!0,g=normalizeColor(g),this.value=g),g}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(h){var g=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var[d,f]="boolean"==typeof h?[void 0,h]:[h],{viewPort:x}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(x.computeSize("x"),x.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(x.computeSize("x"),x.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*x.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*x.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&f:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*x.computeSize(d);default:var b=this.getNumber();return g&&b<1?b*x.computeSize(d):b}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var h=this.getString(),g=/#([^)'"]+)/.exec(h);return g&&(g=g[1]),g||(g=h),this.document.definitions[g]}getFillStyleDefinition(h,g){var d=this.getDefinition();if(!d)return null;if("function"==typeof d.createGradient)return d.createGradient(this.document.ctx,h,g);if("function"==typeof d.createPattern){if(d.getHrefAttribute().hasValue()){var f=d.getAttribute("patternTransform");d=d.getHrefAttribute().getDefinition(),f.hasValue()&&d.getAttribute("patternTransform",!0).setValue(f.value)}return d.createPattern(this.document.ctx,h,g)}return null}getTextBaseline(){return this.hasValue()?G.textBaselineMapping[this.getString()]:null}addOpacity(h){for(var g=this.getColor(),d=g.length,f=0,x=0;x<d&&(","===g[x]&&f++,3!==f);x++);if(h.hasValue()&&this.isString()&&3!==f){var b=new S(g);b.ok&&(b.alpha=h.getNumber(),g=b.toRGBA())}return new G(this.document,this.name,g)}}G.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ${constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(h,g){this.viewPorts.push({width:h,height:g})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:h}=this;return h[h.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(h){return"number"==typeof h?h:"x"===h?this.width:"y"===h?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class Z{constructor(h,g){this.x=h,this.y=g}static parse(h){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[d=g,f=g]=toNumbers(h);return new Z(d,f)}static parseScale(h){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[d=g,f=d]=toNumbers(h);return new Z(d,f)}static parsePath(h){for(var g=toNumbers(h),d=g.length,f=[],x=0;x<d;x+=2)f.push(new Z(g[x],g[x+1]));return f}angleTo(h){return Math.atan2(h.y-this.y,h.x-this.x)}applyTransform(h){var{x:g,y:d}=this,f=g*h[0]+d*h[2]+h[4],x=g*h[1]+d*h[3]+h[5];this.x=f,this.y=x}}class K{constructor(h){this.screen=h,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:h,onClick:g,onMouseMove:d}=this,f=h.ctx.canvas;f.onclick=g,f.onmousemove=d,this.working=!0}}stop(){if(this.working){var h=this.screen.ctx.canvas;this.working=!1,h.onclick=null,h.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:h,events:g,eventElements:d}=this,{style:f}=h.ctx.canvas;f&&(f.cursor=""),g.forEach(((h,g)=>{for(var{run:f}=h,x=d[g];x;)f(x),x=x.parent})),this.events=[],this.eventElements=[]}}checkPath(h,g){if(this.working&&g){var{events:d,eventElements:f}=this;d.forEach(((d,x)=>{var{x:b,y:S}=d;!f[x]&&g.isPointInPath&&g.isPointInPath(b,S)&&(f[x]=h)}))}}checkBoundingBox(h,g){if(this.working&&g){var{events:d,eventElements:f}=this;d.forEach(((d,x)=>{var{x:b,y:S}=d;!f[x]&&g.isPointInBox(b,S)&&(f[x]=h)}))}}mapXY(h,g){for(var{window:d,ctx:f}=this.screen,x=new Z(h,g),b=f.canvas;b;)x.x-=b.offsetLeft,x.y-=b.offsetTop,b=b.offsetParent;return d.scrollX&&(x.x+=d.scrollX),d.scrollY&&(x.y+=d.scrollY),x}onClick(h){var{x:g,y:d}=this.mapXY(h.clientX,h.clientY);this.events.push({type:"onclick",x:g,y:d,run(h){h.onClick&&h.onClick()}})}onMouseMove(h){var{x:g,y:d}=this.mapXY(h.clientX,h.clientY);this.events.push({type:"onmousemove",x:g,y:d,run(h){h.onMouseMove&&h.onMouseMove()}})}}var J="undefined"!=typeof window?window:null,tt="undefined"!=typeof fetch?fetch.bind(void 0):null;class et{constructor(h){var{fetch:g=tt,window:d=J}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ctx=h,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new $,this.mouse=new K(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=d,this.fetch=g}wait(h){this.waits.push(h)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var h=this.waits.every((h=>h()));return h&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=h,h}setDefaults(h){h.strokeStyle="rgba(0,0,0,0)",h.lineCap="butt",h.lineJoin="miter",h.miterLimit=4}setViewBox(h){var{document:g,ctx:d,aspectRatio:f,width:x,desiredWidth:b,height:S,desiredHeight:w,minX:A=0,minY:C=0,refX:P,refY:E,clip:N=!1,clipX:_=0,clipY:M=0}=h,R=compressSpaces(f).replace(/^defer\s/,""),[V,k]=R.split(" "),D=V||"xMidYMid",L=k||"meet",B=x/b,z=S/w,U=Math.min(B,z),j=Math.max(B,z),X=b,Y=w;"meet"===L&&(X*=U,Y*=U),"slice"===L&&(X*=j,Y*=j);var Q=new G(g,"refX",P),W=new G(g,"refY",E),q=Q.hasValue()&&W.hasValue();if(q&&d.translate(-U*Q.getPixels("x"),-U*W.getPixels("y")),N){var $=U*_,Z=U*M;d.beginPath(),d.moveTo($,Z),d.lineTo(x,Z),d.lineTo(x,S),d.lineTo($,S),d.closePath(),d.clip()}if(!q){var K="meet"===L&&U===z,J="slice"===L&&j===z,tt="meet"===L&&U===B,et="slice"===L&&j===B;D.startsWith("xMid")&&(K||J)&&d.translate(x/2-X/2,0),D.endsWith("YMid")&&(tt||et)&&d.translate(0,S/2-Y/2),D.startsWith("xMax")&&(K||J)&&d.translate(x-X,0),D.endsWith("YMax")&&(tt||et)&&d.translate(0,S-Y)}switch(!0){case"none"===D:d.scale(B,z);break;case"meet"===L:d.scale(U,U);break;case"slice"===L:d.scale(j,j)}d.translate(-A,-C)}start(h){var{enableRedraw:g=!1,ignoreMouse:d=!1,ignoreAnimation:f=!1,ignoreDimensions:x=!1,ignoreClear:S=!1,forceRedraw:w,scaleWidth:A,scaleHeight:C,offsetX:P,offsetY:E}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{FRAMERATE:N,mouse:_}=this,M=1e3/N;if(this.frameDuration=M,this.readyPromise=new Promise((h=>{this.resolveReady=h})),this.isReady()&&this.render(h,x,S,A,C,P,E),g){var R=Date.now(),V=R,k=0,tick=()=>{R=Date.now(),(k=R-V)>=M&&(V=R-k%M,this.shouldUpdate(f,w)&&(this.render(h,x,S,A,C,P,E),_.runEvents())),this.intervalId=b(tick)};d||_.start(),this.intervalId=b(tick)}}stop(){this.intervalId&&(b.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(h,g){if(!h){var{frameDuration:d}=this;if(this.animations.reduce(((h,g)=>g.update(d)||h),!1))return!0}return!("function"!=typeof g||!g())||(!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents())}render(h,g,d,f,x,b,S){var{CLIENT_WIDTH:w,CLIENT_HEIGHT:A,viewPort:C,ctx:P,isFirstRender:E}=this,N=P.canvas;C.clear(),N.width&&N.height?C.setCurrent(N.width,N.height):C.setCurrent(w,A);var _=h.getStyle("width"),M=h.getStyle("height");!g&&(E||"number"!=typeof f&&"number"!=typeof x)&&(_.hasValue()&&(N.width=_.getPixels("x"),N.style&&(N.style.width="".concat(N.width,"px"))),M.hasValue()&&(N.height=M.getPixels("y"),N.style&&(N.style.height="".concat(N.height,"px"))));var R=N.clientWidth||N.width,V=N.clientHeight||N.height;if(g&&_.hasValue()&&M.hasValue()&&(R=_.getPixels("x"),V=M.getPixels("y")),C.setCurrent(R,V),"number"==typeof b&&h.getAttribute("x",!0).setValue(b),"number"==typeof S&&h.getAttribute("y",!0).setValue(S),"number"==typeof f||"number"==typeof x){var k=toNumbers(h.getAttribute("viewBox").getString()),D=0,L=0;if("number"==typeof f){var B=h.getStyle("width");B.hasValue()?D=B.getPixels("x")/f:isNaN(k[2])||(D=k[2]/f)}if("number"==typeof x){var z=h.getStyle("height");z.hasValue()?L=z.getPixels("y")/x:isNaN(k[3])||(L=k[3]/x)}D||(D=L),L||(L=D),h.getAttribute("width",!0).setValue(f),h.getAttribute("height",!0).setValue(x);var U=h.getStyle("transform",!0,!0);U.setValue("".concat(U.getString()," scale(").concat(1/D,", ").concat(1/L,")"))}d||P.clearRect(0,0,R,V),h.render(P),E&&(this.isFirstRender=!1)}}et.defaultWindow=J,et.defaultFetch=tt;var{defaultFetch:rt}=et,it="undefined"!=typeof DOMParser?DOMParser:null;class nt{constructor(){var{fetch:h=rt,DOMParser:g=it}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fetch=h,this.DOMParser=g}parse(h){var g=this;return(0,f.A)((function*(){return h.startsWith("<")?g.parseFromString(h):g.load(h)}))()}parseFromString(h){var g=new this.DOMParser;try{return this.checkDocument(g.parseFromString(h,"image/svg+xml"))}catch(d){return this.checkDocument(g.parseFromString(h,"text/xml"))}}checkDocument(h){var g=h.getElementsByTagName("parsererror")[0];if(g)throw new Error(g.textContent);return h}load(h){var g=this;return(0,f.A)((function*(){var d=yield g.fetch(h),f=yield d.text();return g.parseFromString(f)}))()}}class st{constructor(h,g){this.type="translate",this.point=null,this.point=Z.parse(g)}apply(h){var{x:g,y:d}=this.point;h.translate(g||0,d||0)}unapply(h){var{x:g,y:d}=this.point;h.translate(-1*g||0,-1*d||0)}applyToPoint(h){var{x:g,y:d}=this.point;h.applyTransform([1,0,0,1,g||0,d||0])}}class at{constructor(h,g,d){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var f=toNumbers(g);this.angle=new G(h,"angle",f[0]),this.originX=d[0],this.originY=d[1],this.cx=f[1]||0,this.cy=f[2]||0}apply(h){var{cx:g,cy:d,originX:f,originY:x,angle:b}=this,S=g+f.getPixels("x"),w=d+x.getPixels("y");h.translate(S,w),h.rotate(b.getRadians()),h.translate(-S,-w)}unapply(h){var{cx:g,cy:d,originX:f,originY:x,angle:b}=this,S=g+f.getPixels("x"),w=d+x.getPixels("y");h.translate(S,w),h.rotate(-1*b.getRadians()),h.translate(-S,-w)}applyToPoint(h){var{cx:g,cy:d,angle:f}=this,x=f.getRadians();h.applyTransform([1,0,0,1,g||0,d||0]),h.applyTransform([Math.cos(x),Math.sin(x),-Math.sin(x),Math.cos(x),0,0]),h.applyTransform([1,0,0,1,-g||0,-d||0])}}class ot{constructor(h,g,d){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var f=Z.parseScale(g);0!==f.x&&0!==f.y||(f.x=q,f.y=q),this.scale=f,this.originX=d[0],this.originY=d[1]}apply(h){var{scale:{x:g,y:d},originX:f,originY:x}=this,b=f.getPixels("x"),S=x.getPixels("y");h.translate(b,S),h.scale(g,d||g),h.translate(-b,-S)}unapply(h){var{scale:{x:g,y:d},originX:f,originY:x}=this,b=f.getPixels("x"),S=x.getPixels("y");h.translate(b,S),h.scale(1/g,1/d||g),h.translate(-b,-S)}applyToPoint(h){var{x:g,y:d}=this.scale;h.applyTransform([g||0,0,0,d||0,0,0])}}class ht{constructor(h,g,d){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=toNumbers(g),this.originX=d[0],this.originY=d[1]}apply(h){var{originX:g,originY:d,matrix:f}=this,x=g.getPixels("x"),b=d.getPixels("y");h.translate(x,b),h.transform(f[0],f[1],f[2],f[3],f[4],f[5]),h.translate(-x,-b)}unapply(h){var{originX:g,originY:d,matrix:f}=this,x=f[0],b=f[2],S=f[4],w=f[1],A=f[3],C=f[5],P=1/(x*(1*A-0*C)-b*(1*w-0*C)+S*(0*w-0*A)),E=g.getPixels("x"),N=d.getPixels("y");h.translate(E,N),h.transform(P*(1*A-0*C),P*(0*C-1*w),P*(0*S-1*b),P*(1*x-0*S),P*(b*C-S*A),P*(S*w-x*C)),h.translate(-E,-N)}applyToPoint(h){h.applyTransform(this.matrix)}}class lt extends ht{constructor(h,g,d){super(h,g,d),this.type="skew",this.angle=null,this.angle=new G(h,"angle",g)}}class ut extends lt{constructor(h,g,d){super(h,g,d),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class ct extends lt{constructor(h,g,d){super(h,g,d),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function parseTransforms(h){return compressSpaces(h).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function parseTransform(h){var[g,d]=h.split("(");return[g.trim(),d.trim().replace(")","")]}class gt{constructor(h,g,d){this.document=h,this.transforms=[],parseTransforms(g).forEach((h=>{if("none"!==h){var[g,f]=parseTransform(h),x=gt.transformTypes[g];void 0!==x&&this.transforms.push(new x(this.document,f,d))}}))}static fromElement(h,g){var d=g.getStyle("transform",!1,!0),[f,x=f]=g.getStyle("transform-origin",!1,!0).split(),b=[f,x];return d.hasValue()?new gt(h,d.getString(),b):null}apply(h){for(var{transforms:g}=this,d=g.length,f=0;f<d;f++)g[f].apply(h)}unapply(h){for(var{transforms:g}=this,d=g.length-1;d>=0;d--)g[d].unapply(h)}applyToPoint(h){for(var{transforms:g}=this,d=g.length,f=0;f<d;f++)g[f].applyToPoint(h)}}gt.transformTypes={translate:st,rotate:at,scale:ot,matrix:ht,skewX:ut,skewY:ct};class dt{constructor(h,g){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.document=h,this.node=g,this.captureTextNodes=d,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],g&&1===g.nodeType){if(Array.from(g.attributes).forEach((g=>{var d=normalizeAttributeName(g.nodeName);this.attributes[d]=new G(h,d,g.value)})),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var f=this.getAttribute("style").getString().split(";").map((h=>h.trim()));f.forEach((g=>{if(g){var[d,f]=g.split(":").map((h=>h.trim()));this.styles[d]=new G(h,d,f)}}))}var{definitions:x}=h,b=this.getAttribute("id");b.hasValue()&&(x[b.getString()]||(x[b.getString()]=this)),Array.from(g.childNodes).forEach((g=>{if(1===g.nodeType)this.addChild(g);else if(d&&(3===g.nodeType||4===g.nodeType)){var f=h.createTextNode(g);f.getText().length>0&&this.addChild(f)}}))}}getAttribute(h){var g=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=this.attributes[h];if(!d&&g){var f=new G(this.document,h,"");return this.attributes[h]=f,f}return d||G.empty(this.document)}getHrefAttribute(){for(var h in this.attributes)if("href"===h||h.endsWith(":href"))return this.attributes[h];return G.empty(this.document)}getStyle(h){var g=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=this.styles[h];if(f)return f;var x=this.getAttribute(h);if(null!=x&&x.hasValue())return this.styles[h]=x,x;if(!d){var{parent:b}=this;if(b){var S=b.getStyle(h);if(null!=S&&S.hasValue())return S}}if(g){var w=new G(this.document,h,"");return this.styles[h]=w,w}return f||G.empty(this.document)}render(h){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(h.save(),this.getStyle("mask").hasValue()){var g=this.getStyle("mask").getDefinition();g&&(this.applyEffects(h),g.apply(h,this))}else if("none"!==this.getStyle("filter").getValue("none")){var d=this.getStyle("filter").getDefinition();d&&(this.applyEffects(h),d.apply(h,this))}else this.setContext(h),this.renderChildren(h),this.clearContext(h);h.restore()}}setContext(h){}applyEffects(h){var g=gt.fromElement(this.document,this);g&&g.apply(h);var d=this.getStyle("clip-path",!1,!0);if(d.hasValue()){var f=d.getDefinition();f&&f.apply(h)}}clearContext(h){}renderChildren(h){this.children.forEach((g=>{g.render(h)}))}addChild(h){var g=h instanceof dt?h:this.document.createElement(h);g.parent=this,dt.ignoreChildTypes.includes(g.type)||this.children.push(g)}matchesSelector(h){var g,{node:d}=this;if("function"==typeof d.matches)return d.matches(h);var f=null===(g=d.getAttribute)||void 0===g?void 0:g.call(d,"class");return!(!f||""===f)&&f.split(" ").some((g=>".".concat(g)===h))}addStylesFromStyleDefinition(){var{styles:h,stylesSpecificity:g}=this.document;for(var d in h)if(!d.startsWith("@")&&this.matchesSelector(d)){var f=h[d],x=g[d];if(f)for(var b in f){var S=this.stylesSpecificity[b];void 0===S&&(S="000"),x>=S&&(this.styles[b]=f[b],this.stylesSpecificity[b]=x)}}}removeStyles(h,g){return g.reduce(((g,d)=>{var f=h.getStyle(d);if(!f.hasValue())return g;var x=f.getString();return f.setValue(""),[...g,[d,x]]}),[])}restoreStyles(h,g){g.forEach((g=>{var[d,f]=g;h.getStyle(d,!0).setValue(f)}))}isFirstChild(){var h;return 0===(null===(h=this.parent)||void 0===h?void 0:h.children.indexOf(this))}}dt.ignoreChildTypes=["title"];class pt extends dt{constructor(h,g,d){super(h,g,d)}}function wrapFontFamily(h){var g=h.trim();return/^('|")/.test(g)?g:'"'.concat(g,'"')}function prepareFontStyle(h){if(!h)return"";var g=h.trim().toLowerCase();switch(g){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return g;default:return/^oblique\s+(-|)\d+deg$/.test(g)?g:""}}function prepareFontWeight(h){if(!h)return"";var g=h.trim().toLowerCase();switch(g){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return g;default:return/^[\d.]+$/.test(g)?g:""}}class ft{constructor(h,g,d,f,x,b){var S=b?"string"==typeof b?ft.parse(b):b:{};this.fontFamily=x||S.fontFamily,this.fontSize=f||S.fontSize,this.fontStyle=h||S.fontStyle,this.fontWeight=d||S.fontWeight,this.fontVariant=g||S.fontVariant}static parse(){var h=arguments.length>1?arguments[1]:void 0,g="",d="",f="",x="",b="",S=compressSpaces(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(" "),w={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return S.forEach((h=>{switch(!0){case!w.fontStyle&&ft.styles.includes(h):"inherit"!==h&&(g=h),w.fontStyle=!0;break;case!w.fontVariant&&ft.variants.includes(h):"inherit"!==h&&(d=h),w.fontStyle=!0,w.fontVariant=!0;break;case!w.fontWeight&&ft.weights.includes(h):"inherit"!==h&&(f=h),w.fontStyle=!0,w.fontVariant=!0,w.fontWeight=!0;break;case!w.fontSize:"inherit"!==h&&([x]=h.split("/")),w.fontStyle=!0,w.fontVariant=!0,w.fontWeight=!0,w.fontSize=!0;break;default:"inherit"!==h&&(b+=h)}})),new ft(g,d,f,x,b,h)}toString(){return[prepareFontStyle(this.fontStyle),this.fontVariant,prepareFontWeight(this.fontWeight),this.fontSize,(h=this.fontFamily,"undefined"==typeof process?h:h.trim().split(",").map(wrapFontFamily).join(","))].join(" ").trim();var h}}ft.styles="normal|italic|oblique|inherit",ft.variants="normal|small-caps|inherit",ft.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class mt{constructor(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;this.x1=h,this.y1=g,this.x2=d,this.y2=f,this.addPoint(h,g),this.addPoint(d,f)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(h,g){void 0!==h&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=h,this.x2=h),h<this.x1&&(this.x1=h),h>this.x2&&(this.x2=h)),void 0!==g&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=g,this.y2=g),g<this.y1&&(this.y1=g),g>this.y2&&(this.y2=g))}addX(h){this.addPoint(h,null)}addY(h){this.addPoint(null,h)}addBoundingBox(h){if(h){var{x1:g,y1:d,x2:f,y2:x}=h;this.addPoint(g,d),this.addPoint(f,x)}}sumCubic(h,g,d,f,x){return Math.pow(1-h,3)*g+3*Math.pow(1-h,2)*h*d+3*(1-h)*Math.pow(h,2)*f+Math.pow(h,3)*x}bezierCurveAdd(h,g,d,f,x){var b=6*g-12*d+6*f,S=-3*g+9*d-9*f+3*x,w=3*d-3*g;if(0!==S){var A=Math.pow(b,2)-4*w*S;if(!(A<0)){var C=(-b+Math.sqrt(A))/(2*S);0<C&&C<1&&(h?this.addX(this.sumCubic(C,g,d,f,x)):this.addY(this.sumCubic(C,g,d,f,x)));var P=(-b-Math.sqrt(A))/(2*S);0<P&&P<1&&(h?this.addX(this.sumCubic(P,g,d,f,x)):this.addY(this.sumCubic(P,g,d,f,x)))}}else{if(0===b)return;var E=-w/b;0<E&&E<1&&(h?this.addX(this.sumCubic(E,g,d,f,x)):this.addY(this.sumCubic(E,g,d,f,x)))}}addBezierCurve(h,g,d,f,x,b,S,w){this.addPoint(h,g),this.addPoint(S,w),this.bezierCurveAdd(!0,h,d,x,S),this.bezierCurveAdd(!1,g,f,b,w)}addQuadraticCurve(h,g,d,f,x,b){var S=h+2/3*(d-h),w=g+2/3*(f-g),A=S+1/3*(x-h),C=w+1/3*(b-g);this.addBezierCurve(h,g,S,A,w,C,x,b)}isPointInBox(h,g){var{x1:d,y1:f,x2:x,y2:b}=this;return d<=h&&h<=x&&f<=g&&g<=b}}class yt extends M{constructor(h){super(h.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Z(0,0),this.control=new Z(0,0),this.current=new Z(0,0),this.points=[],this.angles=[]}isEnd(){var{i:h,commands:g}=this;return h>=g.length-1}next(){var h=this.commands[++this.i];return this.previousCommand=this.command,this.command=h,h}getPoint(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",d=new Z(this.command[h],this.command[g]);return this.makeAbsolute(d)}getAsControlPoint(h,g){var d=this.getPoint(h,g);return this.control=d,d}getAsCurrentPoint(h,g){var d=this.getPoint(h,g);return this.current=d,d}getReflectedControlPoint(){var h=this.previousCommand.type;if(h!==M.CURVE_TO&&h!==M.SMOOTH_CURVE_TO&&h!==M.QUAD_TO&&h!==M.SMOOTH_QUAD_TO)return this.current;var{current:{x:g,y:d},control:{x:f,y:x}}=this;return new Z(2*g-f,2*d-x)}makeAbsolute(h){if(this.command.relative){var{x:g,y:d}=this.current;h.x+=g,h.y+=d}return h}addMarker(h,g,d){var{points:f,angles:x}=this;d&&x.length>0&&!x[x.length-1]&&(x[x.length-1]=f[f.length-1].angleTo(d)),this.addMarkerAngle(h,g?g.angleTo(h):null)}addMarkerAngle(h,g){this.points.push(h),this.angles.push(g)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:h}=this,g=h.length,d=0;d<g;d++)if(!h[d])for(var f=d+1;f<g;f++)if(h[f]){h[d]=h[f];break}return h}}class vt extends dt{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var h=1,g=this;g;){var d=g.getStyle("opacity",!1,!0);d.hasValue(!0)&&(h*=d.getNumber()),g=g.parent}return h}setContext(h){var g=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!g){var d=this.getStyle("fill"),f=this.getStyle("fill-opacity"),x=this.getStyle("stroke"),b=this.getStyle("stroke-opacity");if(d.isUrlDefinition()){var S=d.getFillStyleDefinition(this,f);S&&(h.fillStyle=S)}else if(d.hasValue()){"currentColor"===d.getString()&&d.setValue(this.getStyle("color").getColor());var w=d.getColor();"inherit"!==w&&(h.fillStyle="none"===w?"rgba(0,0,0,0)":w)}if(f.hasValue()){var A=new G(this.document,"fill",h.fillStyle).addOpacity(f).getColor();h.fillStyle=A}if(x.isUrlDefinition()){var C=x.getFillStyleDefinition(this,b);C&&(h.strokeStyle=C)}else if(x.hasValue()){"currentColor"===x.getString()&&x.setValue(this.getStyle("color").getColor());var P=x.getString();"inherit"!==P&&(h.strokeStyle="none"===P?"rgba(0,0,0,0)":P)}if(b.hasValue()){var E=new G(this.document,"stroke",h.strokeStyle).addOpacity(b).getString();h.strokeStyle=E}var N=this.getStyle("stroke-width");if(N.hasValue()){var _=N.getPixels();h.lineWidth=_||q}var M=this.getStyle("stroke-linecap"),R=this.getStyle("stroke-linejoin"),V=this.getStyle("stroke-miterlimit"),k=this.getStyle("stroke-dasharray"),D=this.getStyle("stroke-dashoffset");if(M.hasValue()&&(h.lineCap=M.getString()),R.hasValue()&&(h.lineJoin=R.getString()),V.hasValue()&&(h.miterLimit=V.getNumber()),k.hasValue()&&"none"!==k.getString()){var L=toNumbers(k.getString());void 0!==h.setLineDash?h.setLineDash(L):void 0!==h.webkitLineDash?h.webkitLineDash=L:void 0===h.mozDash||1===L.length&&0===L[0]||(h.mozDash=L);var B=D.getPixels();void 0!==h.lineDashOffset?h.lineDashOffset=B:void 0!==h.webkitLineDashOffset?h.webkitLineDashOffset=B:void 0!==h.mozDashOffset&&(h.mozDashOffset=B)}}if(this.modifiedEmSizeStack=!1,void 0!==h.font){var z=this.getStyle("font"),U=this.getStyle("font-style"),j=this.getStyle("font-variant"),X=this.getStyle("font-weight"),Y=this.getStyle("font-size"),Q=this.getStyle("font-family"),W=new ft(U.getString(),j.getString(),X.getString(),Y.hasValue()?"".concat(Y.getPixels(!0),"px"):"",Q.getString(),ft.parse(z.getString(),h.font));U.setValue(W.fontStyle),j.setValue(W.fontVariant),X.setValue(W.fontWeight),Y.setValue(W.fontSize),Q.setValue(W.fontFamily),h.font=W.toString(),Y.isPixels()&&(this.document.emSize=Y.getPixels(),this.modifiedEmSizeStack=!0)}g||(this.applyEffects(h),h.globalAlpha=this.calculateOpacity())}clearContext(h){super.clearContext(h),this.modifiedEmSizeStack&&this.document.popEmSize()}}class xt extends vt{constructor(h,g,d){super(h,g,d),this.type="path",this.pathParser=null,this.pathParser=new yt(this.getAttribute("d").getString())}path(h){var{pathParser:g}=this,d=new mt;for(g.reset(),h&&h.beginPath();!g.isEnd();)switch(g.next().type){case yt.MOVE_TO:this.pathM(h,d);break;case yt.LINE_TO:this.pathL(h,d);break;case yt.HORIZ_LINE_TO:this.pathH(h,d);break;case yt.VERT_LINE_TO:this.pathV(h,d);break;case yt.CURVE_TO:this.pathC(h,d);break;case yt.SMOOTH_CURVE_TO:this.pathS(h,d);break;case yt.QUAD_TO:this.pathQ(h,d);break;case yt.SMOOTH_QUAD_TO:this.pathT(h,d);break;case yt.ARC:this.pathA(h,d);break;case yt.CLOSE_PATH:this.pathZ(h,d)}return d}getBoundingBox(h){return this.path()}getMarkers(){var{pathParser:h}=this,g=h.getMarkerPoints(),d=h.getMarkerAngles(),f=g.map(((h,g)=>[h,d[g]]));return f}renderChildren(h){this.path(h),this.document.screen.mouse.checkPath(this,h);var g=this.getStyle("fill-rule");""!==h.fillStyle&&("inherit"!==g.getString("inherit")?h.fill(g.getString()):h.fill()),""!==h.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(h.save(),h.setTransform(1,0,0,1,0,0),h.stroke(),h.restore()):h.stroke());var d=this.getMarkers();if(d){var f=d.length-1,x=this.getStyle("marker-start"),b=this.getStyle("marker-mid"),S=this.getStyle("marker-end");if(x.isUrlDefinition()){var w=x.getDefinition(),[A,C]=d[0];w.render(h,A,C)}if(b.isUrlDefinition())for(var P=b.getDefinition(),E=1;E<f;E++){var[N,_]=d[E];P.render(h,N,_)}if(S.isUrlDefinition()){var M=S.getDefinition(),[R,V]=d[f];M.render(h,R,V)}}}static pathM(h){var g=h.getAsCurrentPoint();return h.start=h.current,{point:g}}pathM(h,g){var{pathParser:d}=this,{point:f}=xt.pathM(d),{x:x,y:b}=f;d.addMarker(f),g.addPoint(x,b),h&&h.moveTo(x,b)}static pathL(h){var{current:g}=h;return{current:g,point:h.getAsCurrentPoint()}}pathL(h,g){var{pathParser:d}=this,{current:f,point:x}=xt.pathL(d),{x:b,y:S}=x;d.addMarker(x,f),g.addPoint(b,S),h&&h.lineTo(b,S)}static pathH(h){var{current:g,command:d}=h,f=new Z((d.relative?g.x:0)+d.x,g.y);return h.current=f,{current:g,point:f}}pathH(h,g){var{pathParser:d}=this,{current:f,point:x}=xt.pathH(d),{x:b,y:S}=x;d.addMarker(x,f),g.addPoint(b,S),h&&h.lineTo(b,S)}static pathV(h){var{current:g,command:d}=h,f=new Z(g.x,(d.relative?g.y:0)+d.y);return h.current=f,{current:g,point:f}}pathV(h,g){var{pathParser:d}=this,{current:f,point:x}=xt.pathV(d),{x:b,y:S}=x;d.addMarker(x,f),g.addPoint(b,S),h&&h.lineTo(b,S)}static pathC(h){var{current:g}=h;return{current:g,point:h.getPoint("x1","y1"),controlPoint:h.getAsControlPoint("x2","y2"),currentPoint:h.getAsCurrentPoint()}}pathC(h,g){var{pathParser:d}=this,{current:f,point:x,controlPoint:b,currentPoint:S}=xt.pathC(d);d.addMarker(S,b,x),g.addBezierCurve(f.x,f.y,x.x,x.y,b.x,b.y,S.x,S.y),h&&h.bezierCurveTo(x.x,x.y,b.x,b.y,S.x,S.y)}static pathS(h){var{current:g}=h;return{current:g,point:h.getReflectedControlPoint(),controlPoint:h.getAsControlPoint("x2","y2"),currentPoint:h.getAsCurrentPoint()}}pathS(h,g){var{pathParser:d}=this,{current:f,point:x,controlPoint:b,currentPoint:S}=xt.pathS(d);d.addMarker(S,b,x),g.addBezierCurve(f.x,f.y,x.x,x.y,b.x,b.y,S.x,S.y),h&&h.bezierCurveTo(x.x,x.y,b.x,b.y,S.x,S.y)}static pathQ(h){var{current:g}=h;return{current:g,controlPoint:h.getAsControlPoint("x1","y1"),currentPoint:h.getAsCurrentPoint()}}pathQ(h,g){var{pathParser:d}=this,{current:f,controlPoint:x,currentPoint:b}=xt.pathQ(d);d.addMarker(b,x,x),g.addQuadraticCurve(f.x,f.y,x.x,x.y,b.x,b.y),h&&h.quadraticCurveTo(x.x,x.y,b.x,b.y)}static pathT(h){var{current:g}=h,d=h.getReflectedControlPoint();return h.control=d,{current:g,controlPoint:d,currentPoint:h.getAsCurrentPoint()}}pathT(h,g){var{pathParser:d}=this,{current:f,controlPoint:x,currentPoint:b}=xt.pathT(d);d.addMarker(b,x,x),g.addQuadraticCurve(f.x,f.y,x.x,x.y,b.x,b.y),h&&h.quadraticCurveTo(x.x,x.y,b.x,b.y)}static pathA(h){var{current:g,command:d}=h,{rX:f,rY:x,xRot:b,lArcFlag:S,sweepFlag:w}=d,A=b*(Math.PI/180),C=h.getAsCurrentPoint(),P=new Z(Math.cos(A)*(g.x-C.x)/2+Math.sin(A)*(g.y-C.y)/2,-Math.sin(A)*(g.x-C.x)/2+Math.cos(A)*(g.y-C.y)/2),E=Math.pow(P.x,2)/Math.pow(f,2)+Math.pow(P.y,2)/Math.pow(x,2);E>1&&(f*=Math.sqrt(E),x*=Math.sqrt(E));var N=(S===w?-1:1)*Math.sqrt((Math.pow(f,2)*Math.pow(x,2)-Math.pow(f,2)*Math.pow(P.y,2)-Math.pow(x,2)*Math.pow(P.x,2))/(Math.pow(f,2)*Math.pow(P.y,2)+Math.pow(x,2)*Math.pow(P.x,2)));isNaN(N)&&(N=0);var _=new Z(N*f*P.y/x,N*-x*P.x/f),M=new Z((g.x+C.x)/2+Math.cos(A)*_.x-Math.sin(A)*_.y,(g.y+C.y)/2+Math.sin(A)*_.x+Math.cos(A)*_.y),R=vectorsAngle([1,0],[(P.x-_.x)/f,(P.y-_.y)/x]),V=[(P.x-_.x)/f,(P.y-_.y)/x],k=[(-P.x-_.x)/f,(-P.y-_.y)/x],D=vectorsAngle(V,k);return vectorsRatio(V,k)<=-1&&(D=Math.PI),vectorsRatio(V,k)>=1&&(D=0),{currentPoint:C,rX:f,rY:x,sweepFlag:w,xAxisRotation:A,centp:M,a1:R,ad:D}}pathA(h,g){var{pathParser:d}=this,{currentPoint:f,rX:x,rY:b,sweepFlag:S,xAxisRotation:w,centp:A,a1:C,ad:P}=xt.pathA(d),E=1-S?1:-1,N=C+E*(P/2),_=new Z(A.x+x*Math.cos(N),A.y+b*Math.sin(N));if(d.addMarkerAngle(_,N-E*Math.PI/2),d.addMarkerAngle(f,N-E*Math.PI),g.addPoint(f.x,f.y),h&&!isNaN(C)&&!isNaN(P)){var M=x>b?x:b,R=x>b?1:x/b,V=x>b?b/x:1;h.translate(A.x,A.y),h.rotate(w),h.scale(R,V),h.arc(0,0,M,C,C+P,Boolean(1-S)),h.scale(1/R,1/V),h.rotate(-w),h.translate(-A.x,-A.y)}}static pathZ(h){h.current=h.start}pathZ(h,g){xt.pathZ(this.pathParser),h&&g.x1!==g.x2&&g.y1!==g.y2&&h.closePath()}}class bt extends xt{constructor(h,g,d){super(h,g,d),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class St extends vt{constructor(h,g,d){super(h,g,new.target===St||d),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(h){var g=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setContext(h,g);var d=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();d&&(h.textBaseline=d)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(h){if("text"!==this.type)return this.getTElementBoundingBox(h);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(h);var g=null;return this.children.forEach(((d,f)=>{var x=this.getChildBoundingBox(h,this,this,f);g?g.addBoundingBox(x):g=x})),g}getFontSize(){var{document:h,parent:g}=this,d=ft.parse(h.ctx.font).fontSize;return g.getStyle("font-size").getNumber(d)}getTElementBoundingBox(h){var g=this.getFontSize();return new mt(this.x,this.y-g,this.x+this.measureText(h),this.y)}getGlyph(h,g,d){var f=g[d],x=null;if(h.isArabic){var b=g.length,S=g[d-1],w=g[d+1],A="isolated";if((0===d||" "===S)&&d<b-1&&" "!==w&&(A="terminal"),d>0&&" "!==S&&d<b-1&&" "!==w&&(A="medial"),d>0&&" "!==S&&(d===b-1||" "===w)&&(A="initial"),void 0!==h.glyphs[f]){var C=h.glyphs[f];x=C instanceof bt?C:C[A]}}else x=h.glyphs[f];return x||(x=h.missingGlyph),x}getText(){return""}getTextFromNode(h){var g=h||this.node,d=Array.from(g.parentNode.childNodes),f=d.indexOf(g),x=d.length-1,b=compressSpaces(g.textContent||"");return 0===f&&(b=trimLeft(b)),f===x&&(b=trimRight(b)),b}renderChildren(h){if("text"===this.type){this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(h),this.children.forEach(((g,d)=>{this.renderChild(h,this,this,d)}));var{mouse:g}=this.document.screen;g.isWorking()&&g.checkBoundingBox(this,this.getBoundingBox(h))}else this.renderTElementChildren(h)}renderTElementChildren(h){var{document:g,parent:d}=this,f=this.getText(),x=d.getStyle("font-family").getDefinition();if(x)for(var{unitsPerEm:b}=x.fontFace,S=ft.parse(g.ctx.font),w=d.getStyle("font-size").getNumber(S.fontSize),A=d.getStyle("font-style").getString(S.fontStyle),C=w/b,P=x.isRTL?f.split("").reverse().join(""):f,E=toNumbers(d.getAttribute("dx").getString()),N=P.length,_=0;_<N;_++){var M=this.getGlyph(x,P,_);h.translate(this.x,this.y),h.scale(C,-C);var R=h.lineWidth;h.lineWidth=h.lineWidth*b/w,"italic"===A&&h.transform(1,0,.4,1,0,0),M.render(h),"italic"===A&&h.transform(1,0,-.4,1,0,0),h.lineWidth=R,h.scale(1/C,-1/C),h.translate(-this.x,-this.y),this.x+=w*(M.horizAdvX||x.horizAdvX)/b,void 0===E[_]||isNaN(E[_])||(this.x+=E[_])}else{var{x:V,y:k}=this;h.fillStyle&&h.fillText(f,V,k),h.strokeStyle&&h.strokeText(f,V,k)}}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var h=this.leafTexts[this.textChunkStart],g=h.getStyle("text-anchor").getString("start"),d=0;d="start"===g?h.x-this.minX:"end"===g?h.x-this.maxX:h.x-(this.minX+this.maxX)/2;for(var f=this.textChunkStart;f<this.leafTexts.length;f++)this.leafTexts[f].x+=d;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(h){this.children.forEach(((g,d)=>{this.adjustChildCoordinatesRecursiveCore(h,this,this,d)})),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(h,g,d,f){var x=d.children[f];x.children.length>0?x.children.forEach(((d,f)=>{g.adjustChildCoordinatesRecursiveCore(h,g,x,f)})):this.adjustChildCoordinates(h,g,d,f)}adjustChildCoordinates(h,g,d,f){var x=d.children[f];if("function"!=typeof x.measureText)return x;h.save(),x.setContext(h,!0);var b=x.getAttribute("x"),S=x.getAttribute("y"),w=x.getAttribute("dx"),A=x.getAttribute("dy"),C=x.getStyle("font-family").getDefinition(),P=Boolean(C)&&C.isRTL;0===f&&(b.hasValue()||b.setValue(x.getInheritedAttribute("x")),S.hasValue()||S.setValue(x.getInheritedAttribute("y")),w.hasValue()||w.setValue(x.getInheritedAttribute("dx")),A.hasValue()||A.setValue(x.getInheritedAttribute("dy")));var E=x.measureText(h);return P&&(g.x-=E),b.hasValue()?(g.applyAnchoring(),x.x=b.getPixels("x"),w.hasValue()&&(x.x+=w.getPixels("x"))):(w.hasValue()&&(g.x+=w.getPixels("x")),x.x=g.x),g.x=x.x,P||(g.x+=E),S.hasValue()?(x.y=S.getPixels("y"),A.hasValue()&&(x.y+=A.getPixels("y"))):(A.hasValue()&&(g.y+=A.getPixels("y")),x.y=g.y),g.y=x.y,g.leafTexts.push(x),g.minX=Math.min(g.minX,x.x,x.x+E),g.maxX=Math.max(g.maxX,x.x,x.x+E),x.clearContext(h),h.restore(),x}getChildBoundingBox(h,g,d,f){var x=d.children[f];if("function"!=typeof x.getBoundingBox)return null;var b=x.getBoundingBox(h);return b?(x.children.forEach(((d,f)=>{var S=g.getChildBoundingBox(h,g,x,f);b.addBoundingBox(S)})),b):null}renderChild(h,g,d,f){var x=d.children[f];x.render(h),x.children.forEach(((d,f)=>{g.renderChild(h,g,x,f)}))}measureText(h){var{measureCache:g}=this;if(~g)return g;var d=this.getText(),f=this.measureTargetText(h,d);return this.measureCache=f,f}measureTargetText(h,g){if(!g.length)return 0;var{parent:d}=this,f=d.getStyle("font-family").getDefinition();if(f){for(var x=this.getFontSize(),b=f.isRTL?g.split("").reverse().join(""):g,S=toNumbers(d.getAttribute("dx").getString()),w=b.length,A=0,C=0;C<w;C++){A+=(this.getGlyph(f,b,C).horizAdvX||f.horizAdvX)*x/f.fontFace.unitsPerEm,void 0===S[C]||isNaN(S[C])||(A+=S[C])}return A}if(!h.measureText)return 10*g.length;h.save(),this.setContext(h,!0);var{width:P}=h.measureText(g);return this.clearContext(h),h.restore(),P}getInheritedAttribute(h){for(var g=this;g instanceof St&&g.isFirstChild();){var d=g.parent.getAttribute(h);if(d.hasValue(!0))return d.getValue("0");g=g.parent}return null}}class wt extends St{constructor(h,g,d){super(h,g,new.target===wt||d),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class Tt extends wt{constructor(){super(...arguments),this.type="textNode"}}class At extends vt{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(h){var g,{document:d}=this,{screen:f,window:x}=d,b=h.canvas;if(f.setDefaults(h),b.style&&void 0!==h.font&&x&&void 0!==x.getComputedStyle){h.font=x.getComputedStyle(b).getPropertyValue("font");var S=new G(d,"fontSize",ft.parse(h.font).fontSize);S.hasValue()&&(d.rootEmSize=S.getPixels("y"),d.emSize=d.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:w,height:A}=f.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var C=this.getAttribute("refX"),P=this.getAttribute("refY"),E=this.getAttribute("viewBox"),N=E.hasValue()?toNumbers(E.getString()):null,_=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),M=0,R=0,V=0,k=0;N&&(M=N[0],R=N[1]),this.root||(w=this.getStyle("width").getPixels("x"),A=this.getStyle("height").getPixels("y"),"marker"===this.type&&(V=M,k=R,M=0,R=0)),f.viewPort.setCurrent(w,A),!this.node||this.parent&&"foreignObject"!==(null===(g=this.node.parentNode)||void 0===g?void 0:g.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(h),h.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),N&&(w=N[2],A=N[3]),d.setViewBox({ctx:h,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:f.viewPort.width,desiredWidth:w,height:f.viewPort.height,desiredHeight:A,minX:M,minY:R,refX:C.getValue(),refY:P.getValue(),clip:_,clipX:V,clipY:k}),N&&(f.viewPort.removeCurrent(),f.viewPort.setCurrent(w,A))}clearContext(h){super.clearContext(h),this.document.screen.viewPort.removeCurrent()}resize(h){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=this.getAttribute("width",!0),x=this.getAttribute("height",!0),b=this.getAttribute("viewBox"),S=this.getAttribute("style"),w=f.getNumber(0),A=x.getNumber(0);if(d)if("string"==typeof d)this.getAttribute("preserveAspectRatio",!0).setValue(d);else{var C=this.getAttribute("preserveAspectRatio");C.hasValue()&&C.setValue(C.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(f.setValue(h),x.setValue(g),b.hasValue()||b.setValue("0 0 ".concat(w||h," ").concat(A||g)),S.hasValue()){var P=this.getStyle("width"),E=this.getStyle("height");P.hasValue()&&P.setValue("".concat(h,"px")),E.hasValue()&&E.setValue("".concat(g,"px"))}}}class Ct extends xt{constructor(){super(...arguments),this.type="rect"}path(h){var g=this.getAttribute("x").getPixels("x"),d=this.getAttribute("y").getPixels("y"),f=this.getStyle("width",!1,!0).getPixels("x"),x=this.getStyle("height",!1,!0).getPixels("y"),b=this.getAttribute("rx"),S=this.getAttribute("ry"),w=b.getPixels("x"),A=S.getPixels("y");if(b.hasValue()&&!S.hasValue()&&(A=w),S.hasValue()&&!b.hasValue()&&(w=A),w=Math.min(w,f/2),A=Math.min(A,x/2),h){var C=(Math.sqrt(2)-1)/3*4;h.beginPath(),x>0&&f>0&&(h.moveTo(g+w,d),h.lineTo(g+f-w,d),h.bezierCurveTo(g+f-w+C*w,d,g+f,d+A-C*A,g+f,d+A),h.lineTo(g+f,d+x-A),h.bezierCurveTo(g+f,d+x-A+C*A,g+f-w+C*w,d+x,g+f-w,d+x),h.lineTo(g+w,d+x),h.bezierCurveTo(g+w-C*w,d+x,g,d+x-A+C*A,g,d+x-A),h.lineTo(g,d+A),h.bezierCurveTo(g,d+A-C*A,g+w-C*w,d,g+w,d),h.closePath())}return new mt(g,d,g+f,d+x)}getMarkers(){return null}}class Ot extends xt{constructor(){super(...arguments),this.type="circle"}path(h){var g=this.getAttribute("cx").getPixels("x"),d=this.getAttribute("cy").getPixels("y"),f=this.getAttribute("r").getPixels();return h&&f>0&&(h.beginPath(),h.arc(g,d,f,0,2*Math.PI,!1),h.closePath()),new mt(g-f,d-f,g+f,d+f)}getMarkers(){return null}}class Pt extends xt{constructor(){super(...arguments),this.type="ellipse"}path(h){var g=(Math.sqrt(2)-1)/3*4,d=this.getAttribute("rx").getPixels("x"),f=this.getAttribute("ry").getPixels("y"),x=this.getAttribute("cx").getPixels("x"),b=this.getAttribute("cy").getPixels("y");return h&&d>0&&f>0&&(h.beginPath(),h.moveTo(x+d,b),h.bezierCurveTo(x+d,b+g*f,x+g*d,b+f,x,b+f),h.bezierCurveTo(x-g*d,b+f,x-d,b+g*f,x-d,b),h.bezierCurveTo(x-d,b-g*f,x-g*d,b-f,x,b-f),h.bezierCurveTo(x+g*d,b-f,x+d,b-g*f,x+d,b),h.closePath()),new mt(x-d,b-f,x+d,b+f)}getMarkers(){return null}}class Et extends xt{constructor(){super(...arguments),this.type="line"}getPoints(){return[new Z(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Z(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(h){var[{x:g,y:d},{x:f,y:x}]=this.getPoints();return h&&(h.beginPath(),h.moveTo(g,d),h.lineTo(f,x)),new mt(g,d,f,x)}getMarkers(){var[h,g]=this.getPoints(),d=h.angleTo(g);return[[h,d],[g,d]]}}class Nt extends xt{constructor(h,g,d){super(h,g,d),this.type="polyline",this.points=[],this.points=Z.parsePath(this.getAttribute("points").getString())}path(h){var{points:g}=this,[{x:d,y:f}]=g,x=new mt(d,f);return h&&(h.beginPath(),h.moveTo(d,f)),g.forEach((g=>{var{x:d,y:f}=g;x.addPoint(d,f),h&&h.lineTo(d,f)})),x}getMarkers(){var{points:h}=this,g=h.length-1,d=[];return h.forEach(((f,x)=>{x!==g&&d.push([f,f.angleTo(h[x+1])])})),d.length>0&&d.push([h[h.length-1],d[d.length-1][1]]),d}}class _t extends Nt{constructor(){super(...arguments),this.type="polygon"}path(h){var g=super.path(h),[{x:d,y:f}]=this.points;return h&&(h.lineTo(d,f),h.closePath()),g}}class Mt extends dt{constructor(){super(...arguments),this.type="pattern"}createPattern(h,g,d){var f=this.getStyle("width").getPixels("x",!0),x=this.getStyle("height").getPixels("y",!0),b=new At(this.document,null);b.attributes.viewBox=new G(this.document,"viewBox",this.getAttribute("viewBox").getValue()),b.attributes.width=new G(this.document,"width","".concat(f,"px")),b.attributes.height=new G(this.document,"height","".concat(x,"px")),b.attributes.transform=new G(this.document,"transform",this.getAttribute("patternTransform").getValue()),b.children=this.children;var S=this.document.createCanvas(f,x),w=S.getContext("2d"),A=this.getAttribute("x"),C=this.getAttribute("y");A.hasValue()&&C.hasValue()&&w.translate(A.getPixels("x",!0),C.getPixels("y",!0)),d.hasValue()?this.styles["fill-opacity"]=d:Reflect.deleteProperty(this.styles,"fill-opacity");for(var P=-1;P<=1;P++)for(var E=-1;E<=1;E++)w.save(),b.attributes.x=new G(this.document,"x",P*S.width),b.attributes.y=new G(this.document,"y",E*S.height),b.render(w),w.restore();return h.createPattern(S,"repeat")}}class Rt extends dt{constructor(){super(...arguments),this.type="marker"}render(h,g,d){if(g){var{x:f,y:x}=g,b=this.getAttribute("orient").getString("auto"),S=this.getAttribute("markerUnits").getString("strokeWidth");h.translate(f,x),"auto"===b&&h.rotate(d),"strokeWidth"===S&&h.scale(h.lineWidth,h.lineWidth),h.save();var w=new At(this.document,null);w.type=this.type,w.attributes.viewBox=new G(this.document,"viewBox",this.getAttribute("viewBox").getValue()),w.attributes.refX=new G(this.document,"refX",this.getAttribute("refX").getValue()),w.attributes.refY=new G(this.document,"refY",this.getAttribute("refY").getValue()),w.attributes.width=new G(this.document,"width",this.getAttribute("markerWidth").getValue()),w.attributes.height=new G(this.document,"height",this.getAttribute("markerHeight").getValue()),w.attributes.overflow=new G(this.document,"overflow",this.getAttribute("overflow").getValue()),w.attributes.fill=new G(this.document,"fill",this.getAttribute("fill").getColor("black")),w.attributes.stroke=new G(this.document,"stroke",this.getAttribute("stroke").getValue("none")),w.children=this.children,w.render(h),h.restore(),"strokeWidth"===S&&h.scale(1/h.lineWidth,1/h.lineWidth),"auto"===b&&h.rotate(-d),h.translate(-f,-x)}}}class Vt extends dt{constructor(){super(...arguments),this.type="defs"}render(){}}class kt extends vt{constructor(){super(...arguments),this.type="g"}getBoundingBox(h){var g=new mt;return this.children.forEach((d=>{g.addBoundingBox(d.getBoundingBox(h))})),g}}class It extends dt{constructor(h,g,d){super(h,g,d),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:f,children:x}=this;x.forEach((h=>{"stop"===h.type&&f.push(h)}))}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(h,g,d){var f=this;this.getHrefAttribute().hasValue()&&(f=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(f));var{stops:x}=f,b=this.getGradient(h,g);if(!b)return this.addParentOpacity(d,x[x.length-1].color);if(x.forEach((h=>{b.addColorStop(h.offset,this.addParentOpacity(d,h.color))})),this.getAttribute("gradientTransform").hasValue()){var{document:S}=this,{MAX_VIRTUAL_PIXELS:w,viewPort:A}=S.screen,[C]=A.viewPorts,P=new Ct(S,null);P.attributes.x=new G(S,"x",-w/3),P.attributes.y=new G(S,"y",-w/3),P.attributes.width=new G(S,"width",w),P.attributes.height=new G(S,"height",w);var E=new kt(S,null);E.attributes.transform=new G(S,"transform",this.getAttribute("gradientTransform").getValue()),E.children=[P];var N=new At(S,null);N.attributes.x=new G(S,"x",0),N.attributes.y=new G(S,"y",0),N.attributes.width=new G(S,"width",C.width),N.attributes.height=new G(S,"height",C.height),N.children=[E];var _=S.createCanvas(C.width,C.height),M=_.getContext("2d");return M.fillStyle=b,N.render(M),M.createPattern(_,"no-repeat")}return b}inheritStopContainer(h){this.attributesToInherit.forEach((g=>{!this.getAttribute(g).hasValue()&&h.getAttribute(g).hasValue()&&this.getAttribute(g,!0).setValue(h.getAttribute(g).getValue())}))}addParentOpacity(h,g){return h.hasValue()?new G(this.document,"color",g).addOpacity(h).getColor():g}}class Dt extends It{constructor(h,g,d){super(h,g,d),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(h,g){var d="objectBoundingBox"===this.getGradientUnits(),f=d?g.getBoundingBox(h):null;if(d&&!f)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var x=d?f.x+f.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),b=d?f.y+f.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),S=d?f.x+f.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),w=d?f.y+f.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return x===S&&b===w?null:h.createLinearGradient(x,b,S,w)}}class Lt extends It{constructor(h,g,d){super(h,g,d),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(h,g){var d="objectBoundingBox"===this.getGradientUnits(),f=g.getBoundingBox(h);if(d&&!f)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var x=d?f.x+f.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),b=d?f.y+f.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),S=x,w=b;this.getAttribute("fx").hasValue()&&(S=d?f.x+f.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(w=d?f.y+f.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var A=d?(f.width+f.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),C=this.getAttribute("fr").getPixels();return h.createRadialGradient(S,w,C,x,b,A)}}class Bt extends dt{constructor(h,g,d){super(h,g,d),this.type="stop";var f=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),x=this.getStyle("stop-opacity"),b=this.getStyle("stop-color",!0);""===b.getString()&&b.setValue("#000"),x.hasValue()&&(b=b.addOpacity(x)),this.offset=f,this.color=b.getColor()}}class Ft extends dt{constructor(h,g,d){super(h,g,d),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,h.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new G(h,"values",null);var f=this.getAttribute("values");f.hasValue()&&this.values.setValue(f.getString().split(";"))}getProperty(){var h=this.getAttribute("attributeType").getString(),g=this.getAttribute("attributeName").getString();return"CSS"===h?this.parent.getStyle(g,!0):this.parent.getAttribute(g,!0)}calcValue(){var{initialUnits:h}=this,{progress:g,from:d,to:f}=this.getProgress(),x=d.getNumber()+(f.getNumber()-d.getNumber())*g;return"%"===h&&(x*=100),"".concat(x).concat(h)}update(h){var{parent:g}=this,d=this.getProperty();if(this.initialValue||(this.initialValue=d.getString(),this.initialUnits=d.getUnits()),this.duration>this.maxDuration){var f=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==f||this.frozen){if("remove"===f&&!this.removed)return this.removed=!0,d.setValue(g.animationFrozen?g.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,g.animationFrozen=!0,g.animationFrozenValue=d.getString();return!1}this.duration+=h;var x=!1;if(this.begin<this.duration){var b=this.calcValue(),S=this.getAttribute("type");if(S.hasValue()){var w=S.getString();b="".concat(w,"(").concat(b,")")}d.setValue(b),x=!0}return x}getProgress(){var{document:h,values:g}=this,d={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(g.hasValue()){var f=d.progress*(g.getValue().length-1),x=Math.floor(f),b=Math.ceil(f);d.from=new G(h,"from",parseFloat(g.getValue()[x])),d.to=new G(h,"to",parseFloat(g.getValue()[b])),d.progress=(f-x)/(b-x)}else d.from=this.from,d.to=this.to;return d}}class zt extends Ft{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:h,from:g,to:d}=this.getProgress(),f=new S(g.getColor()),x=new S(d.getColor());if(f.ok&&x.ok){var b=f.r+(x.r-f.r)*h,w=f.g+(x.g-f.g)*h,A=f.b+(x.b-f.b)*h;return"rgb(".concat(Math.floor(b),", ").concat(Math.floor(w),", ").concat(Math.floor(A),")")}return this.getAttribute("from").getColor()}}class Ut extends Ft{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:h,from:g,to:d}=this.getProgress(),f=toNumbers(g.getString()),x=toNumbers(d.getString()),b=f.map(((g,d)=>g+(x[d]-g)*h)).join(" ");return b}}class Ht extends dt{constructor(h,g,d){super(h,g,d),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:f}=h,{children:x}=this;for(var b of x)switch(b.type){case"font-face":this.fontFace=b;var S=b.getStyle("font-family");S.hasValue()&&(f[S.getString()]=this);break;case"missing-glyph":this.missingGlyph=b;break;case"glyph":var w=b;w.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[w.unicode]&&(this.glyphs[w.unicode]={}),this.glyphs[w.unicode][w.arabicForm]=w):this.glyphs[w.unicode]=w}}render(){}}class jt extends dt{constructor(h,g,d){super(h,g,d),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class Xt extends xt{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class Yt extends St{constructor(){super(...arguments),this.type="tref"}getText(){var h=this.getHrefAttribute().getDefinition();if(h){var g=h.children[0];if(g)return g.getText()}return""}}class Qt extends St{constructor(h,g,d){super(h,g,d),this.type="a";var{childNodes:f}=g,x=f[0],b=f.length>0&&Array.from(f).every((h=>3===h.nodeType));this.hasText=b,this.text=b?this.getTextFromNode(x):""}getText(){return this.text}renderChildren(h){if(this.hasText){super.renderChildren(h);var{document:g,x:d,y:f}=this,{mouse:x}=g.screen,b=new G(g,"fontSize",ft.parse(g.ctx.font).fontSize);x.isWorking()&&x.checkBoundingBox(this,new mt(d,f-b.getPixels("y"),d+this.measureText(h),f))}else if(this.children.length>0){var S=new kt(this.document,null);S.children=this.children,S.parent=this,S.render(h)}}onClick(){var{window:h}=this.document;h&&h.open(this.getHrefAttribute().getString())}onMouseMove(){this.document.ctx.canvas.style.cursor="pointer"}}function ownKeys$2(h,g){var d=Object.keys(h);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(h);g&&(f=f.filter((function(g){return Object.getOwnPropertyDescriptor(h,g).enumerable}))),d.push.apply(d,f)}return d}function _objectSpread$2(h){for(var g=1;g<arguments.length;g++){var d=null!=arguments[g]?arguments[g]:{};g%2?ownKeys$2(Object(d),!0).forEach((function(g){(0,x.A)(h,g,d[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(d)):ownKeys$2(Object(d)).forEach((function(g){Object.defineProperty(h,g,Object.getOwnPropertyDescriptor(d,g))}))}return h}class Wt extends St{constructor(h,g,d){super(h,g,d),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var f=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(f)}getText(){return this.text}path(h){var{dataArray:g}=this;h&&h.beginPath(),g.forEach((g=>{var{type:d,points:f}=g;switch(d){case yt.LINE_TO:h&&h.lineTo(f[0],f[1]);break;case yt.MOVE_TO:h&&h.moveTo(f[0],f[1]);break;case yt.CURVE_TO:h&&h.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case yt.QUAD_TO:h&&h.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case yt.ARC:var[x,b,S,w,A,C,P,E]=f,N=S>w?S:w,_=S>w?1:S/w,M=S>w?w/S:1;h&&(h.translate(x,b),h.rotate(P),h.scale(_,M),h.arc(0,0,N,A,A+C,Boolean(1-E)),h.scale(1/_,1/M),h.rotate(-P),h.translate(-x,-b));break;case yt.CLOSE_PATH:h&&h.closePath()}}))}renderChildren(h){this.setTextData(h),h.save();var g=this.parent.getStyle("text-decoration").getString(),d=this.getFontSize(),{glyphInfo:f}=this,x=h.fillStyle;"underline"===g&&h.beginPath(),f.forEach(((f,x)=>{var{p0:b,p1:S,rotation:w,text:A}=f;h.save(),h.translate(b.x,b.y),h.rotate(w),h.fillStyle&&h.fillText(A,0,0),h.strokeStyle&&h.strokeText(A,0,0),h.restore(),"underline"===g&&(0===x&&h.moveTo(b.x,b.y+d/8),h.lineTo(S.x,S.y+d/5))})),"underline"===g&&(h.lineWidth=d/20,h.strokeStyle=x,h.stroke(),h.closePath()),h.restore()}getLetterSpacingAt(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[h]||0}findSegmentToFitChar(h,g,d,f,x,b,S,w,A){var C=b,P=this.measureText(h,w);" "===w&&"justify"===g&&d<f&&(P+=(f-d)/x),A>-1&&(C+=this.getLetterSpacingAt(A));var E=this.textHeight/20,N=this.getEquidistantPointOnPath(C,E,0),_=this.getEquidistantPointOnPath(C+P,E,0),M={p0:N,p1:_},R=N&&_?Math.atan2(_.y-N.y,_.x-N.x):0;if(S){var V=Math.cos(Math.PI/2+R)*S,k=Math.cos(-R)*S;M.p0=_objectSpread$2(_objectSpread$2({},N),{},{x:N.x+V,y:N.y+k}),M.p1=_objectSpread$2(_objectSpread$2({},_),{},{x:_.x+V,y:_.y+k})}return{offset:C+=P,segment:M,rotation:R}}measureText(h,g){var{measuresCache:d}=this,f=g||this.getText();if(d.has(f))return d.get(f);var x=this.measureTargetText(h,f);return d.set(f,x),x}setTextData(h){if(!this.glyphInfo){var g=this.getText(),d=g.split(""),f=g.split(" ").length-1,x=this.parent.getAttribute("dx").split().map((h=>h.getPixels("x"))),b=this.parent.getAttribute("dy").getPixels("y"),S=this.parent.getStyle("text-anchor").getString("start"),w=this.getStyle("letter-spacing"),A=this.parent.getStyle("letter-spacing"),C=0;w.hasValue()&&"inherit"!==w.getValue()?w.hasValue()&&"initial"!==w.getValue()&&"unset"!==w.getValue()&&(C=w.getPixels()):C=A.getPixels();var P=[],E=g.length;this.letterSpacingCache=P;for(var N=0;N<E;N++)P.push(void 0!==x[N]?x[N]:C);var _=P.reduce(((h,g,d)=>0===d?0:h+g||0),0),M=this.measureText(h),R=Math.max(M+_,0);this.textWidth=M,this.textHeight=this.getFontSize(),this.glyphInfo=[];var V=this.getPathLength(),k=this.getStyle("startOffset").getNumber(0)*V,D=0;"middle"!==S&&"center"!==S||(D=-R/2),"end"!==S&&"right"!==S||(D=-R),D+=k,d.forEach(((g,x)=>{var{offset:w,segment:A,rotation:C}=this.findSegmentToFitChar(h,S,R,V,f,D,b,g,x);D=w,A.p0&&A.p1&&this.glyphInfo.push({text:d[x],p0:A.p0,p1:A.p1,rotation:C})}))}}parsePathData(h){if(this.pathLength=-1,!h)return[];var g=[],{pathParser:d}=h;for(d.reset();!d.isEnd();){var{current:f}=d,x=f?f.x:0,b=f?f.y:0,S=d.next(),w=S.type,A=[];switch(S.type){case yt.MOVE_TO:this.pathM(d,A);break;case yt.LINE_TO:w=this.pathL(d,A);break;case yt.HORIZ_LINE_TO:w=this.pathH(d,A);break;case yt.VERT_LINE_TO:w=this.pathV(d,A);break;case yt.CURVE_TO:this.pathC(d,A);break;case yt.SMOOTH_CURVE_TO:w=this.pathS(d,A);break;case yt.QUAD_TO:this.pathQ(d,A);break;case yt.SMOOTH_QUAD_TO:w=this.pathT(d,A);break;case yt.ARC:A=this.pathA(d);break;case yt.CLOSE_PATH:xt.pathZ(d)}S.type!==yt.CLOSE_PATH?g.push({type:w,points:A,start:{x:x,y:b},pathLength:this.calcLength(x,b,w,A)}):g.push({type:yt.CLOSE_PATH,points:[],pathLength:0})}return g}pathM(h,g){var{x:d,y:f}=xt.pathM(h).point;g.push(d,f)}pathL(h,g){var{x:d,y:f}=xt.pathL(h).point;return g.push(d,f),yt.LINE_TO}pathH(h,g){var{x:d,y:f}=xt.pathH(h).point;return g.push(d,f),yt.LINE_TO}pathV(h,g){var{x:d,y:f}=xt.pathV(h).point;return g.push(d,f),yt.LINE_TO}pathC(h,g){var{point:d,controlPoint:f,currentPoint:x}=xt.pathC(h);g.push(d.x,d.y,f.x,f.y,x.x,x.y)}pathS(h,g){var{point:d,controlPoint:f,currentPoint:x}=xt.pathS(h);return g.push(d.x,d.y,f.x,f.y,x.x,x.y),yt.CURVE_TO}pathQ(h,g){var{controlPoint:d,currentPoint:f}=xt.pathQ(h);g.push(d.x,d.y,f.x,f.y)}pathT(h,g){var{controlPoint:d,currentPoint:f}=xt.pathT(h);return g.push(d.x,d.y,f.x,f.y),yt.QUAD_TO}pathA(h){var{rX:g,rY:d,sweepFlag:f,xAxisRotation:x,centp:b,a1:S,ad:w}=xt.pathA(h);return 0===f&&w>0&&(w-=2*Math.PI),1===f&&w<0&&(w+=2*Math.PI),[b.x,b.y,g,d,S,w,x,f]}calcLength(h,g,d,f){var x=0,b=null,S=null,w=0;switch(d){case yt.LINE_TO:return this.getLineLength(h,g,f[0],f[1]);case yt.CURVE_TO:for(x=0,b=this.getPointOnCubicBezier(0,h,g,f[0],f[1],f[2],f[3],f[4],f[5]),w=.01;w<=1;w+=.01)S=this.getPointOnCubicBezier(w,h,g,f[0],f[1],f[2],f[3],f[4],f[5]),x+=this.getLineLength(b.x,b.y,S.x,S.y),b=S;return x;case yt.QUAD_TO:for(x=0,b=this.getPointOnQuadraticBezier(0,h,g,f[0],f[1],f[2],f[3]),w=.01;w<=1;w+=.01)S=this.getPointOnQuadraticBezier(w,h,g,f[0],f[1],f[2],f[3]),x+=this.getLineLength(b.x,b.y,S.x,S.y),b=S;return x;case yt.ARC:x=0;var A=f[4],C=f[5],P=f[4]+C,E=Math.PI/180;if(Math.abs(A-P)<E&&(E=Math.abs(A-P)),b=this.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],A,0),C<0)for(w=A-E;w>P;w-=E)S=this.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],w,0),x+=this.getLineLength(b.x,b.y,S.x,S.y),b=S;else for(w=A+E;w<P;w+=E)S=this.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],w,0),x+=this.getLineLength(b.x,b.y,S.x,S.y),b=S;return S=this.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],P,0),x+=this.getLineLength(b.x,b.y,S.x,S.y)}return 0}getPointOnLine(h,g,d,f,x){var b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g,S=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d,w=(x-d)/(f-g+q),A=Math.sqrt(h*h/(1+w*w));f<g&&(A*=-1);var C=w*A,P=null;if(f===g)P={x:b,y:S+C};else if((S-d)/(b-g+q)===w)P={x:b+A,y:S+C};else{var E,N,_=this.getLineLength(g,d,f,x);if(_<q)return null;var M=(b-g)*(f-g)+(S-d)*(x-d);E=g+(M/=_*_)*(f-g),N=d+M*(x-d);var R=this.getLineLength(b,S,E,N),V=Math.sqrt(h*h-R*R);A=Math.sqrt(V*V/(1+w*w)),f<g&&(A*=-1),P={x:E+A,y:N+(C=w*A)}}return P}getPointOnPath(h){var g=this.getPathLength(),d=0,f=null;if(h<-5e-5||h-5e-5>g)return null;var{dataArray:x}=this;for(var b of x){if(!b||!(b.pathLength<5e-5||d+b.pathLength+5e-5<h)){var S=h-d,w=0;switch(b.type){case yt.LINE_TO:f=this.getPointOnLine(S,b.start.x,b.start.y,b.points[0],b.points[1],b.start.x,b.start.y);break;case yt.ARC:var A=b.points[4],C=b.points[5],P=b.points[4]+C;if(w=A+S/b.pathLength*C,C<0&&w<P||C>=0&&w>P)break;f=this.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],w,b.points[6]);break;case yt.CURVE_TO:(w=S/b.pathLength)>1&&(w=1),f=this.getPointOnCubicBezier(w,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3],b.points[4],b.points[5]);break;case yt.QUAD_TO:(w=S/b.pathLength)>1&&(w=1),f=this.getPointOnQuadraticBezier(w,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3])}if(f)return f;break}d+=b.pathLength}return null}getLineLength(h,g,d,f){return Math.sqrt((d-h)*(d-h)+(f-g)*(f-g))}getPathLength(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(((h,g)=>g.pathLength>0?h+g.pathLength:h),0)),this.pathLength}getPointOnCubicBezier(h,g,d,f,x,b,S,w,A){return{x:w*CB1(h)+b*CB2(h)+f*CB3(h)+g*CB4(h),y:A*CB1(h)+S*CB2(h)+x*CB3(h)+d*CB4(h)}}getPointOnQuadraticBezier(h,g,d,f,x,b,S){return{x:b*QB1(h)+f*QB2(h)+g*QB3(h),y:S*QB1(h)+x*QB2(h)+d*QB3(h)}}getPointOnEllipticalArc(h,g,d,f,x,b){var S=Math.cos(b),w=Math.sin(b),A=d*Math.cos(x),C=f*Math.sin(x);return{x:h+(A*S-C*w),y:g+(A*w+C*S)}}buildEquidistantCache(h,g){var d=this.getPathLength(),f=g||.25,x=h||d/100;if(!this.equidistantCache||this.equidistantCache.step!==x||this.equidistantCache.precision!==f){this.equidistantCache={step:x,precision:f,points:[]};for(var b=0,S=0;S<=d;S+=f){var w=this.getPointOnPath(S),A=this.getPointOnPath(S+f);w&&A&&((b+=this.getLineLength(w.x,w.y,A.x,A.y))>=x&&(this.equidistantCache.points.push({x:w.x,y:w.y,distance:S}),b-=x))}}}getEquidistantPointOnPath(h,g,d){if(this.buildEquidistantCache(g,d),h<0||h-this.getPathLength()>5e-5)return null;var f=Math.round(h/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[f]||null}}var qt=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class Gt extends vt{constructor(h,g,d){super(h,g,d),this.type="image",this.loaded=!1;var f=this.getHrefAttribute().getString();if(f){var x=f.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(f);h.images.push(this),x?this.loadSvg(f):this.loadImage(f),this.isSvg=x}}loadImage(h){var g=this;return(0,f.A)((function*(){try{var d=yield g.document.createImage(h);g.image=d}catch(g){console.error('Error while loading image "'.concat(h,'":'),g)}g.loaded=!0}))()}loadSvg(h){var g=this;return(0,f.A)((function*(){var d=qt.exec(h);if(d){var f=d[5];"base64"===d[4]?g.image=atob(f):g.image=decodeURIComponent(f)}else try{var x=yield g.document.fetch(h),b=yield x.text();g.image=b}catch(g){console.error('Error while loading image "'.concat(h,'":'),g)}g.loaded=!0}))()}renderChildren(h){var{document:g,image:d,loaded:f}=this,x=this.getAttribute("x").getPixels("x"),b=this.getAttribute("y").getPixels("y"),S=this.getStyle("width").getPixels("x"),w=this.getStyle("height").getPixels("y");if(f&&d&&S&&w){if(h.save(),h.translate(x,b),this.isSvg){var A=g.canvg.forkString(h,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:S,scaleHeight:w});A.document.documentElement.parent=this,A.render()}else{var C=this.image;g.setViewBox({ctx:h,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:S,desiredWidth:C.width,height:w,desiredHeight:C.height}),this.loaded&&(void 0===C.complete||C.complete)&&h.drawImage(C,0,0)}h.restore()}}getBoundingBox(){var h=this.getAttribute("x").getPixels("x"),g=this.getAttribute("y").getPixels("y"),d=this.getStyle("width").getPixels("x"),f=this.getStyle("height").getPixels("y");return new mt(h,g,h+d,g+f)}}class $t extends vt{constructor(){super(...arguments),this.type="symbol"}render(h){}}class Zt{constructor(h){this.document=h,this.loaded=!1,h.fonts.push(this)}load(h,g){var d=this;return(0,f.A)((function*(){try{var{document:f}=d,x=(yield f.canvg.parser.load(g)).getElementsByTagName("font");Array.from(x).forEach((g=>{var d=f.createElement(g);f.definitions[h]=d}))}catch(h){console.error('Error while loading font "'.concat(g,'":'),h)}d.loaded=!0}))()}}class Kt extends dt{constructor(h,g,d){super(h,g,d),this.type="style";var f=compressSpaces(Array.from(g.childNodes).map((h=>h.textContent)).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,""));f.split("}").forEach((g=>{var d=g.trim();if(d){var f=d.split("{"),x=f[0].split(","),b=f[1].split(";");x.forEach((g=>{var d=g.trim();if(d){var f=h.styles[d]||{};if(b.forEach((g=>{var d=g.indexOf(":"),x=g.substr(0,d).trim(),b=g.substr(d+1,g.length-d).trim();x&&b&&(f[x]=new G(h,x,b))})),h.styles[d]=f,h.stylesSpecificity[d]=getSelectorSpecificity(d),"@font-face"===d){var x=f["font-family"].getString().replace(/"|'/g,"");f.src.getString().split(",").forEach((g=>{if(g.indexOf('format("svg")')>0){var d=parseExternalUrl(g);d&&new Zt(h).load(x,d)}}))}}}))}}))}}Kt.parseExternalUrl=parseExternalUrl;class Jt extends vt{constructor(){super(...arguments),this.type="use"}setContext(h){super.setContext(h);var g=this.getAttribute("x"),d=this.getAttribute("y");g.hasValue()&&h.translate(g.getPixels("x"),0),d.hasValue()&&h.translate(0,d.getPixels("y"))}path(h){var{element:g}=this;g&&g.path(h)}renderChildren(h){var{document:g,element:d}=this;if(d){var f=d;if("symbol"===d.type&&((f=new At(g,null)).attributes.viewBox=new G(g,"viewBox",d.getAttribute("viewBox").getString()),f.attributes.preserveAspectRatio=new G(g,"preserveAspectRatio",d.getAttribute("preserveAspectRatio").getString()),f.attributes.overflow=new G(g,"overflow",d.getAttribute("overflow").getString()),f.children=d.children,d.styles.opacity=new G(g,"opacity",this.calculateOpacity())),"svg"===f.type){var x=this.getStyle("width",!1,!0),b=this.getStyle("height",!1,!0);x.hasValue()&&(f.attributes.width=new G(g,"width",x.getString())),b.hasValue()&&(f.attributes.height=new G(g,"height",b.getString()))}var S=f.parent;f.parent=this,f.render(h),f.parent=S}}getBoundingBox(h){var{element:g}=this;return g?g.getBoundingBox(h):null}elementTransform(){var{document:h,element:g}=this;return gt.fromElement(h,g)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function imGet(h,g,d,f,x,b){return h[d*f*4+4*g+b]}function imSet(h,g,d,f,x,b,S){h[d*f*4+4*g+b]=S}function index_es_m(h,g,d){return h[g]*d}function index_es_c(h,g,d,f){return g+Math.cos(h)*d+Math.sin(h)*f}class te extends dt{constructor(h,g,d){super(h,g,d),this.type="feColorMatrix";var f=toNumbers(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":var x=f[0];f=[.213+.787*x,.715-.715*x,.072-.072*x,0,0,.213-.213*x,.715+.285*x,.072-.072*x,0,0,.213-.213*x,.715-.715*x,.072+.928*x,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var b=f[0]*Math.PI/180;f=[index_es_c(b,.213,.787,-.213),index_es_c(b,.715,-.715,-.715),index_es_c(b,.072,-.072,.928),0,0,index_es_c(b,.213,-.213,.143),index_es_c(b,.715,.285,.14),index_es_c(b,.072,-.072,-.283),0,0,index_es_c(b,.213,-.213,-.787),index_es_c(b,.715,-.715,.715),index_es_c(b,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.matrix=f,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(h,g,d,f,x){for(var{includeOpacity:b,matrix:S}=this,w=h.getImageData(0,0,f,x),A=0;A<x;A++)for(var C=0;C<f;C++){var P=imGet(w.data,C,A,f,0,0),E=imGet(w.data,C,A,f,0,1),N=imGet(w.data,C,A,f,0,2),_=imGet(w.data,C,A,f,0,3),M=index_es_m(S,0,P)+index_es_m(S,1,E)+index_es_m(S,2,N)+index_es_m(S,3,_)+index_es_m(S,4,1),R=index_es_m(S,5,P)+index_es_m(S,6,E)+index_es_m(S,7,N)+index_es_m(S,8,_)+index_es_m(S,9,1),V=index_es_m(S,10,P)+index_es_m(S,11,E)+index_es_m(S,12,N)+index_es_m(S,13,_)+index_es_m(S,14,1),k=index_es_m(S,15,P)+index_es_m(S,16,E)+index_es_m(S,17,N)+index_es_m(S,18,_)+index_es_m(S,19,1);b&&(M=0,R=0,V=0,k*=_/255),imSet(w.data,C,A,f,0,0,M),imSet(w.data,C,A,f,0,1,R),imSet(w.data,C,A,f,0,2,V),imSet(w.data,C,A,f,0,3,k)}h.clearRect(0,0,f,x),h.putImageData(w,0,0)}}class ee extends dt{constructor(){super(...arguments),this.type="mask"}apply(h,g){var{document:d}=this,f=this.getAttribute("x").getPixels("x"),x=this.getAttribute("y").getPixels("y"),b=this.getStyle("width").getPixels("x"),S=this.getStyle("height").getPixels("y");if(!b&&!S){var w=new mt;this.children.forEach((g=>{w.addBoundingBox(g.getBoundingBox(h))})),f=Math.floor(w.x1),x=Math.floor(w.y1),b=Math.floor(w.width),S=Math.floor(w.height)}var A=this.removeStyles(g,ee.ignoreStyles),C=d.createCanvas(f+b,x+S),P=C.getContext("2d");d.screen.setDefaults(P),this.renderChildren(P),new te(d,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(P,0,0,f+b,x+S);var E=d.createCanvas(f+b,x+S),N=E.getContext("2d");d.screen.setDefaults(N),g.render(N),N.globalCompositeOperation="destination-in",N.fillStyle=P.createPattern(C,"no-repeat"),N.fillRect(0,0,f+b,x+S),h.fillStyle=N.createPattern(E,"no-repeat"),h.fillRect(0,0,f+b,x+S),this.restoreStyles(g,A)}render(h){}}ee.ignoreStyles=["mask","transform","clip-path"];var noop=()=>{};class re extends dt{constructor(){super(...arguments),this.type="clipPath"}apply(h){var{document:g}=this,d=Reflect.getPrototypeOf(h),{beginPath:f,closePath:x}=h;d&&(d.beginPath=noop,d.closePath=noop),Reflect.apply(f,h,[]),this.children.forEach((f=>{if(void 0!==f.path){var b=void 0!==f.elementTransform?f.elementTransform():null;b||(b=gt.fromElement(g,f)),b&&b.apply(h),f.path(h),d&&(d.closePath=x),b&&b.unapply(h)}})),Reflect.apply(x,h,[]),h.clip(),d&&(d.beginPath=f,d.closePath=x)}render(h){}}class ie extends dt{constructor(){super(...arguments),this.type="filter"}apply(h,g){var{document:d,children:f}=this,x=g.getBoundingBox(h);if(x){var b=0,S=0;f.forEach((h=>{var g=h.extraFilterDistance||0;b=Math.max(b,g),S=Math.max(S,g)}));var w=Math.floor(x.width),A=Math.floor(x.height),C=w+2*b,P=A+2*S;if(!(C<1||P<1)){var E=Math.floor(x.x),N=Math.floor(x.y),_=this.removeStyles(g,ie.ignoreStyles),M=d.createCanvas(C,P),R=M.getContext("2d");d.screen.setDefaults(R),R.translate(-E+b,-N+S),g.render(R),f.forEach((h=>{"function"==typeof h.apply&&h.apply(R,0,0,C,P)})),h.drawImage(M,0,0,C,P,E-b,N-S,C,P),this.restoreStyles(g,_)}}}render(h){}}ie.ignoreStyles=["filter","transform","clip-path"];class ne extends dt{constructor(h,g,d){super(h,g,d),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(h,g,d,f,x){}}class se extends dt{constructor(){super(...arguments),this.type="feMorphology"}apply(h,g,d,f,x){}}class ae extends dt{constructor(){super(...arguments),this.type="feComposite"}apply(h,g,d,f,x){}}class oe extends dt{constructor(h,g,d){super(h,g,d),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(h,g,d,f,x){var{document:b,blurRadius:S}=this,w=b.window?b.window.document.body:null,A=h.canvas;A.id=b.getUniqueId(),w&&(A.style.display="none",w.appendChild(A)),processCanvasRGBA(A,g,d,f,x,S),w&&w.removeChild(A)}}class he extends dt{constructor(){super(...arguments),this.type="title"}}class le extends dt{constructor(){super(...arguments),this.type="desc"}}var ue={svg:At,rect:Ct,circle:Ot,ellipse:Pt,line:Et,polyline:Nt,polygon:_t,path:xt,pattern:Mt,marker:Rt,defs:Vt,linearGradient:Dt,radialGradient:Lt,stop:Bt,animate:Ft,animateColor:zt,animateTransform:Ut,font:Ht,"font-face":jt,"missing-glyph":Xt,glyph:bt,text:St,tspan:wt,tref:Yt,a:Qt,textPath:Wt,image:Gt,g:kt,symbol:$t,style:Kt,use:Jt,mask:ee,clipPath:re,filter:ie,feDropShadow:ne,feMorphology:se,feComposite:ae,feColorMatrix:te,feGaussianBlur:oe,title:he,desc:le};function ownKeys$1(h,g){var d=Object.keys(h);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(h);g&&(f=f.filter((function(g){return Object.getOwnPropertyDescriptor(h,g).enumerable}))),d.push.apply(d,f)}return d}function _objectSpread$1(h){for(var g=1;g<arguments.length;g++){var d=null!=arguments[g]?arguments[g]:{};g%2?ownKeys$1(Object(d),!0).forEach((function(g){(0,x.A)(h,g,d[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(d)):ownKeys$1(Object(d)).forEach((function(g){Object.defineProperty(h,g,Object.getOwnPropertyDescriptor(d,g))}))}return h}function _createImage(){return _createImage=(0,f.A)((function*(h){var g=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=document.createElement("img");return g&&(d.crossOrigin="Anonymous"),new Promise(((g,f)=>{d.onload=()=>{g(d)},d.onerror=(h,g,d,x,b)=>{f(b)},d.src=h}))})),_createImage.apply(this,arguments)}class ce{constructor(h){var{rootEmSize:g=12,emSize:d=12,createCanvas:f=ce.createCanvas,createImage:x=ce.createImage,anonymousCrossOrigin:b}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canvg=h,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=h.screen,this.rootEmSize=g,this.emSize=d,this.createCanvas=f,this.createImage=this.bindCreateImage(x,b),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(h,g){return"boolean"==typeof g?(d,f)=>h(d,"boolean"==typeof f?f:g):h}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:h}=this;return h[h.length-1]}set emSize(h){var{emSizeStack:g}=this;g.push(h)}popEmSize(){var{emSizeStack:h}=this;h.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every((h=>h.loaded))}isFontsLoaded(){return this.fonts.every((h=>h.loaded))}createDocumentElement(h){var g=this.createElement(h.documentElement);return g.root=!0,g.addStylesFromStyleDefinition(),this.documentElement=g,g}createElement(h){var g=h.nodeName.replace(/^[^:]+:/,""),d=ce.elementTypes[g];return void 0!==d?new d(this,h):new pt(this,h)}createTextNode(h){return new Tt(this,h)}setViewBox(h){this.screen.setViewBox(_objectSpread$1({document:this},h))}}function ownKeys(h,g){var d=Object.keys(h);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(h);g&&(f=f.filter((function(g){return Object.getOwnPropertyDescriptor(h,g).enumerable}))),d.push.apply(d,f)}return d}function _objectSpread(h){for(var g=1;g<arguments.length;g++){var d=null!=arguments[g]?arguments[g]:{};g%2?ownKeys(Object(d),!0).forEach((function(g){(0,x.A)(h,g,d[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(d)):ownKeys(Object(d)).forEach((function(g){Object.defineProperty(h,g,Object.getOwnPropertyDescriptor(d,g))}))}return h}ce.createCanvas=function createCanvas(h,g){var d=document.createElement("canvas");return d.width=h,d.height=g,d},ce.createImage=function createImage(h){return _createImage.apply(this,arguments)},ce.elementTypes=ue;class ge{constructor(h,g){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.parser=new nt(d),this.screen=new et(h,d),this.options=d;var f=new ce(this,d),x=f.createDocumentElement(g);this.document=f,this.documentElement=x}static from(h,g){var d=arguments;return(0,f.A)((function*(){var f=d.length>2&&void 0!==d[2]?d[2]:{},x=new nt(f),b=yield x.parse(g);return new ge(h,b,f)}))()}static fromString(h,g){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=new nt(d).parseFromString(g);return new ge(h,f,d)}fork(h,g){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ge.from(h,g,_objectSpread(_objectSpread({},this.options),d))}forkString(h,g){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ge.fromString(h,g,_objectSpread(_objectSpread({},this.options),d))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var h=arguments,g=this;return(0,f.A)((function*(){var d=h.length>0&&void 0!==h[0]?h[0]:{};g.start(_objectSpread({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},d)),yield g.ready(),g.stop()}))()}start(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{documentElement:g,screen:d,options:f}=this;d.start(g,_objectSpread(_objectSpread({enableRedraw:!0},f),h))}stop(){this.screen.stop()}resize(h){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(h,g,d)}}}}]);