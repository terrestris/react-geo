!function($){var tt={};function r(et){if(tt[et])return tt[et].exports;var nt=tt[et]={i:et,l:!1,exports:{}};return $[et].call(nt.exports,nt,nt.exports,r),nt.l=!0,nt.exports}r.m=$,r.c=tt,r.d=function($,tt,et){r.o($,tt)||Object.defineProperty($,tt,{enumerable:!0,get:et})},r.r=function($){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},r.t=function($,tt){if(1&tt&&($=r($)),8&tt)return $;if(4&tt&&"object"==typeof $&&$&&$.__esModule)return $;var et=Object.create(null);if(r.r(et),Object.defineProperty(et,"default",{enumerable:!0,value:$}),2&tt&&"string"!=typeof $)for(var nt in $)r.d(et,nt,function(tt){return $[tt]}.bind(null,nt));return et},r.n=function($){var tt=$&&$.__esModule?function(){return $.default}:function(){return $};return r.d(tt,"a",tt),tt},r.o=function($,tt){return Object.prototype.hasOwnProperty.call($,tt)},r.p="",r(r.s=312)}([function($,tt,et){"use strict";et.d(tt,"b",(function(){return a})),et.d(tt,"c",(function(){return s})),et.d(tt,"d",(function(){return u})),et.d(tt,"e",(function(){return c})),et.d(tt,"f",(function(){return h})),et.d(tt,"g",(function(){return l})),et.d(tt,"h",(function(){return p})),et.d(tt,"i",(function(){return f})),et.d(tt,"j",(function(){return d})),et.d(tt,"k",(function(){return y})),et.d(tt,"l",(function(){return g})),et.d(tt,"m",(function(){return v})),et.d(tt,"n",(function(){return _})),et.d(tt,"o",(function(){return m})),et.d(tt,"p",(function(){return b})),et.d(tt,"q",(function(){return O})),et.d(tt,"r",(function(){return x})),et.d(tt,"s",(function(){return S})),et.d(tt,"t",(function(){return M})),et.d(tt,"u",(function(){return j})),et.d(tt,"v",(function(){return C})),et.d(tt,"w",(function(){return R})),et.d(tt,"x",(function(){return P})),et.d(tt,"y",(function(){return I})),et.d(tt,"z",(function(){return T})),et.d(tt,"A",(function(){return A})),et.d(tt,"B",(function(){return L})),et.d(tt,"C",(function(){return F})),et.d(tt,"D",(function(){return N})),et.d(tt,"E",(function(){return k})),et.d(tt,"F",(function(){return D})),et.d(tt,"H",(function(){return G})),et.d(tt,"I",(function(){return z})),et.d(tt,"J",(function(){return U})),et.d(tt,"G",(function(){return Y})),et.d(tt,"a",(function(){return B})),et.d(tt,"K",(function(){return W}));var nt=et(69),rt=et(24),it=et(9);function a($){for(var tt=[1/0,1/0,-1/0,-1/0],et=0,nt=$.length;et<nt;++et)x(tt,$[et]);return tt}function s($,tt,et){return et?(et[0]=$[0]-tt,et[1]=$[1]-tt,et[2]=$[2]+tt,et[3]=$[3]+tt,et):[$[0]-tt,$[1]-tt,$[2]+tt,$[3]+tt]}function u($,tt){return tt?(tt[0]=$[0],tt[1]=$[1],tt[2]=$[2],tt[3]=$[3],tt):$.slice()}function c($,tt,et){var nt,rt;return(nt=tt<$[0]?$[0]-tt:$[2]<tt?tt-$[2]:0)*nt+(rt=et<$[1]?$[1]-et:$[3]<et?et-$[3]:0)*rt}function h($,tt){return p($,tt[0],tt[1])}function l($,tt){return $[0]<=tt[0]&&tt[2]<=$[2]&&$[1]<=tt[1]&&tt[3]<=$[3]}function p($,tt,et){return $[0]<=tt&&tt<=$[2]&&$[1]<=et&&et<=$[3]}function f($,tt){var et=$[0],nt=$[1],it=$[2],ot=$[3],at=tt[0],Ot=tt[1],wt=rt.a.UNKNOWN;return at<et?wt|=rt.a.LEFT:at>it&&(wt|=rt.a.RIGHT),Ot<nt?wt|=rt.a.BELOW:Ot>ot&&(wt|=rt.a.ABOVE),wt===rt.a.UNKNOWN&&(wt=rt.a.INTERSECTING),wt}function d(){return[1/0,1/0,-1/0,-1/0]}function y($,tt,et,nt,rt){return rt?(rt[0]=$,rt[1]=tt,rt[2]=et,rt[3]=nt,rt):[$,tt,et,nt]}function g($){return y(1/0,1/0,-1/0,-1/0,$)}function v($,tt){var et=$[0],nt=$[1];return y(et,nt,et,nt,tt)}function _($,tt){return w(g(tt),$)}function m($,tt,et,nt,rt){return S(g(rt),$,tt,et,nt)}function b($,tt){return $[0]==tt[0]&&$[2]==tt[2]&&$[1]==tt[1]&&$[3]==tt[3]}function O($,tt){return tt[0]<$[0]&&($[0]=tt[0]),tt[2]>$[2]&&($[2]=tt[2]),tt[1]<$[1]&&($[1]=tt[1]),tt[3]>$[3]&&($[3]=tt[3]),$}function x($,tt){tt[0]<$[0]&&($[0]=tt[0]),tt[0]>$[2]&&($[2]=tt[0]),tt[1]<$[1]&&($[1]=tt[1]),tt[1]>$[3]&&($[3]=tt[1])}function w($,tt){for(var et=0,nt=tt.length;et<nt;++et)x($,tt[et]);return $}function S($,tt,et,nt,rt){for(;et<nt;et+=rt)E($,tt[et],tt[et+1]);return $}function E($,tt,et){$[0]=Math.min($[0],tt),$[1]=Math.min($[1],et),$[2]=Math.max($[2],tt),$[3]=Math.max($[3],et)}function M($,tt){var et;return(et=tt(C($)))||(et=tt(R($)))||(et=tt(N($)))?et:(et=tt(F($)))||!1}function j($){var tt=0;return G($)||(tt=k($)*A($)),tt}function C($){return[$[0],$[1]]}function R($){return[$[2],$[1]]}function P($){return[($[0]+$[2])/2,($[1]+$[3])/2]}function I($,tt){var et;return tt===nt.a.BOTTOM_LEFT?et=C($):tt===nt.a.BOTTOM_RIGHT?et=R($):tt===nt.a.TOP_LEFT?et=F($):tt===nt.a.TOP_RIGHT?et=N($):Object(it.a)(!1,13),et}function T($,tt,et,nt,rt){var it=tt*nt[0]/2,ot=tt*nt[1]/2,at=Math.cos(et),Ot=Math.sin(et),wt=it*at,St=it*Ot,Ct=ot*at,Rt=ot*Ot,Tt=$[0],At=$[1],Nt=Tt-wt+Rt,kt=Tt-wt-Rt,Dt=Tt+wt-Rt,Gt=Tt+wt+Rt,Ut=At-St-Ct,Xt=At-St+Ct,Vt=At+St+Ct,Jt=At+St-Ct;return y(Math.min(Nt,kt,Dt,Gt),Math.min(Ut,Xt,Vt,Jt),Math.max(Nt,kt,Dt,Gt),Math.max(Ut,Xt,Vt,Jt),rt)}function A($){return $[3]-$[1]}function L($,tt,et){var nt=et||[1/0,1/0,-1/0,-1/0];return D($,tt)?($[0]>tt[0]?nt[0]=$[0]:nt[0]=tt[0],$[1]>tt[1]?nt[1]=$[1]:nt[1]=tt[1],$[2]<tt[2]?nt[2]=$[2]:nt[2]=tt[2],$[3]<tt[3]?nt[3]=$[3]:nt[3]=tt[3]):g(nt),nt}function F($){return[$[0],$[3]]}function N($){return[$[2],$[3]]}function k($){return $[2]-$[0]}function D($,tt){return $[0]<=tt[2]&&$[2]>=tt[0]&&$[1]<=tt[3]&&$[3]>=tt[1]}function G($){return $[2]<$[0]||$[3]<$[1]}function z($,tt){return tt?(tt[0]=$[0],tt[1]=$[1],tt[2]=$[2],tt[3]=$[3],tt):$}function U($,tt){var et=($[2]-$[0])/2*(tt-1),nt=($[3]-$[1])/2*(tt-1);$[0]-=et,$[2]+=et,$[1]-=nt,$[3]+=nt}function Y($,tt,et){var nt=!1,it=f($,tt),ot=f($,et);if(it===rt.a.INTERSECTING||ot===rt.a.INTERSECTING)nt=!0;else{var at=$[0],Ot=$[1],wt=$[2],St=$[3],Ct=tt[0],Rt=tt[1],Tt=et[0],At=et[1],Nt=(At-Rt)/(Tt-Ct),kt=void 0,Dt=void 0;ot&rt.a.ABOVE&&!(it&rt.a.ABOVE)&&(nt=(kt=Tt-(At-St)/Nt)>=at&&kt<=wt),nt||!(ot&rt.a.RIGHT)||it&rt.a.RIGHT||(nt=(Dt=At-(Tt-wt)*Nt)>=Ot&&Dt<=St),nt||!(ot&rt.a.BELOW)||it&rt.a.BELOW||(nt=(kt=Tt-(At-Ot)/Nt)>=at&&kt<=wt),nt||!(ot&rt.a.LEFT)||it&rt.a.LEFT||(nt=(Dt=At-(Tt-at)*Nt)>=Ot&&Dt<=St)}return nt}function B($,tt,et,nt){var rt=[];if(nt>1)for(var it=$[2]-$[0],ot=$[3]-$[1],at=0;at<nt;++at)rt.push($[0]+it*at/nt,$[1],$[2],$[1]+ot*at/nt,$[2]-it*at/nt,$[3],$[0],$[3]-ot*at/nt);else rt=[$[0],$[1],$[2],$[1],$[2],$[3],$[0],$[3]];tt(rt,rt,2);for(var Ot=[],wt=[],St=(at=0,rt.length);at<St;at+=2)Ot.push(rt[at]),wt.push(rt[at+1]);return function($,tt,et){return y(Math.min.apply(null,$),Math.min.apply(null,tt),Math.max.apply(null,$),Math.max.apply(null,tt),et)}(Ot,wt,et)}function W($,tt){var et=tt.getExtent(),nt=P($);if(tt.canWrapX()&&(nt[0]<et[0]||nt[0]>=et[2])){var rt=k(et),it=Math.floor((nt[0]-et[0])/rt)*rt;$[0]-=it,$[2]-=it}return $}},function($,tt,et){"use strict";et.d(tt,"a",(function(){return rt.METERS_PER_UNIT})),et.d(tt,"d",(function(){return C})),et.d(tt,"k",(function(){return R})),et.d(tt,"l",(function(){return P})),et.d(tt,"c",(function(){return I})),et.d(tt,"e",(function(){return T})),et.d(tt,"b",(function(){return L})),et.d(tt,"h",(function(){return F})),et.d(tt,"g",(function(){return N})),et.d(tt,"n",(function(){return k})),et.d(tt,"m",(function(){return D})),et.d(tt,"r",(function(){return G})),et.d(tt,"s",(function(){return z})),et.d(tt,"o",(function(){return X})),et.d(tt,"p",(function(){return q})),et.d(tt,"i",(function(){return V})),et.d(tt,"q",(function(){return Z})),et.d(tt,"j",(function(){return K})),et.d(tt,"f",(function(){return H}));var nt,rt=et(19),it=et(61),ot=et(5),at=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Ot=6378137*Math.PI,wt=[-Ot,-Ot,Ot,Ot],St=[-180,-85,180,85],Ct=6378137*Math.log(Math.tan(Math.PI/2)),Rt=function($){function e(tt){return $.call(this,{code:tt,units:rt.default.METERS,extent:wt,global:!0,worldExtent:St,getPointResolution:function($,tt){return $/Object(ot.b)(tt[1]/6378137)}})||this}return at(e,$),e}(it.a),Tt=[new Rt("EPSG:3857"),new Rt("EPSG:102100"),new Rt("EPSG:102113"),new Rt("EPSG:900913"),new Rt("http://www.opengis.net/gml/srs/epsg.xml#3857")];var At=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Nt=[-180,-90,180,90],kt=6378137*Math.PI/180,Dt=function($){function e(tt,et){return $.call(this,{code:tt,units:rt.default.DEGREES,extent:Nt,axisOrientation:et,global:!0,metersPerUnit:kt,worldExtent:Nt})||this}return At(e,$),e}(it.a),Gt=[new Dt("CRS:84"),new Dt("EPSG:4326","neu"),new Dt("urn:ogc:def:crs:OGC:1.3:CRS84"),new Dt("urn:ogc:def:crs:OGC:2:84"),new Dt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")],Ut={},Xt=et(49),Vt=et(0),Jt=et(88),ne=et(26);function M($,tt,et){var nt;if(void 0!==tt){for(var rt=0,it=$.length;rt<it;++rt)tt[rt]=$[rt];nt=tt}else nt=$.slice();return nt}function j($,tt,et){if(void 0!==tt&&$!==tt){for(var nt=0,rt=$.length;nt<rt;++nt)tt[nt]=$[nt];$=tt}return $}function C($){!function($,tt){Ut[$]=tt}($.getCode(),$),Object(Xt.a)($,$,M)}function R($){return"string"==typeof $?Ut[tt=$]||Ut[tt.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:$||null;var tt}function P($,tt,et,nt){var it,ot=($=R($)).getPointResolutionFunc();if(ot)it=ot(tt,et),nt&&nt!==$.getUnits()&&(Ot=$.getMetersPerUnit())&&(it=it*Ot/rt.METERS_PER_UNIT[nt]);else{var at=$.getUnits();if(at==rt.default.DEGREES&&!nt||nt==rt.default.DEGREES)it=tt;else{var Ot,wt=k($,R("EPSG:4326"));if(wt===j&&at!==rt.default.DEGREES)it=tt*$.getMetersPerUnit();else{var St=[et[0]-tt/2,et[1],et[0]+tt/2,et[1],et[0],et[1]-tt/2,et[0],et[1]+tt/2];St=wt(St,St,2),it=(Object(Jt.a)(St.slice(0,2),St.slice(2,4))+Object(Jt.a)(St.slice(4,6),St.slice(6,8)))/2}void 0!==(Ot=nt?rt.METERS_PER_UNIT[nt]:$.getMetersPerUnit())&&(it/=Ot)}}return it}function I($){!function($){$.forEach(C)}($),$.forEach((function(tt){$.forEach((function($){tt!==$&&Object(Xt.a)(tt,$,M)}))}))}function T($,tt){return $?"string"==typeof $?R($):$:R(tt)}function A($){return function(tt,et,nt){for(var rt=tt.length,it=void 0!==nt?nt:2,ot=void 0!==et?et:new Array(rt),at=0;at<rt;at+=it){var Ot=$([tt[at],tt[at+1]]);ot[at]=Ot[0],ot[at+1]=Ot[1];for(var wt=it-1;wt>=2;--wt)ot[at+wt]=tt[at+wt]}return ot}}function L($,tt,et,nt){var rt=R($),it=R(tt);Object(Xt.a)(rt,it,A(et)),Object(Xt.a)(it,rt,A(nt))}function F($,tt){return G($,"EPSG:4326",void 0!==tt?tt:"EPSG:3857")}function N($,tt){if($===tt)return!0;var et=$.getUnits()===tt.getUnits();return($.getCode()===tt.getCode()||k($,tt)===M)&&et}function k($,tt){var et=$.getCode(),nt=tt.getCode(),rt=Object(Xt.c)(et,nt);return rt||(rt=j),rt}function D($,tt){return k(R($),R(tt))}function G($,tt,et){return D(tt,et)($,void 0,$.length)}function z($,tt,et,nt){var rt=D(tt,et);return Object(Vt.a)($,rt,void 0,nt)}var re,ie,oe,ae=null;function X(){return ae}function q($,tt){return $}function V($,tt){return $}function Z($,tt){return $}function K($,tt){return $}function H($,tt,et){return function(nt){var rt,it,at=nt[0],Ot=nt[1];if($.canWrapX()){var wt=$.getExtent(),St=Object(Vt.E)(wt);(it=Object(ne.c)(nt,$,St))&&(at-=it*St),at=Object(ot.a)(at,wt[0],wt[2]),Ot=Object(ot.a)(Ot,wt[1],wt[3]),rt=et([at,Ot])}else rt=et(nt);return it&&tt.canWrapX()&&(rt[0]+=it*Object(Vt.E)(tt.getExtent())),rt}}I(Tt),I(Gt),re=Tt,ie=function d($,tt,et){var nt=$.length,rt=et>1?et:2,it=tt;void 0===it&&(it=rt>2?$.slice():new Array(nt));for(var ot=0;ot<nt;ot+=rt){it[ot]=Ot*$[ot]/180;var at=6378137*Math.log(Math.tan(Math.PI*(+$[ot+1]+90)/360));at>Ct?at=Ct:at<-Ct&&(at=-Ct),it[ot+1]=at}return it},oe=function y($,tt,et){var nt=$.length,rt=et>1?et:2,it=tt;void 0===it&&(it=rt>2?$.slice():new Array(nt));for(var ot=0;ot<nt;ot+=rt)it[ot]=180*$[ot]/Ot,it[ot+1]=360*Math.atan(Math.exp($[ot+1]/6378137))/Math.PI-90;return it},Gt.forEach((function($){re.forEach((function(tt){Object(Xt.a)($,tt,ie),Object(Xt.a)(tt,$,oe)}))}))},function($,tt,et){"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}et.d(tt,"b",(function(){return n})),et.d(tt,"c",(function(){return o})),et.d(tt,"a",(function(){return rt}));var nt=0;function o($){return $.ol_uid||($.ol_uid=String(++nt))}var rt="6.5.0"},function($,tt,et){"use strict";tt.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function($,tt,et){"use strict";et.d(tt,"a",(function(){return nt})),et.d(tt,"b",(function(){return i})),et.d(tt,"c",(function(){return rt})),et.d(tt,"d",(function(){return a}));var nt="function"==typeof Object.assign?Object.assign:function($,tt){if(null==$)throw new TypeError("Cannot convert undefined or null to object");for(var et=Object($),nt=1,rt=arguments.length;nt<rt;++nt){var it=arguments[nt];if(null!=it)for(var ot in it)it.hasOwnProperty(ot)&&(et[ot]=it[ot])}return et};function i($){for(var tt in $)delete $[tt]}var rt="function"==typeof Object.values?Object.values:function($){var tt=[];for(var et in $)tt.push($[et]);return tt};function a($){var tt;for(tt in $)return!1;return!tt}},function($,tt,et){"use strict";function n($,tt,et){return Math.min(Math.max($,tt),et)}et.d(tt,"a",(function(){return n})),et.d(tt,"b",(function(){return nt})),et.d(tt,"d",(function(){return rt})),et.d(tt,"h",(function(){return a})),et.d(tt,"g",(function(){return s})),et.d(tt,"f",(function(){return u})),et.d(tt,"i",(function(){return c})),et.d(tt,"j",(function(){return h})),et.d(tt,"e",(function(){return l})),et.d(tt,"c",(function(){return p}));var nt="cosh"in Math?Math.cosh:function($){var tt=Math.exp($);return(tt+1/tt)/2},rt="log2"in Math?Math.log2:function($){return Math.log($)*Math.LOG2E};function a($,tt,et,nt,rt,it){var ot=rt-et,at=it-nt;if(0!==ot||0!==at){var Ot=(($-et)*ot+(tt-nt)*at)/(ot*ot+at*at);Ot>1?(et=rt,nt=it):Ot>0&&(et+=ot*Ot,nt+=at*Ot)}return s($,tt,et,nt)}function s($,tt,et,nt){var rt=et-$,it=nt-tt;return rt*rt+it*it}function u($){for(var tt=$.length,et=0;et<tt;et++){for(var nt=et,rt=Math.abs($[et][et]),it=et+1;it<tt;it++){var ot=Math.abs($[it][et]);ot>rt&&(rt=ot,nt=it)}if(0===rt)return null;var at=$[nt];$[nt]=$[et],$[et]=at;for(var Ot=et+1;Ot<tt;Ot++)for(var wt=-$[Ot][et]/$[et][et],St=et;St<tt+1;St++)et==St?$[Ot][St]=0:$[Ot][St]+=wt*$[et][St]}for(var Ct=new Array(tt),Rt=tt-1;Rt>=0;Rt--){Ct[Rt]=$[Rt][tt]/$[Rt][Rt];for(var Tt=Rt-1;Tt>=0;Tt--)$[Tt][tt]-=$[Tt][Rt]*Ct[Rt]}return Ct}function c($){return 180*$/Math.PI}function h($){return $*Math.PI/180}function l($,tt){var et=$%tt;return et*tt<0?et+tt:et}function p($,tt,et){return $+et*(tt-$)}},function($,tt,et){"use strict";et.d(tt,"d",(function(){return St})),et.d(tt,"c",(function(){return Ct})),et.d(tt,"e",(function(){return Rt})),et.d(tt,"f",(function(){return Tt})),et.d(tt,"g",(function(){return At})),et.d(tt,"h",(function(){return Nt})),et.d(tt,"j",(function(){return kt})),et.d(tt,"l",(function(){return Dt})),et.d(tt,"m",(function(){return Gt})),et.d(tt,"n",(function(){return Ut})),et.d(tt,"k",(function(){return Xt})),et.d(tt,"i",(function(){return Vt})),et.d(tt,"a",(function(){return Jt})),et.d(tt,"s",(function(){return ae})),et.d(tt,"q",(function(){return C})),et.d(tt,"p",(function(){return I})),et.d(tt,"r",(function(){return T})),et.d(tt,"t",(function(){return A})),et.d(tt,"o",(function(){return L})),et.d(tt,"b",(function(){return N}));var nt=et(17),rt=et(43),it=et(21),ot=et(4),at=et(14),Ot=et(23),wt=et(11),St="10px sans-serif",Ct="#000",Rt="round",Tt=[],At=0,Nt="round",kt=10,Dt="#000",Gt="center",Ut="middle",Xt=[0,0,0,0],Vt=1,Jt=new nt.a;(new rt.a).setSize=function(){console.warn("labelCache is deprecated.")};var ne,re,ie=null,oe={},ae=function(){var $,tt,et=["monospace","serif"],nt=et.length,rt="wmytzilWMYTZIL@#/&?$%10";function o($,it,ot){for(var at=!0,Ot=0;Ot<nt;++Ot){var wt=et[Ot];if(tt=P($+" "+it+" 32px "+wt,rt),ot!=wt){var St=P($+" "+it+" 32px "+ot+","+wt,rt);at=at&&St!=tt}}return!!at}function s(){for(var tt=!0,et=Jt.getKeys(),nt=0,rt=et.length;nt<rt;++nt){var it=et[nt];Jt.get(it)<100&&(o.apply(this,it.split("\n"))?(Object(ot.b)(oe),ie=null,ne=void 0,Jt.set(it,100)):(Jt.set(it,Jt.get(it)+1,!0),tt=!1))}tt&&(clearInterval($),$=void 0)}return function(tt){var et=Object(Ot.e)(tt);if(et)for(var nt=et.families,rt=0,it=nt.length;rt<it;++rt){var ot=nt[rt],at=et.style+"\n"+et.weight+"\n"+ot;void 0===Jt.get(at)&&(Jt.set(at,100,!0),o(et.style,et.weight,ot)||(Jt.set(at,0,!0),void 0===$&&($=setInterval(s,32))))}}}(),C=function($){var tt=oe[$];if(null==tt){if(it.g){var et=Object(Ot.e)($),nt=R($,"Žg");tt=(isNaN(Number(et.lineHeight))?1.2:Number(et.lineHeight))*(nt.actualBoundingBoxAscent+nt.actualBoundingBoxDescent)}else re||((re=document.createElement("div")).innerHTML="M",re.style.margin="0 !important",re.style.padding="0 !important",re.style.position="absolute !important",re.style.left="-99999px !important"),re.style.font=$,document.body.appendChild(re),tt=re.offsetHeight,document.body.removeChild(re);oe[$]=tt}return tt};function R($,tt){return ie||(ie=Object(at.a)(1,1)),$!=ne&&(ie.font=$,ne=ie.font),ie.measureText(tt)}function P($,tt){return R($,tt).width}function I($,tt,et){if(tt in et)return et[tt];var nt=P($,tt);return et[tt]=nt,nt}function T($,tt,et){for(var nt=tt.length,rt=0,it=0;it<nt;++it){var ot=P($,tt[it]);rt=Math.max(rt,ot),et.push(ot)}return rt}function A($,tt,et,nt){0!==tt&&($.translate(et,nt),$.rotate(tt),$.translate(-et,-nt))}function L($,tt,et,nt,rt,it,ot,at,Ot,wt,St){$.save(),1!==et&&($.globalAlpha*=et),tt&&$.setTransform.apply($,tt),nt.contextInstructions?($.translate(Ot,wt),$.scale(St[0],St[1]),function($,tt){for(var et=$.contextInstructions,nt=0,rt=et.length;nt<rt;nt+=2)Array.isArray(et[nt+1])?tt[et[nt]].apply(tt,et[nt+1]):tt[et[nt]]=et[nt+1]}(nt,$)):St[0]<0||St[1]<0?($.translate(Ot,wt),$.scale(St[0],St[1]),$.drawImage(nt,rt,it,ot,at,0,0,ot,at)):$.drawImage(nt,rt,it,ot,at,Ot,wt,ot*St[0],at*St[1]),$.restore()}var fe=null;function N($){return it.g?Object(wt.g)($):(fe||(fe=Object(at.a)(1,1).canvas),fe.style.transform=Object(wt.g)($),fe.style.transform)}},function($,tt,et){"use strict";et.d(tt,"a",(function(){return i})),et.d(tt,"b",(function(){return o})),et.d(tt,"c",(function(){return a}));var nt=et(4);function i($,tt,et,nt,rt){if(nt&&nt!==$&&(et=et.bind(nt)),rt){var it=et;et=function(){$.removeEventListener(tt,et),it.apply(this,arguments)}}var ot={target:$,type:tt,listener:et};return $.addEventListener(tt,et),ot}function o($,tt,et,nt){return i($,tt,et,nt,!0)}function a($){$&&$.target&&($.target.removeEventListener($.type,$.listener),Object(nt.b)($))}},function($,tt,et){"use strict";tt.a={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},function($,tt,et){"use strict";et.d(tt,"a",(function(){return i}));var nt=et(101);function i($,tt){if(!$)throw new nt.a(tt)}},function($,tt,et){"use strict";function n($,tt,et){for(var nt,rt,it=et||i,ot=0,at=$.length,Ot=!1;ot<at;)(rt=+it($[nt=ot+(at-ot>>1)],tt))<0?ot=nt+1:(at=nt,Ot=!rt);return Ot?ot:~ot}function i($,tt){return $>tt?1:$<tt?-1:0}function o($,tt){return $.indexOf(tt)>=0}function a($,tt,et){var nt=$.length;if($[0]<=tt)return 0;if(tt<=$[nt-1])return nt-1;var rt=void 0;if(et>0){for(rt=1;rt<nt;++rt)if($[rt]<tt)return rt-1}else if(et<0){for(rt=1;rt<nt;++rt)if($[rt]<=tt)return rt}else for(rt=1;rt<nt;++rt){if($[rt]==tt)return rt;if($[rt]<tt)return $[rt-1]-tt<tt-$[rt]?rt-1:rt}return nt-1}function s($,tt,et){for(;tt<et;){var nt=$[tt];$[tt]=$[et],$[et]=nt,++tt,--et}}function u($,tt){for(var et=Array.isArray(tt)?tt:[tt],nt=et.length,rt=0;rt<nt;rt++)$[$.length]=et[rt]}function c($,tt){for(var et,nt=$.length>>>0,rt=0;rt<nt;rt++)if(tt(et=$[rt],rt,$))return et;return null}function h($,tt){var et=$.length;if(et!==tt.length)return!1;for(var nt=0;nt<et;nt++)if($[nt]!==tt[nt])return!1;return!0}function l($,tt){var et;return $.every((function(nt,rt){return et=rt,!tt(nt,rt,$)}))?-1:et}function p($,tt,et){var nt=tt||i;return $.every((function(tt,rt){if(0===rt)return!0;var it=nt($[rt-1],tt);return!(it>0||et&&0===it)}))}et.d(tt,"a",(function(){return n})),et.d(tt,"i",(function(){return i})),et.d(tt,"f",(function(){return o})),et.d(tt,"h",(function(){return a})),et.d(tt,"j",(function(){return s})),et.d(tt,"c",(function(){return u})),et.d(tt,"d",(function(){return c})),et.d(tt,"b",(function(){return h})),et.d(tt,"e",(function(){return l})),et.d(tt,"g",(function(){return p}))},function($,tt,et){"use strict";et.d(tt,"c",(function(){return i})),et.d(tt,"f",(function(){return a})),et.d(tt,"a",(function(){return s})),et.d(tt,"e",(function(){return u})),et.d(tt,"b",(function(){return c})),et.d(tt,"d",(function(){return h})),et.d(tt,"g",(function(){return l}));var nt=et(9);function i(){return[1,0,0,1,0,0]}function o($,tt,et,nt,rt,it,ot){return $[0]=tt,$[1]=et,$[2]=nt,$[3]=rt,$[4]=it,$[5]=ot,$}function a($,tt){return $[0]=tt[0],$[1]=tt[1],$[2]=tt[2],$[3]=tt[3],$[4]=tt[4],$[5]=tt[5],$}function s($,tt){var et=tt[0],nt=tt[1];return tt[0]=$[0]*et+$[2]*nt+$[4],tt[1]=$[1]*et+$[3]*nt+$[5],tt}function u($,tt,et){return o($,tt,0,0,et,0,0)}function c($,tt,et,nt,rt,it,ot,at){var Ot=Math.sin(it),wt=Math.cos(it);return $[0]=nt*wt,$[1]=rt*Ot,$[2]=-nt*Ot,$[3]=rt*wt,$[4]=ot*nt*wt-at*nt*Ot+tt,$[5]=ot*rt*Ot+at*rt*wt+et,$}function h($,tt){var et,rt=(et=tt)[0]*et[3]-et[1]*et[2];Object(nt.a)(0!==rt,32);var it=tt[0],ot=tt[1],at=tt[2],Ot=tt[3],wt=tt[4],St=tt[5];return $[0]=Ot/rt,$[1]=-ot/rt,$[2]=-at/rt,$[3]=it/rt,$[4]=(at*St-Ot*wt)/rt,$[5]=-(it*St-ot*wt)/rt,$}function l($){return"matrix("+$.join(", ")+")"}new Array(6)},function($,tt,et){"use strict";tt.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function($,tt,et){"use strict";tt.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function($,tt,et){"use strict";et.d(tt,"a",(function(){return i})),et.d(tt,"e",(function(){return o})),et.d(tt,"c",(function(){return a})),et.d(tt,"b",(function(){return s})),et.d(tt,"d",(function(){return u}));var nt=et(21);function i($,tt,et){var rt=et&&et.length?et.shift():nt.g?new OffscreenCanvas($||300,tt||300):document.createElement("canvas");return $&&(rt.width=$),tt&&(rt.height=tt),rt.getContext("2d")}function o($,tt){var et=tt.parentNode;et&&et.replaceChild($,tt)}function a($){return $&&$.parentNode?$.parentNode.removeChild($):null}function s($){for(;$.lastChild;)$.removeChild($.lastChild)}function u($,tt){for(var et=$.childNodes,nt=0;;++nt){var rt=et[nt],it=tt[nt];if(!rt&&!it)break;rt!==it&&(rt?it?$.insertBefore(it,rt):($.removeChild(rt),--nt):$.appendChild(it))}}},function($,tt,et){"use strict";tt.a={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function($,tt,et){"use strict";et.d(tt,"b",(function(){return i})),et.d(tt,"a",(function(){return o})),et.d(tt,"c",(function(){return a})),et.d(tt,"d",(function(){return s}));var nt=et(10);function i(){return!0}function o(){return!1}function a(){}function s($){var tt,et,rt,it=!1;return function(){var ot=Array.prototype.slice.call(arguments);return it&&this===rt&&Object(nt.b)(ot,et)||(it=!0,rt=this,et=ot,tt=$.apply(this,arguments)),tt}}},function($,tt,et){"use strict";et.d(tt,"b",(function(){return f}));var nt,rt=et(25),it=et(45),ot=et(104),at=et(4),Ot=et(2),wt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),St=function($){function e(tt,et,nt){var rt=$.call(this,tt)||this;return rt.key=et,rt.oldValue=nt,rt}return wt(e,$),e}(rt.a),Ct=function($){function e(tt){var et=$.call(this)||this;return Object(Ot.c)(et),et.values_=null,void 0!==tt&&et.setProperties(tt),et}return wt(e,$),e.prototype.get=function($){var tt;return this.values_&&this.values_.hasOwnProperty($)&&(tt=this.values_[$]),tt},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Object(at.a)({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function($,tt){var et;et=f($),this.dispatchEvent(new St(et,$,tt)),et=it.a.PROPERTYCHANGE,this.dispatchEvent(new St(et,$,tt))},e.prototype.set=function($,tt,et){var nt=this.values_||(this.values_={});if(et)nt[$]=tt;else{var rt=nt[$];nt[$]=tt,rt!==tt&&this.notify($,rt)}},e.prototype.setProperties=function($,tt){for(var et in $)this.set(et,$[et],tt)},e.prototype.applyProperties=function($){$.values_&&Object(at.a)(this.values_||(this.values_={}),$.values_)},e.prototype.unset=function($,tt){if(this.values_&&$ in this.values_){var et=this.values_[$];delete this.values_[$],Object(at.d)(this.values_)&&(this.values_=null),tt||this.notify($,et)}},e}(ot.a),Rt={};function f($){return Rt.hasOwnProperty($)?Rt[$]:Rt[$]="change:"+$}tt.a=Ct},function($,tt,et){"use strict";tt.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"}},function($,tt,et){"use strict";et.r(tt),et.d(tt,"METERS_PER_UNIT",(function(){return rt}));var nt={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},rt={};rt[nt.DEGREES]=2*Math.PI*6370997/360,rt[nt.FEET]=.3048,rt[nt.METERS]=1,rt[nt.USFEET]=1200/3937,tt.default=nt},function($,tt,et){"use strict";function n($,tt,et){return void 0===et&&(et=[0,0]),et[0]=$[0]+2*tt,et[1]=$[1]+2*tt,et}function i($){return $[0]>0&&$[1]>0}function o($,tt,et){return void 0===et&&(et=[0,0]),et[0]=$[0]*tt+.5|0,et[1]=$[1]*tt+.5|0,et}function a($,tt){return Array.isArray($)?$:(void 0===tt?tt=[$,$]:(tt[0]=$,tt[1]=$),tt)}et.d(tt,"a",(function(){return n})),et.d(tt,"b",(function(){return i})),et.d(tt,"c",(function(){return o})),et.d(tt,"d",(function(){return a}))},function($,tt,et){"use strict";et.d(tt,"b",(function(){return rt})),et.d(tt,"f",(function(){return it})),et.d(tt,"d",(function(){return ot})),et.d(tt,"a",(function(){return at})),et.d(tt,"g",(function(){return Ot})),et.d(tt,"c",(function(){return wt})),et.d(tt,"e",(function(){return St}));var nt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",rt=-1!==nt.indexOf("firefox"),it=(-1!==nt.indexOf("safari")&&nt.indexOf("chrom"),-1!==nt.indexOf("webkit")&&-1==nt.indexOf("edge")),ot=-1!==nt.indexOf("macintosh"),at="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Ot="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,wt="undefined"!=typeof Image&&Image.prototype.decode,St=function(){var $=!1;try{var tt=Object.defineProperty({},"passive",{get:function(){$=!0}});window.addEventListener("_",null,tt),window.removeEventListener("_",null,tt)}catch($){}return $}()},function($,tt,et){"use strict";tt.a={ANIMATING:0,INTERACTING:1}},function($,tt,et){"use strict";et.d(tt,"c",(function(){return nt})),et.d(tt,"d",(function(){return rt})),et.d(tt,"b",(function(){return it})),et.d(tt,"a",(function(){return ot})),et.d(tt,"e",(function(){return c}));var nt="ol-hidden",rt="ol-unselectable",it="ol-control",ot="ol-collapsed",at=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ot=["style","variant","weight","size","lineHeight","family"],c=function($){var tt=$.match(at);if(!tt)return null;for(var et={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},nt=0,rt=Ot.length;nt<rt;++nt){var it=tt[nt+1];void 0!==it&&(et[Ot[nt]]=it)}return et.families=et.family.split(/,\s?/),et}},function($,tt,et){"use strict";tt.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function($,tt,et){"use strict";var nt=function(){function t($){this.propagationStopped,this.type=$,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();tt.a=nt},function($,tt,et){"use strict";et.d(tt,"a",(function(){return i})),et.d(tt,"b",(function(){return o})),et.d(tt,"d",(function(){return a})),et.d(tt,"e",(function(){return s})),et.d(tt,"f",(function(){return u})),et.d(tt,"c",(function(){return c}));var nt=et(0);function i($,tt){return $[0]+=+tt[0],$[1]+=+tt[1],$}function o($,tt){for(var et=!0,nt=$.length-1;nt>=0;--nt)if($[nt]!=tt[nt]){et=!1;break}return et}function a($,tt){var et=Math.cos(tt),nt=Math.sin(tt),rt=$[0]*et-$[1]*nt,it=$[1]*et+$[0]*nt;return $[0]=rt,$[1]=it,$}function s($,tt){return $[0]*=tt,$[1]*=tt,$}function u($,tt){if(tt.canWrapX()){var et=Object(nt.E)(tt.getExtent()),rt=c($,tt,et);rt&&($[0]-=rt*et)}return $}function c($,tt,et){var rt=tt.getExtent(),it=0;if(tt.canWrapX()&&($[0]<rt[0]||$[0]>rt[2])){var ot=et||Object(nt.E)(rt);it=Math.floor(($[0]-rt[0])/ot)}return it}et(5),et(42)},function($,tt,et){"use strict";function n($,tt,et,nt){return void 0!==nt?(nt[0]=$,nt[1]=tt,nt[2]=et,nt):[$,tt,et]}function i($,tt,et){return $+"/"+tt+"/"+et}function o($){return i($[0],$[1],$[2])}function a($){return $.split("/").map(Number)}function s($){return($[1]<<$[0])+$[2]}function u($,tt){var et=$[0],nt=$[1],rt=$[2];if(tt.getMinZoom()>et||et>tt.getMaxZoom())return!1;var it=tt.getFullTileRange(et);return!it||it.containsXY(nt,rt)}et.d(tt,"a",(function(){return n})),et.d(tt,"d",(function(){return i})),et.d(tt,"c",(function(){return o})),et.d(tt,"b",(function(){return a})),et.d(tt,"e",(function(){return s})),et.d(tt,"f",(function(){return u}))},function($,tt,et){"use strict";et.d(tt,"b",(function(){return nt})),et.d(tt,"a",(function(){return rt}));var nt=.5,rt=!0},function($,tt,et){"use strict";tt.a={ADD:"add",REMOVE:"remove"}},function($,tt,et){"use strict";function n($){return Math.pow($,3)}function i($){return 1-n(1-$)}function o($){return 3*$*$-2*$*$*$}function a($){return $}et.d(tt,"a",(function(){return n})),et.d(tt,"b",(function(){return i})),et.d(tt,"c",(function(){return o})),et.d(tt,"d",(function(){return a}))},function($,tt,et){"use strict";function n($,tt,et,nt,rt){for(var it=void 0!==rt?rt:[],ot=0,at=tt;at<et;at+=nt)it[ot++]=$.slice(at,at+nt);return it.length=ot,it}function i($,tt,et,nt,rt){for(var it=void 0!==rt?rt:[],ot=0,at=0,Ot=et.length;at<Ot;++at){var wt=et[at];it[ot++]=n($,tt,wt,nt,it[ot]),tt=wt}return it.length=ot,it}function o($,tt,et,nt,rt){for(var it=void 0!==rt?rt:[],ot=0,at=0,Ot=et.length;at<Ot;++at){var wt=et[at];it[ot++]=i($,tt,wt,nt,it[ot]),tt=wt[wt.length-1]}return it.length=ot,it}et.d(tt,"a",(function(){return n})),et.d(tt,"b",(function(){return i})),et.d(tt,"c",(function(){return o}))},function($,tt,et){"use strict";function n($,tt,et,nt,rt,it){for(var ot=it||[],at=0,Ot=tt;Ot<et;Ot+=nt){var wt=$[Ot],St=$[Ot+1];ot[at++]=rt[0]*wt+rt[2]*St+rt[4],ot[at++]=rt[1]*wt+rt[3]*St+rt[5]}return it&&ot.length!=at&&(ot.length=at),ot}function i($,tt,et,nt,rt,it,ot){for(var at=ot||[],Ot=Math.cos(rt),wt=Math.sin(rt),St=it[0],Ct=it[1],Rt=0,Tt=tt;Tt<et;Tt+=nt){var At=$[Tt]-St,Nt=$[Tt+1]-Ct;at[Rt++]=St+At*Ot-Nt*wt,at[Rt++]=Ct+At*wt+Nt*Ot;for(var kt=Tt+2;kt<Tt+nt;++kt)at[Rt++]=$[kt]}return ot&&at.length!=Rt&&(at.length=Rt),at}function o($,tt,et,nt,rt,it,ot,at){for(var Ot=at||[],wt=ot[0],St=ot[1],Ct=0,Rt=tt;Rt<et;Rt+=nt){var Tt=$[Rt]-wt,At=$[Rt+1]-St;Ot[Ct++]=wt+rt*Tt,Ot[Ct++]=St+it*At;for(var Nt=Rt+2;Nt<Rt+nt;++Nt)Ot[Ct++]=$[Nt]}return at&&Ot.length!=Ct&&(Ot.length=Ct),Ot}function a($,tt,et,nt,rt,it,ot){for(var at=ot||[],Ot=0,wt=tt;wt<et;wt+=nt){at[Ot++]=$[wt]+rt,at[Ot++]=$[wt+1]+it;for(var St=wt+2;St<wt+nt;++St)at[Ot++]=$[St]}return ot&&at.length!=Ot&&(at.length=Ot),at}et.d(tt,"c",(function(){return n})),et.d(tt,"a",(function(){return i})),et.d(tt,"b",(function(){return o})),et.d(tt,"d",(function(){return a}))},function($,tt,et){"use strict";et.d(tt,"b",(function(){return p}));var nt,rt=et(108),it=et(15),ot=et(2),at=et(0),Ot=et(32),wt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),St=function($){function e(){var tt=$.call(this)||this;return tt.layout=it.a.XY,tt.stride=2,tt.flatCoordinates=null,tt}return wt(e,$),e.prototype.computeExtent=function($){return Object(at.o)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,$)},e.prototype.getCoordinates=function(){return Object(ot.b)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function($){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),$<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&$<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var tt=this.getSimplifiedGeometryInternal($);return tt.getFlatCoordinates().length<this.flatCoordinates.length?tt:(this.simplifiedGeometryMaxMinSquaredTolerance=$,this)},e.prototype.getSimplifiedGeometryInternal=function($){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function($,tt){this.stride=l($),this.layout=$,this.flatCoordinates=tt},e.prototype.setCoordinates=function($,tt){Object(ot.b)()},e.prototype.setLayout=function($,tt,et){var nt;if($)nt=l($);else{for(var rt=0;rt<et;++rt){if(0===tt.length)return this.layout=it.a.XY,void(this.stride=2);tt=tt[0]}$=function($){var tt;return 2==$?tt=it.a.XY:3==$?tt=it.a.XYZ:4==$&&(tt=it.a.XYZM),tt}(nt=tt.length)}this.layout=$,this.stride=nt},e.prototype.applyTransform=function($){this.flatCoordinates&&($(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function($,tt){var et=this.getFlatCoordinates();if(et){var nt=this.getStride();Object(Ot.a)(et,0,et.length,nt,$,tt,et),this.changed()}},e.prototype.scale=function($,tt,et){var nt=tt;void 0===nt&&(nt=$);var rt=et;rt||(rt=Object(at.x)(this.getExtent()));var it=this.getFlatCoordinates();if(it){var ot=this.getStride();Object(Ot.b)(it,0,it.length,ot,$,nt,rt,it),this.changed()}},e.prototype.translate=function($,tt){var et=this.getFlatCoordinates();if(et){var nt=this.getStride();Object(Ot.d)(et,0,et.length,nt,$,tt,et),this.changed()}},e}(rt.a);function l($){var tt;return $==it.a.XY?tt=2:$==it.a.XYZ||$==it.a.XYM?tt=3:$==it.a.XYZM&&(tt=4),tt}function p($,tt,et){var nt=$.getFlatCoordinates();if(nt){var rt=$.getStride();return Object(Ot.c)(nt,0,nt.length,rt,tt,et)}return null}tt.a=St},function($,tt,et){"use strict";var nt,rt=et(101),it=et(17),ot=et(29),at=et(25),Ot=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),wt="length",St=function($){function e(tt,et,nt){var rt=$.call(this,tt)||this;return rt.element=et,rt.index=nt,rt}return Ot(e,$),e}(at.a),Ct=function($){function e(tt,et){var nt=$.call(this)||this,rt=et||{};if(nt.unique_=!!rt.unique,nt.array_=tt||[],nt.unique_)for(var it=0,ot=nt.array_.length;it<ot;++it)nt.assertUnique_(nt.array_[it],it);return nt.updateLength_(),nt}return Ot(e,$),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function($){for(var tt=0,et=$.length;tt<et;++tt)this.push($[tt]);return this},e.prototype.forEach=function($){for(var tt=this.array_,et=0,nt=tt.length;et<nt;++et)$(tt[et],et,tt)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function($){return this.array_[$]},e.prototype.getLength=function(){return this.get(wt)},e.prototype.insertAt=function($,tt){this.unique_&&this.assertUnique_(tt),this.array_.splice($,0,tt),this.updateLength_(),this.dispatchEvent(new St(ot.a.ADD,tt,$))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function($){this.unique_&&this.assertUnique_($);var tt=this.getLength();return this.insertAt(tt,$),this.getLength()},e.prototype.remove=function($){for(var tt=this.array_,et=0,nt=tt.length;et<nt;++et)if(tt[et]===$)return this.removeAt(et)},e.prototype.removeAt=function($){var tt=this.array_[$];return this.array_.splice($,1),this.updateLength_(),this.dispatchEvent(new St(ot.a.REMOVE,tt,$)),tt},e.prototype.setAt=function($,tt){var et=this.getLength();if($<et){this.unique_&&this.assertUnique_(tt,$);var nt=this.array_[$];this.array_[$]=tt,this.dispatchEvent(new St(ot.a.REMOVE,nt,$)),this.dispatchEvent(new St(ot.a.ADD,tt,$))}else{for(var rt=et;rt<$;++rt)this.insertAt(rt,void 0);this.insertAt($,tt)}},e.prototype.updateLength_=function(){this.set(wt,this.array_.length)},e.prototype.assertUnique_=function($,tt){for(var et=0,nt=this.array_.length;et<nt;++et)if(this.array_[et]===$&&et!==tt)throw new rt.a(58)},e}(it.a);tt.a=Ct},function($,tt,et){"use strict";et.d(tt,"a",(function(){return nt})),et.d(tt,"b",(function(){return rt}));var nt="1.3.0",rt={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1}},function($,tt,et){"use strict";tt.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function($,tt,et){"use strict";et.d(tt,"e",(function(){return o})),et.d(tt,"a",(function(){return a})),et.d(tt,"f",(function(){return s})),et.d(tt,"d",(function(){return u})),et.d(tt,"b",(function(){return c})),et.d(tt,"c",(function(){return h}));var nt=et(5);function i($,tt,et,rt,it,ot,at){var Ot,wt=$[tt],St=$[tt+1],Ct=$[et]-wt,Rt=$[et+1]-St;if(0===Ct&&0===Rt)Ot=tt;else{var Tt=((it-wt)*Ct+(ot-St)*Rt)/(Ct*Ct+Rt*Rt);if(Tt>1)Ot=et;else{if(Tt>0){for(var At=0;At<rt;++At)at[At]=Object(nt.c)($[tt+At],$[et+At],Tt);return void(at.length=rt)}Ot=tt}}for(At=0;At<rt;++At)at[At]=$[Ot+At];at.length=rt}function o($,tt,et,rt,it){var ot=$[tt],at=$[tt+1];for(tt+=rt;tt<et;tt+=rt){var Ot=$[tt],wt=$[tt+1],St=Object(nt.g)(ot,at,Ot,wt);St>it&&(it=St),ot=Ot,at=wt}return it}function a($,tt,et,nt,rt){for(var it=0,ot=et.length;it<ot;++it){var at=et[it];rt=o($,tt,at,nt,rt),tt=at}return rt}function s($,tt,et,nt,rt){for(var it=0,ot=et.length;it<ot;++it){var at=et[it];rt=a($,tt,at,nt,rt),tt=at[at.length-1]}return rt}function u($,tt,et,rt,it,ot,at,Ot,wt,St,Ct){if(tt==et)return St;var Rt,Tt;if(0===it){if((Tt=Object(nt.g)(at,Ot,$[tt],$[tt+1]))<St){for(Rt=0;Rt<rt;++Rt)wt[Rt]=$[tt+Rt];return wt.length=rt,Tt}return St}for(var At=Ct||[NaN,NaN],Nt=tt+rt;Nt<et;)if(i($,Nt-rt,Nt,rt,at,Ot,At),(Tt=Object(nt.g)(at,Ot,At[0],At[1]))<St){for(St=Tt,Rt=0;Rt<rt;++Rt)wt[Rt]=At[Rt];wt.length=rt,Nt+=rt}else Nt+=rt*Math.max((Math.sqrt(Tt)-Math.sqrt(St))/it|0,1);if(ot&&(i($,et-rt,tt,rt,at,Ot,At),(Tt=Object(nt.g)(at,Ot,At[0],At[1]))<St)){for(St=Tt,Rt=0;Rt<rt;++Rt)wt[Rt]=At[Rt];wt.length=rt}return St}function c($,tt,et,nt,rt,it,ot,at,Ot,wt,St){for(var Ct=St||[NaN,NaN],Rt=0,Tt=et.length;Rt<Tt;++Rt){var At=et[Rt];wt=u($,tt,At,nt,rt,it,ot,at,Ot,wt,Ct),tt=At}return wt}function h($,tt,et,nt,rt,it,ot,at,Ot,wt,St){for(var Ct=St||[NaN,NaN],Rt=0,Tt=et.length;Rt<Tt;++Rt){var At=et[Rt];wt=c($,tt,At,nt,rt,it,ot,at,Ot,wt,Ct),tt=At[At.length-1]}return wt}},function($,tt,et){"use strict";function n($,tt,et,nt){for(var rt=0,it=et.length;rt<it;++rt)$[tt++]=et[rt];return tt}function i($,tt,et,nt){for(var rt=0,it=et.length;rt<it;++rt)for(var ot=et[rt],at=0;at<nt;++at)$[tt++]=ot[at];return tt}function o($,tt,et,nt,rt){for(var it=rt||[],ot=0,at=0,Ot=et.length;at<Ot;++at){var wt=i($,tt,et[at],nt);it[ot++]=wt,tt=wt}return it.length=ot,it}function a($,tt,et,nt,rt){for(var it=rt||[],ot=0,at=0,Ot=et.length;at<Ot;++at){var wt=o($,tt,et[at],nt,it[ot]);it[ot++]=wt,tt=wt[wt.length-1]}return it.length=ot,it}et.d(tt,"a",(function(){return n})),et.d(tt,"b",(function(){return i})),et.d(tt,"c",(function(){return o})),et.d(tt,"d",(function(){return a}))},function($,tt,et){"use strict";et.d(tt,"b",(function(){return x}));var nt,rt=et(15),it=et(3),ot=et(89),at=et(57),Ot=et(33),wt=et(37),St=et(0),Ct=et(38),Rt=et(10),Tt=et(107),At=et(31),Nt=et(63),kt=et(64),Dt=et(77),Gt=et(46),Ut=(et(5),et(44)),Xt=(et(88),nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Vt=function($){function e(tt,et,nt){var rt=$.call(this)||this;return rt.ends_=[],rt.flatInteriorPointRevision_=-1,rt.flatInteriorPoint_=null,rt.maxDelta_=-1,rt.maxDeltaRevision_=-1,rt.orientedRevision_=-1,rt.orientedFlatCoordinates_=null,void 0!==et&&nt?(rt.setFlatCoordinates(et,tt),rt.ends_=nt):rt.setCoordinates(tt,et),rt}return Xt(e,$),e.prototype.appendLinearRing=function($){this.flatCoordinates?Object(Rt.c)(this.flatCoordinates,$.getFlatCoordinates()):this.flatCoordinates=$.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var $=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return $.applyProperties(this),$},e.prototype.closestPointXY=function($,tt,et,nt){return nt<Object(St.e)(this.getExtent(),$,tt)?nt:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(wt.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(wt.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,$,tt,et,nt))},e.prototype.containsXY=function($,tt){return Object(Gt.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,$,tt)},e.prototype.getArea=function(){return Object(Dt.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function($){var tt;return void 0!==$?(tt=this.getOrientedFlatCoordinates().slice(),Object(kt.c)(tt,0,this.ends_,this.stride,$)):tt=this.flatCoordinates,Object(At.b)(tt,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var $=Object(St.x)(this.getExtent());this.flatInteriorPoint_=Object(Tt.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,$,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new at.a(this.getFlatInteriorPoint(),rt.a.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function($){return $<0||this.ends_.length<=$?null:new ot.a(this.flatCoordinates.slice(0===$?0:this.ends_[$-1],this.ends_[$]),this.layout)},e.prototype.getLinearRings=function(){for(var $=this.layout,tt=this.flatCoordinates,et=this.ends_,nt=[],rt=0,it=0,at=et.length;it<at;++it){var Ot=et[it],wt=new ot.a(tt.slice(rt,Ot),$);nt.push(wt),rt=Ot}return nt},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var $=this.flatCoordinates;Object(kt.a)($,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=$:(this.orientedFlatCoordinates_=$.slice(),this.orientedFlatCoordinates_.length=Object(kt.c)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function($){var tt=[],et=[];return tt.length=Object(Ut.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt($),tt,0,et),new e(tt,rt.a.XY,et)},e.prototype.getType=function(){return it.a.POLYGON},e.prototype.intersectsExtent=function($){return Object(Nt.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,$)},e.prototype.setCoordinates=function($,tt){this.setLayout(tt,$,2),this.flatCoordinates||(this.flatCoordinates=[]);var et=Object(Ct.c)(this.flatCoordinates,0,$,this.stride,this.ends_);this.flatCoordinates.length=0===et.length?0:et[et.length-1],this.changed()},e}(Ot.a);function x($){var tt=$[0],et=$[1],nt=$[2],it=$[3],ot=[tt,et,tt,it,nt,it,nt,et,tt,et];return new Vt(ot,rt.a.XY,[ot.length])}tt.a=Vt},function($,tt,et){"use strict";et.d(tt,"a",(function(){return i}));var nt=et(51);function i($){return Array.isArray($)?Object(nt.c)($):$}},function($,tt,et){"use strict";et.d(tt,"b",(function(){return y}));var nt,rt=et(85),it=et(8),ot=et(18),at=et(48),Ot=et(36),wt=et(9),St=et(4),Ct=et(17),Rt=et(7),Tt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),At=function($){function e(tt){var et=this,nt=Object(St.a)({},tt);delete nt.source,(et=$.call(this,nt)||this).mapPrecomposeKey_=null,et.mapRenderKey_=null,et.sourceChangeKey_=null,et.renderer_=null,tt.render&&(et.render=tt.render),tt.map&&et.setMap(tt.map),et.addEventListener(Object(Ct.b)(ot.a.SOURCE),et.handleSourcePropertyChange_);var rt=tt.source?tt.source:null;return et.setSource(rt),et}return Tt(e,$),e.prototype.getLayersArray=function($){var tt=$||[];return tt.push(this),tt},e.prototype.getLayerStatesArray=function($){var tt=$||[];return tt.push(this.getLayerState()),tt},e.prototype.getSource=function(){return this.get(ot.a.SOURCE)||null},e.prototype.getSourceState=function(){var $=this.getSource();return $?$.getState():Ot.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(Rt.c)(this.sourceChangeKey_),this.sourceChangeKey_=null);var $=this.getSource();$&&(this.sourceChangeKey_=Object(Rt.a)($,it.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function($){return this.renderer_.getFeatures($)},e.prototype.render=function($,tt){var et=this.getRenderer();if(et.prepareFrame($))return et.renderFrame($,tt)},e.prototype.setMap=function($){this.mapPrecomposeKey_&&(Object(Rt.c)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),$||this.changed(),this.mapRenderKey_&&(Object(Rt.c)(this.mapRenderKey_),this.mapRenderKey_=null),$&&(this.mapPrecomposeKey_=Object(Rt.a)($,at.a.PRECOMPOSE,(function($){var tt=$.frameState.layerStatesArray,et=this.getLayerState(!1);Object(wt.a)(!tt.some((function($){return $.layer===et.layer})),67),tt.push(et)}),this),this.mapRenderKey_=Object(Rt.a)(this,it.a.CHANGE,$.render,$),this.changed())},e.prototype.setSource=function($){this.set(ot.a.SOURCE,$)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),$.prototype.disposeInternal.call(this)},e}(rt.default);function y($,tt){if(!$.visible)return!1;var et=tt.resolution;if(et<$.minResolution||et>=$.maxResolution)return!1;var nt=tt.zoom;return nt>$.minZoom&&nt<=$.maxZoom}tt.a=At},function($,tt,et){"use strict";function n($,tt,et){var nt=void 0!==et?$.toFixed(et):""+$,rt=nt.indexOf(".");return(rt=-1===rt?nt.length:rt)>tt?nt:new Array(1+tt-rt).join("0")+nt}function i($,tt){for(var et=(""+$).split("."),nt=(""+tt).split("."),rt=0;rt<Math.max(et.length,nt.length);rt++){var it=parseInt(et[rt]||"0",10),ot=parseInt(nt[rt]||"0",10);if(it>ot)return 1;if(ot>it)return-1}return 0}et.d(tt,"b",(function(){return n})),et.d(tt,"a",(function(){return i}))},function($,tt,et){"use strict";var nt,rt=et(75),it=et(25),ot=et(16),at=et(4),Ot=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),wt=function($){function e(tt){var et=$.call(this)||this;return et.eventTarget_=tt,et.pendingRemovals_=null,et.dispatching_=null,et.listeners_=null,et}return Ot(e,$),e.prototype.addEventListener=function($,tt){if($&&tt){var et=this.listeners_||(this.listeners_={}),nt=et[$]||(et[$]=[]);-1===nt.indexOf(tt)&&nt.push(tt)}},e.prototype.dispatchEvent=function($){var tt="string"==typeof $?new it.a($):$,et=tt.type;tt.target||(tt.target=this.eventTarget_||this);var nt,rt=this.listeners_&&this.listeners_[et];if(rt){var at=this.dispatching_||(this.dispatching_={}),Ot=this.pendingRemovals_||(this.pendingRemovals_={});et in at||(at[et]=0,Ot[et]=0),++at[et];for(var wt=0,St=rt.length;wt<St;++wt)if(!1===(nt="handleEvent"in rt[wt]?rt[wt].handleEvent(tt):rt[wt].call(this,tt))||tt.propagationStopped){nt=!1;break}if(--at[et],0===at[et]){var Ct=Ot[et];for(delete Ot[et];Ct--;)this.removeEventListener(et,ot.c);delete at[et]}return nt}},e.prototype.disposeInternal=function(){this.listeners_&&Object(at.b)(this.listeners_)},e.prototype.getListeners=function($){return this.listeners_&&this.listeners_[$]||void 0},e.prototype.hasListener=function($){return!!this.listeners_&&($?$ in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function($,tt){var et=this.listeners_&&this.listeners_[$];if(et){var nt=et.indexOf(tt);-1!==nt&&(this.pendingRemovals_&&$ in this.pendingRemovals_?(et[nt]=ot.c,++this.pendingRemovals_[$]):(et.splice(nt,1),0===et.length&&delete this.listeners_[$]))}},e}(rt.a);tt.a=wt},function($,tt,et){"use strict";et.d(tt,"a",(function(){return i})),et.d(tt,"b",(function(){return o})),et.d(tt,"e",(function(){return a})),et.d(tt,"c",(function(){return u})),et.d(tt,"d",(function(){return c}));var nt=et(5);function i($,tt,et,rt,it,ot,at){var Ot=(et-tt)/rt;if(Ot<3){for(;tt<et;tt+=rt)ot[at++]=$[tt],ot[at++]=$[tt+1];return at}var wt=new Array(Ot);wt[0]=1,wt[Ot-1]=1;for(var St=[tt,et-rt],Ct=0;St.length>0;){for(var Rt=St.pop(),Tt=St.pop(),At=0,Nt=$[Tt],kt=$[Tt+1],Dt=$[Rt],Gt=$[Rt+1],Ut=Tt+rt;Ut<Rt;Ut+=rt){var Xt=$[Ut],Vt=$[Ut+1],Jt=Object(nt.h)(Xt,Vt,Nt,kt,Dt,Gt);Jt>At&&(Ct=Ut,At=Jt)}At>it&&(wt[(Ct-tt)/rt]=1,Tt+rt<Ct&&St.push(Tt,Ct),Ct+rt<Rt&&St.push(Ct,Rt))}for(Ut=0;Ut<Ot;++Ut)wt[Ut]&&(ot[at++]=$[tt+Ut*rt],ot[at++]=$[tt+Ut*rt+1]);return at}function o($,tt,et,nt,rt,it,ot,at){for(var Ot=0,wt=et.length;Ot<wt;++Ot){var St=et[Ot];ot=i($,tt,St,nt,rt,it,ot),at.push(ot),tt=St}return ot}function a($,tt){return tt*Math.round($/tt)}function s($,tt,et,nt,rt,it,ot){if(tt==et)return ot;var at,Ot,wt=a($[tt],rt),St=a($[tt+1],rt);tt+=nt,it[ot++]=wt,it[ot++]=St;do{if(at=a($[tt],rt),Ot=a($[tt+1],rt),(tt+=nt)==et)return it[ot++]=at,it[ot++]=Ot,ot}while(at==wt&&Ot==St);for(;tt<et;){var Ct=a($[tt],rt),Rt=a($[tt+1],rt);if(tt+=nt,Ct!=at||Rt!=Ot){var Tt=at-wt,At=Ot-St,Nt=Ct-wt,kt=Rt-St;Tt*kt==At*Nt&&(Tt<0&&Nt<Tt||Tt==Nt||Tt>0&&Nt>Tt)&&(At<0&&kt<At||At==kt||At>0&&kt>At)?(at=Ct,Ot=Rt):(it[ot++]=at,it[ot++]=Ot,wt=at,St=Ot,at=Ct,Ot=Rt)}}return it[ot++]=at,it[ot++]=Ot,ot}function u($,tt,et,nt,rt,it,ot,at){for(var Ot=0,wt=et.length;Ot<wt;++Ot){var St=et[Ot];ot=s($,tt,St,nt,rt,it,ot),at.push(ot),tt=St}return ot}function c($,tt,et,nt,rt,it,ot,at){for(var Ot=0,wt=et.length;Ot<wt;++Ot){var St=et[Ot],Ct=[];ot=u($,tt,St,nt,rt,it,ot,Ct),at.push(Ct),tt=St[St.length-1]}return ot}},function($,tt,et){"use strict";tt.a={PROPERTYCHANGE:"propertychange"}},function($,tt,et){"use strict";et.d(tt,"a",(function(){return i})),et.d(tt,"b",(function(){return o})),et.d(tt,"c",(function(){return a})),et.d(tt,"d",(function(){return s}));var nt=et(0);function i($,tt,et,rt,it){return!Object(nt.t)(it,(function(nt){return!o($,tt,et,rt,nt[0],nt[1])}))}function o($,tt,et,nt,rt,it){for(var ot=0,at=$[et-nt],Ot=$[et-nt+1];tt<et;tt+=nt){var wt=$[tt],St=$[tt+1];Ot<=it?St>it&&(wt-at)*(it-Ot)-(rt-at)*(St-Ot)>0&&ot++:St<=it&&(wt-at)*(it-Ot)-(rt-at)*(St-Ot)<0&&ot--,at=wt,Ot=St}return 0!==ot}function a($,tt,et,nt,rt,it){if(0===et.length)return!1;if(!o($,tt,et[0],nt,rt,it))return!1;for(var ot=1,at=et.length;ot<at;++ot)if(o($,et[ot-1],et[ot],nt,rt,it))return!1;return!0}function s($,tt,et,nt,rt,it){if(0===et.length)return!1;for(var ot=0,at=et.length;ot<at;++ot){var Ot=et[ot];if(a($,tt,Ot,nt,rt,it))return!0;tt=Ot[Ot.length-1]}return!1}},function($,tt){var et=Array.isArray;$.exports=et},function($,tt,et){"use strict";tt.a={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},function($,tt,et){"use strict";et.d(tt,"b",(function(){return i})),et.d(tt,"a",(function(){return o})),et.d(tt,"c",(function(){return a})),et(4);var nt={};function i(){nt={}}function o($,tt,et){var rt=$.getCode(),it=tt.getCode();rt in nt||(nt[rt]={}),nt[rt][it]=et}function a($,tt){var et;return $ in nt&&tt in nt[$]&&(et=nt[$][tt]),et}},function($,tt,et){var nt=et(139),rt="object"==typeof self&&self&&self.Object===Object&&self,it=nt||rt||Function("return this")();$.exports=it},function($,tt,et){"use strict";et.d(tt,"b",(function(){return s})),et.d(tt,"a",(function(){return p})),et.d(tt,"c",(function(){return d}));var nt=et(9),rt=et(5),it=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,ot=/^([a-z]*)$|^hsla?\(.*\)$/i;function s($){return"string"==typeof $?$:d($)}function u($){var tt=document.createElement("div");if(tt.style.color=$,""!==tt.style.color){document.body.appendChild(tt);var et=getComputedStyle(tt).color;return document.body.removeChild(tt),et}return""}var at,Ot,wt=(at={},Ot=0,function($){var tt;if(at.hasOwnProperty($))tt=at[$];else{if(Ot>=1024){var et=0;for(var rt in at)0==(3&et++)&&(delete at[rt],--Ot)}tt=function($){var tt,et,rt,at,Ot;if(ot.exec($)&&($=u($)),it.exec($)){var wt,St=$.length-1;wt=St<=4?1:2;var Ct=4===St||8===St;tt=parseInt($.substr(1+0*wt,wt),16),et=parseInt($.substr(1+1*wt,wt),16),rt=parseInt($.substr(1+2*wt,wt),16),at=Ct?parseInt($.substr(1+3*wt,wt),16):255,1==wt&&(tt=(tt<<4)+tt,et=(et<<4)+et,rt=(rt<<4)+rt,Ct&&(at=(at<<4)+at)),Ot=[tt,et,rt,at/255]}else 0==$.indexOf("rgba(")?f(Ot=$.slice(5,-1).split(",").map(Number)):0==$.indexOf("rgb(")?((Ot=$.slice(4,-1).split(",").map(Number)).push(1),f(Ot)):Object(nt.a)(!1,14);return Ot}($),at[$]=tt,++Ot}return tt});function p($){return Array.isArray($)?$:wt($)}function f($){return $[0]=Object(rt.a)($[0]+.5|0,0,255),$[1]=Object(rt.a)($[1]+.5|0,0,255),$[2]=Object(rt.a)($[2]+.5|0,0,255),$[3]=Object(rt.a)($[3],0,1),$}function d($){var tt=$[0];tt!=(0|tt)&&(tt=tt+.5|0);var et=$[1];et!=(0|et)&&(et=et+.5|0);var nt=$[2];return nt!=(0|nt)&&(nt=nt+.5|0),"rgba("+tt+","+et+","+nt+","+(void 0===$[3]?1:$[3])+")"}},function($,tt,et){"use strict";et.d(tt,"b",(function(){return p})),et.d(tt,"a",(function(){return f})),et.d(tt,"c",(function(){return d}));var nt,rt=et(35),it=et(4),ot=et(0),at=et(14),Ot=et(1),wt=et(5);function h($,tt,et,nt,rt){$.beginPath(),$.moveTo(0,0),$.lineTo(tt,et),$.lineTo(nt,rt),$.closePath(),$.save(),$.clip(),$.fillRect(0,0,Math.max(tt,nt)+1,Math.max(et,rt)),$.restore()}function l($,tt){return Math.abs($[4*tt]-210)>2||Math.abs($[4*tt+3]-191.25)>2}function p($,tt,et,nt){var rt=Object(Ot.r)(et,tt,$),it=Object(Ot.l)(tt,nt,et),at=tt.getMetersPerUnit();void 0!==at&&(it*=at);var wt=$.getMetersPerUnit();void 0!==wt&&(it/=wt);var St=$.getExtent();if(!St||Object(ot.f)(St,rt)){var Ct=Object(Ot.l)($,it,rt)/it;isFinite(Ct)&&Ct>0&&(it/=Ct)}return it}function f($,tt,et,nt){var rt=Object(ot.x)(et),it=p($,tt,rt,nt);return(!isFinite(it)||it<=0)&&Object(ot.t)(et,(function(et){return it=p($,tt,et,nt),isFinite(it)&&it>0})),it}function d($,tt,et,Ot,St,Ct,Rt,Tt,At,Nt,kt,Dt){var Gt=Object(at.a)(Math.round(et*$),Math.round(et*tt));if(Object(it.a)(Gt,Dt),0===At.length)return Gt.canvas;function O($){return Math.round($*et)/et}Gt.scale(et,et),Gt.globalCompositeOperation="lighter";var Ut=Object(ot.j)();At.forEach((function($,tt,et){Object(ot.q)(Ut,$.extent)}));var Xt=Object(ot.E)(Ut),Vt=Object(ot.A)(Ut),Jt=Object(at.a)(Math.round(et*Xt/Ot),Math.round(et*Vt/Ot));Object(it.a)(Jt,Dt);var ne=et/Ot;At.forEach((function($,tt,et){var nt=$.extent[0]-Ut[0],rt=-($.extent[3]-Ut[3]),it=Object(ot.E)($.extent),at=Object(ot.A)($.extent);$.image.width>0&&$.image.height>0&&Jt.drawImage($.image,Nt,Nt,$.image.width-2*Nt,$.image.height-2*Nt,nt*ne,rt*ne,it*ne,at*ne)}));var re=Object(ot.C)(Rt);return Tt.getTriangles().forEach((function($,tt,it){var ot=$.source,at=$.target,St=ot[0][0],Rt=ot[0][1],Tt=ot[1][0],At=ot[1][1],Nt=ot[2][0],kt=ot[2][1],Xt=O((at[0][0]-re[0])/Ct),Vt=O(-(at[0][1]-re[1])/Ct),ne=O((at[1][0]-re[0])/Ct),ie=O(-(at[1][1]-re[1])/Ct),oe=O((at[2][0]-re[0])/Ct),ae=O(-(at[2][1]-re[1])/Ct),fe=St,de=Rt;St=0,Rt=0;var ye=[[Tt-=fe,At-=de,0,0,ne-Xt],[Nt-=fe,kt-=de,0,0,oe-Xt],[0,0,Tt,At,ie-Vt],[0,0,Nt,kt,ae-Vt]],Se=Object(wt.f)(ye);if(Se){if(Gt.save(),Gt.beginPath(),function(){if(void 0===nt){var $=document.createElement("canvas").getContext("2d");$.globalCompositeOperation="lighter",$.fillStyle="rgba(210, 0, 0, 0.75)",h($,4,5,4,0),h($,4,5,0,5);var tt=$.getImageData(0,0,3,3).data;nt=l(tt,0)||l(tt,4)||l(tt,8)}return nt}()||Dt===rt.b){Gt.moveTo(ne,ie);for(var Ee=Xt-ne,Me=Vt-ie,Ce=0;Ce<4;Ce++)Gt.lineTo(ne+O((Ce+1)*Ee/4),ie+O(Ce*Me/3)),3!=Ce&&Gt.lineTo(ne+O((Ce+1)*Ee/4),ie+O((Ce+1)*Me/3));Gt.lineTo(oe,ae)}else Gt.moveTo(ne,ie),Gt.lineTo(Xt,Vt),Gt.lineTo(oe,ae);Gt.clip(),Gt.transform(Se[0],Se[2],Se[1],Se[3],Xt,Vt),Gt.translate(Ut[0]-fe,Ut[3]-de),Gt.scale(Ot/et,-Ot/et),Gt.drawImage(Jt.canvas,0,0),Gt.restore()}})),kt&&(Gt.save(),Gt.globalCompositeOperation="source-over",Gt.strokeStyle="black",Gt.lineWidth=1,Tt.getTriangles().forEach((function($,tt,et){var nt=$.target,rt=(nt[0][0]-re[0])/Ct,it=-(nt[0][1]-re[1])/Ct,ot=(nt[1][0]-re[0])/Ct,at=-(nt[1][1]-re[1])/Ct,Ot=(nt[2][0]-re[0])/Ct,wt=-(nt[2][1]-re[1])/Ct;Gt.beginPath(),Gt.moveTo(ot,at),Gt.lineTo(rt,it),Gt.lineTo(Ot,wt),Gt.closePath(),Gt.stroke()})),Gt.restore()),Gt.canvas}},function($,tt,et){"use strict";et.d(tt,"c",(function(){return h})),et.d(tt,"d",(function(){return l})),et.d(tt,"a",(function(){return p})),et.d(tt,"b",(function(){return d}));var nt=et(69),rt=et(90),it=et(19),ot=et(68),at=et(1),Ot=et(0),wt=et(20);function h($){var tt=$.getDefaultTileGrid();return tt||(tt=function($,tt,et,it){return function($,tt,et,it){var ot=nt.a.TOP_LEFT,at=f($,undefined,et);return new rt.a({extent:$,origin:Object(Ot.y)($,ot),resolutions:at,tileSize:et})}(d($),0,void 0)}($),$.setDefaultTileGrid(tt)),tt}function l($,tt,et){var nt=tt[0],rt=$.getTileCoordCenter(tt),it=d(et);if(Object(Ot.f)(it,rt))return tt;var ot=Object(Ot.E)(it),at=Math.ceil((it[0]-rt[0])/ot);return rt[0]+=ot*at,$.getTileCoordForCoordAndZ(rt,nt)}function p($){var tt=$||{},et=tt.extent||Object(at.k)("EPSG:3857").getExtent(),nt={extent:et,minZoom:tt.minZoom,tileSize:tt.tileSize,resolutions:f(et,tt.maxZoom,tt.tileSize,tt.maxResolution)};return new rt.a(nt)}function f($,tt,et,nt){for(var rt=void 0!==tt?tt:ot.a,it=Object(Ot.A)($),at=Object(Ot.E)($),St=Object(wt.d)(void 0!==et?et:ot.b),Ct=nt>0?nt:Math.max(at/St[0],it/St[1]),Rt=rt+1,Tt=new Array(Rt),At=0;At<Rt;++At)Tt[At]=Ct/Math.pow(2,At);return Tt}function d($){var tt=($=Object(at.k)($)).getExtent();if(!tt){var et=180*at.a[it.default.DEGREES]/$.getMetersPerUnit();tt=Object(Ot.k)(-et,-et,et,et)}return tt}},function($,tt,et){var nt=et(187),rt=et(188),it=et(189),ot=et(191);$.exports=function($,tt){return nt($)||rt($,tt)||it($,tt)||ot()}},function($,tt,et){"use strict";tt.a={FRACTION:"fraction",PIXELS:"pixels"}},function($,tt,et){"use strict";tt.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},function($,tt,et){"use strict";var nt,rt=et(3),it=et(33),ot=et(0),at=et(38),Ot=et(5),wt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),St=function($){function e(tt,et){var nt=$.call(this)||this;return nt.setCoordinates(tt,et),nt}return wt(e,$),e.prototype.clone=function(){var $=new e(this.flatCoordinates.slice(),this.layout);return $.applyProperties(this),$},e.prototype.closestPointXY=function($,tt,et,nt){var rt=this.flatCoordinates,it=Object(Ot.g)($,tt,rt[0],rt[1]);if(it<nt){for(var ot=this.stride,at=0;at<ot;++at)et[at]=rt[at];return et.length=ot,it}return nt},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function($){return Object(ot.m)(this.flatCoordinates,$)},e.prototype.getType=function(){return rt.a.POINT},e.prototype.intersectsExtent=function($){return Object(ot.h)($,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function($,tt){this.setLayout(tt,$,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(at.a)(this.flatCoordinates,0,$,this.stride),this.changed()},e}(it.a);tt.a=St},function($,tt,et){$.exports=et(186)},function($,tt,et){"use strict";function n($,tt){var et=[];Object.keys(tt).forEach((function($){null!==tt[$]&&void 0!==tt[$]&&et.push($+"="+encodeURIComponent(tt[$]))}));var nt=et.join("&");return($=-1===($=$.replace(/[?&]$/,"")).indexOf("?")?$+"?":$+"&")+nt}et.d(tt,"a",(function(){return n}))},function($,tt){$.exports=function($){return null!=$&&"object"==typeof $}},function($,tt,et){"use strict";var nt=et(19),rt=function(){function t($){this.code_=$.code,this.units_=$.units,this.extent_=void 0!==$.extent?$.extent:null,this.worldExtent_=void 0!==$.worldExtent?$.worldExtent:null,this.axisOrientation_=void 0!==$.axisOrientation?$.axisOrientation:"enu",this.global_=void 0!==$.global&&$.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=$.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=$.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||nt.METERS_PER_UNIT[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function($){this.global_=$,this.canWrapX_=!(!$||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function($){this.defaultTileGrid_=$},t.prototype.setExtent=function($){this.extent_=$,this.canWrapX_=!(!this.global_||!$)},t.prototype.setWorldExtent=function($){this.worldExtent_=$},t.prototype.setGetPointResolution=function($){this.getPointResolutionFunc_=$},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();tt.a=rt},function($,tt){$.exports=function($,tt,et){return tt in $?Object.defineProperty($,tt,{value:et,enumerable:!0,configurable:!0,writable:!0}):$[tt]=et,$}},function($,tt,et){"use strict";et.d(tt,"a",(function(){return a})),et.d(tt,"b",(function(){return s})),et.d(tt,"c",(function(){return u})),et.d(tt,"d",(function(){return c}));var nt=et(0),rt=et(109),it=et(46);function a($,tt,et,it,ot){var at=Object(nt.s)(Object(nt.j)(),$,tt,et,it);return!!Object(nt.F)(ot,at)&&(!!Object(nt.g)(ot,at)||at[0]>=ot[0]&&at[2]<=ot[2]||at[1]>=ot[1]&&at[3]<=ot[3]||Object(rt.a)($,tt,et,it,(function($,tt){return Object(nt.G)(ot,$,tt)})))}function s($,tt,et,nt,rt){for(var it=0,ot=et.length;it<ot;++it){if(a($,tt,et[it],nt,rt))return!0;tt=et[it]}return!1}function u($,tt,et,nt,rt){if(!function($,tt,et,nt,rt){return!!(a($,tt,et,nt,rt)||Object(it.b)($,tt,et,nt,rt[0],rt[1])||Object(it.b)($,tt,et,nt,rt[0],rt[3])||Object(it.b)($,tt,et,nt,rt[2],rt[1])||Object(it.b)($,tt,et,nt,rt[2],rt[3]))}($,tt,et[0],nt,rt))return!1;if(1===et.length)return!0;for(var ot=1,at=et.length;ot<at;++ot)if(Object(it.a)($,et[ot-1],et[ot],nt,rt)&&!a($,et[ot-1],et[ot],nt,rt))return!1;return!0}function c($,tt,et,nt,rt){for(var it=0,ot=et.length;it<ot;++it){var at=et[it];if(u($,tt,at,nt,rt))return!0;tt=at[at.length-1]}return!1}},function($,tt,et){"use strict";function n($,tt,et,nt){for(;tt<et-nt;){for(var rt=0;rt<nt;++rt){var it=$[tt+rt];$[tt+rt]=$[et-nt+rt],$[et-nt+rt]=it}tt+=nt,et-=nt}}function i($,tt,et,nt){for(var rt=0,it=$[et-nt],ot=$[et-nt+1];tt<et;tt+=nt){var at=$[tt],Ot=$[tt+1];rt+=(at-it)*(Ot+ot),it=at,ot=Ot}return 0===rt?void 0:rt>0}function o($,tt,et,nt,rt){for(var it=void 0!==rt&&rt,ot=0,at=et.length;ot<at;++ot){var Ot=et[ot],wt=i($,tt,Ot,nt);if(0===ot){if(it&&wt||!it&&!wt)return!1}else if(it&&!wt||!it&&wt)return!1;tt=Ot}return!0}function a($,tt,et,nt,rt){for(var it=0,ot=et.length;it<ot;++it){var at=et[it];if(!o($,tt,at,nt,rt))return!1;at.length&&(tt=at[at.length-1])}return!0}function s($,tt,et,nt,rt){for(var it=void 0!==rt&&rt,ot=0,at=et.length;ot<at;++ot){var Ot=et[ot],wt=i($,tt,Ot,nt);(0===ot?it&&wt||!it&&!wt:it&&!wt||!it&&wt)&&n($,tt,Ot,nt),tt=Ot}return tt}function u($,tt,et,nt,rt){for(var it=0,ot=et.length;it<ot;++it)tt=s($,tt,et[it],nt,rt);return tt}et.d(tt,"a",(function(){return o})),et.d(tt,"b",(function(){return a})),et.d(tt,"c",(function(){return s})),et.d(tt,"d",(function(){return u}))},function($,tt,et){var nt=et(216),rt=et(221);$.exports=function($,tt){var et=rt($,tt);return nt(et)?et:void 0}},function($,tt){$.exports=function($){var tt=typeof $;return null!=$&&("object"==tt||"function"==tt)}},function($,tt,et){"use strict";et.r(tt);var nt=function(){function t($){var tt=$||{};this.color_=void 0!==tt.color?tt.color:null}return t.prototype.clone=function(){var $=this.getColor();return new t({color:Array.isArray($)?$.slice():$||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function($){this.color_=$},t}();tt.default=nt},function($,tt,et){"use strict";et.d(tt,"a",(function(){return nt})),et.d(tt,"b",(function(){return rt}));var nt=42,rt=256},function($,tt,et){"use strict";tt.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function($,tt,et){"use strict";et.d(tt,"a",(function(){return i}));var nt=function(){function t($,tt,et,nt){this.minX=$,this.maxX=tt,this.minY=et,this.maxY=nt}return t.prototype.contains=function($){return this.containsXY($[1],$[2])},t.prototype.containsTileRange=function($){return this.minX<=$.minX&&$.maxX<=this.maxX&&this.minY<=$.minY&&$.maxY<=this.maxY},t.prototype.containsXY=function($,tt){return this.minX<=$&&$<=this.maxX&&this.minY<=tt&&tt<=this.maxY},t.prototype.equals=function($){return this.minX==$.minX&&this.minY==$.minY&&this.maxX==$.maxX&&this.maxY==$.maxY},t.prototype.extend=function($){$.minX<this.minX&&(this.minX=$.minX),$.maxX>this.maxX&&(this.maxX=$.maxX),$.minY<this.minY&&(this.minY=$.minY),$.maxY>this.maxY&&(this.maxY=$.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function($){return this.minX<=$.maxX&&this.maxX>=$.minX&&this.minY<=$.maxY&&this.maxY>=$.minY},t}();function i($,tt,et,rt,it){return void 0!==it?(it.minX=$,it.maxX=tt,it.minY=et,it.maxY=rt,it):new nt($,tt,et,rt)}tt.b=nt},function($,tt,et){"use strict";et.d(tt,"a",(function(){return s})),et.d(tt,"b",(function(){return u})),et.d(tt,"c",(function(){return c}));var nt=et(9),rt=et(5),it=et(27);function a($,tt){var et=/\{z\}/g,rt=/\{x\}/g,it=/\{y\}/g,ot=/\{-y\}/g;return function(at,Ot,wt){return at?$.replace(et,at[0].toString()).replace(rt,at[1].toString()).replace(it,at[2].toString()).replace(ot,(function(){var $=at[0],et=tt.getFullTileRange($);return Object(nt.a)(et,55),(et.getHeight()-at[2]-1).toString()})):void 0}}function s($,tt){for(var et=$.length,nt=new Array(et),rt=0;rt<et;++rt)nt[rt]=a($[rt],tt);return u(nt)}function u($){return 1===$.length?$[0]:function(tt,et,nt){if(tt){var ot=Object(it.e)(tt),at=Object(rt.e)(ot,$.length);return $[at](tt,et,nt)}}}function c($){var tt=[],et=/\{([a-z])-([a-z])\}/.exec($);if(et){var nt=et[1].charCodeAt(0),rt=et[2].charCodeAt(0),it=void 0;for(it=nt;it<=rt;++it)tt.push($.replace(et[0],String.fromCharCode(it)));return tt}if(et=/\{(\d+)-(\d+)\}/.exec($)){for(var ot=parseInt(et[2],10),at=parseInt(et[1],10);at<=ot;at++)tt.push($.replace(et[0],at.toString()));return tt}return tt.push($),tt}},function($,tt,et){var nt=et(83),rt=et(217),it=et(218),ot=nt?nt.toStringTag:void 0;$.exports=function($){return null==$?void 0===$?"[object Undefined]":"[object Null]":ot&&ot in Object($)?rt($):it($)}},function($,tt){function r(tt){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?$.exports=r=function($){return typeof $}:$.exports=r=function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},r(tt)}$.exports=r},function($,tt){function r($,tt,et,nt,rt,it,ot){try{var at=$[it](ot),Ot=at.value}catch($){return void et($)}at.done?tt(Ot):Promise.resolve(Ot).then(nt,rt)}$.exports=function($){return function(){var tt=this,et=arguments;return new Promise((function(nt,rt){var it=$.apply(tt,et);function s($){r(it,nt,rt,s,u,"next",$)}function u($){r(it,nt,rt,s,u,"throw",$)}s(void 0)}))}}},function($,tt,et){"use strict";var nt=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();tt.a=nt},function($,tt,et){"use strict";et.d(tt,"b",(function(){return p}));var nt,rt=et(8),it=et(106),ot=et(13),at=et(21),Ot=et(0),wt=et(7),St=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Ct=function($){function e(tt,et,nt,rt,it,at){var Ot=$.call(this,tt,et,nt,ot.a.IDLE)||this;return Ot.src_=rt,Ot.image_=new Image,null!==it&&(Ot.image_.crossOrigin=it),Ot.unlisten_=null,Ot.state=ot.a.IDLE,Ot.imageLoadFunction_=at,Ot}return St(e,$),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=ot.a.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(Ot.A)(this.extent)/this.image_.height),this.state=ot.a.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=ot.a.IDLE&&this.state!=ot.a.ERROR||(this.state=ot.a.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=p(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function($){this.image_=$},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(it.a);function p($,tt,et){var nt=$;if(nt.src&&at.c){var it=nt.decode(),ot=!0;return it.then((function(){ot&&tt()})).catch((function($){ot&&("EncodingError"===$.name&&"Invalid image type."===$.message?tt():et())})),function(){ot=!1}}var Ot=[Object(wt.b)(nt,rt.a.LOAD,tt),Object(wt.b)(nt,rt.a.ERROR,et)];return function(){Ot.forEach(wt.c)}}tt.a=Ct},function($,tt,et){"use strict";function n($,tt,et,nt){for(var rt=0,it=$[et-nt],ot=$[et-nt+1];tt<et;tt+=nt){var at=$[tt],Ot=$[tt+1];rt+=ot*at-it*Ot,it=at,ot=Ot}return rt/2}function i($,tt,et,nt){for(var rt=0,it=0,ot=et.length;it<ot;++it){var at=et[it];rt+=n($,tt,at,nt),tt=at}return rt}function o($,tt,et,nt){for(var rt=0,it=0,ot=et.length;it<ot;++it){var at=et[it];rt+=i($,tt,at,nt),tt=at[at.length-1]}return rt}et.d(tt,"a",(function(){return n})),et.d(tt,"b",(function(){return i})),et.d(tt,"c",(function(){return o}))},function($,tt,et){"use strict";var nt,rt=et(17),it=et(36),ot=et(2),at=et(1),Ot=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),wt=function($){function e(tt){var et=$.call(this)||this;return et.projection_=Object(at.k)(tt.projection),et.attributions_=h(tt.attributions),et.attributionsCollapsible_=void 0===tt.attributionsCollapsible||tt.attributionsCollapsible,et.loading=!1,et.state_=void 0!==tt.state?tt.state:it.a.READY,et.wrapX_=void 0!==tt.wrapX&&tt.wrapX,et}return Ot(e,$),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return Object(ot.b)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function($){this.attributions_=h($),this.changed()},e.prototype.setState=function($){this.state_=$,this.changed()},e}(rt.a);function h($){return $?Array.isArray($)?function(tt){return $}:"function"==typeof $?$:function(tt){return[$]}:null}tt.a=wt},function($,tt,et){"use strict";var nt,rt=et(8),it=et(43),ot=et(12),at=et(2),Ot=et(30),wt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),St=function($){function e(tt,et,nt){var rt=$.call(this)||this,it=nt||{};return rt.tileCoord=tt,rt.state=et,rt.interimTile=null,rt.hifi=!0,rt.key="",rt.transition_=void 0===it.transition?250:it.transition,rt.transitionStarts_={},rt}return wt(e,$),e.prototype.changed=function(){this.dispatchEvent(rt.a.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var $=this.interimTile;do{if($.getState()==ot.a.LOADED)return this.transition_=0,$;$=$.interimTile}while($);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var $=this.interimTile,tt=this;do{if($.getState()==ot.a.LOADED){$.interimTile=null;break}$.getState()==ot.a.LOADING?tt=$:$.getState()==ot.a.IDLE?tt.interimTile=$.interimTile:tt=$,$=tt.interimTile}while($)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function($){if(this.state!==ot.a.ERROR&&this.state>$)throw new Error("Tile load sequence violation");this.state=$,this.changed()},e.prototype.load=function(){Object(at.b)()},e.prototype.getAlpha=function($,tt){if(!this.transition_)return 1;var et=this.transitionStarts_[$];if(et){if(-1===et)return 1}else et=tt,this.transitionStarts_[$]=et;var nt=tt-et+1e3/60;return nt>=this.transition_?1:Object(Ot.a)(nt/this.transition_)},e.prototype.inTransition=function($){return!!this.transition_&&-1!==this.transitionStarts_[$]},e.prototype.endTransition=function($){this.transition_&&(this.transitionStarts_[$]=-1)},e}(it.a),Ct=et(14),Rt=et(76),Tt=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),At=function($){function e(tt,et,nt,rt,it,ot){var at=$.call(this,tt,et,ot)||this;return at.crossOrigin_=rt,at.src_=nt,at.key=nt,at.image_=new Image,null!==rt&&(at.image_.crossOrigin=rt),at.unlisten_=null,at.tileLoadFunction_=it,at}return Tt(e,$),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){var $;this.state=ot.a.ERROR,this.unlistenImage_(),this.image_=(($=Object(Ct.a)(1,1)).fillStyle="rgba(0,0,0,0)",$.fillRect(0,0,1,1),$.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var $=this.image_;$.naturalWidth&&$.naturalHeight?this.state=ot.a.LOADED:this.state=ot.a.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==ot.a.ERROR&&(this.state=ot.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ot.a.IDLE&&(this.state=ot.a.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Object(Rt.b)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(St),Nt=et(28),kt=et(111),Dt=et(52),Gt=et(5),Ut=et(0),Xt=et(7),Vt=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Jt=function($){function e(tt,et,nt,rt,it,at,Ot,wt,St,Ct,Rt,Tt){var At=$.call(this,it,ot.a.IDLE)||this;At.renderEdges_=void 0!==Rt&&Rt,At.contextOptions_=Tt,At.pixelRatio_=Ot,At.gutter_=wt,At.canvas_=null,At.sourceTileGrid_=et,At.targetTileGrid_=rt,At.wrappedTileCoord_=at||it,At.sourceTiles_=[],At.sourcesListenerKeys_=null,At.sourceZ_=0;var Xt=rt.getTileCoordExtent(At.wrappedTileCoord_),Vt=At.targetTileGrid_.getExtent(),Jt=At.sourceTileGrid_.getExtent(),ne=Vt?Object(Ut.B)(Xt,Vt):Xt;if(0===Object(Ut.u)(ne))return At.state=ot.a.EMPTY,At;var re=tt.getExtent();re&&(Jt=Jt?Object(Ut.B)(Jt,re):re);var ie=rt.getResolution(At.wrappedTileCoord_[0]),oe=Object(Dt.a)(tt,nt,ne,ie);if(!isFinite(oe)||oe<=0)return At.state=ot.a.EMPTY,At;var ae=void 0!==Ct?Ct:Nt.b;if(At.triangulation_=new kt.a(tt,nt,ne,Jt,oe*ae,ie),0===At.triangulation_.getTriangles().length)return At.state=ot.a.EMPTY,At;At.sourceZ_=et.getZForResolution(oe);var fe=At.triangulation_.calculateSourceExtent();if(Jt&&(tt.canWrapX()?(fe[1]=Object(Gt.a)(fe[1],Jt[1],Jt[3]),fe[3]=Object(Gt.a)(fe[3],Jt[1],Jt[3])):fe=Object(Ut.B)(fe,Jt)),Object(Ut.u)(fe)){for(var de=et.getTileRangeForExtentAndZ(fe,At.sourceZ_),ye=de.minX;ye<=de.maxX;ye++)for(var Se=de.minY;Se<=de.maxY;Se++){var Ee=St(At.sourceZ_,ye,Se,Ot);Ee&&At.sourceTiles_.push(Ee)}0===At.sourceTiles_.length&&(At.state=ot.a.EMPTY)}else At.state=ot.a.EMPTY;return At}return Vt(e,$),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var $=[];if(this.sourceTiles_.forEach(function(tt,et,nt){tt&&tt.getState()==ot.a.LOADED&&$.push({extent:this.sourceTileGrid_.getTileCoordExtent(tt.tileCoord),image:tt.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===$.length)this.state=ot.a.ERROR;else{var tt=this.wrappedTileCoord_[0],et=this.targetTileGrid_.getTileSize(tt),nt="number"==typeof et?et:et[0],rt="number"==typeof et?et:et[1],it=this.targetTileGrid_.getResolution(tt),at=this.sourceTileGrid_.getResolution(this.sourceZ_),Ot=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(Dt.c)(nt,rt,this.pixelRatio_,at,this.sourceTileGrid_.getExtent(),it,Ot,this.triangulation_,$,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=ot.a.LOADED}this.changed()},e.prototype.load=function(){if(this.state==ot.a.IDLE){this.state=ot.a.LOADING,this.changed();var $=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(tt,et,nt){var it=tt.getState();if(it==ot.a.IDLE||it==ot.a.LOADING){$++;var at=Object(Xt.a)(tt,rt.a.CHANGE,(function(et){var nt=tt.getState();nt!=ot.a.LOADED&&nt!=ot.a.ERROR&&nt!=ot.a.EMPTY||(Object(Xt.c)(at),0==--$&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(at)}}.bind(this)),this.sourceTiles_.forEach((function($,tt,et){$.getState()==ot.a.IDLE&&$.load()})),0===$&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Xt.c),this.sourcesListenerKeys_=null},e}(St),ne=et(9),re=function(){function t($){this.highWaterMark=void 0!==$?$:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function($){return this.entries_.hasOwnProperty($)},t.prototype.forEach=function($){for(var tt=this.oldest_;tt;)$(tt.value_,tt.key_,this),tt=tt.newer},t.prototype.get=function($,tt){var et=this.entries_[$];return Object(ne.a)(void 0!==et,15),et===this.newest_||(et===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(et.newer.older=et.older,et.older.newer=et.newer),et.newer=null,et.older=this.newest_,this.newest_.newer=et,this.newest_=et),et.value_},t.prototype.remove=function($){var tt=this.entries_[$];return Object(ne.a)(void 0!==tt,15),tt===this.newest_?(this.newest_=tt.older,this.newest_&&(this.newest_.newer=null)):tt===this.oldest_?(this.oldest_=tt.newer,this.oldest_&&(this.oldest_.older=null)):(tt.newer.older=tt.older,tt.older.newer=tt.newer),delete this.entries_[$],--this.count_,tt.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var $,tt=new Array(this.count_),et=0;for($=this.newest_;$;$=$.older)tt[et++]=$.key_;return tt},t.prototype.getValues=function(){var $,tt=new Array(this.count_),et=0;for($=this.newest_;$;$=$.older)tt[et++]=$.value_;return tt},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var $=this.oldest_;return delete this.entries_[$.key_],$.newer&&($.newer.older=null),this.oldest_=$.newer,this.oldest_||(this.newest_=null),--this.count_,$.value_},t.prototype.replace=function($,tt){this.get($),this.entries_[$].value_=tt},t.prototype.set=function($,tt){Object(ne.a)(!($ in this.entries_),16);var et={key_:$,newer:null,older:this.newest_,value_:tt};this.newest_?this.newest_.newer=et:this.oldest_=et,this.newest_=et,this.entries_[$]=et,++this.count_},t.prototype.setSize=function($){this.highWaterMark=$},t}(),ie=et(27),oe=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ae=function($){function e(){return null!==$&&$.apply(this,arguments)||this}return oe(e,$),e.prototype.expireCache=function($){for(;this.canExpireCache()&&!(this.peekLast().getKey()in $);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var $=this.peekFirstKey(),tt=Object(ie.b)($)[0];this.forEach(function($){$.tileCoord[0]!==tt&&(this.remove(Object(ie.c)($.tileCoord)),$.release())}.bind(this))}},e}(re),fe=et(25),de=et(78),ye=et(1),Se=et(53),Ee=et(20),Me=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ce=function($){function e(tt){var et=$.call(this,{attributions:tt.attributions,attributionsCollapsible:tt.attributionsCollapsible,projection:tt.projection,state:tt.state,wrapX:tt.wrapX})||this;et.opaque_=void 0!==tt.opaque&&tt.opaque,et.tilePixelRatio_=void 0!==tt.tilePixelRatio?tt.tilePixelRatio:1,et.tileGrid=void 0!==tt.tileGrid?tt.tileGrid:null;var nt=tt.tileGrid;return nt&&Object(Ee.d)(nt.getTileSize(nt.getMinZoom()),[256,256]),et.tileCache=new ae(tt.cacheSize||0),et.tmpSize=[0,0],et.key_=tt.key||"",et.tileOptions={transition:tt.transition},et.zDirection=tt.zDirection?tt.zDirection:0,et}return Me(e,$),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function($,tt){var et=this.getTileCacheForProjection($);et&&et.expireCache(tt)},e.prototype.forEachLoadedTile=function($,tt,et,nt){var rt=this.getTileCacheForProjection($);if(!rt)return!1;for(var it,at,Ot,wt=!0,St=et.minX;St<=et.maxX;++St)for(var Ct=et.minY;Ct<=et.maxY;++Ct)at=Object(ie.d)(tt,St,Ct),Ot=!1,rt.containsKey(at)&&(Ot=(it=rt.get(at)).getState()===ot.a.LOADED)&&(Ot=!1!==nt(it)),Ot||(wt=!1);return wt},e.prototype.getGutterForProjection=function($){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function($){this.key_!==$&&(this.key_=$,this.changed())},e.prototype.getOpaque=function($){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function($,tt,et,nt,rt){return Object(at.b)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function($){return this.tileGrid?this.tileGrid:Object(Se.c)($)},e.prototype.getTileCacheForProjection=function($){return Object(ne.a)(Object(ye.g)(this.getProjection(),$),68),this.tileCache},e.prototype.getTilePixelRatio=function($){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function($,tt,et){var nt=this.getTileGridForProjection(et),rt=this.getTilePixelRatio(tt),it=Object(Ee.d)(nt.getTileSize($),this.tmpSize);return 1==rt?it:Object(Ee.c)(it,rt,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function($,tt){var et=void 0!==tt?tt:this.getProjection(),nt=this.getTileGridForProjection(et);return this.getWrapX()&&et.isGlobal()&&($=Object(Se.d)(nt,$,et)),Object(ie.f)($,nt)?$:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),$.prototype.refresh.call(this)},e.prototype.updateCacheSize=function($,tt){var et=this.getTileCacheForProjection(tt);$>et.highWaterMark&&(et.highWaterMark=$)},e.prototype.useTile=function($,tt,et,nt){},e}(de.a),Re=function($){function e(tt,et){var nt=$.call(this,tt)||this;return nt.tile=et,nt}return Me(e,$),e}(fe.a),Pe=Ce,Ie=et(71),Le=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Be=function($){function e(tt){var et=$.call(this,{attributions:tt.attributions,cacheSize:tt.cacheSize,opaque:tt.opaque,projection:tt.projection,state:tt.state,tileGrid:tt.tileGrid,tilePixelRatio:tt.tilePixelRatio,wrapX:tt.wrapX,transition:tt.transition,key:tt.key,attributionsCollapsible:tt.attributionsCollapsible,zDirection:tt.zDirection})||this;return et.generateTileUrlFunction_=et.tileUrlFunction===e.prototype.tileUrlFunction,et.tileLoadFunction=tt.tileLoadFunction,tt.tileUrlFunction&&(et.tileUrlFunction=tt.tileUrlFunction),et.urls=null,tt.urls?et.setUrls(tt.urls):tt.url&&et.setUrl(tt.url),et.tileLoadingKeys_={},et}return Le(e,$),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function($){var tt,et=$.target,nt=Object(at.c)(et),rt=et.getState();rt==ot.a.LOADING?(this.tileLoadingKeys_[nt]=!0,tt="tileloadstart"):nt in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[nt],tt=rt==ot.a.ERROR?"tileloaderror":rt==ot.a.LOADED?"tileloadend":void 0),null!=tt&&this.dispatchEvent(new Re(tt,et))},e.prototype.setTileLoadFunction=function($){this.tileCache.clear(),this.tileLoadFunction=$,this.changed()},e.prototype.setTileUrlFunction=function($,tt){this.tileUrlFunction=$,this.tileCache.pruneExceptNewestZ(),void 0!==tt?this.setKey(tt):this.changed()},e.prototype.setUrl=function($){var tt=Object(Ie.c)($);this.urls=tt,this.setUrls(tt)},e.prototype.setUrls=function($){this.urls=$;var tt=$.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Object(Ie.a)($,this.tileGrid),tt):this.setKey(tt)},e.prototype.tileUrlFunction=function($,tt,et){},e.prototype.useTile=function($,tt,et){var nt=Object(ie.d)($,tt,et);this.tileCache.containsKey(nt)&&this.tileCache.get(nt)},e}(Pe),Ze=et(35),Ve=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ke=function($){function e(tt){var et=$.call(this,{attributions:tt.attributions,cacheSize:tt.cacheSize,opaque:tt.opaque,projection:tt.projection,state:tt.state,tileGrid:tt.tileGrid,tileLoadFunction:tt.tileLoadFunction?tt.tileLoadFunction:q,tilePixelRatio:tt.tilePixelRatio,tileUrlFunction:tt.tileUrlFunction,url:tt.url,urls:tt.urls,wrapX:tt.wrapX,transition:tt.transition,key:tt.key,attributionsCollapsible:tt.attributionsCollapsible,zDirection:tt.zDirection})||this;return et.crossOrigin=void 0!==tt.crossOrigin?tt.crossOrigin:null,et.tileClass=void 0!==tt.tileClass?tt.tileClass:At,et.tileCacheForProjection={},et.tileGridForProjection={},et.reprojectionErrorThreshold_=tt.reprojectionErrorThreshold,et.contextOptions_=!1===tt.imageSmoothing?Ze.b:void 0,et.renderReprojectionEdges_=!1,et}return Ve(e,$),e.prototype.canExpireCache=function(){if(!Nt.a)return $.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var tt in this.tileCacheForProjection)if(this.tileCacheForProjection[tt].canExpireCache())return!0;return!1},e.prototype.expireCache=function(tt,et){if(Nt.a){var nt=this.getTileCacheForProjection(tt);for(var rt in this.tileCache.expireCache(this.tileCache==nt?et:{}),this.tileCacheForProjection){var it=this.tileCacheForProjection[rt];it.expireCache(it==nt?et:{})}}else $.prototype.expireCache.call(this,tt,et)},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function($){return Nt.a&&this.getProjection()&&$&&!Object(ye.g)(this.getProjection(),$)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return $.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(tt){return!(Nt.a&&this.getProjection()&&tt&&!Object(ye.g)(this.getProjection(),tt))&&$.prototype.getOpaque.call(this,tt)},e.prototype.getTileGridForProjection=function(tt){if(!Nt.a)return $.prototype.getTileGridForProjection.call(this,tt);var et=this.getProjection();if(!this.tileGrid||et&&!Object(ye.g)(et,tt)){var nt=Object(at.c)(tt);return nt in this.tileGridForProjection||(this.tileGridForProjection[nt]=Object(Se.c)(tt)),this.tileGridForProjection[nt]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(tt){if(!Nt.a)return $.prototype.getTileCacheForProjection.call(this,tt);var et=this.getProjection();if(!et||Object(ye.g)(et,tt))return this.tileCache;var nt=Object(at.c)(tt);return nt in this.tileCacheForProjection||(this.tileCacheForProjection[nt]=new ae(this.tileCache.highWaterMark)),this.tileCacheForProjection[nt]},e.prototype.createTile_=function($,tt,et,nt,it,at){var Ot=[$,tt,et],wt=this.getTileCoordForTileUrlFunction(Ot,it),St=wt?this.tileUrlFunction(wt,nt,it):void 0,Ct=new this.tileClass(Ot,void 0!==St?ot.a.IDLE:ot.a.EMPTY,void 0!==St?St:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return Ct.key=at,Ct.addEventListener(rt.a.CHANGE,this.handleTileChange.bind(this)),Ct},e.prototype.getTile=function($,tt,et,nt,rt){var it=this.getProjection();if(Nt.a&&it&&rt&&!Object(ye.g)(it,rt)){var ot=this.getTileCacheForProjection(rt),at=[$,tt,et],Ot=void 0,wt=Object(ie.c)(at);ot.containsKey(wt)&&(Ot=ot.get(wt));var St=this.getKey();if(Ot&&Ot.key==St)return Ot;var Ct=this.getTileGridForProjection(it),Rt=this.getTileGridForProjection(rt),Tt=this.getTileCoordForTileUrlFunction(at,rt),At=new Jt(it,Ct,rt,Rt,at,Tt,this.getTilePixelRatio(nt),this.getGutter(),function($,tt,et,nt){return this.getTileInternal($,tt,et,nt,it)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return At.key=St,Ot?(At.interimTile=Ot,At.refreshInterimChain(),ot.replace(wt,At)):ot.set(wt,At),At}return this.getTileInternal($,tt,et,nt,it||rt)},e.prototype.getTileInternal=function($,tt,et,nt,rt){var it=null,at=Object(ie.d)($,tt,et),Ot=this.getKey();if(this.tileCache.containsKey(at)){if((it=this.tileCache.get(at)).key!=Ot){var wt=it;it=this.createTile_($,tt,et,nt,rt,Ot),wt.getState()==ot.a.IDLE?it.interimTile=wt.interimTile:it.interimTile=wt,it.refreshInterimChain(),this.tileCache.replace(at,it)}}else it=this.createTile_($,tt,et,nt,rt,Ot),this.tileCache.set(at,it);return it},e.prototype.setRenderReprojectionEdges=function($){if(Nt.a&&this.renderReprojectionEdges_!=$){for(var tt in this.renderReprojectionEdges_=$,this.tileCacheForProjection)this.tileCacheForProjection[tt].clear();this.changed()}},e.prototype.setTileGridForProjection=function($,tt){if(Nt.a){var et=Object(ye.k)($);if(et){var nt=Object(at.c)(et);nt in this.tileGridForProjection||(this.tileGridForProjection[nt]=tt)}}},e}(Be);function q($,tt){$.getImage().src=tt}tt.a=Ke},function($,tt,et){"use strict";et.r(tt);var nt=function(){function t($){var tt=$||{};this.color_=void 0!==tt.color?tt.color:null,this.lineCap_=tt.lineCap,this.lineDash_=void 0!==tt.lineDash?tt.lineDash:null,this.lineDashOffset_=tt.lineDashOffset,this.lineJoin_=tt.lineJoin,this.miterLimit_=tt.miterLimit,this.width_=tt.width}return t.prototype.clone=function(){var $=this.getColor();return new t({color:Array.isArray($)?$.slice():$||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function($){this.color_=$},t.prototype.setLineCap=function($){this.lineCap_=$},t.prototype.setLineDash=function($){this.lineDash_=$},t.prototype.setLineDashOffset=function($){this.lineDashOffset_=$},t.prototype.setLineJoin=function($){this.lineJoin_=$},t.prototype.setMiterLimit=function($){this.miterLimit_=$},t.prototype.setWidth=function($){this.width_=$},t}();tt.default=nt},function($,tt,et){"use strict";et.d(tt,"a",(function(){return it}));var nt=et(51),rt=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var $=0;for(var tt in this.cache_){var et=this.cache_[tt];0!=(3&$++)||et.hasListener()||(delete this.cache_[tt],--this.cacheSize_)}}},t.prototype.get=function($,tt,et){var nt=o($,tt,et);return nt in this.cache_?this.cache_[nt]:null},t.prototype.set=function($,tt,et,nt){var rt=o($,tt,et);this.cache_[rt]=nt,++this.cacheSize_},t.prototype.setSize=function($){this.maxCacheSize_=$,this.expire()},t}();function o($,tt,et){return tt+":"+$+":"+(et?Object(nt.b)(et):"null")}var it=new rt},function($,tt,et){"use strict";et.d(tt,"b",(function(){return l}));var nt,rt=et(8),it=et(9),ot=et(4),at=function(){function t($,tt){this.priorityFunction_=$,this.keyFunction_=tt,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(ot.b)(this.queuedElements_)},t.prototype.dequeue=function(){var $=this.elements_,tt=this.priorities_,et=$[0];1==$.length?($.length=0,tt.length=0):($[0]=$.pop(),tt[0]=tt.pop(),this.siftUp_(0));var nt=this.keyFunction_(et);return delete this.queuedElements_[nt],et},t.prototype.enqueue=function($){Object(it.a)(!(this.keyFunction_($)in this.queuedElements_),31);var tt=this.priorityFunction_($);return tt!=1/0&&(this.elements_.push($),this.priorities_.push(tt),this.queuedElements_[this.keyFunction_($)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function($){return 2*$+1},t.prototype.getRightChildIndex_=function($){return 2*$+2},t.prototype.getParentIndex_=function($){return $-1>>1},t.prototype.heapify_=function(){var $;for($=(this.elements_.length>>1)-1;$>=0;$--)this.siftUp_($)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function($){return $ in this.queuedElements_},t.prototype.isQueued=function($){return this.isKeyQueued(this.keyFunction_($))},t.prototype.siftUp_=function($){for(var tt=this.elements_,et=this.priorities_,nt=tt.length,rt=tt[$],it=et[$],ot=$;$<nt>>1;){var at=this.getLeftChildIndex_($),Ot=this.getRightChildIndex_($),wt=Ot<nt&&et[Ot]<et[at]?Ot:at;tt[$]=tt[wt],et[$]=et[wt],$=wt}tt[$]=rt,et[$]=it,this.siftDown_(ot,$)},t.prototype.siftDown_=function($,tt){for(var et=this.elements_,nt=this.priorities_,rt=et[tt],it=nt[tt];tt>$;){var ot=this.getParentIndex_(tt);if(!(nt[ot]>it))break;et[tt]=et[ot],nt[tt]=nt[ot],tt=ot}et[tt]=rt,nt[tt]=it},t.prototype.reprioritize=function(){var $,tt,et,nt=this.priorityFunction_,rt=this.elements_,it=this.priorities_,ot=0,at=rt.length;for(tt=0;tt<at;++tt)(et=nt($=rt[tt]))==1/0?delete this.queuedElements_[this.keyFunction_($)]:(it[ot]=et,rt[ot++]=$);rt.length=ot,it.length=ot,this.heapify_()},t}(),Ot=et(12),wt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),St=function($){function e(tt,et){var nt=$.call(this,(function($){return tt.apply(null,$)}),(function($){return $[0].getKey()}))||this;return nt.boundHandleTileChange_=nt.handleTileChange.bind(nt),nt.tileChangeCallback_=et,nt.tilesLoading_=0,nt.tilesLoadingKeys_={},nt}return wt(e,$),e.prototype.enqueue=function(tt){var et=$.prototype.enqueue.call(this,tt);return et&&tt[0].addEventListener(rt.a.CHANGE,this.boundHandleTileChange_),et},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function($){var tt=$.target,et=tt.getState();if(tt.hifi&&et===Ot.a.LOADED||et===Ot.a.ERROR||et===Ot.a.EMPTY){tt.removeEventListener(rt.a.CHANGE,this.boundHandleTileChange_);var nt=tt.getKey();nt in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[nt],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function($,tt){for(var et,nt,rt=0;this.tilesLoading_<$&&rt<tt&&this.getCount()>0;)nt=(et=this.dequeue()[0]).getKey(),et.getState()!==Ot.a.IDLE||nt in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[nt]=!0,++this.tilesLoading_,++rt,et.load())},e}(at);function l($,tt,et,nt,rt){if(!$||!(et in $.wantedTiles))return 1/0;if(!$.wantedTiles[et][tt.getKey()])return 1/0;var it=$.viewState.center,ot=nt[0]-it[0],at=nt[1]-it[1];return 65536*Math.log(rt)+Math.sqrt(ot*ot+at*at)/rt}tt.a=St},function($,tt,et){var nt=et(50).Symbol;$.exports=nt},function($,tt,et){"use strict";et.r(tt);var nt=et(2),rt=et(20),it=function(){function t($){this.opacity_=$.opacity,this.rotateWithView_=$.rotateWithView,this.rotation_=$.rotation,this.scale_=$.scale,this.scaleArray_=Object(rt.d)($.scale),this.displacement_=$.displacement}return t.prototype.clone=function(){var $=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray($)?$.slice():$,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return Object(nt.b)()},t.prototype.getImage=function($){return Object(nt.b)()},t.prototype.getHitDetectionImage=function(){return Object(nt.b)()},t.prototype.getPixelRatio=function($){return 1},t.prototype.getImageState=function(){return Object(nt.b)()},t.prototype.getImageSize=function(){return Object(nt.b)()},t.prototype.getHitDetectionImageSize=function(){return Object(nt.b)()},t.prototype.getOrigin=function(){return Object(nt.b)()},t.prototype.getSize=function(){return Object(nt.b)()},t.prototype.setOpacity=function($){this.opacity_=$},t.prototype.setRotateWithView=function($){this.rotateWithView_=$},t.prototype.setRotation=function($){this.rotation_=$},t.prototype.setScale=function($){this.scale_=$,this.scaleArray_=Object(rt.d)($)},t.prototype.listenImageChange=function($){Object(nt.b)()},t.prototype.load=function(){Object(nt.b)()},t.prototype.unlistenImageChange=function($){Object(nt.b)()},t}();tt.default=it},function($,tt,et){"use strict";et.r(tt);var nt,rt=et(17),it=et(18),ot=et(2),at=et(9),Ot=et(4),wt=et(5),St=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Ct=function($){function e(tt){var et=$.call(this)||this,nt=Object(Ot.a)({},tt);return nt[it.a.OPACITY]=void 0!==tt.opacity?tt.opacity:1,Object(at.a)("number"==typeof nt[it.a.OPACITY],64),nt[it.a.VISIBLE]=void 0===tt.visible||tt.visible,nt[it.a.Z_INDEX]=tt.zIndex,nt[it.a.MAX_RESOLUTION]=void 0!==tt.maxResolution?tt.maxResolution:1/0,nt[it.a.MIN_RESOLUTION]=void 0!==tt.minResolution?tt.minResolution:0,nt[it.a.MIN_ZOOM]=void 0!==tt.minZoom?tt.minZoom:-1/0,nt[it.a.MAX_ZOOM]=void 0!==tt.maxZoom?tt.maxZoom:1/0,et.className_=void 0!==nt.className?tt.className:"ol-layer",delete nt.className,et.setProperties(nt),et.state_=null,et}return St(e,$),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function($){var tt=this.state_||{layer:this,managed:void 0===$||$},et=this.getZIndex();return tt.opacity=Object(wt.a)(Math.round(100*this.getOpacity())/100,0,1),tt.sourceState=this.getSourceState(),tt.visible=this.getVisible(),tt.extent=this.getExtent(),tt.zIndex=void 0!==et?et:!1===tt.managed?1/0:0,tt.maxResolution=this.getMaxResolution(),tt.minResolution=Math.max(this.getMinResolution(),0),tt.minZoom=this.getMinZoom(),tt.maxZoom=this.getMaxZoom(),this.state_=tt,tt},e.prototype.getLayersArray=function($){return Object(ot.b)()},e.prototype.getLayerStatesArray=function($){return Object(ot.b)()},e.prototype.getExtent=function(){return this.get(it.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(it.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(it.a.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(it.a.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(it.a.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(it.a.OPACITY)},e.prototype.getSourceState=function(){return Object(ot.b)()},e.prototype.getVisible=function(){return this.get(it.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(it.a.Z_INDEX)},e.prototype.setExtent=function($){this.set(it.a.EXTENT,$)},e.prototype.setMaxResolution=function($){this.set(it.a.MAX_RESOLUTION,$)},e.prototype.setMinResolution=function($){this.set(it.a.MIN_RESOLUTION,$)},e.prototype.setMaxZoom=function($){this.set(it.a.MAX_ZOOM,$)},e.prototype.setMinZoom=function($){this.set(it.a.MIN_ZOOM,$)},e.prototype.setOpacity=function($){Object(at.a)("number"==typeof $,64),this.set(it.a.OPACITY,$)},e.prototype.setVisible=function($){this.set(it.a.VISIBLE,$)},e.prototype.setZIndex=function($){this.set(it.a.Z_INDEX,$)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),$.prototype.disposeInternal.call(this)},e}(rt.a);tt.default=Ct},function($,tt){$.exports=function($,tt){if(!($ instanceof tt))throw new TypeError("Cannot call a class as a function")}},function($,tt){function r($,tt){for(var et=0;et<tt.length;et++){var nt=tt[et];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty($,nt.key,nt)}}$.exports=function($,tt,et){return tt&&r($.prototype,tt),et&&r($,et),$}},function($,tt,et){"use strict";et.d(tt,"a",(function(){return i})),et.d(tt,"b",(function(){return o})),et(3);var nt=et(5);function i($,tt,et){var rt=et||6371008.8,it=Object(nt.j)($[1]),ot=Object(nt.j)(tt[1]),at=(ot-it)/2,Ot=Object(nt.j)(tt[0]-$[0])/2,wt=Math.sin(at)*Math.sin(at)+Math.sin(Ot)*Math.sin(Ot)*Math.cos(it)*Math.cos(ot);return 2*rt*Math.atan2(Math.sqrt(wt),Math.sqrt(1-wt))}function o($,tt,et,rt){var it=rt||6371008.8,ot=Object(nt.j)($[1]),at=Object(nt.j)($[0]),Ot=tt/it,wt=Math.asin(Math.sin(ot)*Math.cos(Ot)+Math.cos(ot)*Math.sin(Ot)*Math.cos(et)),St=at+Math.atan2(Math.sin(et)*Math.sin(Ot)*Math.cos(ot),Math.cos(Ot)-Math.sin(ot)*Math.sin(wt));return[Object(nt.i)(St),Object(nt.i)(wt)]}},function($,tt,et){"use strict";var nt,rt=et(15),it=et(3),ot=et(33),at=et(37),Ot=et(0),wt=et(38),St=et(44),Ct=et(31),Rt=et(77),Tt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),At=function($){function e(tt,et){var nt=$.call(this)||this;return nt.maxDelta_=-1,nt.maxDeltaRevision_=-1,void 0===et||Array.isArray(tt[0])?nt.setCoordinates(tt,et):nt.setFlatCoordinates(et,tt),nt}return Tt(e,$),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function($,tt,et,nt){return nt<Object(Ot.e)(this.getExtent(),$,tt)?nt:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(at.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(at.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,$,tt,et,nt))},e.prototype.getArea=function(){return Object(Rt.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(Ct.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function($){var tt=[];return tt.length=Object(St.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,$,tt,0),new e(tt,rt.a.XY)},e.prototype.getType=function(){return it.a.LINEAR_RING},e.prototype.intersectsExtent=function($){return!1},e.prototype.setCoordinates=function($,tt){this.setLayout(tt,$,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(wt.b)(this.flatCoordinates,0,$,this.stride),this.changed()},e}(ot.a);tt.a=At},function($,tt,et){"use strict";var nt=et(70),rt=et(68),it=et(9),ot=et(5),at=et(0),Ot=et(27),wt=et(10),St=et(20),Ct=[0,0,0],Rt=function(){function t($){var tt;if(this.minZoom=void 0!==$.minZoom?$.minZoom:0,this.resolutions_=$.resolutions,Object(it.a)(Object(wt.g)(this.resolutions_,(function($,tt){return tt-$}),!0),17),!$.origins)for(var et=0,ot=this.resolutions_.length-1;et<ot;++et)if(tt){if(this.resolutions_[et]/this.resolutions_[et+1]!==tt){tt=void 0;break}}else tt=this.resolutions_[et]/this.resolutions_[et+1];this.zoomFactor_=tt,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==$.origin?$.origin:null,this.origins_=null,void 0!==$.origins&&(this.origins_=$.origins,Object(it.a)(this.origins_.length==this.resolutions_.length,20));var Ot=$.extent;void 0===Ot||this.origin_||this.origins_||(this.origin_=Object(at.C)(Ot)),Object(it.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==$.tileSizes&&(this.tileSizes_=$.tileSizes,Object(it.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==$.tileSize?$.tileSize:this.tileSizes_?null:rt.b,Object(it.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==Ot?Ot:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==$.sizes?this.fullTileRanges_=$.sizes.map((function($,tt){var et=new nt.b(Math.min(0,$[0]),Math.max($[0]-1,-1),Math.min(0,$[1]),Math.max($[1]-1,-1));if(Ot){var rt=this.getTileRangeForExtentAndZ(Ot,tt);et.minX=Math.max(rt.minX,et.minX),et.maxX=Math.min(rt.maxX,et.maxX),et.minY=Math.max(rt.minY,et.minY),et.maxY=Math.min(rt.maxY,et.maxY)}return et}),this):Ot&&this.calculateTileRanges_(Ot)}return t.prototype.forEachTileCoord=function($,tt,et){for(var nt=this.getTileRangeForExtentAndZ($,tt),rt=nt.minX,it=nt.maxX;rt<=it;++rt)for(var ot=nt.minY,at=nt.maxY;ot<=at;++ot)et([tt,rt,ot])},t.prototype.forEachTileCoordParentTileRange=function($,tt,et,rt){var it,ot,at,Ot=null,wt=$[0]-1;for(2===this.zoomFactor_?(ot=$[1],at=$[2]):Ot=this.getTileCoordExtent($,rt);wt>=this.minZoom;){if(2===this.zoomFactor_?(ot=Math.floor(ot/2),at=Math.floor(at/2),it=Object(nt.a)(ot,ot,at,at,et)):it=this.getTileRangeForExtentAndZ(Ot,wt,et),tt(wt,it))return!0;--wt}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function($){return this.origin_?this.origin_:this.origins_[$]},t.prototype.getResolution=function($){return this.resolutions_[$]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function($,tt,et){if($[0]<this.maxZoom){if(2===this.zoomFactor_){var rt=2*$[1],it=2*$[2];return Object(nt.a)(rt,rt+1,it,it+1,tt)}var ot=this.getTileCoordExtent($,et);return this.getTileRangeForExtentAndZ(ot,$[0]+1,tt)}return null},t.prototype.getTileRangeExtent=function($,tt,et){var nt=this.getOrigin($),rt=this.getResolution($),it=Object(St.d)(this.getTileSize($),this.tmpSize_),ot=nt[0]+tt.minX*it[0]*rt,Ot=nt[0]+(tt.maxX+1)*it[0]*rt,wt=nt[1]+tt.minY*it[1]*rt,Ct=nt[1]+(tt.maxY+1)*it[1]*rt;return Object(at.k)(ot,wt,Ot,Ct,et)},t.prototype.getTileRangeForExtentAndZ=function($,tt,et){var rt=Ct;this.getTileCoordForXYAndZ_($[0],$[3],tt,!1,rt);var it=rt[1],ot=rt[2];return this.getTileCoordForXYAndZ_($[2],$[1],tt,!0,rt),Object(nt.a)(it,rt[1],ot,rt[2],et)},t.prototype.getTileCoordCenter=function($){var tt=this.getOrigin($[0]),et=this.getResolution($[0]),nt=Object(St.d)(this.getTileSize($[0]),this.tmpSize_);return[tt[0]+($[1]+.5)*nt[0]*et,tt[1]-($[2]+.5)*nt[1]*et]},t.prototype.getTileCoordExtent=function($,tt){var et=this.getOrigin($[0]),nt=this.getResolution($[0]),rt=Object(St.d)(this.getTileSize($[0]),this.tmpSize_),it=et[0]+$[1]*rt[0]*nt,ot=et[1]-($[2]+1)*rt[1]*nt,Ot=it+rt[0]*nt,wt=ot+rt[1]*nt;return Object(at.k)(it,ot,Ot,wt,tt)},t.prototype.getTileCoordForCoordAndResolution=function($,tt,et){return this.getTileCoordForXYAndResolution_($[0],$[1],tt,!1,et)},t.prototype.getTileCoordForXYAndResolution_=function($,tt,et,nt,rt){var it=this.getZForResolution(et),ot=et/this.getResolution(it),at=this.getOrigin(it),wt=Object(St.d)(this.getTileSize(it),this.tmpSize_),Ct=nt?.5:0,Rt=nt?.5:0,Tt=Math.floor(($-at[0])/et+Ct),At=Math.floor((at[1]-tt)/et+Rt),Nt=ot*Tt/wt[0],kt=ot*At/wt[1];return nt?(Nt=Math.ceil(Nt)-1,kt=Math.ceil(kt)-1):(Nt=Math.floor(Nt),kt=Math.floor(kt)),Object(Ot.a)(it,Nt,kt,rt)},t.prototype.getTileCoordForXYAndZ_=function($,tt,et,nt,rt){var it=this.getOrigin(et),ot=this.getResolution(et),at=Object(St.d)(this.getTileSize(et),this.tmpSize_),wt=nt?.5:0,Ct=nt?.5:0,Rt=Math.floor(($-it[0])/ot+wt),Tt=Math.floor((it[1]-tt)/ot+Ct),At=Rt/at[0],Nt=Tt/at[1];return nt?(At=Math.ceil(At)-1,Nt=Math.ceil(Nt)-1):(At=Math.floor(At),Nt=Math.floor(Nt)),Object(Ot.a)(et,At,Nt,rt)},t.prototype.getTileCoordForCoordAndZ=function($,tt,et){return this.getTileCoordForXYAndZ_($[0],$[1],tt,!1,et)},t.prototype.getTileCoordResolution=function($){return this.resolutions_[$[0]]},t.prototype.getTileSize=function($){return this.tileSize_?this.tileSize_:this.tileSizes_[$]},t.prototype.getFullTileRange=function($){return this.fullTileRanges_?this.fullTileRanges_[$]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,$):null},t.prototype.getZForResolution=function($,tt){var et=Object(wt.h)(this.resolutions_,$,tt||0);return Object(ot.a)(et,this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function($){for(var tt=this.resolutions_.length,et=new Array(tt),nt=this.minZoom;nt<tt;++nt)et[nt]=this.getTileRangeForExtentAndZ($,nt);this.fullTileRanges_=et},t}();tt.a=Rt},function($,tt,et){var nt=et(206),rt=et(207),it=et(208),ot=et(209),at=et(210);function u($){var tt=-1,et=null==$?0:$.length;for(this.clear();++tt<et;){var nt=$[tt];this.set(nt[0],nt[1])}}u.prototype.clear=nt,u.prototype.delete=rt,u.prototype.get=it,u.prototype.has=ot,u.prototype.set=at,$.exports=u},function($,tt,et){var nt=et(116);$.exports=function($,tt){for(var et=$.length;et--;)if(nt($[et][0],tt))return et;return-1}},function($,tt,et){var nt=et(65)(Object,"create");$.exports=nt},function($,tt,et){var nt=et(230);$.exports=function($,tt){var et=$.__data__;return nt(tt)?et["string"==typeof tt?"string":"hash"]:et.map}},function($,tt,et){var nt=et(141),rt=et(142);$.exports=function($,tt,et,it){var ot=!et;et||(et={});for(var at=-1,Ot=tt.length;++at<Ot;){var wt=tt[at],St=it?it(et[wt],$[wt],wt,et,$):void 0;void 0===St&&(St=$[wt]),ot?rt(et,wt,St):nt(et,wt,St)}return et}},function($,tt,et){var nt=et(143),rt=et(241),it=et(148);$.exports=function($){return it($)?nt($):rt($)}},function($,tt,et){var nt=et(252),rt=et(117),it=et(253),ot=et(254),at=et(255),Ot=et(72),wt=et(140),St=wt(nt),Ct=wt(rt),Rt=wt(it),Tt=wt(ot),At=wt(at),Nt=Ot;(nt&&"[object DataView]"!=Nt(new nt(new ArrayBuffer(1)))||rt&&"[object Map]"!=Nt(new rt)||it&&"[object Promise]"!=Nt(it.resolve())||ot&&"[object Set]"!=Nt(new ot)||at&&"[object WeakMap]"!=Nt(new at))&&(Nt=function($){var tt=Ot($),et="[object Object]"==tt?$.constructor:void 0,nt=et?wt(et):"";if(nt)switch(nt){case St:return"[object DataView]";case Ct:return"[object Map]";case Rt:return"[object Promise]";case Tt:return"[object Set]";case At:return"[object WeakMap]"}return tt}),$.exports=Nt},function($,tt,et){var nt=et(72),rt=et(60);$.exports=function($){return"symbol"==typeof $||rt($)&&"[object Symbol]"==nt($)}},function($,tt,et){var nt=et(98);$.exports=function($){if("string"==typeof $||nt($))return $;var tt=$+"";return"0"==tt&&1/$==-1/0?"-0":tt}},function($,tt){function r(tt){return $.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function($){return $.__proto__||Object.getPrototypeOf($)},r(tt)}$.exports=r},function($,tt,et){"use strict";var nt,rt=et(2),it=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),ot=function($){function e(tt){var et=this,nt="Assertion failed. See https://openlayers.org/en/"+("latest"===rt.a?rt.a:"v"+rt.a.split("-")[0])+"/doc/errors/#"+tt+" for details.";return(et=$.call(this,nt)||this).code=tt,et.name="AssertionError",et.message=nt,et}return it(e,$),e}(Error);tt.a=ot},function($,tt,et){"use strict";et.r(tt),et.d(tt,"toFunction",(function(){return c})),et.d(tt,"createDefaultStyle",(function(){return l})),et.d(tt,"createEditingStyle",(function(){return p}));var nt=et(103),rt=et(67),it=et(3),ot=et(80),at=et(9),Ot=function(){function t($){var tt=$||{};this.geometry_=null,this.geometryFunction_=f,void 0!==tt.geometry&&this.setGeometry(tt.geometry),this.fill_=void 0!==tt.fill?tt.fill:null,this.image_=void 0!==tt.image?tt.image:null,this.renderer_=void 0!==tt.renderer?tt.renderer:null,this.stroke_=void 0!==tt.stroke?tt.stroke:null,this.text_=void 0!==tt.text?tt.text:null,this.zIndex_=tt.zIndex}return t.prototype.clone=function(){var $=this.getGeometry();return $&&"object"==typeof $&&($=$.clone()),new t({geometry:$,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function($){this.renderer_=$},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function($){this.fill_=$},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function($){this.image_=$},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function($){this.stroke_=$},t.prototype.getText=function(){return this.text_},t.prototype.setText=function($){this.text_=$},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function($){"function"==typeof $?this.geometryFunction_=$:"string"==typeof $?this.geometryFunction_=function(tt){return tt.get($)}:$?void 0!==$&&(this.geometryFunction_=function(){return $}):this.geometryFunction_=f,this.geometry_=$},t.prototype.setZIndex=function($){this.zIndex_=$},t}();function c($){var tt,et;"function"==typeof $?tt=$:(Array.isArray($)?et=$:(Object(at.a)("function"==typeof $.getZIndex,41),et=[$]),tt=function(){return et});return tt}var wt=null;function l($,tt){if(!wt){var et=new rt.default({color:"rgba(255,255,255,0.4)"}),it=new ot.default({color:"#3399CC",width:1.25});wt=[new Ot({image:new nt.default({fill:et,stroke:it,radius:5}),fill:et,stroke:it})]}return wt}function p(){var $={},tt=[255,255,255,1],et=[0,153,255,1];return $[it.a.POLYGON]=[new Ot({fill:new rt.default({color:[255,255,255,.5]})})],$[it.a.MULTI_POLYGON]=$[it.a.POLYGON],$[it.a.LINE_STRING]=[new Ot({stroke:new ot.default({color:tt,width:5})}),new Ot({stroke:new ot.default({color:et,width:3})})],$[it.a.MULTI_LINE_STRING]=$[it.a.LINE_STRING],$[it.a.CIRCLE]=$[it.a.POLYGON].concat($[it.a.LINE_STRING]),$[it.a.POINT]=[new Ot({image:new nt.default({radius:6,fill:new rt.default({color:et}),stroke:new ot.default({color:tt,width:1.5})}),zIndex:1/0})],$[it.a.MULTI_POINT]=$[it.a.POINT],$[it.a.GEOMETRY_COLLECTION]=$[it.a.POLYGON].concat($[it.a.LINE_STRING],$[it.a.POINT]),$}function f($){return $.getGeometry()}tt.default=Ot},function($,tt,et){"use strict";et.r(tt);var nt,rt=et(130),it=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),ot=function($){function e(tt){var et=tt||{};return $.call(this,{points:1/0,fill:et.fill,radius:et.radius,stroke:et.stroke,scale:void 0!==et.scale?et.scale:1,rotation:void 0!==et.rotation?et.rotation:0,rotateWithView:void 0!==et.rotateWithView&&et.rotateWithView,displacement:void 0!==et.displacement?et.displacement:[0,0]})||this}return it(e,$),e.prototype.clone=function(){var $=this.getScale(),tt=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray($)?$.slice():$,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return tt.setOpacity(this.getOpacity()),tt},e.prototype.setRadius=function($){this.radius_=$,this.render()},e}(rt.default);tt.default=ot},function($,tt,et){"use strict";var nt,rt=et(43),it=et(8),ot=et(7),at=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Ot=function($){function e(){var tt=$.call(this)||this;return tt.revision_=0,tt}return at(e,$),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(it.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function($,tt){if(Array.isArray($)){for(var et=$.length,nt=new Array(et),rt=0;rt<et;++rt)nt[rt]=Object(ot.a)(this,$[rt],tt);return nt}return Object(ot.a)(this,$,tt)},e.prototype.once=function($,tt){var et;if(Array.isArray($)){var nt=$.length;et=new Array(nt);for(var rt=0;rt<nt;++rt)et[rt]=Object(ot.b)(this,$[rt],tt)}else et=Object(ot.b)(this,$,tt);return tt.ol_key=et,et},e.prototype.un=function($,tt){var et=tt.ol_key;if(et)!function($){if(Array.isArray($))for(var tt=0,et=$.length;tt<et;++tt)Object(ot.c)($[tt]);else Object(ot.c)($)}(et);else if(Array.isArray($))for(var nt=0,rt=$.length;nt<rt;++nt)this.removeEventListener($[nt],tt);else this.removeEventListener($,tt)},e}(rt.a);tt.a=Ot},function($,tt,et){"use strict";tt.a={POINT:"point",LINE:"line"}},function($,tt,et){"use strict";var nt,rt=et(43),it=et(8),ot=et(2),at=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Ot=function($){function e(tt,et,nt,rt){var it=$.call(this)||this;return it.extent=tt,it.pixelRatio_=nt,it.resolution=et,it.state=rt,it}return at(e,$),e.prototype.changed=function(){this.dispatchEvent(it.a.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Object(ot.b)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Object(ot.b)()},e}(rt.a);tt.a=Ot},function($,tt,et){"use strict";et.d(tt,"a",(function(){return o})),et.d(tt,"b",(function(){return a}));var nt=et(46),rt=et(10);function o($,tt,et,it,ot,at,Ot){for(var wt,St,Ct,Rt,Tt,At,Nt,kt=ot[at+1],Dt=[],Gt=0,Ut=et.length;Gt<Ut;++Gt){var Xt=et[Gt];for(Rt=$[Xt-it],At=$[Xt-it+1],wt=tt;wt<Xt;wt+=it)Tt=$[wt],Nt=$[wt+1],(kt<=At&&Nt<=kt||At<=kt&&kt<=Nt)&&(Ct=(kt-At)/(Nt-At)*(Tt-Rt)+Rt,Dt.push(Ct)),Rt=Tt,At=Nt}var Vt=NaN,Jt=-1/0;for(Dt.sort(rt.i),Rt=Dt[0],wt=1,St=Dt.length;wt<St;++wt){Tt=Dt[wt];var ne=Math.abs(Tt-Rt);ne>Jt&&(Ct=(Rt+Tt)/2,Object(nt.c)($,tt,et,it,Ct,kt)&&(Vt=Ct,Jt=ne)),Rt=Tt}return isNaN(Vt)&&(Vt=ot[at]),Ot?(Ot.push(Vt,kt,Jt),Ot):[Vt,kt,Jt]}function a($,tt,et,nt,rt){for(var it=[],ot=0,at=et.length;ot<at;++ot){var Ot=et[ot];it=o($,tt,Ot,nt,rt,2*ot,it),tt=Ot[Ot.length-1]}return it}},function($,tt,et){"use strict";var nt,rt=et(17),it=et(19),ot=et(2),at=et(11),Ot=et(0),wt=et(1),St=et(16),Ct=et(32),Rt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Tt=Object(at.c)(),At=function($){function e(){var tt=$.call(this)||this;return tt.extent_=Object(Ot.j)(),tt.extentRevision_=-1,tt.simplifiedGeometryMaxMinSquaredTolerance=0,tt.simplifiedGeometryRevision=0,tt.simplifyTransformedInternal=Object(St.d)((function($,tt,et){if(!et)return this.getSimplifiedGeometry(tt);var nt=this.clone();return nt.applyTransform(et),nt.getSimplifiedGeometry(tt)})),tt}return Rt(e,$),e.prototype.simplifyTransformed=function($,tt){return this.simplifyTransformedInternal(this.getRevision(),$,tt)},e.prototype.clone=function(){return Object(ot.b)()},e.prototype.closestPointXY=function($,tt,et,nt){return Object(ot.b)()},e.prototype.containsXY=function($,tt){var et=this.getClosestPoint([$,tt]);return et[0]===$&&et[1]===tt},e.prototype.getClosestPoint=function($,tt){var et=tt||[NaN,NaN];return this.closestPointXY($[0],$[1],et,1/0),et},e.prototype.intersectsCoordinate=function($){return this.containsXY($[0],$[1])},e.prototype.computeExtent=function($){return Object(ot.b)()},e.prototype.getExtent=function($){if(this.extentRevision_!=this.getRevision()){var tt=this.computeExtent(this.extent_);(isNaN(tt[0])||isNaN(tt[1]))&&Object(Ot.l)(tt),this.extentRevision_=this.getRevision()}return Object(Ot.I)(this.extent_,$)},e.prototype.rotate=function($,tt){Object(ot.b)()},e.prototype.scale=function($,tt,et){Object(ot.b)()},e.prototype.simplify=function($){return this.getSimplifiedGeometry($*$)},e.prototype.getSimplifiedGeometry=function($){return Object(ot.b)()},e.prototype.getType=function(){return Object(ot.b)()},e.prototype.applyTransform=function($){Object(ot.b)()},e.prototype.intersectsExtent=function($){return Object(ot.b)()},e.prototype.translate=function($,tt){Object(ot.b)()},e.prototype.transform=function($,tt){var et=Object(wt.k)($),nt=et.getUnits()==it.default.TILE_PIXELS?function($,nt,rt){var it=et.getExtent(),ot=et.getWorldExtent(),St=Object(Ot.A)(ot)/Object(Ot.A)(it);return Object(at.b)(Tt,ot[0],ot[3],St,-St,0,0,0),Object(Ct.c)($,0,$.length,rt,Tt,nt),Object(wt.m)(et,tt)($,nt,rt)}:Object(wt.m)(et,tt);return this.applyTransform(nt),this},e}(rt.a);tt.a=At},function($,tt,et){"use strict";function n($,tt,et,nt,rt){for(var it,ot=[$[tt],$[tt+1]],at=[];tt+nt<et;tt+=nt){if(at[0]=$[tt+nt],at[1]=$[tt+nt+1],it=rt(ot,at))return it;ot[0]=at[0],ot[1]=at[1]}return!1}et.d(tt,"a",(function(){return n}))},function($,tt,et){"use strict";var nt,rt=et(25),it=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),ot=function($){function e(tt,et,nt,rt){var it=$.call(this,tt)||this;return it.inversePixelTransform=et,it.frameState=nt,it.context=rt,it}return it(e,$),e}(rt.a);tt.a=ot},function($,tt,et){"use strict";var nt=et(0),rt=et(1),it=et(5),ot=function(){function t($,tt,et,ot,at,Ot){this.sourceProj_=$,this.targetProj_=tt;var wt={},St=Object(rt.m)(this.targetProj_,this.sourceProj_);this.transformInv_=function($){var tt=$[0]+"/"+$[1];return wt[tt]||(wt[tt]=St($)),wt[tt]},this.maxSourceExtent_=ot,this.errorThresholdSquared_=at*at,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!ot&&!!this.sourceProj_.getExtent()&&Object(nt.E)(ot)==Object(nt.E)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(nt.E)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(nt.E)(this.targetProj_.getExtent()):null;var Ct=Object(nt.C)(et),Rt=Object(nt.D)(et),Tt=Object(nt.w)(et),At=Object(nt.v)(et),Nt=this.transformInv_(Ct),kt=this.transformInv_(Rt),Dt=this.transformInv_(Tt),Gt=this.transformInv_(At),Ut=10+(Ot?Math.max(0,Math.ceil(Object(it.d)(Object(nt.u)(et)/(Ot*Ot*256*256)))):0);if(this.addQuad_(Ct,Rt,Tt,At,Nt,kt,Dt,Gt,Ut),this.wrapsXInSource_){var Xt=1/0;this.triangles_.forEach((function($,tt,et){Xt=Math.min(Xt,$.source[0][0],$.source[1][0],$.source[2][0])})),this.triangles_.forEach(function($){if(Math.max($.source[0][0],$.source[1][0],$.source[2][0])-Xt>this.sourceWorldWidth_/2){var tt=[[$.source[0][0],$.source[0][1]],[$.source[1][0],$.source[1][1]],[$.source[2][0],$.source[2][1]]];tt[0][0]-Xt>this.sourceWorldWidth_/2&&(tt[0][0]-=this.sourceWorldWidth_),tt[1][0]-Xt>this.sourceWorldWidth_/2&&(tt[1][0]-=this.sourceWorldWidth_),tt[2][0]-Xt>this.sourceWorldWidth_/2&&(tt[2][0]-=this.sourceWorldWidth_);var et=Math.min(tt[0][0],tt[1][0],tt[2][0]);Math.max(tt[0][0],tt[1][0],tt[2][0])-et<this.sourceWorldWidth_/2&&($.source=tt)}}.bind(this))}wt={}}return t.prototype.addTriangle_=function($,tt,et,nt,rt,it){this.triangles_.push({source:[nt,rt,it],target:[$,tt,et]})},t.prototype.addQuad_=function($,tt,et,rt,ot,at,Ot,wt,St){var Ct=Object(nt.b)([ot,at,Ot,wt]),Rt=this.sourceWorldWidth_?Object(nt.E)(Ct)/this.sourceWorldWidth_:null,Tt=this.sourceWorldWidth_,At=this.sourceProj_.canWrapX()&&Rt>.5&&Rt<1,Nt=!1;if(St>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var kt=Object(nt.b)([$,tt,et,rt]);Nt=Object(nt.E)(kt)/this.targetWorldWidth_>.25||Nt}!At&&this.sourceProj_.isGlobal()&&Rt&&(Nt=Rt>.25||Nt)}if(!(!Nt&&this.maxSourceExtent_&&isFinite(Ct[0])&&isFinite(Ct[1])&&isFinite(Ct[2])&&isFinite(Ct[3]))||Object(nt.F)(Ct,this.maxSourceExtent_)){var Dt=0;if(!(Nt||isFinite(ot[0])&&isFinite(ot[1])&&isFinite(at[0])&&isFinite(at[1])&&isFinite(Ot[0])&&isFinite(Ot[1])&&isFinite(wt[0])&&isFinite(wt[1])))if(St>0)Nt=!0;else if(1!=(Dt=(isFinite(ot[0])&&isFinite(ot[1])?0:8)+(isFinite(at[0])&&isFinite(at[1])?0:4)+(isFinite(Ot[0])&&isFinite(Ot[1])?0:2)+(isFinite(wt[0])&&isFinite(wt[1])?0:1))&&2!=Dt&&4!=Dt&&8!=Dt)return;if(St>0){if(!Nt){var Gt=[($[0]+et[0])/2,($[1]+et[1])/2],Ut=this.transformInv_(Gt),Xt=void 0;Xt=At?(Object(it.e)(ot[0],Tt)+Object(it.e)(Ot[0],Tt))/2-Object(it.e)(Ut[0],Tt):(ot[0]+Ot[0])/2-Ut[0];var Vt=(ot[1]+Ot[1])/2-Ut[1];Nt=Xt*Xt+Vt*Vt>this.errorThresholdSquared_}if(Nt){if(Math.abs($[0]-et[0])<=Math.abs($[1]-et[1])){var Jt=[(tt[0]+et[0])/2,(tt[1]+et[1])/2],ne=this.transformInv_(Jt),re=[(rt[0]+$[0])/2,(rt[1]+$[1])/2],ie=this.transformInv_(re);this.addQuad_($,tt,Jt,re,ot,at,ne,ie,St-1),this.addQuad_(re,Jt,et,rt,ie,ne,Ot,wt,St-1)}else{var oe=[($[0]+tt[0])/2,($[1]+tt[1])/2],ae=this.transformInv_(oe),fe=[(et[0]+rt[0])/2,(et[1]+rt[1])/2],de=this.transformInv_(fe);this.addQuad_($,oe,fe,rt,ot,ae,de,wt,St-1),this.addQuad_(oe,tt,et,fe,ae,at,Ot,de,St-1)}return}}if(At){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&Dt)&&this.addTriangle_($,et,rt,ot,Ot,wt),0==(14&Dt)&&this.addTriangle_($,et,tt,ot,Ot,at),Dt&&(0==(13&Dt)&&this.addTriangle_(tt,rt,$,at,wt,ot),0==(7&Dt)&&this.addTriangle_(tt,rt,et,at,wt,Ot))}},t.prototype.calculateSourceExtent=function(){var $=Object(nt.j)();return this.triangles_.forEach((function(tt,et,rt){var it=tt.source;Object(nt.r)($,it[0]),Object(nt.r)($,it[1]),Object(nt.r)($,it[2])})),$},t.prototype.getTriangles=function(){return this.triangles_},t}();tt.a=ot},function($,tt,et){$.exports=function(){"use strict";function t($,tt,et,nt,rt){!function t($,tt,et,nt,rt){for(;nt>et;){if(nt-et>600){var it=nt-et+1,ot=tt-et+1,at=Math.log(it),Ot=.5*Math.exp(2*at/3),wt=.5*Math.sqrt(at*Ot*(it-Ot)/it)*(ot-it/2<0?-1:1);t($,tt,Math.max(et,Math.floor(tt-ot*Ot/it+wt)),Math.min(nt,Math.floor(tt+(it-ot)*Ot/it+wt)),rt)}var St=$[tt],Ct=et,Rt=nt;for(e($,et,tt),rt($[nt],St)>0&&e($,et,nt);Ct<Rt;){for(e($,Ct,Rt),Ct++,Rt--;rt($[Ct],St)<0;)Ct++;for(;rt($[Rt],St)>0;)Rt--}0===rt($[et],St)?e($,et,Rt):e($,++Rt,nt),Rt<=tt&&(et=Rt+1),tt<=Rt&&(nt=Rt-1)}}($,tt,et||0,nt||$.length-1,rt||r)}function e($,tt,et){var nt=$[tt];$[tt]=$[et],$[et]=nt}function r($,tt){return $<tt?-1:$>tt?1:0}var n=function($){void 0===$&&($=9),this._maxEntries=Math.max(4,$),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i($,tt,et){if(!et)return tt.indexOf($);for(var nt=0;nt<tt.length;nt++)if(et($,tt[nt]))return nt;return-1}function o($,tt){a($,0,$.children.length,tt,$)}function a($,tt,et,nt,rt){rt||(rt=d(null)),rt.minX=1/0,rt.minY=1/0,rt.maxX=-1/0,rt.maxY=-1/0;for(var it=tt;it<et;it++){var ot=$.children[it];s(rt,$.leaf?nt(ot):ot)}return rt}function s($,tt){return $.minX=Math.min($.minX,tt.minX),$.minY=Math.min($.minY,tt.minY),$.maxX=Math.max($.maxX,tt.maxX),$.maxY=Math.max($.maxY,tt.maxY),$}function u($,tt){return $.minX-tt.minX}function c($,tt){return $.minY-tt.minY}function h($){return($.maxX-$.minX)*($.maxY-$.minY)}function l($){return $.maxX-$.minX+($.maxY-$.minY)}function p($,tt){return $.minX<=tt.minX&&$.minY<=tt.minY&&tt.maxX<=$.maxX&&tt.maxY<=$.maxY}function f($,tt){return tt.minX<=$.maxX&&tt.minY<=$.maxY&&tt.maxX>=$.minX&&tt.maxY>=$.minY}function d($){return{children:$,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y($,tt,et,nt,rt){for(var it=[tt,et];it.length;)if(!((et=it.pop())-(tt=it.pop())<=nt)){var ot=tt+Math.ceil((et-tt)/nt/2)*nt;t($,ot,tt,et,rt),it.push(tt,ot,ot,et)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function($){var tt=this.data,et=[];if(!f($,tt))return et;for(var nt=this.toBBox,rt=[];tt;){for(var it=0;it<tt.children.length;it++){var ot=tt.children[it],at=tt.leaf?nt(ot):ot;f($,at)&&(tt.leaf?et.push(ot):p($,at)?this._all(ot,et):rt.push(ot))}tt=rt.pop()}return et},n.prototype.collides=function($){var tt=this.data;if(!f($,tt))return!1;for(var et=[];tt;){for(var nt=0;nt<tt.children.length;nt++){var rt=tt.children[nt],it=tt.leaf?this.toBBox(rt):rt;if(f($,it)){if(tt.leaf||p($,it))return!0;et.push(rt)}}tt=et.pop()}return!1},n.prototype.load=function($){if(!$||!$.length)return this;if($.length<this._minEntries){for(var tt=0;tt<$.length;tt++)this.insert($[tt]);return this}var et=this._build($.slice(),0,$.length-1,0);if(this.data.children.length)if(this.data.height===et.height)this._splitRoot(this.data,et);else{if(this.data.height<et.height){var nt=this.data;this.data=et,et=nt}this._insert(et,this.data.height-et.height-1,!0)}else this.data=et;return this},n.prototype.insert=function($){return $&&this._insert($,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function($,tt){if(!$)return this;for(var et,nt,rt,it=this.data,ot=this.toBBox($),at=[],Ot=[];it||at.length;){if(it||(it=at.pop(),nt=at[at.length-1],et=Ot.pop(),rt=!0),it.leaf){var wt=i($,it.children,tt);if(-1!==wt)return it.children.splice(wt,1),at.push(it),this._condense(at),this}rt||it.leaf||!p(it,ot)?nt?(et++,it=nt.children[et],rt=!1):it=null:(at.push(it),Ot.push(et),et=0,nt=it,it=it.children[0])}return this},n.prototype.toBBox=function($){return $},n.prototype.compareMinX=function($,tt){return $.minX-tt.minX},n.prototype.compareMinY=function($,tt){return $.minY-tt.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function($){return this.data=$,this},n.prototype._all=function($,tt){for(var et=[];$;)$.leaf?tt.push.apply(tt,$.children):et.push.apply(et,$.children),$=et.pop();return tt},n.prototype._build=function($,tt,et,nt){var rt,it=et-tt+1,ot=this._maxEntries;if(it<=ot)return o(rt=d($.slice(tt,et+1)),this.toBBox),rt;nt||(nt=Math.ceil(Math.log(it)/Math.log(ot)),ot=Math.ceil(it/Math.pow(ot,nt-1))),(rt=d([])).leaf=!1,rt.height=nt;var at=Math.ceil(it/ot),Ot=at*Math.ceil(Math.sqrt(ot));y($,tt,et,Ot,this.compareMinX);for(var wt=tt;wt<=et;wt+=Ot){var St=Math.min(wt+Ot-1,et);y($,wt,St,at,this.compareMinY);for(var Ct=wt;Ct<=St;Ct+=at){var Rt=Math.min(Ct+at-1,St);rt.children.push(this._build($,Ct,Rt,nt-1))}}return o(rt,this.toBBox),rt},n.prototype._chooseSubtree=function($,tt,et,nt){for(;nt.push(tt),!tt.leaf&&nt.length-1!==et;){for(var rt=1/0,it=1/0,ot=void 0,at=0;at<tt.children.length;at++){var Ot=tt.children[at],wt=h(Ot),St=(Ct=$,Rt=Ot,(Math.max(Rt.maxX,Ct.maxX)-Math.min(Rt.minX,Ct.minX))*(Math.max(Rt.maxY,Ct.maxY)-Math.min(Rt.minY,Ct.minY))-wt);St<it?(it=St,rt=wt<rt?wt:rt,ot=Ot):St===it&&wt<rt&&(rt=wt,ot=Ot)}tt=ot||tt.children[0]}var Ct,Rt;return tt},n.prototype._insert=function($,tt,et){var nt=et?$:this.toBBox($),rt=[],it=this._chooseSubtree(nt,this.data,tt,rt);for(it.children.push($),s(it,nt);tt>=0&&rt[tt].children.length>this._maxEntries;)this._split(rt,tt),tt--;this._adjustParentBBoxes(nt,rt,tt)},n.prototype._split=function($,tt){var et=$[tt],nt=et.children.length,rt=this._minEntries;this._chooseSplitAxis(et,rt,nt);var it=this._chooseSplitIndex(et,rt,nt),ot=d(et.children.splice(it,et.children.length-it));ot.height=et.height,ot.leaf=et.leaf,o(et,this.toBBox),o(ot,this.toBBox),tt?$[tt-1].children.push(ot):this._splitRoot(et,ot)},n.prototype._splitRoot=function($,tt){this.data=d([$,tt]),this.data.height=$.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function($,tt,et){for(var nt,rt,it,ot,at,Ot,wt,St=1/0,Ct=1/0,Rt=tt;Rt<=et-tt;Rt++){var Tt=a($,0,Rt,this.toBBox),At=a($,Rt,et,this.toBBox),Nt=(rt=Tt,it=At,ot=Math.max(rt.minX,it.minX),at=Math.max(rt.minY,it.minY),Ot=Math.min(rt.maxX,it.maxX),wt=Math.min(rt.maxY,it.maxY),Math.max(0,Ot-ot)*Math.max(0,wt-at)),kt=h(Tt)+h(At);Nt<St?(St=Nt,nt=Rt,Ct=kt<Ct?kt:Ct):Nt===St&&kt<Ct&&(Ct=kt,nt=Rt)}return nt||et-tt},n.prototype._chooseSplitAxis=function($,tt,et){var nt=$.leaf?this.compareMinX:u,rt=$.leaf?this.compareMinY:c;this._allDistMargin($,tt,et,nt)<this._allDistMargin($,tt,et,rt)&&$.children.sort(nt)},n.prototype._allDistMargin=function($,tt,et,nt){$.children.sort(nt);for(var rt=this.toBBox,it=a($,0,tt,rt),ot=a($,et-tt,et,rt),at=l(it)+l(ot),Ot=tt;Ot<et-tt;Ot++){var wt=$.children[Ot];s(it,$.leaf?rt(wt):wt),at+=l(it)}for(var St=et-tt-1;St>=tt;St--){var Ct=$.children[St];s(ot,$.leaf?rt(Ct):Ct),at+=l(ot)}return at},n.prototype._adjustParentBBoxes=function($,tt,et){for(var nt=et;nt>=0;nt--)s(tt[nt],$)},n.prototype._condense=function($){for(var tt=$.length-1,et=void 0;tt>=0;tt--)0===$[tt].children.length?tt>0?(et=$[tt-1].children).splice(et.indexOf($[tt]),1):this.clear():o($[tt],this.toBBox)},n}()},,function($,tt){function r(tt,et){return $.exports=r=Object.setPrototypeOf||function($,tt){return $.__proto__=tt,$},r(tt,et)}$.exports=r},function($,tt,et){var nt=et(91),rt=et(211),it=et(212),ot=et(213),at=et(214),Ot=et(215);function c($){var tt=this.__data__=new nt($);this.size=tt.size}c.prototype.clear=rt,c.prototype.delete=it,c.prototype.get=ot,c.prototype.has=at,c.prototype.set=Ot,$.exports=c},function($,tt){$.exports=function($,tt){return $===tt||$!=$&&tt!=tt}},function($,tt,et){var nt=et(65)(et(50),"Map");$.exports=nt},function($,tt,et){var nt=et(222),rt=et(229),it=et(231),ot=et(232),at=et(233);function u($){var tt=-1,et=null==$?0:$.length;for(this.clear();++tt<et;){var nt=$[tt];this.set(nt[0],nt[1])}}u.prototype.clear=nt,u.prototype.delete=rt,u.prototype.get=it,u.prototype.has=ot,u.prototype.set=at,$.exports=u},function($,tt,et){(function($){var nt=et(50),rt=et(239),it=tt&&!tt.nodeType&&tt,ot=it&&"object"==typeof $&&$&&!$.nodeType&&$,at=ot&&ot.exports===it?nt.Buffer:void 0,Ot=(at?at.isBuffer:void 0)||rt;$.exports=Ot}).call(this,et(120)($))},function($,tt){$.exports=function($){return $.webpackPolyfill||($.deprecate=function(){},$.paths=[],$.children||($.children=[]),Object.defineProperty($,"loaded",{enumerable:!0,get:function(){return $.l}}),Object.defineProperty($,"id",{enumerable:!0,get:function(){return $.i}}),$.webpackPolyfill=1),$}},function($,tt){$.exports=function($){return"number"==typeof $&&$>-1&&$%1==0&&$<=9007199254740991}},function($,tt){$.exports=function($){return function(tt){return $(tt)}}},function($,tt,et){(function($){var nt=et(139),rt=tt&&!tt.nodeType&&tt,it=rt&&"object"==typeof $&&$&&!$.nodeType&&$,ot=it&&it.exports===rt&&nt.process,at=function(){try{return it&&it.require&&it.require("util").types||ot&&ot.binding&&ot.binding("util")}catch($){}}();$.exports=at}).call(this,et(120)($))},function($,tt){var et=Object.prototype;$.exports=function($){var tt=$&&$.constructor;return $===("function"==typeof tt&&tt.prototype||et)}},function($,tt,et){var nt=et(143),rt=et(244),it=et(148);$.exports=function($){return it($)?nt($,!0):rt($)}},function($,tt,et){var nt=et(249),rt=et(149),it=Object.prototype.propertyIsEnumerable,ot=Object.getOwnPropertySymbols,at=ot?function($){return null==$?[]:($=Object($),nt(ot($),(function(tt){return it.call($,tt)})))}:rt;$.exports=at},function($,tt,et){var nt=et(155);$.exports=function($){var tt=new $.constructor($.byteLength);return new nt(tt).set(new nt($)),tt}},function($,tt,et){"use strict";function n($){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($){return typeof $}:function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $})($)}Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=function($){if(!("string"==typeof $||$ instanceof String)){var tt=n($);throw null===$?tt="null":"object"===tt&&(tt=$.constructor.name),new TypeError("Expected a string but received a ".concat(tt))}},$.exports=tt.default,$.exports.default=tt.default},function($,tt,et){var nt=et(47),rt=et(98),it=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ot=/^\w*$/;$.exports=function($,tt){if(nt($))return!1;var et=typeof $;return!("number"!=et&&"symbol"!=et&&"boolean"!=et&&null!=$&&!rt($))||ot.test($)||!it.test($)||null!=tt&&$ in Object(tt)}},function($,tt,et){"use strict";et.r(tt);var nt,rt=et(13),it=et(84),ot=et(51),at=et(40),Ot=et(14),wt=et(6),St=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Ct=function($){function e(tt){var et=this,nt=void 0!==tt.rotateWithView&&tt.rotateWithView;return(et=$.call(this,{opacity:1,rotateWithView:nt,rotation:void 0!==tt.rotation?tt.rotation:0,scale:void 0!==tt.scale?tt.scale:1,displacement:void 0!==tt.displacement?tt.displacement:[0,0]})||this).canvas_={},et.hitDetectionCanvas_=null,et.fill_=void 0!==tt.fill?tt.fill:null,et.origin_=[0,0],et.points_=tt.points,et.radius_=void 0!==tt.radius?tt.radius:tt.radius1,et.radius2_=tt.radius2,et.angle_=void 0!==tt.angle?tt.angle:0,et.stroke_=void 0!==tt.stroke?tt.stroke:null,et.anchor_=null,et.size_=null,et.imageSize_=null,et.hitDetectionImageSize_=null,et.render(),et}return St(e,$),e.prototype.clone=function(){var $=this.getScale(),tt=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray($)?$.slice():$,displacement:this.getDisplacement().slice()});return tt.setOpacity(this.getOpacity()),tt},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionCanvas_){var $=this.createRenderOptions();this.createHitDetectionCanvas_($)}return this.hitDetectionCanvas_},e.prototype.getImage=function($){if(!this.canvas_[$||1]){var tt=this.createRenderOptions(),et=Object(Ot.a)(tt.size*$||1,tt.size*$||1);this.draw_(tt,et,0,0,$||1),this.canvas_[$||1]=et.canvas}return this.canvas_[$||1]},e.prototype.getPixelRatio=function($){return $},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return rt.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function($){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function($){},e.prototype.createRenderOptions=function(){var $,tt=wt.e,et=wt.h,nt=0,rt=null,it=0,ot=0;return this.stroke_&&(null===($=this.stroke_.getColor())&&($=wt.l),$=Object(at.a)($),void 0===(ot=this.stroke_.getWidth())&&(ot=wt.i),rt=this.stroke_.getLineDash(),it=this.stroke_.getLineDashOffset(),void 0===(et=this.stroke_.getLineJoin())&&(et=wt.h),void 0===(tt=this.stroke_.getLineCap())&&(tt=wt.e),void 0===(nt=this.stroke_.getMiterLimit())&&(nt=wt.j)),{strokeStyle:$,strokeWidth:ot,size:2*(this.radius_+ot)+1,lineCap:tt,lineDash:rt,lineDashOffset:it,lineJoin:et,miterLimit:nt}},e.prototype.render=function(){var $=this.createRenderOptions(),tt=Object(Ot.a)($.size,$.size);this.draw_($,tt,0,0,1),this.canvas_={},this.canvas_[1]=tt.canvas;var et=tt.canvas.width,nt=et,rt=this.getDisplacement();this.hitDetectionImageSize_=[$.size,$.size],this.createHitDetectionCanvas_($),this.anchor_=[et/2-rt[0],et/2+rt[1]],this.size_=[et,et],this.imageSize_=[nt,nt]},e.prototype.draw_=function($,tt,et,nt,rt){var it,ot,Ot;tt.setTransform(rt,0,0,rt,0,0),tt.translate(et,nt),tt.beginPath();var St=this.points_;if(St===1/0)tt.arc($.size/2,$.size/2,this.radius_,0,2*Math.PI,!0);else{var Ct=void 0!==this.radius2_?this.radius2_:this.radius_;for(Ct!==this.radius_&&(St*=2),it=0;it<=St;it++)ot=2*it*Math.PI/St-Math.PI/2+this.angle_,Ot=it%2==0?this.radius_:Ct,tt.lineTo($.size/2+Ot*Math.cos(ot),$.size/2+Ot*Math.sin(ot))}if(this.fill_){var Rt=this.fill_.getColor();null===Rt&&(Rt=wt.c),tt.fillStyle=Object(at.a)(Rt),tt.fill()}this.stroke_&&(tt.strokeStyle=$.strokeStyle,tt.lineWidth=$.strokeWidth,tt.setLineDash&&$.lineDash&&(tt.setLineDash($.lineDash),tt.lineDashOffset=$.lineDashOffset),tt.lineCap=$.lineCap,tt.lineJoin=$.lineJoin,tt.miterLimit=$.miterLimit,tt.stroke()),tt.closePath()},e.prototype.createHitDetectionCanvas_=function($){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){var tt=this.fill_.getColor(),et=0;if("string"==typeof tt&&(tt=Object(ot.a)(tt)),null===tt?et=1:Array.isArray(tt)&&(et=4===tt.length?tt[3]:1),0===et){var nt=Object(Ot.a)($.size,$.size);this.hitDetectionCanvas_=nt.canvas,this.drawHitDetectionCanvas_($,nt,0,0)}}},e.prototype.drawHitDetectionCanvas_=function($,tt,et,nt){tt.translate(et,nt),tt.beginPath();var rt=this.points_;if(rt===1/0)tt.arc($.size/2,$.size/2,this.radius_,0,2*Math.PI,!0);else{var it=void 0!==this.radius2_?this.radius2_:this.radius_;it!==this.radius_&&(rt*=2);var ot=void 0,at=void 0,Ot=void 0;for(ot=0;ot<=rt;ot++)Ot=2*ot*Math.PI/rt-Math.PI/2+this.angle_,at=ot%2==0?this.radius_:it,tt.lineTo($.size/2+at*Math.cos(Ot),$.size/2+at*Math.sin(Ot))}tt.fillStyle=wt.c,tt.fill(),this.stroke_&&(tt.strokeStyle=$.strokeStyle,tt.lineWidth=$.strokeWidth,$.lineDash&&(tt.setLineDash($.lineDash),tt.lineDashOffset=$.lineDashOffset),tt.stroke()),tt.closePath()},e}(it.default);tt.default=Ct},function($,tt,et){"use strict";et.r(tt);var nt,rt=et(85),it=et(34),ot=et(29),at=et(8),Ot=et(45),wt=et(36),St=et(9),Ct=et(4),Rt=et(17),Tt=et(0),At=et(2),Nt=et(7),kt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Dt="layers",Gt=function($){function e(tt){var et=this,nt=tt||{},rt=Object(Ct.a)({},nt);delete rt.layers;var ot=nt.layers;return(et=$.call(this,rt)||this).layersListenerKeys_=[],et.listenerKeys_={},et.addEventListener(Object(Rt.b)(Dt),et.handleLayersChanged_),ot?Array.isArray(ot)?ot=new it.a(ot.slice(),{unique:!0}):Object(St.a)("function"==typeof ot.getArray,43):ot=new it.a(void 0,{unique:!0}),et.setLayers(ot),et}return kt(e,$),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Nt.c),this.layersListenerKeys_.length=0;var $=this.getLayers();for(var tt in this.layersListenerKeys_.push(Object(Nt.a)($,ot.a.ADD,this.handleLayersAdd_,this),Object(Nt.a)($,ot.a.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[tt].forEach(Nt.c);Object(Ct.b)(this.listenerKeys_);for(var et=$.getArray(),nt=0,rt=et.length;nt<rt;nt++){var it=et[nt];this.listenerKeys_[Object(At.c)(it)]=[Object(Nt.a)(it,Ot.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(Nt.a)(it,at.a.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function($){var tt=$.element;this.listenerKeys_[Object(At.c)(tt)]=[Object(Nt.a)(tt,Ot.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(Nt.a)(tt,at.a.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function($){var tt=$.element,et=Object(At.c)(tt);this.listenerKeys_[et].forEach(Nt.c),delete this.listenerKeys_[et],this.changed()},e.prototype.getLayers=function(){return this.get(Dt)},e.prototype.setLayers=function($){this.set(Dt,$)},e.prototype.getLayersArray=function($){var tt=void 0!==$?$:[];return this.getLayers().forEach((function($){$.getLayersArray(tt)})),tt},e.prototype.getLayerStatesArray=function($){var tt=void 0!==$?$:[],et=tt.length;this.getLayers().forEach((function($){$.getLayerStatesArray(tt)}));for(var nt=this.getLayerState(),rt=et,it=tt.length;rt<it;rt++){var ot=tt[rt];ot.opacity*=nt.opacity,ot.visible=ot.visible&&nt.visible,ot.maxResolution=Math.min(ot.maxResolution,nt.maxResolution),ot.minResolution=Math.max(ot.minResolution,nt.minResolution),ot.minZoom=Math.max(ot.minZoom,nt.minZoom),ot.maxZoom=Math.min(ot.maxZoom,nt.maxZoom),void 0!==nt.extent&&(void 0!==ot.extent?ot.extent=Object(Tt.B)(ot.extent,nt.extent):ot.extent=nt.extent)}return tt},e.prototype.getSourceState=function(){return wt.a.READY},e}(rt.default);tt.default=Gt},function($,tt,et){"use strict";et.r(tt);var nt,rt=et(35),it=et(79),ot=et(56),at=et(59),Ot=et(9),wt=et(4),St=et(0),Ct=et(20),Rt=et(52),Tt=et(42),At=et(1),Nt=et(5),kt=et(27),Dt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Gt=function($){function e(tt){var et=this,nt=tt||{},rt=nt.params||{},it=!("TRANSPARENT"in rt)||rt.TRANSPARENT;return(et=$.call(this,{attributions:nt.attributions,cacheSize:nt.cacheSize,crossOrigin:nt.crossOrigin,imageSmoothing:nt.imageSmoothing,opaque:!it,projection:nt.projection,reprojectionErrorThreshold:nt.reprojectionErrorThreshold,tileClass:nt.tileClass,tileGrid:nt.tileGrid,tileLoadFunction:nt.tileLoadFunction,url:nt.url,urls:nt.urls,wrapX:void 0===nt.wrapX||nt.wrapX,transition:nt.transition})||this).gutter_=void 0!==nt.gutter?nt.gutter:0,et.params_=rt,et.v13_=!0,et.serverType_=nt.serverType,et.hidpi_=void 0===nt.hidpi||nt.hidpi,et.tmpExtent_=Object(St.j)(),et.updateV13_(),et.setKey(et.getKeyForParams_()),et}return Dt(e,$),e.prototype.getFeatureInfoUrl=function($,tt,et,nt){var it=Object(At.k)(et),ot=this.getProjection(),at=this.getTileGrid();at||(at=this.getTileGridForProjection(it));var Ot=at.getZForResolution(tt,this.zDirection),Tt=at.getTileCoordForCoordAndZ($,Ot);if(!(at.getResolutions().length<=Tt[0])){var Nt=at.getResolution(Tt[0]),kt=at.getTileCoordExtent(Tt,this.tmpExtent_),Dt=Object(Ct.d)(at.getTileSize(Tt[0]),this.tmpSize),Gt=this.gutter_;0!==Gt&&(Dt=Object(Ct.a)(Dt,Gt,this.tmpSize),kt=Object(St.c)(kt,Nt*Gt,kt)),ot&&ot!==it&&(Nt=Object(Rt.b)(ot,it,$,Nt),kt=Object(At.s)(kt,it,ot),$=Object(At.r)($,it,ot));var Ut={SERVICE:"WMS",VERSION:rt.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(wt.a)(Ut,this.params_,nt);var Xt=Math.floor(($[0]-kt[0])/Nt),Vt=Math.floor((kt[3]-$[1])/Nt);return Ut[this.v13_?"I":"X"]=Xt,Ut[this.v13_?"J":"Y"]=Vt,this.getRequestUrl_(Tt,Dt,kt,1,ot||it,Ut)}},e.prototype.getLegendUrl=function($,tt){if(void 0!==this.urls[0]){var et={SERVICE:"WMS",VERSION:rt.a,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===tt||void 0===tt.LAYER){var nt=this.params_.LAYERS;if(Array.isArray(nt)&&1!==nt.length)return;et.LAYER=nt}if(void 0!==$){var it=this.getProjection()?this.getProjection().getMetersPerUnit():1;et.SCALE=$*it/28e-5}return Object(wt.a)(et,tt),Object(at.a)(this.urls[0],et)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function($,tt,et,nt,rt,it){var wt=this.urls;if(wt){if(it.WIDTH=tt[0],it.HEIGHT=tt[1],it[this.v13_?"CRS":"SRS"]=rt.getCode(),"STYLES"in this.params_||(it.STYLES=""),1!=nt)switch(this.serverType_){case ot.a.GEOSERVER:var St=90*nt+.5|0;"FORMAT_OPTIONS"in it?it.FORMAT_OPTIONS+=";dpi:"+St:it.FORMAT_OPTIONS="dpi:"+St;break;case ot.a.MAPSERVER:it.MAP_RESOLUTION=90*nt;break;case ot.a.CARMENTA_SERVER:case ot.a.QGIS:it.DPI=90*nt;break;default:Object(Ot.a)(!1,52)}var Ct,Rt=rt.getAxisOrientation(),Tt=et;if(this.v13_&&"ne"==Rt.substr(0,2)){var At=void 0;At=et[0],Tt[0]=et[1],Tt[1]=At,At=et[2],Tt[2]=et[3],Tt[3]=At}return it.BBOX=Tt.join(","),Ct=1==wt.length?wt[0]:wt[Object(Nt.e)(Object(kt.e)($),wt.length)],Object(at.a)(Ct,it)}},e.prototype.getTilePixelRatio=function($){return this.hidpi_&&void 0!==this.serverType_?$:1},e.prototype.getKeyForParams_=function(){var $=0,tt=[];for(var et in this.params_)tt[$++]=et+"-"+this.params_[et];return tt.join("/")},e.prototype.updateParams=function($){Object(wt.a)(this.params_,$),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var $=this.params_.VERSION||rt.a;this.v13_=Object(Tt.a)($,"1.3")>=0},e.prototype.tileUrlFunction=function($,tt,et){var nt=this.getTileGrid();if(nt||(nt=this.getTileGridForProjection(et)),!(nt.getResolutions().length<=$[0])){1==tt||this.hidpi_&&void 0!==this.serverType_||(tt=1);var it=nt.getResolution($[0]),ot=nt.getTileCoordExtent($,this.tmpExtent_),at=Object(Ct.d)(nt.getTileSize($[0]),this.tmpSize),Ot=this.gutter_;0!==Ot&&(at=Object(Ct.a)(at,Ot,this.tmpSize),ot=Object(St.c)(ot,it*Ot,ot)),1!=tt&&(at=Object(Ct.c)(at,tt,this.tmpSize));var Rt={SERVICE:"WMS",VERSION:rt.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(wt.a)(Rt,this.params_),this.getRequestUrl_($,at,ot,tt,et,Rt)}},e}(it.a);tt.default=Gt},function($,tt,et){"use strict";et.r(tt);var nt,rt=et(8),it=et(108),ot=et(3),at=et(0),Ot=et(7),wt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),St=function($){function e(tt){var et=$.call(this)||this;return et.geometries_=tt||null,et.changeEventsKeys_=[],et.listenGeometriesChange_(),et}return wt(e,$),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Ot.c),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var $=0,tt=this.geometries_.length;$<tt;++$)this.changeEventsKeys_.push(Object(Ot.a)(this.geometries_[$],rt.a.CHANGE,this.changed,this))},e.prototype.clone=function(){var $=new e(null);return $.setGeometries(this.geometries_),$.applyProperties(this),$},e.prototype.closestPointXY=function($,tt,et,nt){if(nt<Object(at.e)(this.getExtent(),$,tt))return nt;for(var rt=this.geometries_,it=0,ot=rt.length;it<ot;++it)nt=rt[it].closestPointXY($,tt,et,nt);return nt},e.prototype.containsXY=function($,tt){for(var et=this.geometries_,nt=0,rt=et.length;nt<rt;++nt)if(et[nt].containsXY($,tt))return!0;return!1},e.prototype.computeExtent=function($){Object(at.l)($);for(var tt=this.geometries_,et=0,nt=tt.length;et<nt;++et)Object(at.q)($,tt[et].getExtent());return $},e.prototype.getGeometries=function(){return l(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var $=[],tt=this.geometries_,et=0,nt=tt.length;et<nt;++et)tt[et].getType()===this.getType()?$=$.concat(tt[et].getGeometriesArrayRecursive()):$.push(tt[et]);return $},e.prototype.getSimplifiedGeometry=function($){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),$<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&$<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var tt=[],et=this.geometries_,nt=!1,rt=0,it=et.length;rt<it;++rt){var ot=et[rt],at=ot.getSimplifiedGeometry($);tt.push(at),at!==ot&&(nt=!0)}if(nt){var Ot=new e(null);return Ot.setGeometriesArray(tt),Ot}return this.simplifiedGeometryMaxMinSquaredTolerance=$,this},e.prototype.getType=function(){return ot.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function($){for(var tt=this.geometries_,et=0,nt=tt.length;et<nt;++et)if(tt[et].intersectsExtent($))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function($,tt){for(var et=this.geometries_,nt=0,rt=et.length;nt<rt;++nt)et[nt].rotate($,tt);this.changed()},e.prototype.scale=function($,tt,et){var nt=et;nt||(nt=Object(at.x)(this.getExtent()));for(var rt=this.geometries_,it=0,ot=rt.length;it<ot;++it)rt[it].scale($,tt,nt);this.changed()},e.prototype.setGeometries=function($){this.setGeometriesArray(l($))},e.prototype.setGeometriesArray=function($){this.unlistenGeometriesChange_(),this.geometries_=$,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function($){for(var tt=this.geometries_,et=0,nt=tt.length;et<nt;++et)tt[et].applyTransform($);this.changed()},e.prototype.translate=function($,tt){for(var et=this.geometries_,nt=0,rt=et.length;nt<rt;++nt)et[nt].translate($,tt);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),$.prototype.disposeInternal.call(this)},e}(it.a);function l($){for(var tt=[],et=0,nt=$.length;et<nt;++et)tt.push($[et].clone());return tt}tt.default=St},function($,tt,et){"use strict";et.r(tt);var nt,rt=et(35),it=et(8),ot=et(25),at=et(13),Ot=et(28),wt=et(106),St=et(111),Ct=et(52),Rt=et(0),Tt=et(7),At=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Nt=function($){function e(tt,et,nt,rt,it,ot,wt){var Tt=this,At=tt.getExtent(),Nt=et.getExtent(),kt=Nt?Object(Rt.B)(nt,Nt):nt,Dt=Object(Rt.x)(kt),Gt=Object(Ct.b)(tt,et,Dt,rt),Ut=Ot.b,Xt=new St.a(tt,et,kt,At,Gt*Ut,rt),Vt=ot(Xt.calculateSourceExtent(),Gt,it),Jt=Vt?at.a.IDLE:at.a.EMPTY,ne=Vt?Vt.getPixelRatio():1;return(Tt=$.call(this,nt,rt,ne,Jt)||this).targetProj_=et,Tt.maxSourceExtent_=At,Tt.triangulation_=Xt,Tt.targetResolution_=rt,Tt.targetExtent_=nt,Tt.sourceImage_=Vt,Tt.sourcePixelRatio_=ne,Tt.contextOptions_=wt,Tt.canvas_=null,Tt.sourceListenerKey_=null,Tt}return At(e,$),e.prototype.disposeInternal=function(){this.state==at.a.LOADING&&this.unlistenSource_(),$.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var $=this.sourceImage_.getState();if($==at.a.LOADED){var tt=Object(Rt.E)(this.targetExtent_)/this.targetResolution_,et=Object(Rt.A)(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(Ct.c)(tt,et,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.contextOptions_)}this.state=$,this.changed()},e.prototype.load=function(){if(this.state==at.a.IDLE){this.state=at.a.LOADING,this.changed();var $=this.sourceImage_.getState();$==at.a.LOADED||$==at.a.ERROR?this.reproject_():(this.sourceListenerKey_=Object(Tt.a)(this.sourceImage_,it.a.CHANGE,(function($){var tt=this.sourceImage_.getState();tt!=at.a.LOADED&&tt!=at.a.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){Object(Tt.c)(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(wt.a),kt=et(78),Dt=et(2),Gt=et(1),Ut=et(10),Xt=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Vt=function($){function e(tt,et){var nt=$.call(this,tt)||this;return nt.image=et,nt}return Xt(e,$),e}(ot.a);function E($,tt){$.getImage().src=tt}var Jt=function($){function e(tt){var et=$.call(this,{attributions:tt.attributions,projection:tt.projection,state:tt.state})||this;return et.resolutions_=void 0!==tt.resolutions?tt.resolutions:null,et.reprojectedImage_=null,et.reprojectedRevision_=0,et.contextOptions_=!1===tt.imageSmoothing?rt.b:void 0,et}return Xt(e,$),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.findNearestResolution=function($){if(this.resolutions_){var tt=Object(Ut.h)(this.resolutions_,$,0);$=this.resolutions_[tt]}return $},e.prototype.getImage=function($,tt,et,nt){var rt=this.getProjection();if(Ot.a&&rt&&nt&&!Object(Gt.g)(rt,nt)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(Gt.g)(this.reprojectedImage_.getProjection(),nt)&&this.reprojectedImage_.getResolution()==tt&&Object(Rt.p)(this.reprojectedImage_.getExtent(),$))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Nt(rt,nt,$,tt,et,function($,tt,et){return this.getImageInternal($,tt,et,rt)}.bind(this),this.contextOptions_),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return rt&&(nt=rt),this.getImageInternal($,tt,et,nt)},e.prototype.getImageInternal=function($,tt,et,nt){return Object(Dt.b)()},e.prototype.handleImageChange=function($){var tt=$.target;switch(tt.getState()){case at.a.LOADING:this.loading=!0,this.dispatchEvent(new Vt("imageloadstart",tt));break;case at.a.LOADED:this.loading=!1,this.dispatchEvent(new Vt("imageloadend",tt));break;case at.a.ERROR:this.loading=!1,this.dispatchEvent(new Vt("imageloaderror",tt))}},e}(kt.a),ne=et(76),re=et(56),ie=et(59),oe=et(9),ae=et(4),fe=et(42),de=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ye=[101,101],Se=function($){function e(tt){var et=this,nt=tt||{};return(et=$.call(this,{attributions:nt.attributions,imageSmoothing:nt.imageSmoothing,projection:nt.projection,resolutions:nt.resolutions})||this).crossOrigin_=void 0!==nt.crossOrigin?nt.crossOrigin:null,et.url_=nt.url,et.imageLoadFunction_=void 0!==nt.imageLoadFunction?nt.imageLoadFunction:E,et.params_=nt.params||{},et.v13_=!0,et.updateV13_(),et.serverType_=nt.serverType,et.hidpi_=void 0===nt.hidpi||nt.hidpi,et.image_=null,et.imageSize_=[0,0],et.renderedRevision_=0,et.ratio_=void 0!==nt.ratio?nt.ratio:1.5,et}return de(e,$),e.prototype.getFeatureInfoUrl=function($,tt,et,nt){if(void 0!==this.url_){var it=Object(Gt.k)(et),ot=this.getProjection();ot&&ot!==it&&(tt=Object(Ct.b)(ot,it,$,tt),$=Object(Gt.r)($,it,ot));var at=Object(Rt.z)($,tt,0,ye),Ot={SERVICE:"WMS",VERSION:rt.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(ae.a)(Ot,this.params_,nt);var wt=Math.floor(($[0]-at[0])/tt),St=Math.floor((at[3]-$[1])/tt);return Ot[this.v13_?"I":"X"]=wt,Ot[this.v13_?"J":"Y"]=St,this.getRequestUrl_(at,ye,1,ot||it,Ot)}},e.prototype.getLegendUrl=function($,tt){if(void 0!==this.url_){var et={SERVICE:"WMS",VERSION:rt.a,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===tt||void 0===tt.LAYER){var nt=this.params_.LAYERS;if(Array.isArray(nt)&&1!==nt.length)return;et.LAYER=nt}if(void 0!==$){var it=this.getProjection()?this.getProjection().getMetersPerUnit():1;et.SCALE=$*it/28e-5}return Object(ae.a)(et,tt),Object(ie.a)(this.url_,et)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function($,tt,et,nt){if(void 0===this.url_)return null;tt=this.findNearestResolution(tt),1==et||this.hidpi_&&void 0!==this.serverType_||(et=1);var ot=tt/et,at=Object(Rt.x)($),Ot=Math.ceil(Object(Rt.E)($)/ot),wt=Math.ceil(Object(Rt.A)($)/ot),St=Object(Rt.z)(at,ot,0,[Ot,wt]),Ct=Math.ceil(this.ratio_*Object(Rt.E)($)/ot),Tt=Math.ceil(this.ratio_*Object(Rt.A)($)/ot),At=Object(Rt.z)(at,ot,0,[Ct,Tt]),Nt=this.image_;if(Nt&&this.renderedRevision_==this.getRevision()&&Nt.getResolution()==tt&&Nt.getPixelRatio()==et&&Object(Rt.g)(Nt.getExtent(),St))return Nt;var kt={SERVICE:"WMS",VERSION:rt.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(ae.a)(kt,this.params_),this.imageSize_[0]=Math.round(Object(Rt.E)(At)/ot),this.imageSize_[1]=Math.round(Object(Rt.A)(At)/ot);var Dt=this.getRequestUrl_(At,this.imageSize_,et,nt,kt);return this.image_=new ne.a(At,tt,et,Dt,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(it.a.CHANGE,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function($,tt,et,nt,rt){if(Object(oe.a)(void 0!==this.url_,9),rt[this.v13_?"CRS":"SRS"]=nt.getCode(),"STYLES"in this.params_||(rt.STYLES=""),1!=et)switch(this.serverType_){case re.a.GEOSERVER:var it=90*et+.5|0;"FORMAT_OPTIONS"in rt?rt.FORMAT_OPTIONS+=";dpi:"+it:rt.FORMAT_OPTIONS="dpi:"+it;break;case re.a.MAPSERVER:rt.MAP_RESOLUTION=90*et;break;case re.a.CARMENTA_SERVER:case re.a.QGIS:rt.DPI=90*et;break;default:Object(oe.a)(!1,8)}rt.WIDTH=tt[0],rt.HEIGHT=tt[1];var ot,at=nt.getAxisOrientation();return ot=this.v13_&&"ne"==at.substr(0,2)?[$[1],$[0],$[3],$[2]]:$,rt.BBOX=ot.join(","),Object(ie.a)(this.url_,rt)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function($){this.image_=null,this.imageLoadFunction_=$,this.changed()},e.prototype.setUrl=function($){$!=this.url_&&(this.url_=$,this.image_=null,this.changed())},e.prototype.updateParams=function($){Object(ae.a)(this.params_,$),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var $=this.params_.VERSION||rt.a;this.v13_=Object(fe.a)($,"1.3")>=0},e}(Jt);tt.default=Se},function($,tt,et){"use strict";var nt=this&&this.__assign||function(){return(nt=Object.assign||function($){for(var tt,et=1,nt=arguments.length;et<nt;et++)for(var rt in tt=arguments[et])Object.prototype.hasOwnProperty.call(tt,rt)&&($[rt]=tt[rt]);return $}).apply(this,arguments)};Object.defineProperty(tt,"__esModule",{value:!0}),tt.OlStyleParser=void 0;var rt=et(102),it=et(84),ot=et(67),at=et(80),Ot=et(192),wt=et(103),St=et(314),Ct=et(130),Rt=et(193),Tt=et(194),At=et(308),Nt=et(162),kt=function(){function t($){this.title="OpenLayers Style Parser",this.OlStyleConstructor=rt.default,this.OlStyleImageConstructor=it.default,this.OlStyleFillConstructor=ot.default,this.OlStyleStrokeConstructor=at.default,this.OlStyleTextConstructor=Ot.default,this.OlStyleCircleConstructor=wt.default,this.OlStyleIconConstructor=St.default,this.OlStyleRegularshapeConstructor=Ct.default,this.isOlParserStyleFct=function($){return"function"==typeof $},$&&(this.OlStyleConstructor=$.style.Style,this.OlStyleImageConstructor=$.style.Image,this.OlStyleFillConstructor=$.style.Fill,this.OlStyleStrokeConstructor=$.style.Stroke,this.OlStyleTextConstructor=$.style.Text,this.OlStyleCircleConstructor=$.style.Circle,this.OlStyleIconConstructor=$.style.Icon,this.OlStyleRegularshapeConstructor=$.style.RegularShape)}return t.prototype.getPointSymbolizerFromOlStyle=function($){var tt;if($.getImage()instanceof this.OlStyleCircleConstructor){var et=$.getImage(),nt=et.getFill(),rt=et.getStroke();tt={kind:"Mark",wellKnownName:"Circle",color:nt?Rt.default.getHexColor(nt.getColor()):void 0,opacity:nt?Rt.default.getOpacity(nt.getColor()):void 0,radius:0!==et.getRadius()?et.getRadius():5,strokeColor:rt?rt.getColor():void 0,strokeOpacity:rt?Rt.default.getOpacity(rt.getColor()):void 0,strokeWidth:rt?rt.getWidth():void 0}}else if($.getImage()instanceof this.OlStyleRegularshapeConstructor){var it=$.getImage(),ot=(nt=it.getFill(),rt=it.getStroke(),it.getRadius()),at=it.getRadius2(),Ot=it.getPoints(),wt=it.getAngle(),St={kind:"Mark",color:nt?Rt.default.getHexColor(nt.getColor()):void 0,opacity:nt?Rt.default.getOpacity(nt.getColor()):void 0,strokeColor:rt?rt.getColor():void 0,strokeOpacity:rt?Rt.default.getOpacity(rt.getColor()):void 0,strokeWidth:rt?rt.getWidth():void 0,radius:0!==ot?ot:5,rotate:it.getRotation()/Math.PI*180};switch(Ot){case 2:switch(wt){case 0:St.wellKnownName="shape://vertline";break;case Math.PI/2:St.wellKnownName="shape://horline";break;case Math.PI/4:St.wellKnownName="shape://slash";break;case 2*Math.PI-Math.PI/4:St.wellKnownName="shape://backslash"}break;case 3:switch(wt){case 0:St.wellKnownName="Triangle";break;case Math.PI/2:St.wellKnownName="shape://carrow"}break;case 4:At.isNumber(at)?0===it.getAngle()?St.wellKnownName="Cross":St.wellKnownName="X":St.wellKnownName="Square";break;case 5:St.wellKnownName="Star";break;default:throw new Error("Could not parse OlStyle. Only 2, 3, 4 or 5 point regular shapes are allowed")}tt=St}else if($.getText()instanceof this.OlStyleTextConstructor){var Ct=$.getText(),Tt=(nt=Ct.getFill(),rt=Ct.getStroke(),Ct.getRotation()),Nt=Ct.getText(),kt=Ct.getFont(),Dt=Rt.default.getFontNameFromOlFont(kt);ot=Rt.default.getSizeFromOlFont(kt),tt={kind:"Mark",wellKnownName:"ttf://"+Dt+"#0x"+Nt.charCodeAt(0).toString(16),color:nt?Rt.default.getHexColor(nt.getColor()):void 0,opacity:nt?Rt.default.getOpacity(nt.getColor()):void 0,strokeColor:rt?rt.getColor():void 0,strokeOpacity:rt?Rt.default.getOpacity(rt.getColor()):void 0,strokeWidth:rt?rt.getWidth():void 0,radius:0!==ot?ot:5,rotate:Tt?Tt/Math.PI*180:0}}else{var Gt=$.getImage();tt={kind:"Icon",image:Gt.getSrc()?Gt.getSrc():void 0,opacity:Gt.getOpacity(),size:0!==Gt.getScale()?Gt.getScale():5,rotate:Gt.getRotation()/Math.PI*180}}return tt},t.prototype.getLineSymbolizerFromOlStyle=function($){var tt=$.getStroke(),et=tt?tt.getLineDash():void 0;return{kind:"Line",color:tt?Rt.default.getHexColor(tt.getColor()):void 0,opacity:tt?Rt.default.getOpacity(tt.getColor()):void 0,width:tt?tt.getWidth():void 0,cap:tt?tt.getLineCap():"butt",join:tt?tt.getLineJoin():"miter",dasharray:et||void 0,dashOffset:tt?tt.getLineDashOffset():void 0}},t.prototype.getFillSymbolizerFromOlStyle=function($){var tt=$.getFill(),et=$.getStroke();return{kind:"Fill",color:tt?Rt.default.getHexColor(tt.getColor()):void 0,opacity:tt?Rt.default.getOpacity(tt.getColor()):void 0,outlineColor:et?et.getColor():void 0,outlineWidth:et?et.getWidth():void 0}},t.prototype.getTextSymbolizerFromOlStyle=function($){var tt,et=$.getText(),nt=et.getFill(),rt=et.getStroke(),it=et.getOffsetX(),ot=et.getOffsetY(),at=et.getFont(),Ot=et.getRotation(),wt=et.getText(),St=1/0,Ct=void 0;if(at){var Tt=at.split("px");tt=Tt[0].trim().split(" "),St=parseInt(tt[tt.length-1],10),Ct=(2===Tt.length?Tt[1]:Tt[2]).split(",").map((function($){return $.startsWith(" ")?$.slice(1):$}))}return{kind:"Text",label:wt,color:nt?Rt.default.getHexColor(nt.getColor()):void 0,size:isFinite(St)?St:void 0,font:Ct,offset:void 0!==it&&void 0!==ot?[it,ot]:[0,0],haloColor:rt&&rt.getColor()?Rt.default.getHexColor(rt.getColor()):void 0,haloWidth:rt?rt.getWidth():void 0,rotate:void 0!==Ot?Ot/Math.PI*180:void 0}},t.prototype.getSymbolizersFromOlStyle=function($){var tt=this,et=[];return $.forEach((function($){var nt;switch(tt.getStyleTypeFromOlStyle($)){case"Point":nt=$.getText()&&!Rt.default.getIsMarkSymbolizerFont($.getText().getFont())?tt.getTextSymbolizerFromOlStyle($):tt.getPointSymbolizerFromOlStyle($);break;case"Line":nt=tt.getLineSymbolizerFromOlStyle($);break;case"Fill":nt=tt.getFillSymbolizerFromOlStyle($);break;default:throw new Error("Failed to parse SymbolizerKind from OpenLayers Style")}et.push(nt)})),et},t.prototype.getRuleFromOlStyle=function($){return{name:"OL Style Rule 0",symbolizers:Array.isArray($)?this.getSymbolizersFromOlStyle($):this.getSymbolizersFromOlStyle([$])}},t.prototype.getStyleTypeFromOlStyle=function($){var tt;if($.getImage()instanceof this.OlStyleImageConstructor)tt="Point";else if($.getText()instanceof this.OlStyleTextConstructor)tt="Point";else if($.getFill()instanceof this.OlStyleFillConstructor)tt="Fill";else{if(!$.getStroke()||$.getFill())throw new Error("StyleType could not be detected");tt="Line"}return tt},t.prototype.olStyleToGeoStylerStyle=function($){return{name:"OL Style",rules:[this.getRuleFromOlStyle($)]}},t.prototype.readStyle=function($){var tt=this;return new Promise((function(et,nt){try{tt.isOlParserStyleFct($)?et($.__geoStylerStyle):et(tt.olStyleToGeoStylerStyle($))}catch($){nt($)}}))},t.prototype.writeStyle=function($){var tt=this;return new Promise((function(et,nt){try{et(tt.getOlStyleTypeFromGeoStylerStyle($))}catch($){nt($)}}))},t.prototype.getOlStyleTypeFromGeoStylerStyle=function($){var tt=$.rules;if(1===tt.length){var et=void 0!==Nt($,"rules[0].filter"),nt=void 0!==Nt($,"rules[0].scaleDenominator.min"),rt=void 0!==Nt($,"rules[0].scaleDenominator.max"),it=!(!nt&&!rt),ot=$.rules[0].symbolizers.length,at=tt[0].symbolizers.some((function($){return"Text"===$.kind}));return et||it||at?this.geoStylerStyleToOlParserStyleFct($):1===ot?this.geoStylerStyleToOlStyle($):this.geoStylerStyleToOlStyleArray($)}return this.geoStylerStyleToOlParserStyleFct($)},t.prototype.geoStylerStyleToOlStyle=function($){var tt=$.rules[0].symbolizers[0];return this.getOlSymbolizerFromSymbolizer(tt)},t.prototype.geoStylerStyleToOlStyleArray=function($){var tt=this,et=$.rules[0],nt=[];return et.symbolizers.forEach((function($){var et=tt.getOlSymbolizerFromSymbolizer($);nt.push(et)})),nt},t.prototype.geoStylerStyleToOlParserStyleFct=function($){var tt=this,et=$.rules,n=function($,nt){var rt=[],it=Tt.default.getScaleForResolution(nt,"m");return et.forEach((function(et){var ot=Nt(et,"scaleDenominator.min"),at=Nt(et,"scaleDenominator.max"),Ot=!0;void 0===ot&&void 0===at||(void 0!==ot&&it<ot&&(Ot=!1),void 0!==at&&it>=at&&(Ot=!1));var wt=!1;if(et.filter)try{wt=tt.geoStylerFilterToOlParserFilter($,et.filter)}catch($){wt=!1}else wt=!0;Ot&&wt&&et.symbolizers.forEach((function(et){var it=tt.getOlSymbolizerFromSymbolizer(et);if("function"!=typeof it)rt.push(it);else{var ot=it($,nt);rt.push(ot)}}))})),rt};return n.__geoStylerStyle=$,n},t.prototype.geoStylerFilterToOlParserFilter=function($,tt){var et=this,nt=!0,rt=!1;({"&&":!0,"||":!0,"!":!0})[tt[0]]&&(rt=!0);try{if(rt)switch(tt[0]){case"&&":var it=!0,ot=tt.slice(1);ot.forEach((function(tt){et.geoStylerFilterToOlParserFilter($,tt)||(it=!1)})),nt=it;break;case"||":it=!1,(ot=tt.slice(1)).forEach((function(tt){et.geoStylerFilterToOlParserFilter($,tt)&&(it=!0)})),nt=it;break;case"!":nt=!this.geoStylerFilterToOlParserFilter($,tt[1]);break;default:throw new Error("Cannot parse Filter. Unknown combination or negation operator.")}else{var at=$.get(tt[1]);switch(tt[0]){case"==":nt=""+at==""+tt[2];break;case"*=":"string"==typeof tt[2]&&"string"==typeof at&&(nt=!(tt[2].length>at.length)&&-1!==at.indexOf(tt[2]));break;case"!=":nt=""+at!=""+tt[2];break;case"<":nt=parseFloat(at)<parseFloat(tt[2]);break;case"<=":nt=parseFloat(at)<=parseFloat(tt[2]);break;case">":nt=parseFloat(at)>parseFloat(tt[2]);break;case">=":nt=parseFloat(at)>=parseFloat(tt[2]);break;default:throw new Error("Cannot parse Filter. Unknown comparison operator.")}}}catch($){throw new Error("Cannot parse Filter. Invalid structure.")}return nt},t.prototype.getOlSymbolizerFromSymbolizer=function($){var tt;switch($.kind){case"Mark":tt=this.getOlPointSymbolizerFromMarkSymbolizer($);break;case"Icon":tt=this.getOlIconSymbolizerFromIconSymbolizer($);break;case"Text":tt=this.getOlTextSymbolizerFromTextSymbolizer($);break;case"Line":tt=this.getOlLineSymbolizerFromLineSymbolizer($);break;case"Fill":tt=this.getOlPolygonSymbolizerFromFillSymbolizer($);break;default:var et=new this.OlStyleFillConstructor({color:"rgba(255,255,255,0.4)"}),nt=new this.OlStyleStrokeConstructor({color:"#3399CC",width:1.25});tt=new this.OlStyleConstructor({image:new this.OlStyleCircleConstructor({fill:et,stroke:nt,radius:5}),fill:et,stroke:nt})}return tt},t.prototype.getOlPointSymbolizerFromMarkSymbolizer=function($){var tt;($.strokeColor||void 0!==$.strokeWidth)&&(tt=new this.OlStyleStrokeConstructor({color:$.strokeColor&&void 0!==$.strokeOpacity?Rt.default.getRgbaColor($.strokeColor,$.strokeOpacity):$.strokeColor,width:$.strokeWidth}));var et,nt={fill:new this.OlStyleFillConstructor({color:$.color&&void 0!==$.opacity?Rt.default.getRgbaColor($.color,$.opacity):$.color}),opacity:$.opacity||1,radius:$.radius||5,rotation:$.rotate?$.rotate*Math.PI/180:void 0,stroke:tt};switch($.wellKnownName){case"shape://dot":case"Circle":et=new this.OlStyleConstructor({image:new this.OlStyleCircleConstructor(nt)});break;case"Square":nt.points=4,nt.angle=45*Math.PI/180,et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;case"Triangle":nt.points=3,nt.angle=0,et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;case"Star":nt.points=5,nt.radius2=nt.radius/2.5,nt.angle=0,et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;case"shape://plus":case"Cross":nt.points=4,nt.radius2=0,nt.angle=0,void 0===nt.stroke&&(nt.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;case"shape://times":case"X":nt.points=4,nt.radius2=0,nt.angle=45*Math.PI/180,void 0===nt.stroke&&(nt.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;case"shape://backslash":nt.points=2,nt.angle=2*Math.PI-Math.PI/4,void 0===nt.stroke&&(nt.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;case"shape://horline":nt.points=2,nt.angle=Math.PI/2,void 0===nt.stroke&&(nt.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;case"shape://oarrow":case"shape://carrow":nt.points=3,nt.angle=Math.PI/2,et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;case"shape://slash":nt.points=2,nt.angle=Math.PI/4,void 0===nt.stroke&&(nt.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;case"shape://vertline":nt.points=2,nt.angle=0,void 0===nt.stroke&&(nt.stroke=new this.OlStyleStrokeConstructor({color:"#000"})),et=new this.OlStyleConstructor({image:new this.OlStyleRegularshapeConstructor(nt)});break;default:if(Rt.default.getIsFontGlyphBased($)){et=new this.OlStyleConstructor({text:new this.OlStyleTextConstructor({text:Rt.default.getCharacterForMarkSymbolizer($),font:Rt.default.getTextFontForMarkSymbolizer($),fill:nt.fill,stroke:nt.stroke,rotation:nt.rotation})});break}throw new Error("MarkSymbolizer cannot be parsed. Unsupported WellKnownName.")}return et},t.prototype.getOlIconSymbolizerFromIconSymbolizer=function($){return new this.OlStyleConstructor({image:new this.OlStyleIconConstructor({src:$.image,crossOrigin:"anonymous",opacity:$.opacity,scale:$.size||1,rotation:$.rotate?$.rotate*Math.PI/180:void 0})})},t.prototype.getOlLineSymbolizerFromLineSymbolizer=function($){return new this.OlStyleConstructor({stroke:new this.OlStyleStrokeConstructor({color:$.color&&null!==$.opacity&&void 0!==$.opacity?Rt.default.getRgbaColor($.color,$.opacity):$.color,width:$.width,lineCap:$.cap,lineJoin:$.join,lineDash:$.dasharray,lineDashOffset:$.dashOffset})})},t.prototype.getOlPolygonSymbolizerFromFillSymbolizer=function($){var tt=$.color?new this.OlStyleFillConstructor({color:$.color&&null!==$.opacity&&void 0!==$.opacity?Rt.default.getRgbaColor($.color,$.opacity):$.color}):null;return new this.OlStyleConstructor({stroke:new this.OlStyleStrokeConstructor({color:$.outlineColor,width:$.outlineWidth}),fill:tt})},t.prototype.getOlTextSymbolizerFromTextSymbolizer=function($){var tt=this,et={font:Rt.default.getTextFont($),fill:new this.OlStyleFillConstructor({color:$.color&&null!==$.opacity&&void 0!==$.opacity?Rt.default.getRgbaColor($.color,$.opacity):$.color}),stroke:new this.OlStyleStrokeConstructor({color:$.haloColor&&null!==$.opacity&&void 0!==$.opacity?Rt.default.getRgbaColor($.haloColor,$.opacity):$.haloColor,width:$.haloWidth?$.haloWidth:0}),offsetX:$.offset?$.offset[0]:0,offsetY:$.offset?$.offset[1]:0,rotation:$.rotate?$.rotate*Math.PI/180:void 0},rt=new RegExp("\\{\\{.*?\\}\\}","g");return $.label&&$.label.match(rt)?function(rt,it){var ot=new tt.OlStyleTextConstructor(nt({text:Rt.default.resolveAttributeTemplate(rt,$.label,"")},et));return new tt.OlStyleConstructor({text:ot})}:new this.OlStyleConstructor({text:new this.OlStyleTextConstructor(nt({text:$.label},et))})},t.title="OpenLayers Style Parser",t}();tt.OlStyleParser=kt,tt.default=kt},,function($,tt){var et;et=function(){return this}();try{et=et||new Function("return this")()}catch($){"object"==typeof window&&(et=window)}$.exports=et},function($,tt,et){var nt=et(72),rt=et(66);$.exports=function($){if(!rt($))return!1;var tt=nt($);return"[object Function]"==tt||"[object GeneratorFunction]"==tt||"[object AsyncFunction]"==tt||"[object Proxy]"==tt}},function($,tt,et){(function(tt){var et="object"==typeof tt&&tt&&tt.Object===Object&&tt;$.exports=et}).call(this,et(137))},function($,tt){var et=Function.prototype.toString;$.exports=function($){if(null!=$){try{return et.call($)}catch($){}try{return $+""}catch($){}}return""}},function($,tt,et){var nt=et(142),rt=et(116),it=Object.prototype.hasOwnProperty;$.exports=function($,tt,et){var ot=$[tt];it.call($,tt)&&rt(ot,et)&&(void 0!==et||tt in $)||nt($,tt,et)}},function($,tt,et){var nt=et(235);$.exports=function($,tt,et){"__proto__"==tt&&nt?nt($,tt,{configurable:!0,enumerable:!0,value:et,writable:!0}):$[tt]=et}},function($,tt,et){var nt=et(237),rt=et(144),it=et(47),ot=et(119),at=et(145),Ot=et(146),wt=Object.prototype.hasOwnProperty;$.exports=function($,tt){var et=it($),St=!et&&rt($),Ct=!et&&!St&&ot($),Rt=!et&&!St&&!Ct&&Ot($),Tt=et||St||Ct||Rt,At=Tt?nt($.length,String):[],Nt=At.length;for(var kt in $)!tt&&!wt.call($,kt)||Tt&&("length"==kt||Ct&&("offset"==kt||"parent"==kt)||Rt&&("buffer"==kt||"byteLength"==kt||"byteOffset"==kt)||at(kt,Nt))||At.push(kt);return At}},function($,tt,et){var nt=et(238),rt=et(60),it=Object.prototype,ot=it.hasOwnProperty,at=it.propertyIsEnumerable,Ot=nt(function(){return arguments}())?nt:function($){return rt($)&&ot.call($,"callee")&&!at.call($,"callee")};$.exports=Ot},function($,tt){var et=/^(?:0|[1-9]\d*)$/;$.exports=function($,tt){var nt=typeof $;return!!(tt=null==tt?9007199254740991:tt)&&("number"==nt||"symbol"!=nt&&et.test($))&&$>-1&&$%1==0&&$<tt}},function($,tt,et){var nt=et(240),rt=et(122),it=et(123),ot=it&&it.isTypedArray,at=ot?rt(ot):nt;$.exports=at},function($,tt){$.exports=function($,tt){return function(et){return $(tt(et))}}},function($,tt,et){var nt=et(138),rt=et(121);$.exports=function($){return null!=$&&rt($.length)&&!nt($)}},function($,tt){$.exports=function(){return[]}},function($,tt,et){var nt=et(151),rt=et(152),it=et(126),ot=et(149),at=Object.getOwnPropertySymbols?function($){for(var tt=[];$;)nt(tt,it($)),$=rt($);return tt}:ot;$.exports=at},function($,tt){$.exports=function($,tt){for(var et=-1,nt=tt.length,rt=$.length;++et<nt;)$[rt+et]=tt[et];return $}},function($,tt,et){var nt=et(147)(Object.getPrototypeOf,Object);$.exports=nt},function($,tt,et){var nt=et(154),rt=et(126),it=et(96);$.exports=function($){return nt($,it,rt)}},function($,tt,et){var nt=et(151),rt=et(47);$.exports=function($,tt,et){var it=tt($);return rt($)?it:nt(it,et($))}},function($,tt,et){var nt=et(50).Uint8Array;$.exports=nt},function($,tt,et){"use strict";Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=function(){var $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},tt=arguments.length>1?arguments[1]:void 0;for(var et in tt)void 0===$[et]&&($[et]=tt[et]);return $},$.exports=tt.default,$.exports.default=tt.default},function($,tt,et){var nt=et(72),rt=et(47),it=et(60);$.exports=function($){return"string"==typeof $||!rt($)&&it($)&&"[object String]"==nt($)}},function($,tt,et){var nt=et(280),rt=et(60);$.exports=function t($,tt,et,it,ot){return $===tt||(null==$||null==tt||!rt($)&&!rt(tt)?$!=$&&tt!=tt:nt($,tt,et,it,t,ot))}},function($,tt,et){var nt=et(281),rt=et(284),it=et(285);$.exports=function($,tt,et,ot,at,Ot){var wt=1&et,St=$.length,Ct=tt.length;if(St!=Ct&&!(wt&&Ct>St))return!1;var Rt=Ot.get($),Tt=Ot.get(tt);if(Rt&&Tt)return Rt==tt&&Tt==$;var At=-1,Nt=!0,kt=2&et?new nt:void 0;for(Ot.set($,tt),Ot.set(tt,$);++At<St;){var Dt=$[At],Gt=tt[At];if(ot)var Ut=wt?ot(Gt,Dt,At,tt,$,Ot):ot(Dt,Gt,At,$,tt,Ot);if(void 0!==Ut){if(Ut)continue;Nt=!1;break}if(kt){if(!rt(tt,(function($,tt){if(!it(kt,tt)&&(Dt===$||at(Dt,$,et,ot,Ot)))return kt.push(tt)}))){Nt=!1;break}}else if(Dt!==Gt&&!at(Dt,Gt,et,ot,Ot)){Nt=!1;break}}return Ot.delete($),Ot.delete(tt),Nt}},function($,tt,et){var nt=et(66);$.exports=function($){return $==$&&!nt($)}},function($,tt){$.exports=function($,tt){return function(et){return null!=et&&et[$]===tt&&(void 0!==tt||$ in Object(et))}}},function($,tt,et){var nt=et(163);$.exports=function($,tt,et){var rt=null==$?void 0:nt($,tt);return void 0===rt?et:rt}},function($,tt,et){var nt=et(164),rt=et(99);$.exports=function($,tt){for(var et=0,it=(tt=nt(tt,$)).length;null!=$&&et<it;)$=$[rt(tt[et++])];return et&&et==it?$:void 0}},function($,tt,et){var nt=et(47),rt=et(129),it=et(292),ot=et(295);$.exports=function($,tt){return nt($)?$:rt($,tt)?[$]:it(ot($))}},function($,tt,et){var nt=et(114);$.exports=function($,tt){if("function"!=typeof tt&&null!==tt)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(tt&&tt.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),tt&&nt($,tt)}},function($,tt,et){var nt=et(73),rt=et(182);$.exports=function($,tt){return!tt||"object"!==nt(tt)&&"function"!=typeof tt?rt($):tt}},function($,tt,et){var nt=et(100),rt=et(114),it=et(183),ot=et(184);function s(tt){var et="function"==typeof Map?new Map:void 0;return $.exports=s=function($){if(null===$||!it($))return $;if("function"!=typeof $)throw new TypeError("Super expression must either be null or a function");if(void 0!==et){if(et.has($))return et.get($);et.set($,e)}function e(){return ot($,arguments,nt(this).constructor)}return e.prototype=Object.create($.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),rt(e,$)},s(tt)}$.exports=s},,,,,,,,,,,,,,,function($,tt){$.exports=function($){if(void 0===$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}},function($,tt){$.exports=function($){return-1!==Function.toString.call($).indexOf("[native code]")}},function($,tt,et){var nt=et(114),rt=et(185);function o(tt,et,it){return rt()?$.exports=o=Reflect.construct:$.exports=o=function($,tt,et){var rt=[null];rt.push.apply(rt,tt);var it=new(Function.bind.apply($,rt));return et&&nt(it,et.prototype),it},o.apply(null,arguments)}$.exports=o},function($,tt){$.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch($){return!1}}},function($,tt,et){var nt=function($){"use strict";var tt=Object.prototype,et=tt.hasOwnProperty,nt="function"==typeof Symbol?Symbol:{},rt=nt.iterator||"@@iterator",it=nt.asyncIterator||"@@asyncIterator",ot=nt.toStringTag||"@@toStringTag";function s($,tt,et){return Object.defineProperty($,tt,{value:et,enumerable:!0,configurable:!0,writable:!0}),$[tt]}try{s({},"")}catch($){s=function($,tt,et){return $[tt]=et}}function u($,tt,et,nt){var rt=tt&&tt.prototype instanceof l?tt:l,it=Object.create(rt.prototype),ot=new w(nt||[]);return it._invoke=function($,tt,et){var nt="suspendedStart";return function(rt,it){if("executing"===nt)throw new Error("Generator is already running");if("completed"===nt){if("throw"===rt)throw it;return{value:void 0,done:!0}}for(et.method=rt,et.arg=it;;){var ot=et.delegate;if(ot){var Ot=b(ot,et);if(Ot){if(Ot===at)continue;return Ot}}if("next"===et.method)et.sent=et._sent=et.arg;else if("throw"===et.method){if("suspendedStart"===nt)throw nt="completed",et.arg;et.dispatchException(et.arg)}else"return"===et.method&&et.abrupt("return",et.arg);nt="executing";var wt=c($,tt,et);if("normal"===wt.type){if(nt=et.done?"completed":"suspendedYield",wt.arg===at)continue;return{value:wt.arg,done:et.done}}"throw"===wt.type&&(nt="completed",et.method="throw",et.arg=wt.arg)}}}($,et,ot),it}function c($,tt,et){try{return{type:"normal",arg:$.call(tt,et)}}catch($){return{type:"throw",arg:$}}}$.wrap=u;var at={};function l(){}function p(){}function f(){}var Ot={};Ot[rt]=function(){return this};var wt=Object.getPrototypeOf,St=wt&&wt(wt(S([])));St&&St!==tt&&et.call(St,rt)&&(Ot=St);var Ct=f.prototype=l.prototype=Object.create(Ot);function _($){["next","throw","return"].forEach((function(tt){s($,tt,(function($){return this._invoke(tt,$)}))}))}function m($,tt){var nt;this._invoke=function(rt,it){function a(){return new tt((function(nt,ot){!function n(nt,rt,it,ot){var at=c($[nt],$,rt);if("throw"!==at.type){var Ot=at.arg,wt=Ot.value;return wt&&"object"==typeof wt&&et.call(wt,"__await")?tt.resolve(wt.__await).then((function($){n("next",$,it,ot)}),(function($){n("throw",$,it,ot)})):tt.resolve(wt).then((function($){Ot.value=$,it(Ot)}),(function($){return n("throw",$,it,ot)}))}ot(at.arg)}(rt,it,nt,ot)}))}return nt=nt?nt.then(a,a):a()}}function b($,tt){var et=$.iterator[tt.method];if(void 0===et){if(tt.delegate=null,"throw"===tt.method){if($.iterator.return&&(tt.method="return",tt.arg=void 0,b($,tt),"throw"===tt.method))return at;tt.method="throw",tt.arg=new TypeError("The iterator does not provide a 'throw' method")}return at}var nt=c(et,$.iterator,tt.arg);if("throw"===nt.type)return tt.method="throw",tt.arg=nt.arg,tt.delegate=null,at;var rt=nt.arg;return rt?rt.done?(tt[$.resultName]=rt.value,tt.next=$.nextLoc,"return"!==tt.method&&(tt.method="next",tt.arg=void 0),tt.delegate=null,at):rt:(tt.method="throw",tt.arg=new TypeError("iterator result is not an object"),tt.delegate=null,at)}function O($){var tt={tryLoc:$[0]};1 in $&&(tt.catchLoc=$[1]),2 in $&&(tt.finallyLoc=$[2],tt.afterLoc=$[3]),this.tryEntries.push(tt)}function x($){var tt=$.completion||{};tt.type="normal",delete tt.arg,$.completion=tt}function w($){this.tryEntries=[{tryLoc:"root"}],$.forEach(O,this),this.reset(!0)}function S($){if($){var tt=$[rt];if(tt)return tt.call($);if("function"==typeof $.next)return $;if(!isNaN($.length)){var nt=-1,it=function e(){for(;++nt<$.length;)if(et.call($,nt))return e.value=$[nt],e.done=!1,e;return e.value=void 0,e.done=!0,e};return it.next=it}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=Ct.constructor=f,f.constructor=p,p.displayName=s(f,ot,"GeneratorFunction"),$.isGeneratorFunction=function($){var tt="function"==typeof $&&$.constructor;return!!tt&&(tt===p||"GeneratorFunction"===(tt.displayName||tt.name))},$.mark=function($){return Object.setPrototypeOf?Object.setPrototypeOf($,f):($.__proto__=f,s($,ot,"GeneratorFunction")),$.prototype=Object.create(Ct),$},$.awrap=function($){return{__await:$}},_(m.prototype),m.prototype[it]=function(){return this},$.AsyncIterator=m,$.async=function(tt,et,nt,rt,it){void 0===it&&(it=Promise);var ot=new m(u(tt,et,nt,rt),it);return $.isGeneratorFunction(et)?ot:ot.next().then((function($){return $.done?$.value:ot.next()}))},_(Ct),s(Ct,ot,"Generator"),Ct[rt]=function(){return this},Ct.toString=function(){return"[object Generator]"},$.keys=function($){var tt=[];for(var et in $)tt.push(et);return tt.reverse(),function r(){for(;tt.length;){var et=tt.pop();if(et in $)return r.value=et,r.done=!1,r}return r.done=!0,r}},$.values=S,w.prototype={constructor:w,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!$)for(var tt in this)"t"===tt.charAt(0)&&et.call(this,tt)&&!isNaN(+tt.slice(1))&&(this[tt]=void 0)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if("throw"===$.type)throw $.arg;return this.rval},dispatchException:function($){if(this.done)throw $;var tt=this;function n(et,nt){return it.type="throw",it.arg=$,tt.next=et,nt&&(tt.method="next",tt.arg=void 0),!!nt}for(var nt=this.tryEntries.length-1;nt>=0;--nt){var rt=this.tryEntries[nt],it=rt.completion;if("root"===rt.tryLoc)return n("end");if(rt.tryLoc<=this.prev){var ot=et.call(rt,"catchLoc"),at=et.call(rt,"finallyLoc");if(ot&&at){if(this.prev<rt.catchLoc)return n(rt.catchLoc,!0);if(this.prev<rt.finallyLoc)return n(rt.finallyLoc)}else if(ot){if(this.prev<rt.catchLoc)return n(rt.catchLoc,!0)}else{if(!at)throw new Error("try statement without catch or finally");if(this.prev<rt.finallyLoc)return n(rt.finallyLoc)}}}},abrupt:function($,tt){for(var nt=this.tryEntries.length-1;nt>=0;--nt){var rt=this.tryEntries[nt];if(rt.tryLoc<=this.prev&&et.call(rt,"finallyLoc")&&this.prev<rt.finallyLoc){var it=rt;break}}it&&("break"===$||"continue"===$)&&it.tryLoc<=tt&&tt<=it.finallyLoc&&(it=null);var ot=it?it.completion:{};return ot.type=$,ot.arg=tt,it?(this.method="next",this.next=it.finallyLoc,at):this.complete(ot)},complete:function($,tt){if("throw"===$.type)throw $.arg;return"break"===$.type||"continue"===$.type?this.next=$.arg:"return"===$.type?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):"normal"===$.type&&tt&&(this.next=tt),at},finish:function($){for(var tt=this.tryEntries.length-1;tt>=0;--tt){var et=this.tryEntries[tt];if(et.finallyLoc===$)return this.complete(et.completion,et.afterLoc),x(et),at}},catch:function($){for(var tt=this.tryEntries.length-1;tt>=0;--tt){var et=this.tryEntries[tt];if(et.tryLoc===$){var nt=et.completion;if("throw"===nt.type){var rt=nt.arg;x(et)}return rt}}throw new Error("illegal catch attempt")},delegateYield:function($,tt,et){return this.delegate={iterator:S($),resultName:tt,nextLoc:et},"next"===this.method&&(this.arg=void 0),at}},$}($.exports);try{regeneratorRuntime=nt}catch($){Function("r","regeneratorRuntime = r")(nt)}},function($,tt){$.exports=function($){if(Array.isArray($))return $}},function($,tt){$.exports=function($,tt){if("undefined"!=typeof Symbol&&Symbol.iterator in Object($)){var et=[],nt=!0,rt=!1,it=void 0;try{for(var ot,at=$[Symbol.iterator]();!(nt=(ot=at.next()).done)&&(et.push(ot.value),!tt||et.length!==tt);nt=!0);}catch($){rt=!0,it=$}finally{try{nt||null==at.return||at.return()}finally{if(rt)throw it}}return et}}},function($,tt,et){var nt=et(190);$.exports=function($,tt){if($){if("string"==typeof $)return nt($,tt);var et=Object.prototype.toString.call($).slice(8,-1);return"Object"===et&&$.constructor&&(et=$.constructor.name),"Map"===et||"Set"===et?Array.from($):"Arguments"===et||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et)?nt($,tt):void 0}}},function($,tt){$.exports=function($,tt){(null==tt||tt>$.length)&&(tt=$.length);for(var et=0,nt=new Array(tt);et<tt;et++)nt[et]=$[et];return nt}},function($,tt){$.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function($,tt,et){"use strict";et.r(tt);var nt=et(67),rt=et(105),it=et(20),ot=function(){function t($){var tt=$||{};this.font_=tt.font,this.rotation_=tt.rotation,this.rotateWithView_=tt.rotateWithView,this.scale_=tt.scale,this.scaleArray_=Object(it.d)(void 0!==tt.scale?tt.scale:1),this.text_=tt.text,this.textAlign_=tt.textAlign,this.textBaseline_=tt.textBaseline,this.fill_=void 0!==tt.fill?tt.fill:new nt.default({color:"#333"}),this.maxAngle_=void 0!==tt.maxAngle?tt.maxAngle:Math.PI/4,this.placement_=void 0!==tt.placement?tt.placement:rt.a.POINT,this.overflow_=!!tt.overflow,this.stroke_=void 0!==tt.stroke?tt.stroke:null,this.offsetX_=void 0!==tt.offsetX?tt.offsetX:0,this.offsetY_=void 0!==tt.offsetY?tt.offsetY:0,this.backgroundFill_=tt.backgroundFill?tt.backgroundFill:null,this.backgroundStroke_=tt.backgroundStroke?tt.backgroundStroke:null,this.padding_=void 0===tt.padding?null:tt.padding}return t.prototype.clone=function(){var $=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray($)?$.slice():$,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function($){this.overflow_=$},t.prototype.setFont=function($){this.font_=$},t.prototype.setMaxAngle=function($){this.maxAngle_=$},t.prototype.setOffsetX=function($){this.offsetX_=$},t.prototype.setOffsetY=function($){this.offsetY_=$},t.prototype.setPlacement=function($){this.placement_=$},t.prototype.setRotateWithView=function($){this.rotateWithView_=$},t.prototype.setFill=function($){this.fill_=$},t.prototype.setRotation=function($){this.rotation_=$},t.prototype.setScale=function($){this.scale_=$,this.scaleArray_=Object(it.d)(void 0!==$?$:1)},t.prototype.setStroke=function($){this.stroke_=$},t.prototype.setText=function($){this.text_=$},t.prototype.setTextAlign=function($){this.textAlign_=$},t.prototype.setTextBaseline=function($){this.textBaseline_=$},t.prototype.setBackgroundFill=function($){this.backgroundFill_=$},t.prototype.setBackgroundStroke=function($){this.backgroundStroke_=$},t.prototype.setPadding=function($){this.padding_=$},t}();tt.default=ot},function($,tt,et){"use strict";Object.defineProperty(tt,"__esModule",{value:!0}),tt.DUMMY_MARK_SYMBOLIZER_FONT=void 0;var nt=/^ttf:\/\/(.+)#(.+)$/;tt.DUMMY_MARK_SYMBOLIZER_FONT="geostyler-mark-symbolizer";var rt=function(){function t(){}return t.getRgbaColor=function($,tt){return $.startsWith("rgba(")?$:/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test($)?(tt<0&&(tt=1),"rgba("+parseInt($.slice(1,3),16)+", "+parseInt($.slice(3,5),16)+", "+parseInt($.slice(5,7),16)+", "+tt+")"):void 0},t.splitRgbaColor=function($){var tt=$.substring($.indexOf("(")+1,$.lastIndexOf(")")).split(/,\s*/);return[parseInt(tt[0],10),parseInt(tt[1],10),parseInt(tt[2],10),parseFloat(tt[3])]},t.getHexColor=function($){return $.startsWith("#")?$:$.startsWith("rgb")?"#"+t.splitRgbaColor($).map((function($,tt){var et=$.toString(16);return tt<3?1===et.length?"0"+et:et:""})).join(""):void 0},t.getOpacity=function($){if($.startsWith("rgba(")){var tt=t.splitRgbaColor($);return 4===tt.length?tt[3]:void 0}},t.getTextFont=function($){return"Normal "+$.size+"px "+$.font},t.getIsFontGlyphBased=function($){return nt.test($.wellKnownName)},t.getIsMarkSymbolizerFont=function($){var et=tt.DUMMY_MARK_SYMBOLIZER_FONT;return $.substring($.length-et.length,$.length)===et},t.getTextFontForMarkSymbolizer=function($){var et=$.wellKnownName.match(nt);if(!et)throw new Error("Could not parse font-based well known name: "+$.wellKnownName);var rt=et[1];return"Normal "+($.radius||5)+"px '"+rt+"', "+tt.DUMMY_MARK_SYMBOLIZER_FONT},t.getCharacterForMarkSymbolizer=function($){var tt=$.wellKnownName.match(nt);if(!tt)throw new Error("Could not parse font-based well known name: "+$.wellKnownName);return String.fromCharCode(parseInt(tt[2],16))},t.getFontNameFromOlFont=function($){var tt=$.match(/(?:\d+\S+) '?"?([^,'"]+)/);if(!tt)throw new Error("Could not find font family name in the following string: "+$);return tt[1]},t.getSizeFromOlFont=function($){var tt=$.match(/(?:(\d+)px)/);return tt?parseInt(tt[1],10):0},t.resolveAttributeTemplate=function($,tt,et,nt){void 0===et&&(et="n.v."),void 0===nt&&(nt=function($,tt){return tt});var rt=new RegExp("\\{\\{(.*?)\\}\\}","g"),it=tt.match(rt);return it&&it.forEach((function(rt){for(var it=0,ot=0,at=Object.entries($.getProperties());ot<at.length;ot++){var Ot=at[ot],wt=Ot[0],St=Ot[1];if(rt.slice(2,rt.length-2).toLowerCase()===wt.toLowerCase()){tt=tt.replace(rt,nt(wt,St));break}it++}it===Object.keys($.getProperties()).length&&(tt=tt.replace(rt,et))})),tt},t}();tt.default=rt},function($,tt,et){"use strict";Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=tt.MapUtil=void 0;var nt=d(et(313)),rt=d(et(132)),it=d(et(134)),ot=d(et(131)),at=d(et(85)),Ot=d(et(133)),wt=et(19),St=d(et(195)),Ct=d(et(271)),Rt=d(et(273)),Tt=d(et(275));function d($){return $&&$.__esModule?$:{default:$}}function y($){return function($){if(Array.isArray($))return _($)}($)||function($){if("undefined"!=typeof Symbol&&Symbol.iterator in Object($))return Array.from($)}($)||v($)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g($,tt){var et;if("undefined"==typeof Symbol||null==$[Symbol.iterator]){if(Array.isArray($)||(et=v($))||tt&&$&&"number"==typeof $.length){et&&($=et);var nt=0,i=function(){};return{s:i,n:function(){return nt>=$.length?{done:!0}:{done:!1,value:$[nt++]}},e:function($){throw $},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var rt,it=!0,ot=!1;return{s:function(){et=$[Symbol.iterator]()},n:function(){var $=et.next();return it=$.done,$},e:function($){ot=!0,rt=$},f:function(){try{it||null==et.return||et.return()}finally{if(ot)throw rt}}}}function v($,tt){if($){if("string"==typeof $)return _($,tt);var et=Object.prototype.toString.call($).slice(8,-1);return"Object"===et&&$.constructor&&(et=$.constructor.name),"Map"===et||"Set"===et?Array.from($):"Arguments"===et||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et)?_($,tt):void 0}}function _($,tt){(null==tt||tt>$.length)&&(tt=$.length);for(var et=0,nt=new Array(tt);et<tt;et++)nt[et]=$[et];return nt}function m($,tt){for(var et=0;et<tt.length;et++){var nt=tt[et];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty($,nt.key,nt)}}var At,Nt,kt,Dt=function(){function t(){!function($,tt){if(!($ instanceof tt))throw new TypeError("Cannot call a class as a function")}(this,t)}var $,tt;return $=t,tt=[{key:"getInteractionsByName",value:function($,tt){var et=[];return $ instanceof nt.default?($.getInteractions().forEach((function($){$.get("name")===tt&&et.push($)})),et):(Ct.default.debug("Input parameter map must be from type `ol.Map`."),et)}},{key:"getInteractionsByClass",value:function($,tt){var et=[];return $ instanceof nt.default?($.getInteractions().forEach((function($){$ instanceof tt&&et.push($)})),et):(Ct.default.debug("Input parameter map must be from type `ol.Map`."),et)}},{key:"getResolutionForScale",value:function($,tt){var et=wt.METERS_PER_UNIT[tt];return parseFloat($)/(39.37*et*(25.4/.28))}},{key:"getScaleForResolution",value:function($,tt){var et=wt.METERS_PER_UNIT[tt];return parseFloat($)*et*39.37*(25.4/.28)}},{key:"getAllLayers",value:function($){var tt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!($ instanceof nt.default||$ instanceof ot.default))return Ct.default.error("Input parameter collection must be from type `ol.Map`or `ol.layer.Group`."),[];var et=$.getLayers().getArray(),rt=[];return et.forEach((function($){$ instanceof ot.default&&t.getAllLayers($).forEach((function($){tt($)&&rt.push($)})),tt($)&&rt.push($)})),rt}},{key:"getLayerByName",value:function($,tt){return t.getAllLayers($).filter((function($){return $.get("name")===tt}))[0]}},{key:"getLayerByNameParam",value:function($,tt){var et,nt,rt=g(t.getAllLayers($));try{for(rt.s();!(nt=rt.n()).done;){var it=nt.value;if(it.getSource&&it.getSource().getParams&&it.getSource().getParams().LAYERS===tt){et=it;break}}}catch($){rt.e($)}finally{rt.f()}return et}},{key:"getLayerByFeature",value:function($,tt,et){var nt,rt,it=Rt.default.getFeatureTypeName(tt),ot=g(et);try{for(ot.s();!(rt=ot.n()).done;){var at=rt.value,Ot="".concat(at,":").concat(it),wt=t.getLayerByNameParam($,Ot);if(wt){nt=wt;break}}}catch($){ot.e($)}finally{ot.f()}return nt}},{key:"getLayersByGroup",value:function($,tt){var et=[];return tt.getLayers().forEach((function(tt){tt instanceof ot.default?et.push.apply(et,y(t.getLayersByGroup($,tt))):et.push(tt)})),et}},{key:"getLayersByProperty",value:function($,tt,et){if($&&tt)return t.getAllLayers($).filter((function($){return $.get(tt)===et}))}},{key:"getLayerPositionInfo",value:function($,tt){var et=tt instanceof ot.default?tt:tt.getLayerGroup(),nt=et.getLayers().getArray(),rt={};return nt.indexOf($)<0?nt.forEach((function(tt){tt instanceof ot.default&&!rt.groupLayer&&(rt=t.getLayerPositionInfo($,tt))})):(rt.position=nt.indexOf($),rt.groupLayer=et),rt}},{key:"getLegendGraphicUrl",value:function($,tt){if($){var et=$.getSource();if($ instanceof at.default&&et){var nt=et instanceof rt.default,ot=et instanceof it.default;if(nt||ot){var Ot=$.getSource(),wt=nt?Ot.getUrls()?Ot.getUrls()[0]:"":Ot.getUrl(),Rt={LAYER:Ot.getParams().LAYERS,VERSION:"1.3.0",SERVICE:"WMS",REQUEST:"getLegendGraphic",FORMAT:"image/png"},Tt=St.default.objectToRequestString(Object.assign(Rt,tt));return/\?/.test(wt)?"".concat(wt,"&").concat(Tt):"".concat(wt,"?").concat(Tt)}Ct.default.warn('Source of "'.concat($.get("name"),'" is currently not supported ')+"by MapUtil.getLegendGraphicUrl.")}else Ct.default.error("Invalid layer passed to MapUtil.getLegendGraphicUrl.")}else Ct.default.error("No layer passed to MapUtil.getLegendGraphicUrl.")}},{key:"layerInResolutionRange",value:function($,tt){var et=tt&&tt.getView(),nt=et&&et.getResolution();if(!$||!et||!nt)return!1;var rt=$.getMinResolution(),it=$.getMaxResolution();return nt>=rt&&nt<it}},{key:"roundScale",value:function($){var tt;return $<100&&(tt=Math.round($,10)),$>=100&&$<1e4&&(tt=10*Math.round($/10)),$>=1e4&&$<1e6&&(tt=100*Math.round($/100)),$>=1e6&&(tt=1e3*Math.round($/1e3)),tt}},{key:"getZoomForScale",value:function($,tt){var et=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";if(Number.isNaN(Number($)))return 0;if($<0)return 0;var nt=t.getResolutionForScale($,et),rt=tt.reduce((function($,tt){return Math.abs(tt-nt)<Math.abs($-nt)?tt:$})),it=(0,Tt.default)(tt,(function($){return Math.abs($-rt)<=1e-10}));return it}},{key:"zoomToFeatures",value:function($,tt){if($ instanceof nt.default){var et=[];if(tt.forEach((function($){null!==$.getGeometry()&&et.push($.getGeometry())})),et.length>0){var rt=new Ot.default(et);$.getView().fit(rt.getExtent())}}}},{key:"isInScaleRange",value:function($,tt){return tt>=$.get("minResolution")&&tt<$.get("maxResolution")}}],null&&m($.prototype,null),tt&&m($,tt),t}();tt.MapUtil=Dt,kt=function($,tt){return Dt.getAllLayers($).find((function($){return tt===$.ol_uid.toString()}))},(Nt="getLayerByOlUid")in(At=Dt)?Object.defineProperty(At,Nt,{value:kt,enumerable:!0,configurable:!0,writable:!0}):At[Nt]=kt;var Gt=Dt;tt.default=Gt},function($,tt,et){"use strict";var nt=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(tt,"__esModule",{value:!0}),tt.UrlUtil=void 0;var rt=nt(et(196)),it=nt(et(199)),ot=nt(et(204)),at=nt(et(268)),Ot=function(){function t(){}return t.read=function($){return new rt.default($,null,it.default.parse)},t.write=function($){return $.toString()},t.getBasePath=function($){var tt=t.read($);return tt.protocol+"//"+tt.host+tt.pathname},t.getQueryParams=function($){return t.read($).query},t.getQueryParam=function($,tt){var et=t.getQueryParams($);return et[Object.keys(et).filter((function($){return $.toLowerCase()===tt.toLowerCase()}))[0]]},t.joinQueryParams=function($,tt,et){var nt=ot.default($);return et.forEach((function($){nt[$]&&(nt[$]=nt[$].split(",").concat(tt[$].split(",")).join(","))})),nt},t.hasQueryParam=function($,tt){var et=t.getQueryParams($);return!!Object.keys(et).some((function($){return $.toLowerCase()===tt.toLowerCase()}))},t.createValidGetCapabilitiesRequest=function($,tt,et){void 0===tt&&(tt="WMS"),void 0===et&&(et="1.3.0");var nt=t.getBasePath($),rt=t.getQueryParams($);return t.hasQueryParam($,"SERVICE")||(rt.SERVICE=tt),t.hasQueryParam($,"REQUEST")||(rt.REQUEST="GetCapabilities"),t.hasQueryParam($,"VERSION")||(rt.VERSION=et),nt+"?"+t.objectToRequestString(rt)},t.bundleOgcRequests=function($,tt,et){void 0===tt&&(tt=!1),void 0===et&&(et=["LAYERS","QUERY_LAYERS","STYLES"]);var nt={};$.forEach((function($){var tt=t.getQueryParams($),rt=t.getBasePath($);if(nt[rt]){var it=nt[rt],ot=tt;nt[rt]=t.joinQueryParams(it,ot,et)}else nt[rt]=tt}));var rt=[];if(tt){for(var it=0,ot=Object.entries(nt);it<ot.length;it++){var at=ot[it],Ot=at[0],wt=at[1],St=t.read(Ot);St.set("query",wt),rt.push(t.write(St))}return rt}return nt},t.objectToRequestString=function($){return Object.keys($).map((function(tt){return encodeURIComponent(tt)+"="+encodeURIComponent($[tt])})).join("&")},t.isValid=function($,tt){return void 0===tt&&(tt={require_tld:!1,require_protocol:!0}),at.default($,tt)},t}();tt.UrlUtil=Ot,tt.default=Ot},function($,tt,et){"use strict";(function(tt){var nt=et(197),rt=et(198),it=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,ot=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,at=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function u($){return($||"").toString().replace(at,"")}var Ot=[["#","hash"],["?","query"],function($){return $.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],wt={hash:1,query:1};function l($){var et,nt=("undefined"!=typeof window?window:void 0!==tt?tt:"undefined"!=typeof self?self:{}).location||{},rt={},ot=typeof($=$||nt);if("blob:"===$.protocol)rt=new f(unescape($.pathname),{});else if("string"===ot)for(et in rt=new f($,{}),wt)delete rt[et];else if("object"===ot){for(et in $)et in wt||(rt[et]=$[et]);void 0===rt.slashes&&(rt.slashes=it.test($.href))}return rt}function p($){$=u($);var tt=ot.exec($);return{protocol:tt[1]?tt[1].toLowerCase():"",slashes:!!tt[2],rest:tt[3]}}function f($,tt,et){if($=u($),!(this instanceof f))return new f($,tt,et);var it,ot,at,wt,St,Ct,Rt=Ot.slice(),Tt=typeof tt,At=this,Nt=0;for("object"!==Tt&&"string"!==Tt&&(et=tt,tt=null),et&&"function"!=typeof et&&(et=rt.parse),tt=l(tt),it=!(ot=p($||"")).protocol&&!ot.slashes,At.slashes=ot.slashes||it&&tt.slashes,At.protocol=ot.protocol||tt.protocol||"",$=ot.rest,ot.slashes||(Rt[3]=[/(.*)/,"pathname"]);Nt<Rt.length;Nt++)"function"!=typeof(wt=Rt[Nt])?(at=wt[0],Ct=wt[1],at!=at?At[Ct]=$:"string"==typeof at?~(St=$.indexOf(at))&&("number"==typeof wt[2]?(At[Ct]=$.slice(0,St),$=$.slice(St+wt[2])):(At[Ct]=$.slice(St),$=$.slice(0,St))):(St=at.exec($))&&(At[Ct]=St[1],$=$.slice(0,St.index)),At[Ct]=At[Ct]||it&&wt[3]&&tt[Ct]||"",wt[4]&&(At[Ct]=At[Ct].toLowerCase())):$=wt($);et&&(At.query=et(At.query)),it&&tt.slashes&&"/"!==At.pathname.charAt(0)&&(""!==At.pathname||""!==tt.pathname)&&(At.pathname=function($,tt){if(""===$)return tt;for(var et=(tt||"/").split("/").slice(0,-1).concat($.split("/")),nt=et.length,rt=et[nt-1],it=!1,ot=0;nt--;)"."===et[nt]?et.splice(nt,1):".."===et[nt]?(et.splice(nt,1),ot++):ot&&(0===nt&&(it=!0),et.splice(nt,1),ot--);return it&&et.unshift(""),"."!==rt&&".."!==rt||et.push(""),et.join("/")}(At.pathname,tt.pathname)),nt(At.port,At.protocol)||(At.host=At.hostname,At.port=""),At.username=At.password="",At.auth&&(wt=At.auth.split(":"),At.username=wt[0]||"",At.password=wt[1]||""),At.origin=At.protocol&&At.host&&"file:"!==At.protocol?At.protocol+"//"+At.host:"null",At.href=At.toString()}f.prototype={set:function($,tt,et){var it=this;switch($){case"query":"string"==typeof tt&&tt.length&&(tt=(et||rt.parse)(tt)),it[$]=tt;break;case"port":it[$]=tt,nt(tt,it.protocol)?tt&&(it.host=it.hostname+":"+tt):(it.host=it.hostname,it[$]="");break;case"hostname":it[$]=tt,it.port&&(tt+=":"+it.port),it.host=tt;break;case"host":it[$]=tt,/:\d+$/.test(tt)?(tt=tt.split(":"),it.port=tt.pop(),it.hostname=tt.join(":")):(it.hostname=tt,it.port="");break;case"protocol":it.protocol=tt.toLowerCase(),it.slashes=!et;break;case"pathname":case"hash":if(tt){var ot="pathname"===$?"/":"#";it[$]=tt.charAt(0)!==ot?ot+tt:tt}else it[$]=tt;break;default:it[$]=tt}for(var at=0;at<Ot.length;at++){var wt=Ot[at];wt[4]&&(it[wt[1]]=it[wt[1]].toLowerCase())}return it.origin=it.protocol&&it.host&&"file:"!==it.protocol?it.protocol+"//"+it.host:"null",it.href=it.toString(),it},toString:function($){$&&"function"==typeof $||($=rt.stringify);var tt,et=this,nt=et.protocol;nt&&":"!==nt.charAt(nt.length-1)&&(nt+=":");var it=nt+(et.slashes?"//":"");return et.username&&(it+=et.username,et.password&&(it+=":"+et.password),it+="@"),it+=et.host+et.pathname,(tt="object"==typeof et.query?$(et.query):et.query)&&(it+="?"!==tt.charAt(0)?"?"+tt:tt),et.hash&&(it+=et.hash),it}},f.extractProtocol=p,f.location=l,f.trimLeft=u,f.qs=rt,$.exports=f}).call(this,et(137))},function($,tt,et){"use strict";$.exports=function($,tt){if(tt=tt.split(":")[0],!($=+$))return!1;switch(tt){case"http":case"ws":return 80!==$;case"https":case"wss":return 443!==$;case"ftp":return 21!==$;case"gopher":return 70!==$;case"file":return!1}return 0!==$}},function($,tt,et){"use strict";var nt=Object.prototype.hasOwnProperty;function i($){try{return decodeURIComponent($.replace(/\+/g," "))}catch($){return null}}function o($){try{return encodeURIComponent($)}catch($){return null}}tt.stringify=function($,tt){tt=tt||"";var et,rt,it=[];for(rt in"string"!=typeof tt&&(tt="?"),$)if(nt.call($,rt)){if((et=$[rt])||null!=et&&!isNaN(et)||(et=""),rt=o(rt),et=o(et),null===rt||null===et)continue;it.push(rt+"="+et)}return it.length?tt+it.join("&"):""},tt.parse=function($){for(var tt,et=/([^=?#&]+)=?([^&]*)/g,nt={};tt=et.exec($);){var rt=i(tt[1]),it=i(tt[2]);null===rt||null===it||rt in nt||(nt[rt]=it)}return nt}},function($,tt,et){"use strict";const nt=et(200),rt=et(201),it=et(202),ot=et(203);function s($){if("string"!=typeof $||1!==$.length)throw new TypeError("arrayFormatSeparator must be single character string")}function u($,tt){return tt.encode?tt.strict?nt($):encodeURIComponent($):$}function c($,tt){return tt.decode?rt($):$}function h($){const tt=$.indexOf("#");return-1!==tt&&($=$.slice(0,tt)),$}function l($){const tt=($=h($)).indexOf("?");return-1===tt?"":$.slice(tt+1)}function p($,tt){return tt.parseNumbers&&!Number.isNaN(Number($))&&"string"==typeof $&&""!==$.trim()?$=Number($):!tt.parseBooleans||null===$||"true"!==$.toLowerCase()&&"false"!==$.toLowerCase()||($="true"===$.toLowerCase()),$}function f($,tt){s((tt=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},tt)).arrayFormatSeparator);const et=function($){let tt;switch($.arrayFormat){case"index":return($,et,nt)=>{tt=/\[(\d*)\]$/.exec($),$=$.replace(/\[\d*\]$/,""),tt?(void 0===nt[$]&&(nt[$]={}),nt[$][tt[1]]=et):nt[$]=et};case"bracket":return($,et,nt)=>{tt=/(\[\])$/.exec($),$=$.replace(/\[\]$/,""),tt?void 0!==nt[$]?nt[$]=[].concat(nt[$],et):nt[$]=[et]:nt[$]=et};case"comma":case"separator":return(tt,et,nt)=>{const rt="string"==typeof et&&et.includes($.arrayFormatSeparator),it="string"==typeof et&&!rt&&c(et,$).includes($.arrayFormatSeparator);et=it?c(et,$):et;const ot=rt||it?et.split($.arrayFormatSeparator).map((tt=>c(tt,$))):null===et?et:c(et,$);nt[tt]=ot};default:return($,tt,et)=>{void 0!==et[$]?et[$]=[].concat(et[$],tt):et[$]=tt}}}(tt),nt=Object.create(null);if("string"!=typeof $)return nt;if(!($=$.trim().replace(/^[?#&]/,"")))return nt;for(const rt of $.split("&")){if(""===rt)continue;let[$,ot]=it(tt.decode?rt.replace(/\+/g," "):rt,"=");ot=void 0===ot?null:["comma","separator"].includes(tt.arrayFormat)?ot:c(ot,tt),et(c($,tt),ot,nt)}for(const $ of Object.keys(nt)){const et=nt[$];if("object"==typeof et&&null!==et)for(const $ of Object.keys(et))et[$]=p(et[$],tt);else nt[$]=p(et,tt)}return!1===tt.sort?nt:(!0===tt.sort?Object.keys(nt).sort():Object.keys(nt).sort(tt.sort)).reduce((($,tt)=>{const et=nt[tt];return Boolean(et)&&"object"==typeof et&&!Array.isArray(et)?$[tt]=function t($){return Array.isArray($)?$.sort():"object"==typeof $?t(Object.keys($)).sort((($,tt)=>Number($)-Number(tt))).map((tt=>$[tt])):$}(et):$[tt]=et,$}),Object.create(null))}tt.extract=l,tt.parse=f,tt.stringify=($,tt)=>{if(!$)return"";s((tt=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},tt)).arrayFormatSeparator);const r=et=>tt.skipNull&&null==$[et]||tt.skipEmptyString&&""===$[et],et=function($){switch($.arrayFormat){case"index":return tt=>(et,nt)=>{const rt=et.length;return void 0===nt||$.skipNull&&null===nt||$.skipEmptyString&&""===nt?et:null===nt?[...et,[u(tt,$),"[",rt,"]"].join("")]:[...et,[u(tt,$),"[",u(rt,$),"]=",u(nt,$)].join("")]};case"bracket":return tt=>(et,nt)=>void 0===nt||$.skipNull&&null===nt||$.skipEmptyString&&""===nt?et:null===nt?[...et,[u(tt,$),"[]"].join("")]:[...et,[u(tt,$),"[]=",u(nt,$)].join("")];case"comma":case"separator":return tt=>(et,nt)=>null==nt||0===nt.length?et:0===et.length?[[u(tt,$),"=",u(nt,$)].join("")]:[[et,u(nt,$)].join($.arrayFormatSeparator)];default:return tt=>(et,nt)=>void 0===nt||$.skipNull&&null===nt||$.skipEmptyString&&""===nt?et:null===nt?[...et,u(tt,$)]:[...et,[u(tt,$),"=",u(nt,$)].join("")]}}(tt),nt={};for(const tt of Object.keys($))r(tt)||(nt[tt]=$[tt]);const rt=Object.keys(nt);return!1!==tt.sort&&rt.sort(tt.sort),rt.map((nt=>{const rt=$[nt];return void 0===rt?"":null===rt?u(nt,tt):Array.isArray(rt)?rt.reduce(et(nt),[]).join("&"):u(nt,tt)+"="+u(rt,tt)})).filter(($=>$.length>0)).join("&")},tt.parseUrl=($,tt)=>{tt=Object.assign({decode:!0},tt);const[et,nt]=it($,"#");return Object.assign({url:et.split("?")[0]||"",query:f(l($),tt)},tt&&tt.parseFragmentIdentifier&&nt?{fragmentIdentifier:c(nt,tt)}:{})},tt.stringifyUrl=($,et)=>{et=Object.assign({encode:!0,strict:!0},et);const nt=h($.url).split("?")[0]||"",rt=tt.extract($.url),it=tt.parse(rt,{sort:!1}),ot=Object.assign(it,$.query);let at=tt.stringify(ot,et);at&&(at="?"+at);let Ot=function($){let tt="";const et=$.indexOf("#");return-1!==et&&(tt=$.slice(et)),tt}($.url);return $.fragmentIdentifier&&(Ot="#"+u($.fragmentIdentifier,et)),`${nt}${at}${Ot}`},tt.pick=($,et,nt)=>{nt=Object.assign({parseFragmentIdentifier:!0},nt);const{url:rt,query:it,fragmentIdentifier:at}=tt.parseUrl($,nt);return tt.stringifyUrl({url:rt,query:ot(it,et),fragmentIdentifier:at},nt)},tt.exclude=($,et,nt)=>{const rt=Array.isArray(et)?$=>!et.includes($):($,tt)=>!et($,tt);return tt.pick($,rt,nt)}},function($,tt,et){"use strict";$.exports=$=>encodeURIComponent($).replace(/[!'()*]/g,($=>"%"+$.charCodeAt(0).toString(16).toUpperCase()))},function($,tt,et){"use strict";var nt=new RegExp("%[a-f0-9]{2}","gi"),rt=new RegExp("(%[a-f0-9]{2})+","gi");function o($,tt){try{return decodeURIComponent($.join(""))}catch($){}if(1===$.length)return $;tt=tt||1;var et=$.slice(0,tt),nt=$.slice(tt);return Array.prototype.concat.call([],o(et),o(nt))}function a($){try{return decodeURIComponent($)}catch(rt){for(var tt=$.match(nt),et=1;et<tt.length;et++)tt=($=o(tt,et).join("")).match(nt);return $}}$.exports=function($){if("string"!=typeof $)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof $+"`");try{return $=$.replace(/\+/g," "),decodeURIComponent($)}catch(tt){return function($){for(var tt={"%FE%FF":"��","%FF%FE":"��"},et=rt.exec($);et;){try{tt[et[0]]=decodeURIComponent(et[0])}catch($){var nt=a(et[0]);nt!==et[0]&&(tt[et[0]]=nt)}et=rt.exec($)}tt["%C2"]="�";for(var it=Object.keys(tt),ot=0;ot<it.length;ot++){var at=it[ot];$=$.replace(new RegExp(at,"g"),tt[at])}return $}($)}}},function($,tt,et){"use strict";$.exports=($,tt)=>{if("string"!=typeof $||"string"!=typeof tt)throw new TypeError("Expected the arguments to be of type `string`");if(""===tt)return[$];const et=$.indexOf(tt);return-1===et?[$]:[$.slice(0,et),$.slice(et+tt.length)]}},function($,tt,et){"use strict";$.exports=function($,tt){for(var et={},nt=Object.keys($),rt=Array.isArray(tt),it=0;it<nt.length;it++){var ot=nt[it],at=$[ot];(rt?-1!==tt.indexOf(ot):tt(ot,at,$))&&(et[ot]=at)}return et}},function($,tt,et){var nt=et(205);$.exports=function($){return nt($,4)}},function($,tt,et){var nt=et(115),rt=et(234),it=et(141),ot=et(236),at=et(243),Ot=et(246),wt=et(247),St=et(248),Ct=et(250),Rt=et(153),Tt=et(251),At=et(97),Nt=et(256),kt=et(257),Dt=et(262),Gt=et(47),Ut=et(119),Xt=et(264),Vt=et(66),Jt=et(266),ne=et(96),re=et(125),ie={};ie["[object Arguments]"]=ie["[object Array]"]=ie["[object ArrayBuffer]"]=ie["[object DataView]"]=ie["[object Boolean]"]=ie["[object Date]"]=ie["[object Float32Array]"]=ie["[object Float64Array]"]=ie["[object Int8Array]"]=ie["[object Int16Array]"]=ie["[object Int32Array]"]=ie["[object Map]"]=ie["[object Number]"]=ie["[object Object]"]=ie["[object RegExp]"]=ie["[object Set]"]=ie["[object String]"]=ie["[object Symbol]"]=ie["[object Uint8Array]"]=ie["[object Uint8ClampedArray]"]=ie["[object Uint16Array]"]=ie["[object Uint32Array]"]=!0,ie["[object Error]"]=ie["[object Function]"]=ie["[object WeakMap]"]=!1,$.exports=function t($,tt,et,oe,ae,fe){var de,ye=1&tt,Se=2&tt,Ee=4&tt;if(et&&(de=ae?et($,oe,ae,fe):et($)),void 0!==de)return de;if(!Vt($))return $;var Me=Gt($);if(Me){if(de=Nt($),!ye)return wt($,de)}else{var Ce=At($),Re="[object Function]"==Ce||"[object GeneratorFunction]"==Ce;if(Ut($))return Ot($,ye);if("[object Object]"==Ce||"[object Arguments]"==Ce||Re&&!ae){if(de=Se||Re?{}:Dt($),!ye)return Se?Ct($,at(de,$)):St($,ot(de,$))}else{if(!ie[Ce])return ae?$:{};de=kt($,Ce,ye)}}fe||(fe=new nt);var Pe=fe.get($);if(Pe)return Pe;fe.set($,de),Jt($)?$.forEach((function(nt){de.add(t(nt,tt,et,nt,$,fe))})):Xt($)&&$.forEach((function(nt,rt){de.set(rt,t(nt,tt,et,rt,$,fe))}));var Ie=Me?void 0:(Ee?Se?Tt:Rt:Se?re:ne)($);return rt(Ie||$,(function(nt,rt){Ie&&(nt=$[rt=nt]),it(de,rt,t(nt,tt,et,rt,$,fe))})),de}},function($,tt){$.exports=function(){this.__data__=[],this.size=0}},function($,tt,et){var nt=et(92),rt=Array.prototype.splice;$.exports=function($){var tt=this.__data__,et=nt(tt,$);return!(et<0||(et==tt.length-1?tt.pop():rt.call(tt,et,1),--this.size,0))}},function($,tt,et){var nt=et(92);$.exports=function($){var tt=this.__data__,et=nt(tt,$);return et<0?void 0:tt[et][1]}},function($,tt,et){var nt=et(92);$.exports=function($){return nt(this.__data__,$)>-1}},function($,tt,et){var nt=et(92);$.exports=function($,tt){var et=this.__data__,rt=nt(et,$);return rt<0?(++this.size,et.push([$,tt])):et[rt][1]=tt,this}},function($,tt,et){var nt=et(91);$.exports=function(){this.__data__=new nt,this.size=0}},function($,tt){$.exports=function($){var tt=this.__data__,et=tt.delete($);return this.size=tt.size,et}},function($,tt){$.exports=function($){return this.__data__.get($)}},function($,tt){$.exports=function($){return this.__data__.has($)}},function($,tt,et){var nt=et(91),rt=et(117),it=et(118);$.exports=function($,tt){var et=this.__data__;if(et instanceof nt){var ot=et.__data__;if(!rt||ot.length<199)return ot.push([$,tt]),this.size=++et.size,this;et=this.__data__=new it(ot)}return et.set($,tt),this.size=et.size,this}},function($,tt,et){var nt=et(138),rt=et(219),it=et(66),ot=et(140),at=/^\[object .+?Constructor\]$/,Ot=Function.prototype,wt=Object.prototype,St=Ot.toString,Ct=wt.hasOwnProperty,Rt=RegExp("^"+St.call(Ct).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");$.exports=function($){return!(!it($)||rt($))&&(nt($)?Rt:at).test(ot($))}},function($,tt,et){var nt=et(83),rt=Object.prototype,it=rt.hasOwnProperty,ot=rt.toString,at=nt?nt.toStringTag:void 0;$.exports=function($){var tt=it.call($,at),et=$[at];try{$[at]=void 0;var nt=!0}catch($){}var rt=ot.call($);return nt&&(tt?$[at]=et:delete $[at]),rt}},function($,tt){var et=Object.prototype.toString;$.exports=function($){return et.call($)}},function($,tt,et){var nt,rt=et(220),it=(nt=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||""))?"Symbol(src)_1."+nt:"";$.exports=function($){return!!it&&it in $}},function($,tt,et){var nt=et(50)["__core-js_shared__"];$.exports=nt},function($,tt){$.exports=function($,tt){return null==$?void 0:$[tt]}},function($,tt,et){var nt=et(223),rt=et(91),it=et(117);$.exports=function(){this.size=0,this.__data__={hash:new nt,map:new(it||rt),string:new nt}}},function($,tt,et){var nt=et(224),rt=et(225),it=et(226),ot=et(227),at=et(228);function u($){var tt=-1,et=null==$?0:$.length;for(this.clear();++tt<et;){var nt=$[tt];this.set(nt[0],nt[1])}}u.prototype.clear=nt,u.prototype.delete=rt,u.prototype.get=it,u.prototype.has=ot,u.prototype.set=at,$.exports=u},function($,tt,et){var nt=et(93);$.exports=function(){this.__data__=nt?nt(null):{},this.size=0}},function($,tt){$.exports=function($){var tt=this.has($)&&delete this.__data__[$];return this.size-=tt?1:0,tt}},function($,tt,et){var nt=et(93),rt=Object.prototype.hasOwnProperty;$.exports=function($){var tt=this.__data__;if(nt){var et=tt[$];return"__lodash_hash_undefined__"===et?void 0:et}return rt.call(tt,$)?tt[$]:void 0}},function($,tt,et){var nt=et(93),rt=Object.prototype.hasOwnProperty;$.exports=function($){var tt=this.__data__;return nt?void 0!==tt[$]:rt.call(tt,$)}},function($,tt,et){var nt=et(93);$.exports=function($,tt){var et=this.__data__;return this.size+=this.has($)?0:1,et[$]=nt&&void 0===tt?"__lodash_hash_undefined__":tt,this}},function($,tt,et){var nt=et(94);$.exports=function($){var tt=nt(this,$).delete($);return this.size-=tt?1:0,tt}},function($,tt){$.exports=function($){var tt=typeof $;return"string"==tt||"number"==tt||"symbol"==tt||"boolean"==tt?"__proto__"!==$:null===$}},function($,tt,et){var nt=et(94);$.exports=function($){return nt(this,$).get($)}},function($,tt,et){var nt=et(94);$.exports=function($){return nt(this,$).has($)}},function($,tt,et){var nt=et(94);$.exports=function($,tt){var et=nt(this,$),rt=et.size;return et.set($,tt),this.size+=et.size==rt?0:1,this}},function($,tt){$.exports=function($,tt){for(var et=-1,nt=null==$?0:$.length;++et<nt&&!1!==tt($[et],et,$););return $}},function($,tt,et){var nt=et(65),rt=function(){try{var $=nt(Object,"defineProperty");return $({},"",{}),$}catch($){}}();$.exports=rt},function($,tt,et){var nt=et(95),rt=et(96);$.exports=function($,tt){return $&&nt(tt,rt(tt),$)}},function($,tt){$.exports=function($,tt){for(var et=-1,nt=Array($);++et<$;)nt[et]=tt(et);return nt}},function($,tt,et){var nt=et(72),rt=et(60);$.exports=function($){return rt($)&&"[object Arguments]"==nt($)}},function($,tt){$.exports=function(){return!1}},function($,tt,et){var nt=et(72),rt=et(121),it=et(60),ot={};ot["[object Float32Array]"]=ot["[object Float64Array]"]=ot["[object Int8Array]"]=ot["[object Int16Array]"]=ot["[object Int32Array]"]=ot["[object Uint8Array]"]=ot["[object Uint8ClampedArray]"]=ot["[object Uint16Array]"]=ot["[object Uint32Array]"]=!0,ot["[object Arguments]"]=ot["[object Array]"]=ot["[object ArrayBuffer]"]=ot["[object Boolean]"]=ot["[object DataView]"]=ot["[object Date]"]=ot["[object Error]"]=ot["[object Function]"]=ot["[object Map]"]=ot["[object Number]"]=ot["[object Object]"]=ot["[object RegExp]"]=ot["[object Set]"]=ot["[object String]"]=ot["[object WeakMap]"]=!1,$.exports=function($){return it($)&&rt($.length)&&!!ot[nt($)]}},function($,tt,et){var nt=et(124),rt=et(242),it=Object.prototype.hasOwnProperty;$.exports=function($){if(!nt($))return rt($);var tt=[];for(var et in Object($))it.call($,et)&&"constructor"!=et&&tt.push(et);return tt}},function($,tt,et){var nt=et(147)(Object.keys,Object);$.exports=nt},function($,tt,et){var nt=et(95),rt=et(125);$.exports=function($,tt){return $&&nt(tt,rt(tt),$)}},function($,tt,et){var nt=et(66),rt=et(124),it=et(245),ot=Object.prototype.hasOwnProperty;$.exports=function($){if(!nt($))return it($);var tt=rt($),et=[];for(var at in $)("constructor"!=at||!tt&&ot.call($,at))&&et.push(at);return et}},function($,tt){$.exports=function($){var tt=[];if(null!=$)for(var et in Object($))tt.push(et);return tt}},function($,tt,et){(function($){var nt=et(50),rt=tt&&!tt.nodeType&&tt,it=rt&&"object"==typeof $&&$&&!$.nodeType&&$,ot=it&&it.exports===rt?nt.Buffer:void 0,at=ot?ot.allocUnsafe:void 0;$.exports=function($,tt){if(tt)return $.slice();var et=$.length,nt=at?at(et):new $.constructor(et);return $.copy(nt),nt}}).call(this,et(120)($))},function($,tt){$.exports=function($,tt){var et=-1,nt=$.length;for(tt||(tt=Array(nt));++et<nt;)tt[et]=$[et];return tt}},function($,tt,et){var nt=et(95),rt=et(126);$.exports=function($,tt){return nt($,rt($),tt)}},function($,tt){$.exports=function($,tt){for(var et=-1,nt=null==$?0:$.length,rt=0,it=[];++et<nt;){var ot=$[et];tt(ot,et,$)&&(it[rt++]=ot)}return it}},function($,tt,et){var nt=et(95),rt=et(150);$.exports=function($,tt){return nt($,rt($),tt)}},function($,tt,et){var nt=et(154),rt=et(150),it=et(125);$.exports=function($){return nt($,it,rt)}},function($,tt,et){var nt=et(65)(et(50),"DataView");$.exports=nt},function($,tt,et){var nt=et(65)(et(50),"Promise");$.exports=nt},function($,tt,et){var nt=et(65)(et(50),"Set");$.exports=nt},function($,tt,et){var nt=et(65)(et(50),"WeakMap");$.exports=nt},function($,tt){var et=Object.prototype.hasOwnProperty;$.exports=function($){var tt=$.length,nt=new $.constructor(tt);return tt&&"string"==typeof $[0]&&et.call($,"index")&&(nt.index=$.index,nt.input=$.input),nt}},function($,tt,et){var nt=et(127),rt=et(258),it=et(259),ot=et(260),at=et(261);$.exports=function($,tt,et){var Ot=$.constructor;switch(tt){case"[object ArrayBuffer]":return nt($);case"[object Boolean]":case"[object Date]":return new Ot(+$);case"[object DataView]":return rt($,et);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return at($,et);case"[object Map]":case"[object Set]":return new Ot;case"[object Number]":case"[object String]":return new Ot($);case"[object RegExp]":return it($);case"[object Symbol]":return ot($)}}},function($,tt,et){var nt=et(127);$.exports=function($,tt){var et=tt?nt($.buffer):$.buffer;return new $.constructor(et,$.byteOffset,$.byteLength)}},function($,tt){var et=/\w*$/;$.exports=function($){var tt=new $.constructor($.source,et.exec($));return tt.lastIndex=$.lastIndex,tt}},function($,tt,et){var nt=et(83),rt=nt?nt.prototype:void 0,it=rt?rt.valueOf:void 0;$.exports=function($){return it?Object(it.call($)):{}}},function($,tt,et){var nt=et(127);$.exports=function($,tt){var et=tt?nt($.buffer):$.buffer;return new $.constructor(et,$.byteOffset,$.length)}},function($,tt,et){var nt=et(263),rt=et(152),it=et(124);$.exports=function($){return"function"!=typeof $.constructor||it($)?{}:nt(rt($))}},function($,tt,et){var nt=et(66),rt=Object.create,it=function(){function t(){}return function($){if(!nt($))return{};if(rt)return rt($);t.prototype=$;var tt=new t;return t.prototype=void 0,tt}}();$.exports=it},function($,tt,et){var nt=et(265),rt=et(122),it=et(123),ot=it&&it.isMap,at=ot?rt(ot):nt;$.exports=at},function($,tt,et){var nt=et(97),rt=et(60);$.exports=function($){return rt($)&&"[object Map]"==nt($)}},function($,tt,et){var nt=et(267),rt=et(122),it=et(123),ot=it&&it.isSet,at=ot?rt(ot):nt;$.exports=at},function($,tt,et){var nt=et(97),rt=et(60);$.exports=function($){return rt($)&&"[object Set]"==nt($)}},function($,tt,et){"use strict";Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=function($,tt){if((0,nt.default)($),!$||/[\s<>]/.test($))return!1;if(0===$.indexOf("mailto:"))return!1;if((tt=(0,ot.default)(tt,at)).validate_length&&$.length>=2083)return!1;var et,wt,St,Ct,Rt,Tt,At,Nt;if(At=$.split("#"),$=At.shift(),At=$.split("?"),$=At.shift(),(At=$.split("://")).length>1){if(et=At.shift().toLowerCase(),tt.require_valid_protocol&&-1===tt.protocols.indexOf(et))return!1}else{if(tt.require_protocol)return!1;if("//"===$.substr(0,2)){if(!tt.allow_protocol_relative_urls)return!1;At[0]=$.substr(2)}}if(""===($=At.join("://")))return!1;if(At=$.split("/"),""===($=At.shift())&&!tt.require_host)return!0;if((At=$.split("@")).length>1){if(tt.disallow_auth)return!1;if(-1===(wt=At.shift()).indexOf(":")||wt.indexOf(":")>=0&&wt.split(":").length>2)return!1}Tt=null,Nt=null;var kt=(Ct=At.join("@")).match(Ot);if(kt?(St="",Nt=kt[1],Tt=kt[2]||null):(St=(At=Ct.split(":")).shift(),At.length&&(Tt=At.join(":"))),null!==Tt){if(Rt=parseInt(Tt,10),!/^[0-9]+$/.test(Tt)||Rt<=0||Rt>65535)return!1}else if(tt.require_port)return!1;return!!((0,it.default)(St)||(0,rt.default)(St,tt)||Nt&&(0,it.default)(Nt,6))&&(St=St||Nt,!(tt.host_whitelist&&!h(St,tt.host_whitelist))&&(!tt.host_blacklist||!h(St,tt.host_blacklist)))};var nt=s(et(128)),rt=s(et(269)),it=s(et(270)),ot=s(et(156));function s($){return $&&$.__esModule?$:{default:$}}var at={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,validate_length:!0},Ot=/^\[([^\]]+)\](?::([0-9]+))?$/;function h($,tt){for(var et=0;et<tt.length;et++){var nt=tt[et];if($===nt||(rt=nt,"[object RegExp]"===Object.prototype.toString.call(rt)&&nt.test($)))return!0}var rt;return!1}$.exports=tt.default,$.exports.default=tt.default},function($,tt,et){"use strict";Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=function($,tt){(0,nt.default)($),(tt=(0,rt.default)(tt,it)).allow_trailing_dot&&"."===$[$.length-1]&&($=$.substring(0,$.length-1));var et=$.split("."),ot=et[et.length-1];if(tt.require_tld){if(et.length<2)return!1;if(!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(ot))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20\u00A9\uFFFD]/.test(ot))return!1}return!(!tt.allow_numeric_tld&&/^\d+$/.test(ot))&&et.every((function($){return!($.length>63||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test($)||/[\uff01-\uff5e]/.test($)||/^-|-$/.test($)||!tt.allow_underscores&&/_/.test($))}))};var nt=o(et(128)),rt=o(et(156));function o($){return $&&$.__esModule?$:{default:$}}var it={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1};$.exports=tt.default,$.exports.default=tt.default},function($,tt,et){"use strict";Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=function t($){var tt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,rt.default)($),!(tt=String(tt)))return t($,4)||t($,6);if("4"===tt){if(!it.test($))return!1;var et=$.split(".").sort((function($,tt){return $-tt}));return et[3]<=255}if("6"===tt){var nt=[$];if($.includes("%")){if(2!==(nt=$.split("%")).length)return!1;if(!nt[0].includes(":"))return!1;if(""===nt[1])return!1}var at=nt[0].split(":"),Ot=!1,wt=t(at[at.length-1],4),St=wt?7:8;if(at.length>St)return!1;if("::"===$)return!0;"::"===$.substr(0,2)?(at.shift(),at.shift(),Ot=!0):"::"===$.substr($.length-2)&&(at.pop(),at.pop(),Ot=!0);for(var Ct=0;Ct<at.length;++Ct)if(""===at[Ct]&&Ct>0&&Ct<at.length-1){if(Ot)return!1;Ot=!0}else if(wt&&Ct===at.length-1);else if(!ot.test(at[Ct]))return!1;return Ot?at.length>=1:at.length===St}return!1};var nt,rt=(nt=et(128))&&nt.__esModule?nt:{default:nt},it=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,ot=/^[0-9A-F]{1,4}$/i;$.exports=tt.default,$.exports.default=tt.default},function($,tt,et){"use strict";var nt=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(tt,"__esModule",{value:!0});var rt=nt(et(272)).default.getLogger("app-logger");rt.setLevel("DEBUG"),tt.default=rt},function($,tt,et){var nt,rt;!function(it,ot){"use strict";void 0===(rt="function"==typeof(nt=function(){var t=function(){},$="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),tt=["trace","debug","info","warn","error"];function n($,tt){var et=$[tt];if("function"==typeof et.bind)return et.bind($);try{return Function.prototype.bind.call(et,$)}catch(tt){return function(){return Function.prototype.apply.apply(et,[$,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(tt){return"debug"===tt&&(tt="log"),"undefined"!=typeof console&&("trace"===tt&&$?i:void 0!==console[tt]?n(console,tt):void 0!==console.log?n(console,"log"):t)}function a($,et){for(var nt=0;nt<tt.length;nt++){var rt=tt[nt];this[rt]=nt<$?t:this.methodFactory(rt,$,et)}this.log=this.debug}function s($,tt,et){return function(){"undefined"!=typeof console&&(a.call(this,tt,et),this[$].apply(this,arguments))}}function u($,tt,et){return o($)||s.apply(this,arguments)}function c($,et,nt){var rt,it=this,ot="loglevel";function c(){var $;if("undefined"!=typeof window&&ot){try{$=window.localStorage[ot]}catch($){}if(void 0===$)try{var tt=window.document.cookie,et=tt.indexOf(encodeURIComponent(ot)+"=");-1!==et&&($=/^([^;]+)/.exec(tt.slice(et))[1])}catch($){}return void 0===it.levels[$]&&($=void 0),$}}"string"==typeof $?ot+=":"+$:"symbol"==typeof $&&(ot=void 0),it.name=$,it.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},it.methodFactory=nt||u,it.getLevel=function(){return rt},it.setLevel=function(et,nt){if("string"==typeof et&&void 0!==it.levels[et.toUpperCase()]&&(et=it.levels[et.toUpperCase()]),!("number"==typeof et&&et>=0&&et<=it.levels.SILENT))throw"log.setLevel() called with invalid level: "+et;if(rt=et,!1!==nt&&function($){var et=(tt[$]||"silent").toUpperCase();if("undefined"!=typeof window&&ot){try{return void(window.localStorage[ot]=et)}catch($){}try{window.document.cookie=encodeURIComponent(ot)+"="+et+";"}catch($){}}}(et),a.call(it,et,$),"undefined"==typeof console&&et<it.levels.SILENT)return"No console available for logging"},it.setDefaultLevel=function($){c()||it.setLevel($,!1)},it.enableAll=function($){it.setLevel(it.levels.TRACE,$)},it.disableAll=function($){it.setLevel(it.levels.SILENT,$)};var at=c();null==at&&(at=null==et?"WARN":et),it.setLevel(at,!1)}var et=new c,nt={};et.getLogger=function($){if("symbol"!=typeof $&&"string"!=typeof $||""===$)throw new TypeError("You must supply a name when creating a logger.");var tt=nt[$];return tt||(tt=nt[$]=new c($,et.getLevel(),et.methodFactory)),tt};var rt="undefined"!=typeof window?window.log:void 0;return et.noConflict=function(){return"undefined"!=typeof window&&window.log===et&&(window.log=rt),et},et.getLoggers=function(){return nt},et.default=et,et})?nt.call(tt,et,tt,$):nt)||($.exports=rt)}()},function($,tt,et){"use strict";Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=void 0;var nt=a(et(157)),rt=a(et(47)),it=a(et(274));function a($){return $&&$.__esModule?$:{default:$}}function s($,tt){return function($){if(Array.isArray($))return $}($)||function($,tt){if("undefined"!=typeof Symbol&&Symbol.iterator in Object($)){var et=[],nt=!0,rt=!1,it=void 0;try{for(var ot,at=$[Symbol.iterator]();!(nt=(ot=at.next()).done)&&(et.push(ot.value),!tt||et.length!==tt);nt=!0);}catch($){rt=!0,it=$}finally{try{nt||null==at.return||at.return()}finally{if(rt)throw it}}return et}}($,tt)||function($,tt){if($){if("string"==typeof $)return u($,tt);var et=Object.prototype.toString.call($).slice(8,-1);return"Object"===et&&$.constructor&&(et=$.constructor.name),"Map"===et||"Set"===et?Array.from($):"Arguments"===et||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et)?u($,tt):void 0}}($,tt)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u($,tt){(null==tt||tt>$.length)&&(tt=$.length);for(var et=0,nt=new Array(tt);et<tt;et++)nt[et]=$[et];return nt}function c($,tt){for(var et=0;et<tt.length;et++){var nt=tt[et];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty($,nt.key,nt)}}var ot=function(){function t(){!function($,tt){if(!($ instanceof tt))throw new TypeError("Cannot call a class as a function")}(this,t)}var $,tt;return $=t,tt=[{key:"getFeatureTypeName",value:function($){var tt=$.getId(),et=tt?tt.split("."):tt;return(0,rt.default)(et)?et[0]:void 0}},{key:"getFeatureTypeNameFromGetFeatureInfoUrl",value:function($){var tt,et=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],nt=/query_layers=(.*?)(&|$)/i,rt=$.match(nt);return rt&&rt[1]&&(tt=decodeURIComponent(rt[1]),!et&&tt.indexOf(":")>0&&(tt=tt.split(":")[1])),tt}},{key:"resolveAttributeTemplate",value:function($,tt){var et=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n.v.",rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function($,tt){return tt},ot=arguments.length>4&&void 0!==arguments[4]&&arguments[4],at="\\{\\{",Ot="\\}\\}",wt="",St=new RegExp(at+"(.*?)"+Ot,"g"),Ct=(0,nt.default)(tt)?tt.match(St):null;return Ct&&Ct.forEach((function(nt){for(var it=0,ot=0,at=Object.entries($.getProperties());ot<at.length;ot++){var Ot=s(at[ot],2),wt=Ot[0],St=Ot[1];if(nt.slice(2,nt.length-2).toLowerCase()===wt.toLowerCase()){tt=tt.replace(nt,rt(wt,St));break}it++}it===Object.keys($.getProperties()).length&&(tt=tt.replace(nt,et))})),(wt=tt)||(wt=$.getId()),ot||(wt=(wt=it.default.urlify(wt)).replace(/\n/g,"<br>")),wt}}],null&&c($.prototype,null),tt&&c($,tt),t}();tt.default=ot},function($,tt,et){"use strict";var nt=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(tt,"__esModule",{value:!0});var rt=nt(et(157)),it=function(){function t(){}return t.urlify=function($){return $.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank">$1</a>')},t.coerce=function($){if(!rt.default($))return $;if("true"===$.toLowerCase())return!0;if("false"===$.toLowerCase())return!1;if(/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/.test($))return parseFloat($);if($.startsWith("["))return JSON.parse($).map((function($){return t.coerce($)}));if($.startsWith("{")){var tt=JSON.parse($),et={};return Object.keys(tt).forEach((function($){et[$]=t.coerce(tt[$])})),et}return $},t.stringDivider=function($,tt,et){var nt=0,rt=tt;if($.length>tt){for(var it=tt,ot=void 0,at=void 0;it>0&&" "!==$[it]&&"-"!==$[it];)it--;return it>0?(ot="-"===$.substring(it,it+1)?$.substring(0,it+1):$.substring(0,it),at=$.substring(it+1),ot+et+t.stringDivider(at,tt,et)):(ot=$.substring(nt,rt+1)+"-",at=$.substring(rt+1),nt=rt,rt+=tt,ot+et+t.stringDivider(at,tt,et))}return $},t.stripHTMLTags=function($){var tt;return DOMParser&&(tt=(new DOMParser).parseFromString($,"text/html").body.textContent||""),tt},t}();tt.default=it},function($,tt,et){var nt=et(276),rt=et(277),it=et(305),ot=Math.max;$.exports=function($,tt,et){var at=null==$?0:$.length;if(!at)return-1;var Ot=null==et?0:it(et);return Ot<0&&(Ot=ot(at+Ot,0)),nt($,rt(tt,3),Ot)}},function($,tt){$.exports=function($,tt,et,nt){for(var rt=$.length,it=et+(nt?1:-1);nt?it--:++it<rt;)if(tt($[it],it,$))return it;return-1}},function($,tt,et){var nt=et(278),rt=et(291),it=et(301),ot=et(47),at=et(302);$.exports=function($){return"function"==typeof $?$:null==$?it:"object"==typeof $?ot($)?rt($[0],$[1]):nt($):at($)}},function($,tt,et){var nt=et(279),rt=et(290),it=et(161);$.exports=function($){var tt=rt($);return 1==tt.length&&tt[0][2]?it(tt[0][0],tt[0][1]):function(et){return et===$||nt(et,$,tt)}}},function($,tt,et){var nt=et(115),rt=et(158);$.exports=function($,tt,et,it){var ot=et.length,at=ot,Ot=!it;if(null==$)return!at;for($=Object($);ot--;){var wt=et[ot];if(Ot&&wt[2]?wt[1]!==$[wt[0]]:!(wt[0]in $))return!1}for(;++ot<at;){var St=(wt=et[ot])[0],Ct=$[St],Rt=wt[1];if(Ot&&wt[2]){if(void 0===Ct&&!(St in $))return!1}else{var Tt=new nt;if(it)var At=it(Ct,Rt,St,$,tt,Tt);if(!(void 0===At?rt(Rt,Ct,3,it,Tt):At))return!1}}return!0}},function($,tt,et){var nt=et(115),rt=et(159),it=et(286),ot=et(289),at=et(97),Ot=et(47),wt=et(119),St=et(146),Ct="[object Object]",Rt=Object.prototype.hasOwnProperty;$.exports=function($,tt,et,Tt,At,Nt){var kt=Ot($),Dt=Ot(tt),Gt=kt?"[object Array]":at($),Ut=Dt?"[object Array]":at(tt),Xt=(Gt="[object Arguments]"==Gt?Ct:Gt)==Ct,Vt=(Ut="[object Arguments]"==Ut?Ct:Ut)==Ct,Jt=Gt==Ut;if(Jt&&wt($)){if(!wt(tt))return!1;kt=!0,Xt=!1}if(Jt&&!Xt)return Nt||(Nt=new nt),kt||St($)?rt($,tt,et,Tt,At,Nt):it($,tt,Gt,et,Tt,At,Nt);if(!(1&et)){var ne=Xt&&Rt.call($,"__wrapped__"),re=Vt&&Rt.call(tt,"__wrapped__");if(ne||re){var ie=ne?$.value():$,oe=re?tt.value():tt;return Nt||(Nt=new nt),At(ie,oe,et,Tt,Nt)}}return!!Jt&&(Nt||(Nt=new nt),ot($,tt,et,Tt,At,Nt))}},function($,tt,et){var nt=et(118),rt=et(282),it=et(283);function a($){var tt=-1,et=null==$?0:$.length;for(this.__data__=new nt;++tt<et;)this.add($[tt])}a.prototype.add=a.prototype.push=rt,a.prototype.has=it,$.exports=a},function($,tt){$.exports=function($){return this.__data__.set($,"__lodash_hash_undefined__"),this}},function($,tt){$.exports=function($){return this.__data__.has($)}},function($,tt){$.exports=function($,tt){for(var et=-1,nt=null==$?0:$.length;++et<nt;)if(tt($[et],et,$))return!0;return!1}},function($,tt){$.exports=function($,tt){return $.has(tt)}},function($,tt,et){var nt=et(83),rt=et(155),it=et(116),ot=et(159),at=et(287),Ot=et(288),wt=nt?nt.prototype:void 0,St=wt?wt.valueOf:void 0;$.exports=function($,tt,et,nt,wt,Ct,Rt){switch(et){case"[object DataView]":if($.byteLength!=tt.byteLength||$.byteOffset!=tt.byteOffset)return!1;$=$.buffer,tt=tt.buffer;case"[object ArrayBuffer]":return!($.byteLength!=tt.byteLength||!Ct(new rt($),new rt(tt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return it(+$,+tt);case"[object Error]":return $.name==tt.name&&$.message==tt.message;case"[object RegExp]":case"[object String]":return $==tt+"";case"[object Map]":var Tt=at;case"[object Set]":var At=1&nt;if(Tt||(Tt=Ot),$.size!=tt.size&&!At)return!1;var Nt=Rt.get($);if(Nt)return Nt==tt;nt|=2,Rt.set($,tt);var kt=ot(Tt($),Tt(tt),nt,wt,Ct,Rt);return Rt.delete($),kt;case"[object Symbol]":if(St)return St.call($)==St.call(tt)}return!1}},function($,tt){$.exports=function($){var tt=-1,et=Array($.size);return $.forEach((function($,nt){et[++tt]=[nt,$]})),et}},function($,tt){$.exports=function($){var tt=-1,et=Array($.size);return $.forEach((function($){et[++tt]=$})),et}},function($,tt,et){var nt=et(153),rt=Object.prototype.hasOwnProperty;$.exports=function($,tt,et,it,ot,at){var Ot=1&et,wt=nt($),St=wt.length;if(St!=nt(tt).length&&!Ot)return!1;for(var Ct=St;Ct--;){var Rt=wt[Ct];if(!(Ot?Rt in tt:rt.call(tt,Rt)))return!1}var Tt=at.get($),At=at.get(tt);if(Tt&&At)return Tt==tt&&At==$;var Nt=!0;at.set($,tt),at.set(tt,$);for(var kt=Ot;++Ct<St;){var Dt=$[Rt=wt[Ct]],Gt=tt[Rt];if(it)var Ut=Ot?it(Gt,Dt,Rt,tt,$,at):it(Dt,Gt,Rt,$,tt,at);if(!(void 0===Ut?Dt===Gt||ot(Dt,Gt,et,it,at):Ut)){Nt=!1;break}kt||(kt="constructor"==Rt)}if(Nt&&!kt){var Xt=$.constructor,Vt=tt.constructor;Xt==Vt||!("constructor"in $)||!("constructor"in tt)||"function"==typeof Xt&&Xt instanceof Xt&&"function"==typeof Vt&&Vt instanceof Vt||(Nt=!1)}return at.delete($),at.delete(tt),Nt}},function($,tt,et){var nt=et(160),rt=et(96);$.exports=function($){for(var tt=rt($),et=tt.length;et--;){var it=tt[et],ot=$[it];tt[et]=[it,ot,nt(ot)]}return tt}},function($,tt,et){var nt=et(158),rt=et(162),it=et(298),ot=et(129),at=et(160),Ot=et(161),wt=et(99);$.exports=function($,tt){return ot($)&&at(tt)?Ot(wt($),tt):function(et){var ot=rt(et,$);return void 0===ot&&ot===tt?it(et,$):nt(tt,ot,3)}}},function($,tt,et){var nt=et(293),rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/\\(\\)?/g,ot=nt((function($){var tt=[];return 46===$.charCodeAt(0)&&tt.push(""),$.replace(rt,(function($,et,nt,rt){tt.push(nt?rt.replace(it,"$1"):et||$)})),tt}));$.exports=ot},function($,tt,et){var nt=et(294);$.exports=function($){var tt=nt($,(function($){return 500===et.size&&et.clear(),$})),et=tt.cache;return tt}},function($,tt,et){var nt=et(118);function i($,tt){if("function"!=typeof $||null!=tt&&"function"!=typeof tt)throw new TypeError("Expected a function");var r=function(){var et=arguments,nt=tt?tt.apply(this,et):et[0],rt=r.cache;if(rt.has(nt))return rt.get(nt);var it=$.apply(this,et);return r.cache=rt.set(nt,it)||rt,it};return r.cache=new(i.Cache||nt),r}i.Cache=nt,$.exports=i},function($,tt,et){var nt=et(296);$.exports=function($){return null==$?"":nt($)}},function($,tt,et){var nt=et(83),rt=et(297),it=et(47),ot=et(98),at=nt?nt.prototype:void 0,Ot=at?at.toString:void 0;$.exports=function t($){if("string"==typeof $)return $;if(it($))return rt($,t)+"";if(ot($))return Ot?Ot.call($):"";var tt=$+"";return"0"==tt&&1/$==-1/0?"-0":tt}},function($,tt){$.exports=function($,tt){for(var et=-1,nt=null==$?0:$.length,rt=Array(nt);++et<nt;)rt[et]=tt($[et],et,$);return rt}},function($,tt,et){var nt=et(299),rt=et(300);$.exports=function($,tt){return null!=$&&rt($,tt,nt)}},function($,tt){$.exports=function($,tt){return null!=$&&tt in Object($)}},function($,tt,et){var nt=et(164),rt=et(144),it=et(47),ot=et(145),at=et(121),Ot=et(99);$.exports=function($,tt,et){for(var wt=-1,St=(tt=nt(tt,$)).length,Ct=!1;++wt<St;){var Rt=Ot(tt[wt]);if(!(Ct=null!=$&&et($,Rt)))break;$=$[Rt]}return Ct||++wt!=St?Ct:!!(St=null==$?0:$.length)&&at(St)&&ot(Rt,St)&&(it($)||rt($))}},function($,tt){$.exports=function($){return $}},function($,tt,et){var nt=et(303),rt=et(304),it=et(129),ot=et(99);$.exports=function($){return it($)?nt(ot($)):rt($)}},function($,tt){$.exports=function($){return function(tt){return null==tt?void 0:tt[$]}}},function($,tt,et){var nt=et(163);$.exports=function($){return function(tt){return nt(tt,$)}}},function($,tt,et){var nt=et(306);$.exports=function($){var tt=nt($),et=tt%1;return tt==tt?et?tt-et:tt:0}},function($,tt,et){var nt=et(307);$.exports=function($){return $?($=nt($))===1/0||$===-1/0?17976931348623157e292*($<0?-1:1):$==$?$:0:0===$?$:0}},function($,tt,et){var nt=et(66),rt=et(98),it=/^\s+|\s+$/g,ot=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,Ot=/^0o[0-7]+$/i,wt=parseInt;$.exports=function($){if("number"==typeof $)return $;if(rt($))return NaN;if(nt($)){var tt="function"==typeof $.valueOf?$.valueOf():$;$=nt(tt)?tt+"":tt}if("string"!=typeof $)return 0===$?$:+$;$=$.replace(it,"");var et=at.test($);return et||Ot.test($)?wt($.slice(2),et?2:8):ot.test($)?NaN:+$}},function($,tt,et){(function($){var nt=Object.getOwnPropertyDescriptors||function($){for(var tt=Object.keys($),et={},nt=0;nt<tt.length;nt++)et[tt[nt]]=Object.getOwnPropertyDescriptor($,tt[nt]);return et},rt=/%[sdj%]/g;tt.format=function($){if(!v($)){for(var tt=[],et=0;et<arguments.length;et++)tt.push(s(arguments[et]));return tt.join(" ")}et=1;for(var nt=arguments,it=nt.length,ot=String($).replace(rt,(function($){if("%%"===$)return"%";if(et>=it)return $;switch($){case"%s":return String(nt[et++]);case"%d":return Number(nt[et++]);case"%j":try{return JSON.stringify(nt[et++])}catch($){return"[Circular]"}default:return $}})),at=nt[et];et<it;at=nt[++et])y(at)||!b(at)?ot+=" "+at:ot+=" "+s(at);return ot},tt.deprecate=function(et,nt){if(void 0!==$&&!0===$.noDeprecation)return et;if(void 0===$)return function(){return tt.deprecate(et,nt).apply(this,arguments)};var rt=!1;return function(){if(!rt){if($.throwDeprecation)throw new Error(nt);$.traceDeprecation?console.trace(nt):console.error(nt),rt=!0}return et.apply(this,arguments)}};var it,ot={};function s($,et){var nt={seen:[],stylize:c};return arguments.length>=3&&(nt.depth=arguments[2]),arguments.length>=4&&(nt.colors=arguments[3]),d(et)?nt.showHidden=et:et&&tt._extend(nt,et),_(nt.showHidden)&&(nt.showHidden=!1),_(nt.depth)&&(nt.depth=2),_(nt.colors)&&(nt.colors=!1),_(nt.customInspect)&&(nt.customInspect=!0),nt.colors&&(nt.stylize=u),h(nt,$,nt.depth)}function u($,tt){var et=s.styles[tt];return et?"["+s.colors[et][0]+"m"+$+"["+s.colors[et][1]+"m":$}function c($,tt){return $}function h($,et,nt){if($.customInspect&&et&&w(et.inspect)&&et.inspect!==tt.inspect&&(!et.constructor||et.constructor.prototype!==et)){var rt=et.inspect(nt,$);return v(rt)||(rt=h($,rt,nt)),rt}var it=function($,tt){if(_(tt))return $.stylize("undefined","undefined");if(v(tt)){var et="'"+JSON.stringify(tt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(et,"string")}return g(tt)?$.stylize(""+tt,"number"):d(tt)?$.stylize(""+tt,"boolean"):y(tt)?$.stylize("null","null"):void 0}($,et);if(it)return it;var ot=Object.keys(et),at=function($){var tt={};return $.forEach((function($,et){tt[$]=!0})),tt}(ot);if($.showHidden&&(ot=Object.getOwnPropertyNames(et)),x(et)&&(ot.indexOf("message")>=0||ot.indexOf("description")>=0))return l(et);if(0===ot.length){if(w(et)){var Ot=et.name?": "+et.name:"";return $.stylize("[Function"+Ot+"]","special")}if(m(et))return $.stylize(RegExp.prototype.toString.call(et),"regexp");if(O(et))return $.stylize(Date.prototype.toString.call(et),"date");if(x(et))return l(et)}var wt,St="",Ct=!1,Rt=["{","}"];return f(et)&&(Ct=!0,Rt=["[","]"]),w(et)&&(St=" [Function"+(et.name?": "+et.name:"")+"]"),m(et)&&(St=" "+RegExp.prototype.toString.call(et)),O(et)&&(St=" "+Date.prototype.toUTCString.call(et)),x(et)&&(St=" "+l(et)),0!==ot.length||Ct&&0!=et.length?nt<0?m(et)?$.stylize(RegExp.prototype.toString.call(et),"regexp"):$.stylize("[Object]","special"):($.seen.push(et),wt=Ct?function($,tt,et,nt,rt){for(var it=[],ot=0,at=tt.length;ot<at;++ot)C(tt,String(ot))?it.push(p($,tt,et,nt,String(ot),!0)):it.push("");return rt.forEach((function(rt){rt.match(/^\d+$/)||it.push(p($,tt,et,nt,rt,!0))})),it}($,et,nt,at,ot):ot.map((function(tt){return p($,et,nt,at,tt,Ct)})),$.seen.pop(),function($,tt,et){return $.reduce((function($,tt){return tt.indexOf("\n"),$+tt.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?et[0]+(""===tt?"":tt+"\n ")+" "+$.join(",\n  ")+" "+et[1]:et[0]+tt+" "+$.join(", ")+" "+et[1]}(wt,St,Rt)):Rt[0]+St+Rt[1]}function l($){return"["+Error.prototype.toString.call($)+"]"}function p($,tt,et,nt,rt,it){var ot,at,Ot;if((Ot=Object.getOwnPropertyDescriptor(tt,rt)||{value:tt[rt]}).get?at=Ot.set?$.stylize("[Getter/Setter]","special"):$.stylize("[Getter]","special"):Ot.set&&(at=$.stylize("[Setter]","special")),C(nt,rt)||(ot="["+rt+"]"),at||($.seen.indexOf(Ot.value)<0?(at=y(et)?h($,Ot.value,null):h($,Ot.value,et-1)).indexOf("\n")>-1&&(at=it?at.split("\n").map((function($){return"  "+$})).join("\n").substr(2):"\n"+at.split("\n").map((function($){return"   "+$})).join("\n")):at=$.stylize("[Circular]","special")),_(ot)){if(it&&rt.match(/^\d+$/))return at;(ot=JSON.stringify(""+rt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ot=ot.substr(1,ot.length-2),ot=$.stylize(ot,"name")):(ot=ot.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ot=$.stylize(ot,"string"))}return ot+": "+at}function f($){return Array.isArray($)}function d($){return"boolean"==typeof $}function y($){return null===$}function g($){return"number"==typeof $}function v($){return"string"==typeof $}function _($){return void 0===$}function m($){return b($)&&"[object RegExp]"===S($)}function b($){return"object"==typeof $&&null!==$}function O($){return b($)&&"[object Date]"===S($)}function x($){return b($)&&("[object Error]"===S($)||$ instanceof Error)}function w($){return"function"==typeof $}function S($){return Object.prototype.toString.call($)}function E($){return $<10?"0"+$.toString(10):$.toString(10)}tt.debuglog=function(et){if(_(it)&&(it=$.env.NODE_DEBUG||""),et=et.toUpperCase(),!ot[et])if(new RegExp("\\b"+et+"\\b","i").test(it)){var nt=$.pid;ot[et]=function(){var $=tt.format.apply(tt,arguments);console.error("%s %d: %s",et,nt,$)}}else ot[et]=function(){};return ot[et]},tt.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},tt.isArray=f,tt.isBoolean=d,tt.isNull=y,tt.isNullOrUndefined=function($){return null==$},tt.isNumber=g,tt.isString=v,tt.isSymbol=function($){return"symbol"==typeof $},tt.isUndefined=_,tt.isRegExp=m,tt.isObject=b,tt.isDate=O,tt.isError=x,tt.isFunction=w,tt.isPrimitive=function($){return null===$||"boolean"==typeof $||"number"==typeof $||"string"==typeof $||"symbol"==typeof $||void 0===$},tt.isBuffer=et(310);var at=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var $=new Date,tt=[E($.getHours()),E($.getMinutes()),E($.getSeconds())].join(":");return[$.getDate(),at[$.getMonth()],tt].join(" ")}function C($,tt){return Object.prototype.hasOwnProperty.call($,tt)}tt.log=function(){console.log("%s - %s",j(),tt.format.apply(tt,arguments))},tt.inherits=et(311),tt._extend=function($,tt){if(!tt||!b(tt))return $;for(var et=Object.keys(tt),nt=et.length;nt--;)$[et[nt]]=tt[et[nt]];return $};var Ot="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P($,tt){if(!$){var et=new Error("Promise was rejected with a falsy value");et.reason=$,$=et}return tt($)}tt.promisify=function($){if("function"!=typeof $)throw new TypeError('The "original" argument must be of type Function');if(Ot&&$[Ot]){var tt;if("function"!=typeof(tt=$[Ot]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(tt,Ot,{value:tt,enumerable:!1,writable:!1,configurable:!0}),tt}function tt(){for(var tt,et,nt=new Promise((function($,nt){tt=$,et=nt})),rt=[],it=0;it<arguments.length;it++)rt.push(arguments[it]);rt.push((function($,nt){$?et($):tt(nt)}));try{$.apply(this,rt)}catch($){et($)}return nt}return Object.setPrototypeOf(tt,Object.getPrototypeOf($)),Ot&&Object.defineProperty(tt,Ot,{value:tt,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(tt,nt($))},tt.promisify.custom=Ot,tt.callbackify=function(tt){if("function"!=typeof tt)throw new TypeError('The "original" argument must be of type Function');function r(){for(var et=[],nt=0;nt<arguments.length;nt++)et.push(arguments[nt]);var rt=et.pop();if("function"!=typeof rt)throw new TypeError("The last argument must be of type Function");var it=this,a=function(){return rt.apply(it,arguments)};tt.apply(this,et).then((function(tt){$.nextTick(a,null,tt)}),(function(tt){$.nextTick(P,tt,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(tt)),Object.defineProperties(r,nt(tt)),r}}).call(this,et(309))},function($,tt){var et,nt,rt=$.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s($){if(et===setTimeout)return setTimeout($,0);if((et===o||!et)&&setTimeout)return et=setTimeout,setTimeout($,0);try{return et($,0)}catch(tt){try{return et.call(null,$,0)}catch(tt){return et.call(this,$,0)}}}!function(){try{et="function"==typeof setTimeout?setTimeout:o}catch($){et=o}try{nt="function"==typeof clearTimeout?clearTimeout:a}catch($){nt=a}}();var it,ot=[],at=!1,Ot=-1;function p(){at&&it&&(at=!1,it.length?ot=it.concat(ot):Ot=-1,ot.length&&f())}function f(){if(!at){var $=s(p);at=!0;for(var tt=ot.length;tt;){for(it=ot,ot=[];++Ot<tt;)it&&it[Ot].run();Ot=-1,tt=ot.length}it=null,at=!1,function($){if(nt===clearTimeout)return clearTimeout($);if((nt===a||!nt)&&clearTimeout)return nt=clearTimeout,clearTimeout($);try{nt($)}catch(tt){try{return nt.call(null,$)}catch(tt){return nt.call(this,$)}}}($)}}function d($,tt){this.fun=$,this.array=tt}function y(){}rt.nextTick=function($){var tt=new Array(arguments.length-1);if(arguments.length>1)for(var et=1;et<arguments.length;et++)tt[et-1]=arguments[et];ot.push(new d($,tt)),1!==ot.length||at||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},rt.title="browser",rt.browser=!0,rt.env={},rt.argv=[],rt.version="",rt.versions={},rt.on=y,rt.addListener=y,rt.once=y,rt.off=y,rt.removeListener=y,rt.removeAllListeners=y,rt.emit=y,rt.prependListener=y,rt.prependOnceListener=y,rt.listeners=function($){return[]},rt.binding=function($){throw new Error("process.binding is not supported")},rt.cwd=function(){return"/"},rt.chdir=function($){throw new Error("process.chdir is not supported")},rt.umask=function(){return 0}},function($,tt){$.exports=function($){return $&&"object"==typeof $&&"function"==typeof $.copy&&"function"==typeof $.fill&&"function"==typeof $.readUInt8}},function($,tt){"function"==typeof Object.create?$.exports=function($,tt){$.super_=tt,$.prototype=Object.create(tt.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}})}:$.exports=function($,tt){$.super_=tt;var r=function(){};r.prototype=tt.prototype,$.prototype=new r,$.prototype.constructor=$}},function($,tt,et){"use strict";et.r(tt);var nt=et(86),rt=et.n(nt),it=et(87),ot=et.n(it),at=et(165),Ot=et.n(at),wt=et(166),St=et.n(wt),Ct=et(100),Rt=et.n(Ct),Tt=et(167);function d($){var tt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch($){return!1}}();return function(){var et,nt=Rt()($);if(tt){var rt=Rt()(this).constructor;et=Reflect.construct(nt,arguments,rt)}else et=nt.apply(this,arguments);return St()(this,et)}}var At=function($){Ot()(r,$);var tt=d(r);function r(){var $;return rt()(this,r),($=tt.call(this,1,1)).src_=null,$.hintImageSize(1,1),$.loadPromiseResolver=null,$.loadPromiseRejecter=null,$.loadPromise=new Promise((function(tt,et){$.loadPromiseResolver=tt,$.loadPromiseRejecter=et})),$}return ot()(r,[{key:"hintImageSize",value:function($,tt){this.width=$,this.height=tt,this.naturalWidth=$,this.naturalHeight=tt}},{key:"addEventListener",value:function($,tt){"load"===$?this.loadPromise.then(tt).catch((function(){})):"error"===$&&this.loadPromise.catch(tt)}},{key:"removeEventListener",value:function(){}},{key:"src",set:function($){var tt=this;fetch($).then((function($){return $.blob()})).then((function($){return createImageBitmap($)})).then((function($){return tt.getContext("2d").drawImage($,0,0),tt.loadPromiseResolver()})).catch(this.loadPromiseRejecter)},get:function(){return this.src_}}]),r}(et.n(Tt)()(OffscreenCanvas));self.Image=At;var Nt=function(){function t(){rt()(this,t)}return ot()(t,[{key:"createElement",value:function($){if("canvas"===$)return new OffscreenCanvas(1,1)}}]),t}();self.document=new Nt;var kt=et(62),Dt=et.n(kt),m=function($,tt){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)tt.hasOwnProperty(et)&&($[et]=tt[et])})($,tt)};function b($,tt){function r(){this.constructor=$}m($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}function O($){return"function"==typeof $}var Gt=!1,Ut={Promise:void 0,set useDeprecatedSynchronousErrorHandling($){$&&(new Error).stack,Gt=$},get useDeprecatedSynchronousErrorHandling(){return Gt}};function S($){setTimeout((function(){throw $}),0)}var Xt={closed:!0,next:function($){},error:function($){if(Ut.useDeprecatedSynchronousErrorHandling)throw $;S($)},complete:function(){}},Vt=Array.isArray||function($){return $&&"number"==typeof $.length};function j($){return null!==$&&"object"==typeof $}var Jt=function(){function t($){return Error.call(this),this.message=$?$.length+" errors occurred during unsubscription:\n"+$.map((function($,tt){return tt+1+") "+$.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=$,this}return t.prototype=Object.create(Error.prototype),t}(),ne=function(){function t($){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,$&&(this._ctorUnsubscribe=!0,this._unsubscribe=$)}return t.prototype.unsubscribe=function(){var $;if(!this.closed){var tt=this._parentOrParents,et=this._ctorUnsubscribe,nt=this._unsubscribe,rt=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,tt instanceof t)tt.remove(this);else if(null!==tt)for(var it=0;it<tt.length;++it)tt[it].remove(this);if(O(nt)){et&&(this._unsubscribe=void 0);try{nt.call(this)}catch(tt){$=tt instanceof Jt?P(tt.errors):[tt]}}if(Vt(rt)){it=-1;for(var ot=rt.length;++it<ot;){var at=rt[it];if(j(at))try{at.unsubscribe()}catch(tt){$=$||[],tt instanceof Jt?$=$.concat(P(tt.errors)):$.push(tt)}}}if($)throw new Jt($)}},t.prototype.add=function($){var tt=$;if(!$)return t.EMPTY;switch(typeof $){case"function":tt=new t($);case"object":if(tt===this||tt.closed||"function"!=typeof tt.unsubscribe)return tt;if(this.closed)return tt.unsubscribe(),tt;if(!(tt instanceof t)){var et=tt;(tt=new t)._subscriptions=[et]}break;default:throw new Error("unrecognized teardown "+$+" added to Subscription.")}var nt=tt._parentOrParents;if(null===nt)tt._parentOrParents=this;else if(nt instanceof t){if(nt===this)return tt;tt._parentOrParents=[nt,this]}else{if(-1!==nt.indexOf(this))return tt;nt.push(this)}var rt=this._subscriptions;return null===rt?this._subscriptions=[tt]:rt.push(tt),tt},t.prototype.remove=function($){var tt=this._subscriptions;if(tt){var et=tt.indexOf($);-1!==et&&tt.splice(et,1)}},t.EMPTY=function($){return $.closed=!0,$}(new t),t}();function P($){return $.reduce((function($,tt){return $.concat(tt instanceof Jt?tt.errors:tt)}),[])}var re="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ie=function($){function e(tt,et,nt){var rt=$.call(this)||this;switch(rt.syncErrorValue=null,rt.syncErrorThrown=!1,rt.syncErrorThrowable=!1,rt.isStopped=!1,arguments.length){case 0:rt.destination=Xt;break;case 1:if(!tt){rt.destination=Xt;break}if("object"==typeof tt){tt instanceof e?(rt.syncErrorThrowable=tt.syncErrorThrowable,rt.destination=tt,tt.add(rt)):(rt.syncErrorThrowable=!0,rt.destination=new oe(rt,tt));break}default:rt.syncErrorThrowable=!0,rt.destination=new oe(rt,tt,et,nt)}return rt}return b(e,$),e.prototype[re]=function(){return this},e.create=function($,tt,et){var nt=new e($,tt,et);return nt.syncErrorThrowable=!1,nt},e.prototype.next=function($){this.isStopped||this._next($)},e.prototype.error=function($){this.isStopped||(this.isStopped=!0,this._error($))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,$.prototype.unsubscribe.call(this))},e.prototype._next=function($){this.destination.next($)},e.prototype._error=function($){this.destination.error($),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var $=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=$,this},e}(ne),oe=function($){function e(tt,et,nt,rt){var it,ot=$.call(this)||this;ot._parentSubscriber=tt;var at=ot;return O(et)?it=et:et&&(it=et.next,nt=et.error,rt=et.complete,et!==Xt&&(O((at=Object.create(et)).unsubscribe)&&ot.add(at.unsubscribe.bind(at)),at.unsubscribe=ot.unsubscribe.bind(ot))),ot._context=at,ot._next=it,ot._error=nt,ot._complete=rt,ot}return b(e,$),e.prototype.next=function($){if(!this.isStopped&&this._next){var tt=this._parentSubscriber;Ut.useDeprecatedSynchronousErrorHandling&&tt.syncErrorThrowable?this.__tryOrSetError(tt,this._next,$)&&this.unsubscribe():this.__tryOrUnsub(this._next,$)}},e.prototype.error=function($){if(!this.isStopped){var tt=this._parentSubscriber,et=Ut.useDeprecatedSynchronousErrorHandling;if(this._error)et&&tt.syncErrorThrowable?(this.__tryOrSetError(tt,this._error,$),this.unsubscribe()):(this.__tryOrUnsub(this._error,$),this.unsubscribe());else if(tt.syncErrorThrowable)et?(tt.syncErrorValue=$,tt.syncErrorThrown=!0):S($),this.unsubscribe();else{if(this.unsubscribe(),et)throw $;S($)}}},e.prototype.complete=function(){var $=this;if(!this.isStopped){var tt=this._parentSubscriber;if(this._complete){var r=function(){return $._complete.call($._context)};Ut.useDeprecatedSynchronousErrorHandling&&tt.syncErrorThrowable?(this.__tryOrSetError(tt,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function($,tt){try{$.call(this._context,tt)}catch($){if(this.unsubscribe(),Ut.useDeprecatedSynchronousErrorHandling)throw $;S($)}},e.prototype.__tryOrSetError=function($,tt,et){if(!Ut.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{tt.call(this._context,et)}catch(tt){return Ut.useDeprecatedSynchronousErrorHandling?($.syncErrorValue=tt,$.syncErrorThrown=!0,!0):(S(tt),!0)}return!1},e.prototype._unsubscribe=function(){var $=this._parentSubscriber;this._context=null,this._parentSubscriber=null,$.unsubscribe()},e}(ie),ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function F($){return $}function N($){return 0===$.length?F:1===$.length?$[0]:function(tt){return $.reduce((function($,tt){return tt($)}),tt)}}var fe=function(){function t($){this._isScalar=!1,$&&(this._subscribe=$)}return t.prototype.lift=function($){var tt=new t;return tt.source=this,tt.operator=$,tt},t.prototype.subscribe=function($,tt,et){var nt=this.operator,rt=function($,tt,et){if($){if($ instanceof ie)return $;if($[re])return $[re]()}return $||tt||et?new ie($,tt,et):new ie(Xt)}($,tt,et);if(nt?rt.add(nt.call(rt,this.source)):rt.add(this.source||Ut.useDeprecatedSynchronousErrorHandling&&!rt.syncErrorThrowable?this._subscribe(rt):this._trySubscribe(rt)),Ut.useDeprecatedSynchronousErrorHandling&&rt.syncErrorThrowable&&(rt.syncErrorThrowable=!1,rt.syncErrorThrown))throw rt.syncErrorValue;return rt},t.prototype._trySubscribe=function($){try{return this._subscribe($)}catch(tt){Ut.useDeprecatedSynchronousErrorHandling&&($.syncErrorThrown=!0,$.syncErrorValue=tt),function($){for(;$;){var tt=$,et=tt.closed,nt=tt.destination,rt=tt.isStopped;if(et||rt)return!1;$=nt&&nt instanceof ie?nt:null}return!0}($)?$.error(tt):console.warn(tt)}},t.prototype.forEach=function($,tt){var et=this;return new(tt=D(tt))((function(tt,nt){var rt;rt=et.subscribe((function(tt){try{$(tt)}catch($){nt($),rt&&rt.unsubscribe()}}),nt,tt)}))},t.prototype._subscribe=function($){var tt=this.source;return tt&&tt.subscribe($)},t.prototype[ae]=function(){return this},t.prototype.pipe=function(){for(var $=[],tt=0;tt<arguments.length;tt++)$[tt]=arguments[tt];return 0===$.length?this:N($)(this)},t.prototype.toPromise=function($){var tt=this;return new($=D($))((function($,et){var nt;tt.subscribe((function($){return nt=$}),(function($){return et($)}),(function(){return $(nt)}))}))},t.create=function($){return new t($)},t}();function D($){if($||($=Ut.Promise||Promise),!$)throw new Error("no Promise impl found");return $}function G($,tt){return function(et){if("function"!=typeof $)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return et.lift(new de($,tt))}}var de=function(){function t($,tt){this.project=$,this.thisArg=tt}return t.prototype.call=function($,tt){return tt.subscribe(new ye($,this.project,this.thisArg))},t}(),ye=function($){function e(tt,et,nt){var rt=$.call(this,tt)||this;return rt.project=et,rt.count=0,rt.thisArg=nt||rt,rt}return b(e,$),e.prototype._next=function($){var tt;try{tt=this.project.call(this.thisArg,$,this.count++)}catch($){return void this.destination.error($)}this.destination.next(tt)},e}(ie);function Y($,tt,et,nt){return O(et)&&(nt=et,et=void 0),nt?Y($,tt,et).pipe(G((function($){return Vt($)?nt.apply(void 0,$):nt($)}))):new fe((function(nt){!function t($,tt,et,nt,rt){var it;if(function($){return $&&"function"==typeof $.addEventListener&&"function"==typeof $.removeEventListener}($)){var ot=$;$.addEventListener(tt,et,rt),it=function(){return ot.removeEventListener(tt,et,rt)}}else if(function($){return $&&"function"==typeof $.on&&"function"==typeof $.off}($)){var at=$;$.on(tt,et),it=function(){return at.off(tt,et)}}else if(function($){return $&&"function"==typeof $.addListener&&"function"==typeof $.removeListener}($)){var Ot=$;$.addListener(tt,et),it=function(){return Ot.removeListener(tt,et)}}else{if(!$||!$.length)throw new TypeError("Invalid event target");for(var wt=0,St=$.length;wt<St;wt++)t($[wt],tt,et,nt,rt)}nt.add(it)}($,tt,(function($){arguments.length>1?nt.next(Array.prototype.slice.call(arguments)):nt.next($)}),nt,et)}))}function B(){for(var $=[],tt=0;tt<arguments.length;tt++)$[tt]=arguments[tt];var et=$.length;if(0===et)throw new Error("list of properties cannot be empty.");return function(tt){return G(W($,et))(tt)}}function W($,tt){return function(et){for(var nt=et,rt=0;rt<tt;rt++){var it=null!=nt?nt[$[rt]]:void 0;if(void 0===it)return;nt=it}return nt}}function X(){}function q($,tt,et){return function(nt){return nt.lift(new Se($,tt,et))}}var Se=function(){function t($,tt,et){this.nextOrObserver=$,this.error=tt,this.complete=et}return t.prototype.call=function($,tt){return tt.subscribe(new Ee($,this.nextOrObserver,this.error,this.complete))},t}(),Ee=function($){function e(tt,et,nt,rt){var it=$.call(this,tt)||this;return it._tapNext=X,it._tapError=X,it._tapComplete=X,it._tapError=nt||X,it._tapComplete=rt||X,O(et)?(it._context=it,it._tapNext=et):et&&(it._context=et,it._tapNext=et.next||X,it._tapError=et.error||X,it._tapComplete=et.complete||X),it}return b(e,$),e.prototype._next=function($){try{this._tapNext.call(this._context,$)}catch($){return void this.destination.error($)}this.destination.next($)},e.prototype._error=function($){try{this._tapError.call(this._context,$)}catch($){return void this.destination.error($)}this.destination.error($)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch($){return void this.destination.error($)}return this.destination.complete()},e}(ie);function K(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function H($,tt){var et=Object.keys($);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols($);tt&&(nt=nt.filter((function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable}))),et.push.apply(et,nt)}return et}function Q($){for(var tt=1;tt<arguments.length;tt++){var et=null!=arguments[tt]?arguments[tt]:{};tt%2?H(Object(et),!0).forEach((function(tt){Dt()($,tt,et[tt])})):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(et)):H(Object(et)).forEach((function(tt){Object.defineProperty($,tt,Object.getOwnPropertyDescriptor(et,tt))}))}return $}function J($,tt){K()?self.clients.matchAll({type:"window"}).then((function(et){et.forEach((function(et){et.postMessage(Q(Q({},tt),{},{type:$}))}))})):window.dispatchEvent(new CustomEvent("inkmap.toMain",{detail:Q(Q({},tt),{},{type:$})}))}var Me=(K()?Y(self,"message").pipe(B("data")):Y(window,"inkmap.toPrinter").pipe(B("detail"))).pipe(q((function($){return console.log("[inkmap] message to printer:",$)}))),Ce=et(58),Re=et.n(Ce),Pe=et(73),Ie=et.n(Pe),Le=et(54),Be=et.n(Le),Ze=et(74),Ve=et.n(Ze),Ke=et(14);function ct($){return $&&"function"==typeof $.schedule}var tn=function($){function e(){return null!==$&&$.apply(this,arguments)||this}return b(e,$),e.prototype.notifyNext=function($,tt,et,nt,rt){this.destination.next(tt)},e.prototype.notifyError=function($,tt){this.destination.error($)},e.prototype.notifyComplete=function($){this.destination.complete()},e}(ie),en=function($){function e(tt,et,nt){var rt=$.call(this)||this;return rt.parent=tt,rt.outerValue=et,rt.outerIndex=nt,rt.index=0,rt}return b(e,$),e.prototype._next=function($){this.parent.notifyNext(this.outerValue,$,this.outerIndex,this.index++,this)},e.prototype._error=function($){this.parent.notifyError($,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(ie),pt=function($){return function(tt){for(var et=0,nt=$.length;et<nt&&!tt.closed;et++)tt.next($[et]);tt.complete()}};var nn=function ft(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),yt=function($){return $&&"number"==typeof $.length&&"function"!=typeof $};function gt($){return!!$&&"function"!=typeof $.subscribe&&"function"==typeof $.then}var vt=function($){if($&&"function"==typeof $[ae])return nt=$,function($){var tt=nt[ae]();if("function"!=typeof tt.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return tt.subscribe($)};if(yt($))return pt($);if(gt($))return et=$,function($){return et.then((function(tt){$.closed||($.next(tt),$.complete())}),(function(tt){return $.error(tt)})).then(null,S),$};if($&&"function"==typeof $[nn])return tt=$,function($){for(var et=tt[nn]();;){var nt=void 0;try{nt=et.next()}catch(tt){return $.error(tt),$}if(nt.done){$.complete();break}if($.next(nt.value),$.closed)break}return"function"==typeof et.return&&$.add((function(){et.return&&et.return()})),$};var tt,et,nt,rt=j($)?"an invalid object":"'"+$+"'";throw new TypeError("You provided "+rt+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function _t($,tt,et,nt,rt){if(void 0===rt&&(rt=new en($,et,nt)),!rt.closed)return tt instanceof fe?tt.subscribe(rt):vt(tt)(rt)}function mt($,tt){return new fe((function(et){var nt=new ne,rt=0;return nt.add(tt.schedule((function(){rt!==$.length?(et.next($[rt++]),et.closed||nt.add(this.schedule())):et.complete()}))),nt}))}function bt($,tt){return tt?mt($,tt):new fe(pt($))}var rn={};function xt(){for(var $=[],tt=0;tt<arguments.length;tt++)$[tt]=arguments[tt];var et=void 0,nt=void 0;return ct($[$.length-1])&&(nt=$.pop()),"function"==typeof $[$.length-1]&&(et=$.pop()),1===$.length&&Vt($[0])&&($=$[0]),bt($,nt).lift(new on(et))}var on=function(){function t($){this.resultSelector=$}return t.prototype.call=function($,tt){return tt.subscribe(new an($,this.resultSelector))},t}(),an=function($){function e(tt,et){var nt=$.call(this,tt)||this;return nt.resultSelector=et,nt.active=0,nt.values=[],nt.observables=[],nt}return b(e,$),e.prototype._next=function($){this.values.push(rn),this.observables.push($)},e.prototype._complete=function(){var $=this.observables,tt=$.length;if(0===tt)this.destination.complete();else{this.active=tt,this.toRespond=tt;for(var et=0;et<tt;et++){var nt=$[et];this.add(_t(this,nt,void 0,et))}}},e.prototype.notifyComplete=function($){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function($,tt,et){var nt=this.values,rt=nt[et],it=this.toRespond?rt===rn?--this.toRespond:this.toRespond:0;nt[et]=tt,0===it&&(this.resultSelector?this._tryResultSelector(nt):this.destination.next(nt.slice()))},e.prototype._tryResultSelector=function($){var tt;try{tt=this.resultSelector.apply(this,$)}catch($){return void this.destination.error($)}this.destination.next(tt)},e}(tn);function Et(){for(var $=[],tt=0;tt<arguments.length;tt++)$[tt]=arguments[tt];var et=$[$.length-1];return ct(et)?($.pop(),mt($,et)):bt($)}function Mt($,tt){if(null!=$){if(function($){return $&&"function"==typeof $[ae]}($))return function($,tt){return new fe((function(et){var nt=new ne;return nt.add(tt.schedule((function(){var rt=$[ae]();nt.add(rt.subscribe({next:function($){nt.add(tt.schedule((function(){return et.next($)})))},error:function($){nt.add(tt.schedule((function(){return et.error($)})))},complete:function(){nt.add(tt.schedule((function(){return et.complete()})))}}))}))),nt}))}($,tt);if(gt($))return function($,tt){return new fe((function(et){var nt=new ne;return nt.add(tt.schedule((function(){return $.then((function($){nt.add(tt.schedule((function(){et.next($),nt.add(tt.schedule((function(){return et.complete()})))})))}),(function($){nt.add(tt.schedule((function(){return et.error($)})))}))}))),nt}))}($,tt);if(yt($))return mt($,tt);if(function($){return $&&"function"==typeof $[nn]}($)||"string"==typeof $)return function($,tt){if(!$)throw new Error("Iterable cannot be null");return new fe((function(et){var nt,rt=new ne;return rt.add((function(){nt&&"function"==typeof nt.return&&nt.return()})),rt.add(tt.schedule((function(){nt=$[nn](),rt.add(tt.schedule((function(){if(!et.closed){var $,tt;try{var rt=nt.next();$=rt.value,tt=rt.done}catch($){return void et.error($)}tt?et.complete():(et.next($),this.schedule())}})))}))),rt}))}($,tt)}throw new TypeError((null!==$&&typeof $||$)+" is not observable")}function jt($,tt){return tt?Mt($,tt):$ instanceof fe?$:new fe(vt($))}var sn=function($){function e(tt){var et=$.call(this)||this;return et.parent=tt,et}return b(e,$),e.prototype._next=function($){this.parent.notifyNext($)},e.prototype._error=function($){this.parent.notifyError($),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(ie),un=function($){function e(){return null!==$&&$.apply(this,arguments)||this}return b(e,$),e.prototype.notifyNext=function($){this.destination.next($)},e.prototype.notifyError=function($){this.destination.error($)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(ie);function Pt($,tt){if(!tt.closed)return $ instanceof fe?$.subscribe(tt):vt($)(tt)}function It($,tt){return"function"==typeof tt?function(et){return et.pipe(It((function(et,nt){return jt($(et,nt)).pipe(G((function($,rt){return tt(et,$,nt,rt)})))})))}:function(tt){return tt.lift(new ln($))}}var ln=function(){function t($){this.project=$}return t.prototype.call=function($,tt){return tt.subscribe(new pn($,this.project))},t}(),pn=function($){function e(tt,et){var nt=$.call(this,tt)||this;return nt.project=et,nt.index=0,nt}return b(e,$),e.prototype._next=function($){var tt,et=this.index++;try{tt=this.project($,et)}catch($){return void this.destination.error($)}this._innerSub(tt)},e.prototype._innerSub=function($){var tt=this.innerSubscription;tt&&tt.unsubscribe();var et=new sn(this),nt=this.destination;nt.add(et),this.innerSubscription=Pt($,et),this.innerSubscription!==et&&nt.add(this.innerSubscription)},e.prototype._complete=function(){var tt=this.innerSubscription;tt&&!tt.closed||$.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&$.prototype._complete.call(this)},e.prototype.notifyNext=function($){this.destination.next($)},e}(un);function Lt($,tt){return void 0===tt&&(tt=!1),function(et){return et.lift(new fn($,tt))}}var fn=function(){function t($,tt){this.predicate=$,this.inclusive=tt}return t.prototype.call=function($,tt){return tt.subscribe(new dn($,this.predicate,this.inclusive))},t}(),dn=function($){function e(tt,et,nt){var rt=$.call(this,tt)||this;return rt.predicate=et,rt.inclusive=nt,rt.index=0,rt}return b(e,$),e.prototype._next=function($){var tt,et=this.destination;try{tt=this.predicate($,this.index++)}catch($){return void et.error($)}this.nextOrComplete($,tt)},e.prototype.nextOrComplete=function($,tt){var et=this.destination;Boolean(tt)?et.next($):(this.inclusive&&et.next($),et.complete())},e}(ie),gn=et(0),_n=et(1),vn=et(61),mn=et(19),bn=et(4),On=et(49),xn=484813681109536e-20,wn=Math.PI/2,Sn=.017453292519943295,En=57.29577951308232,Rn=Math.PI/4,Pn=2*Math.PI,In=3.14159265359,Tn={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},An={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ln=/[\s_\-\/\(\)]/g;function $t($,tt){if($[tt])return $[tt];for(var et,nt=Object.keys($),rt=tt.toLowerCase().replace(Ln,""),it=-1;++it<nt.length;)if((et=nt[it]).toLowerCase().replace(Ln,"")===rt)return $[et]}var te=function($){var tt,et,nt,rt={},it=$.split("+").map((function($){return $.trim()})).filter((function($){return $})).reduce((function($,tt){var et=tt.split("=");return et.push(!0),$[et[0].toLowerCase()]=et[1],$}),{}),ot={proj:"projName",datum:"datumCode",rf:function($){rt.rf=parseFloat($)},lat_0:function($){rt.lat0=$*Sn},lat_1:function($){rt.lat1=$*Sn},lat_2:function($){rt.lat2=$*Sn},lat_ts:function($){rt.lat_ts=$*Sn},lon_0:function($){rt.long0=$*Sn},lon_1:function($){rt.long1=$*Sn},lon_2:function($){rt.long2=$*Sn},alpha:function($){rt.alpha=parseFloat($)*Sn},lonc:function($){rt.longc=$*Sn},x_0:function($){rt.x0=parseFloat($)},y_0:function($){rt.y0=parseFloat($)},k_0:function($){rt.k0=parseFloat($)},k:function($){rt.k0=parseFloat($)},a:function($){rt.a=parseFloat($)},b:function($){rt.b=parseFloat($)},r_a:function(){rt.R_A=!0},zone:function($){rt.zone=parseInt($,10)},south:function(){rt.utmSouth=!0},towgs84:function($){rt.datum_params=$.split(",").map((function($){return parseFloat($)}))},to_meter:function($){rt.to_meter=parseFloat($)},units:function($){rt.units=$;var tt=$t(An,$);tt&&(rt.to_meter=tt.to_meter)},from_greenwich:function($){rt.from_greenwich=$*Sn},pm:function($){var tt=$t(Tn,$);rt.from_greenwich=(tt||parseFloat($))*Sn},nadgrids:function($){"@null"===$?rt.datumCode="none":rt.nadgrids=$},axis:function($){3===$.length&&-1!=="ewnsud".indexOf($.substr(0,1))&&-1!=="ewnsud".indexOf($.substr(1,1))&&-1!=="ewnsud".indexOf($.substr(2,1))&&(rt.axis=$)}};for(tt in it)et=it[tt],tt in ot?"function"==typeof(nt=ot[tt])?nt(et):rt[nt]=et:rt[tt]=et;return"string"==typeof rt.datumCode&&"WGS84"!==rt.datumCode&&(rt.datumCode=rt.datumCode.toLowerCase()),rt},ee=function($){return new se($).output()},Fn=/\s/,Nn=/[A-Za-z]/,kn=/[A-Za-z84]/,Dn=/[,\]]/,Gn=/[\d\.E\-\+]/;function se($){if("string"!=typeof $)throw new Error("not a string");this.text=$.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function ue($,tt,et){Array.isArray(tt)&&(et.unshift(tt),tt=null);var nt=tt?{}:$,rt=et.reduce((function($,tt){return ce(tt,$),$}),nt);tt&&($[tt]=rt)}function ce($,tt){if(Array.isArray($)){var et=$.shift();if("PARAMETER"===et&&(et=$.shift()),1===$.length)return Array.isArray($[0])?(tt[et]={},void ce($[0],tt[et])):void(tt[et]=$[0]);if($.length)if("TOWGS84"!==et){if("AXIS"===et)return et in tt||(tt[et]=[]),void tt[et].push($);var nt;switch(Array.isArray(et)||(tt[et]={}),et){case"UNIT":case"PRIMEM":case"VERT_DATUM":return tt[et]={name:$[0].toLowerCase(),convert:$[1]},void(3===$.length&&ce($[2],tt[et]));case"SPHEROID":case"ELLIPSOID":return tt[et]={name:$[0],a:$[1],rf:$[2]},void(4===$.length&&ce($[3],tt[et]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return $[0]=["name",$[0]],void ue(tt,et,$);default:for(nt=-1;++nt<$.length;)if(!Array.isArray($[nt]))return ce($,tt[et]);return ue(tt,et,$)}}else tt[et]=$;else tt[et]=!0}else tt[$]=!0}function he($){return.017453292519943295*$}se.prototype.readCharicter=function(){var $=this.text[this.place++];if(4!==this.state)for(;Fn.test($);){if(this.place>=this.text.length)return;$=this.text[this.place++]}switch(this.state){case 1:return this.neutral($);case 2:return this.keyword($);case 4:return this.quoted($);case 5:return this.afterquote($);case 3:return this.number($);case-1:return}},se.prototype.afterquote=function($){if('"'===$)return this.word+='"',void(this.state=4);if(Dn.test($))return this.word=this.word.trim(),void this.afterItem($);throw new Error("havn't handled \""+$+'" in afterquote yet, index '+this.place)},se.prototype.afterItem=function($){return","===$?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===$?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},se.prototype.number=function($){if(!Gn.test($)){if(Dn.test($))return this.word=parseFloat(this.word),void this.afterItem($);throw new Error("havn't handled \""+$+'" in number yet, index '+this.place)}this.word+=$},se.prototype.quoted=function($){'"'!==$?this.word+=$:this.state=5},se.prototype.keyword=function($){if(kn.test($))this.word+=$;else{if("["===$){var tt=[];return tt.push(this.word),this.level++,null===this.root?this.root=tt:this.currentObject.push(tt),this.stack.push(this.currentObject),this.currentObject=tt,void(this.state=1)}if(!Dn.test($))throw new Error("havn't handled \""+$+'" in keyword yet, index '+this.place);this.afterItem($)}},se.prototype.neutral=function($){if(Nn.test($))return this.word=$,void(this.state=2);if('"'===$)return this.word="",void(this.state=4);if(Gn.test($))return this.word=$,void(this.state=3);if(!Dn.test($))throw new Error("havn't handled \""+$+'" in neutral yet, index '+this.place);this.afterItem($)},se.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var le=function($){var tt=ee($),et=tt.shift(),nt=tt.shift();tt.unshift(["name",nt]),tt.unshift(["type",et]);var rt={};return ce(tt,rt),function($){if("GEOGCS"===$.type?$.projName="longlat":"LOCAL_CS"===$.type?($.projName="identity",$.local=!0):"object"==typeof $.PROJECTION?$.projName=Object.keys($.PROJECTION)[0]:$.projName=$.PROJECTION,$.AXIS){for(var tt="",et=0,nt=$.AXIS.length;et<nt;++et){var rt=$.AXIS[et][0].toLowerCase();-1!==rt.indexOf("north")?tt+="n":-1!==rt.indexOf("south")?tt+="s":-1!==rt.indexOf("east")?tt+="e":-1!==rt.indexOf("west")&&(tt+="w")}2===tt.length&&(tt+="u"),3===tt.length&&($.axis=tt)}$.UNIT&&($.units=$.UNIT.name.toLowerCase(),"metre"===$.units&&($.units="meter"),$.UNIT.convert&&("GEOGCS"===$.type?$.DATUM&&$.DATUM.SPHEROID&&($.to_meter=$.UNIT.convert*$.DATUM.SPHEROID.a):$.to_meter=$.UNIT.convert));var it=$.GEOGCS;function a(tt){return tt*($.to_meter||1)}"GEOGCS"===$.type&&(it=$),it&&(it.DATUM?$.datumCode=it.DATUM.name.toLowerCase():$.datumCode=it.name.toLowerCase(),"d_"===$.datumCode.slice(0,2)&&($.datumCode=$.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==$.datumCode&&"new_zealand_1949"!==$.datumCode||($.datumCode="nzgd49"),"wgs_1984"!==$.datumCode&&"world_geodetic_system_1984"!==$.datumCode||("Mercator_Auxiliary_Sphere"===$.PROJECTION&&($.sphere=!0),$.datumCode="wgs84"),"_ferro"===$.datumCode.slice(-6)&&($.datumCode=$.datumCode.slice(0,-6)),"_jakarta"===$.datumCode.slice(-8)&&($.datumCode=$.datumCode.slice(0,-8)),~$.datumCode.indexOf("belge")&&($.datumCode="rnb72"),it.DATUM&&it.DATUM.SPHEROID&&($.ellps=it.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===$.ellps.toLowerCase().slice(0,13)&&($.ellps="intl"),$.a=it.DATUM.SPHEROID.a,$.rf=parseFloat(it.DATUM.SPHEROID.rf,10)),it.DATUM&&it.DATUM.TOWGS84&&($.datum_params=it.DATUM.TOWGS84),~$.datumCode.indexOf("osgb_1936")&&($.datumCode="osgb36"),~$.datumCode.indexOf("osni_1952")&&($.datumCode="osni52"),(~$.datumCode.indexOf("tm65")||~$.datumCode.indexOf("geodetic_datum_of_1965"))&&($.datumCode="ire65"),"ch1903+"===$.datumCode&&($.datumCode="ch1903"),~$.datumCode.indexOf("israel")&&($.datumCode="isr93")),$.b&&!isFinite($.b)&&($.b=$.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",he],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",he],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",he],["lat0","latitude_of_origin",he],["lat0","standard_parallel_1",he],["lat1","standard_parallel_1",he],["lat2","standard_parallel_2",he],["azimuth","Azimuth"],["alpha","azimuth",he],["srsCode","name"]].forEach((function(tt){return et=$,rt=(nt=tt)[0],it=nt[1],void(!(rt in et)&&it in et&&(et[rt]=et[it],3===nt.length&&(et[rt]=nt[2](et[rt]))));var et,nt,rt,it})),$.long0||!$.longc||"Albers_Conic_Equal_Area"!==$.projName&&"Lambert_Azimuthal_Equal_Area"!==$.projName||($.long0=$.longc),$.lat_ts||!$.lat1||"Stereographic_South_Pole"!==$.projName&&"Polar Stereographic (variant B)"!==$.projName||($.lat0=he($.lat1>0?90:-90),$.lat_ts=$.lat1)}(rt),rt};function pe($){var tt=this;if(2===arguments.length){var et=arguments[1];"string"==typeof et?"+"===et.charAt(0)?pe[$]=te(arguments[1]):pe[$]=le(arguments[1]):pe[$]=et}else if(1===arguments.length){if(Array.isArray($))return $.map((function($){Array.isArray($)?pe.apply(tt,$):pe($)}));if("string"==typeof $){if($ in pe)return pe[$]}else"EPSG"in $?pe["EPSG:"+$.EPSG]=$:"ESRI"in $?pe["ESRI:"+$.ESRI]=$:"IAU2000"in $?pe["IAU2000:"+$.IAU2000]=$:console.log($);return}}!function($){$("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),$("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),$("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),$.WGS84=$["EPSG:4326"],$["EPSG:3785"]=$["EPSG:3857"],$.GOOGLE=$["EPSG:3857"],$["EPSG:900913"]=$["EPSG:3857"],$["EPSG:102113"]=$["EPSG:3857"]}(pe);var zn=pe,Un=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Yn=["3857","900913","3785","102113"],ge=function($){if(!function($){return"string"==typeof $}($))return $;if(function($){return $ in zn}($))return zn[$];if(function($){return Un.some((function(tt){return $.indexOf(tt)>-1}))}($)){var tt=le($);if(function($){var tt=$t($,"authority");if(tt){var et=$t(tt,"epsg");return et&&Yn.indexOf(et)>-1}}(tt))return zn["EPSG:3857"];var et=function($){var tt=$t($,"extension");if(tt)return $t(tt,"proj4")}(tt);return et?te(et):tt}return function($){return"+"===$[0]}($)?te($):void 0},ve=function($,tt){var et,nt;if($=$||{},!tt)return $;for(nt in tt)void 0!==(et=tt[nt])&&($[nt]=et);return $},_e=function($,tt,et){var nt=$*tt;return et/Math.sqrt(1-nt*nt)},me=function($){return $<0?-1:1},be=function($){return Math.abs($)<=In?$:$-me($)*Pn},Oe=function($,tt,et){var nt=$*et,rt=.5*$;return nt=Math.pow((1-nt)/(1+nt),rt),Math.tan(.5*(wn-tt))/nt},xe=function($,tt){for(var et,nt,rt=.5*$,it=wn-2*Math.atan(tt),ot=0;ot<=15;ot++)if(et=$*Math.sin(it),it+=nt=wn-2*Math.atan(tt*Math.pow((1-et)/(1+et),rt))-it,Math.abs(nt)<=1e-10)return it;return-9999};function we($){return $}var Bn=[{init:function(){var $=this.b/this.a;this.es=1-$*$,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=_e(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function($){var tt,et,nt=$.x,rt=$.y;if(rt*En>90&&rt*En<-90&&nt*En>180&&nt*En<-180)return null;if(Math.abs(Math.abs(rt)-wn)<=1e-10)return null;if(this.sphere)tt=this.x0+this.a*this.k0*be(nt-this.long0),et=this.y0+this.a*this.k0*Math.log(Math.tan(Rn+.5*rt));else{var it=Math.sin(rt),ot=Oe(this.e,rt,it);tt=this.x0+this.a*this.k0*be(nt-this.long0),et=this.y0-this.a*this.k0*Math.log(ot)}return $.x=tt,$.y=et,$},inverse:function($){var tt,et,nt=$.x-this.x0,rt=$.y-this.y0;if(this.sphere)et=wn-2*Math.atan(Math.exp(-rt/(this.a*this.k0)));else{var it=Math.exp(-rt/(this.a*this.k0));if(-9999===(et=xe(this.e,it)))return null}return tt=be(this.long0+nt/(this.a*this.k0)),$.x=tt,$.y=et,$},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:we,inverse:we,names:["longlat","identity"]}],Wn={},Xn=[];function je($,tt){var et=Xn.length;return $.names?(Xn[et]=$,$.names.forEach((function($){Wn[$.toLowerCase()]=et})),this):(console.log(tt),!0)}var qn={start:function(){Bn.forEach(je)},add:je,get:function($){if(!$)return!1;var tt=$.toLowerCase();return void 0!==Wn[tt]&&Xn[Wn[tt]]?Xn[Wn[tt]]:void 0}},Zn={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Vn=Zn.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Zn.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Kn={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},Te=function($,tt,et,nt,rt,it){var ot={};return ot.datum_type=void 0===$||"none"===$?5:4,tt&&(ot.datum_params=tt.map(parseFloat),0===ot.datum_params[0]&&0===ot.datum_params[1]&&0===ot.datum_params[2]||(ot.datum_type=1),ot.datum_params.length>3&&(0===ot.datum_params[3]&&0===ot.datum_params[4]&&0===ot.datum_params[5]&&0===ot.datum_params[6]||(ot.datum_type=2,ot.datum_params[3]*=xn,ot.datum_params[4]*=xn,ot.datum_params[5]*=xn,ot.datum_params[6]=ot.datum_params[6]/1e6+1))),ot.a=et,ot.b=nt,ot.es=rt,ot.ep2=it,ot};function Ae($,tt){if(!(this instanceof Ae))return new Ae($);tt=tt||function($){if($)throw $};var et=ge($);if("object"==typeof et){var nt=Ae.projections.get(et.projName);if(nt){if(et.datumCode&&"none"!==et.datumCode){var rt=$t(Kn,et.datumCode);rt&&(et.datum_params=rt.towgs84?rt.towgs84.split(","):null,et.ellps=rt.ellipse,et.datumName=rt.datumName?rt.datumName:et.datumCode)}et.k0=et.k0||1,et.axis=et.axis||"enu",et.ellps=et.ellps||"wgs84";var it,ot,at,Ot,wt,St,Ct=function($,tt,et,nt,rt){if(!$){var it=$t(Zn,nt);it||(it=Vn),$=it.a,tt=it.b,et=it.rf}return et&&!tt&&(tt=(1-1/et)*$),(0===et||Math.abs($-tt)<1e-10)&&(rt=!0,tt=$),{a:$,b:tt,rf:et,sphere:rt}}(et.a,et.b,et.rf,et.ellps,et.sphere),Rt=(it=Ct.a,ot=Ct.b,Ct.rf,wt=((at=it*it)-(Ot=ot*ot))/at,St=0,et.R_A?(at=(it*=1-wt*(.16666666666666666+wt*(.04722222222222222+.022156084656084655*wt)))*it,wt=0):St=Math.sqrt(wt),{es:wt,e:St,ep2:(at-Ot)/Ot}),Tt=et.datum||Te(et.datumCode,et.datum_params,Ct.a,Ct.b,Rt.es,Rt.ep2);ve(this,et),ve(this,nt),this.a=Ct.a,this.b=Ct.b,this.rf=Ct.rf,this.sphere=Ct.sphere,this.es=Rt.es,this.e=Rt.e,this.ep2=Rt.ep2,this.datum=Tt,this.init(),tt(null,this)}else tt($)}else tt($)}Ae.projections=qn,Ae.projections.start();var Hn=Ae;function Fe($,tt,et){var nt,rt,it,ot,at=$.x,Ot=$.y,wt=$.z?$.z:0;if(Ot<-wn&&Ot>-1.001*wn)Ot=-wn;else if(Ot>wn&&Ot<1.001*wn)Ot=wn;else{if(Ot<-wn)return{x:-1/0,y:-1/0,z:$.z};if(Ot>wn)return{x:1/0,y:1/0,z:$.z}}return at>Math.PI&&(at-=2*Math.PI),rt=Math.sin(Ot),ot=Math.cos(Ot),it=rt*rt,{x:((nt=et/Math.sqrt(1-tt*it))+wt)*ot*Math.cos(at),y:(nt+wt)*ot*Math.sin(at),z:(nt*(1-tt)+wt)*rt}}function Ne($,tt,et,nt){var rt,it,ot,at,Ot,wt,St,Ct,Rt,Tt,At,Nt,kt,Dt,Gt,Ut=$.x,Xt=$.y,Vt=$.z?$.z:0;if(rt=Math.sqrt(Ut*Ut+Xt*Xt),it=Math.sqrt(Ut*Ut+Xt*Xt+Vt*Vt),rt/et<1e-12){if(Dt=0,it/et<1e-12)return Gt=-nt,{x:$.x,y:$.y,z:$.z}}else Dt=Math.atan2(Xt,Ut);ot=Vt/it,Ct=(at=rt/it)*(1-tt)*(Ot=1/Math.sqrt(1-tt*(2-tt)*at*at)),Rt=ot*Ot,kt=0;do{kt++,wt=tt*(St=et/Math.sqrt(1-tt*Rt*Rt))/(St+(Gt=rt*Ct+Vt*Rt-St*(1-tt*Rt*Rt))),Nt=(At=ot*(Ot=1/Math.sqrt(1-wt*(2-wt)*at*at)))*Ct-(Tt=at*(1-wt)*Ot)*Rt,Ct=Tt,Rt=At}while(Nt*Nt>1e-24&&kt<30);return{x:Dt,y:Math.atan(At/Math.abs(Tt)),z:Gt}}function ke($){return 1===$||2===$}var De=function($,tt,et){return function($,tt){return $.datum_type===tt.datum_type&&!($.a!==tt.a||Math.abs($.es-tt.es)>5e-11)&&(1===$.datum_type?$.datum_params[0]===tt.datum_params[0]&&$.datum_params[1]===tt.datum_params[1]&&$.datum_params[2]===tt.datum_params[2]:2!==$.datum_type||$.datum_params[0]===tt.datum_params[0]&&$.datum_params[1]===tt.datum_params[1]&&$.datum_params[2]===tt.datum_params[2]&&$.datum_params[3]===tt.datum_params[3]&&$.datum_params[4]===tt.datum_params[4]&&$.datum_params[5]===tt.datum_params[5]&&$.datum_params[6]===tt.datum_params[6])}($,tt)||5===$.datum_type||5===tt.datum_type?et:$.es!==tt.es||$.a!==tt.a||ke($.datum_type)||ke(tt.datum_type)?(et=Fe(et,$.es,$.a),ke($.datum_type)&&(et=function($,tt,et){if(1===tt)return{x:$.x+et[0],y:$.y+et[1],z:$.z+et[2]};if(2===tt){var nt=et[0],rt=et[1],it=et[2],ot=et[3],at=et[4],Ot=et[5],wt=et[6];return{x:wt*($.x-Ot*$.y+at*$.z)+nt,y:wt*(Ot*$.x+$.y-ot*$.z)+rt,z:wt*(-at*$.x+ot*$.y+$.z)+it}}}(et,$.datum_type,$.datum_params)),ke(tt.datum_type)&&(et=function($,tt,et){if(1===tt)return{x:$.x-et[0],y:$.y-et[1],z:$.z-et[2]};if(2===tt){var nt=et[0],rt=et[1],it=et[2],ot=et[3],at=et[4],Ot=et[5],wt=et[6],St=($.x-nt)/wt,Ct=($.y-rt)/wt,Rt=($.z-it)/wt;return{x:St+Ot*Ct-at*Rt,y:-Ot*St+Ct+ot*Rt,z:at*St-ot*Ct+Rt}}}(et,tt.datum_type,tt.datum_params)),Ne(et,tt.es,tt.a,tt.b)):et},Ge=function($,tt,et){var nt,rt,it,ot=et.x,at=et.y,Ot=et.z||0,wt={};for(it=0;it<3;it++)if(!tt||2!==it||void 0!==et.z)switch(0===it?(nt=ot,rt=-1!=="ew".indexOf($.axis[it])?"x":"y"):1===it?(nt=at,rt=-1!=="ns".indexOf($.axis[it])?"y":"x"):(nt=Ot,rt="z"),$.axis[it]){case"e":case"n":wt[rt]=nt;break;case"w":case"s":wt[rt]=-nt;break;case"u":void 0!==et[rt]&&(wt.z=nt);break;case"d":void 0!==et[rt]&&(wt.z=-nt);break;default:return null}return wt},ze=function($){var tt={x:$[0],y:$[1]};return $.length>2&&(tt.z=$[2]),$.length>3&&(tt.m=$[3]),tt};function Ue($){if("function"==typeof Number.isFinite){if(Number.isFinite($))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof $||$!=$||!isFinite($))throw new TypeError("coordinates must be finite numbers")}function Ye($,tt,et){var nt;if(Array.isArray(et)&&(et=ze(et)),function($){Ue($.x),Ue($.y)}(et),$.datum&&tt.datum&&function($,tt){return(1===$.datum.datum_type||2===$.datum.datum_type)&&"WGS84"!==tt.datumCode||(1===tt.datum.datum_type||2===tt.datum.datum_type)&&"WGS84"!==$.datumCode}($,tt)&&(et=Ye($,nt=new Hn("WGS84"),et),$=nt),"enu"!==$.axis&&(et=Ge($,!1,et)),"longlat"===$.projName)et={x:et.x*Sn,y:et.y*Sn,z:et.z||0};else if($.to_meter&&(et={x:et.x*$.to_meter,y:et.y*$.to_meter,z:et.z||0}),!(et=$.inverse(et)))return;return $.from_greenwich&&(et.x+=$.from_greenwich),et=De($.datum,tt.datum,et),tt.from_greenwich&&(et={x:et.x-tt.from_greenwich,y:et.y,z:et.z||0}),"longlat"===tt.projName?et={x:et.x*En,y:et.y*En,z:et.z||0}:(et=tt.forward(et),tt.to_meter&&(et={x:et.x/tt.to_meter,y:et.y/tt.to_meter,z:et.z||0})),"enu"!==tt.axis?Ge(tt,!0,et):et}var Qn=Hn("WGS84");function We($,tt,et){var nt,rt,it;return Array.isArray(et)?(nt=Ye($,tt,et)||{x:NaN,y:NaN},et.length>2?void 0!==$.name&&"geocent"===$.name||void 0!==tt.name&&"geocent"===tt.name?"number"==typeof nt.z?[nt.x,nt.y,nt.z].concat(et.splice(3)):[nt.x,nt.y,et[2]].concat(et.splice(3)):[nt.x,nt.y].concat(et.splice(2)):[nt.x,nt.y]):(rt=Ye($,tt,et),2===(it=Object.keys(et)).length||it.forEach((function(nt){if(void 0!==$.name&&"geocent"===$.name||void 0!==tt.name&&"geocent"===tt.name){if("x"===nt||"y"===nt||"z"===nt)return}else if("x"===nt||"y"===nt)return;rt[nt]=et[nt]})),rt)}function Xe($){return $ instanceof Hn?$:$.oProj?$.oProj:Hn($)}var qe=function($,tt,et){$=Xe($);var nt,rt=!1;return void 0===tt?(tt=$,$=Qn,rt=!0):(void 0!==tt.x||Array.isArray(tt))&&(et=tt,tt=$,$=Qn,rt=!0),tt=Xe(tt),et?We($,tt,et):(nt={forward:function(et){return We($,tt,et)},inverse:function(et){return We(tt,$,et)}},rt&&(nt.oProj=tt),nt)},Jn=73,$n=79,ar={forward:He,inverse:function($){var tt=tr(nr($.toUpperCase()));return tt.lat&&tt.lon?[tt.lon,tt.lat,tt.lon,tt.lat]:[tt.left,tt.bottom,tt.right,tt.top]},toPoint:Qe};function He($,tt){return tt=tt||5,function($,tt){var et,nt,rt,it,ot,at,Ot,wt,St,Ct,Rt,Tt="00000"+$.easting,At="00000"+$.northing;return $.zoneNumber+$.zoneLetter+(St=$.easting,Ct=$.northing,Rt=rr($.zoneNumber),et=Math.floor(St/1e5),nt=Math.floor(Ct/1e5)%20,it="AJSAJS".charCodeAt(rt=Rt-1),ot="AFAFAF".charCodeAt(rt),wt=!1,(at=it+et-1)>90&&(at=at-90+65-1,wt=!0),(at===Jn||it<Jn&&at>Jn||(at>Jn||it<Jn)&&wt)&&at++,(at===$n||it<$n&&at>$n||(at>$n||it<$n)&&wt)&&++at===Jn&&at++,at>90&&(at=at-90+65-1),(Ot=ot+nt)>86?(Ot=Ot-86+65-1,wt=!0):wt=!1,(Ot===Jn||ot<Jn&&Ot>Jn||(Ot>Jn||ot<Jn)&&wt)&&Ot++,(Ot===$n||ot<$n&&Ot>$n||(Ot>$n||ot<$n)&&wt)&&++Ot===Jn&&Ot++,Ot>86&&(Ot=Ot-86+65-1),String.fromCharCode(at)+String.fromCharCode(Ot))+Tt.substr(Tt.length-5,tt)+At.substr(At.length-5,tt)}(function($){var tt,et,nt,rt,it,ot,at=$.lat,Ot=$.lon,wt=6378137,St=Je(at),Ct=Je(Ot);ot=Math.floor((Ot+180)/6)+1,180===Ot&&(ot=60),at>=56&&at<64&&Ot>=3&&Ot<12&&(ot=32),at>=72&&at<84&&(Ot>=0&&Ot<9?ot=31:Ot>=9&&Ot<21?ot=33:Ot>=21&&Ot<33?ot=35:Ot>=33&&Ot<42&&(ot=37)),it=Je(6*(ot-1)-180+3),tt=wt/Math.sqrt(1-.00669438*Math.sin(St)*Math.sin(St)),et=Math.tan(St)*Math.tan(St),nt=.006739496752268451*Math.cos(St)*Math.cos(St);var Rt=.9996*tt*((rt=Math.cos(St)*(Ct-it))+(1-et+nt)*rt*rt*rt/6+(5-18*et+et*et+72*nt-.39089081163157013)*rt*rt*rt*rt*rt/120)+5e5,Tt=.9996*(wt*(.9983242984503243*St-.002514607064228144*Math.sin(2*St)+2639046602129982e-21*Math.sin(4*St)-3.418046101696858e-9*Math.sin(6*St))+tt*Math.tan(St)*(rt*rt/2+(5-et+9*nt+4*nt*nt)*rt*rt*rt*rt/24+(61-58*et+et*et+600*nt-2.2240339282485886)*rt*rt*rt*rt*rt*rt/720));return at<0&&(Tt+=1e7),{northing:Math.round(Tt),easting:Math.round(Rt),zoneNumber:ot,zoneLetter:er(at)}}({lat:$[1],lon:$[0]}),tt)}function Qe($){var tt=tr(nr($.toUpperCase()));return tt.lat&&tt.lon?[tt.lon,tt.lat]:[(tt.left+tt.right)/2,(tt.top+tt.bottom)/2]}function Je($){return $*(Math.PI/180)}function $e($){return $/Math.PI*180}function tr($){var tt=$.northing,et=$.easting,nt=$.zoneLetter,rt=$.zoneNumber;if(rt<0||rt>60)return null;var it,ot,at,Ot,wt,St,Ct,Rt,Tt=6378137,At=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),Nt=et-5e5,kt=tt;nt<"N"&&(kt-=1e7),St=6*(rt-1)-180+3,Rt=(Ct=kt/.9996/6367449.145945056)+(3*At/2-27*At*At*At/32)*Math.sin(2*Ct)+(21*At*At/16-55*At*At*At*At/32)*Math.sin(4*Ct)+151*At*At*At/96*Math.sin(6*Ct),it=Tt/Math.sqrt(1-.00669438*Math.sin(Rt)*Math.sin(Rt)),ot=Math.tan(Rt)*Math.tan(Rt),at=.006739496752268451*Math.cos(Rt)*Math.cos(Rt),Ot=.99330562*Tt/Math.pow(1-.00669438*Math.sin(Rt)*Math.sin(Rt),1.5),wt=Nt/(.9996*it);var Dt=Rt-it*Math.tan(Rt)/Ot*(wt*wt/2-(5+3*ot+10*at-4*at*at-.06065547077041606)*wt*wt*wt*wt/24+(61+90*ot+298*at+45*ot*ot-1.6983531815716497-3*at*at)*wt*wt*wt*wt*wt*wt/720);Dt=$e(Dt);var Gt,Ut=(wt-(1+2*ot+at)*wt*wt*wt/6+(5-2*at+28*ot-3*at*at+.05391597401814761+24*ot*ot)*wt*wt*wt*wt*wt/120)/Math.cos(Rt);if(Ut=St+$e(Ut),$.accuracy){var Xt=tr({northing:$.northing+$.accuracy,easting:$.easting+$.accuracy,zoneLetter:$.zoneLetter,zoneNumber:$.zoneNumber});Gt={top:Xt.lat,right:Xt.lon,bottom:Dt,left:Ut}}else Gt={lat:Dt,lon:Ut};return Gt}function er($){var tt="Z";return 84>=$&&$>=72?tt="X":72>$&&$>=64?tt="W":64>$&&$>=56?tt="V":56>$&&$>=48?tt="U":48>$&&$>=40?tt="T":40>$&&$>=32?tt="S":32>$&&$>=24?tt="R":24>$&&$>=16?tt="Q":16>$&&$>=8?tt="P":8>$&&$>=0?tt="N":0>$&&$>=-8?tt="M":-8>$&&$>=-16?tt="L":-16>$&&$>=-24?tt="K":-24>$&&$>=-32?tt="J":-32>$&&$>=-40?tt="H":-40>$&&$>=-48?tt="G":-48>$&&$>=-56?tt="F":-56>$&&$>=-64?tt="E":-64>$&&$>=-72?tt="D":-72>$&&$>=-80&&(tt="C"),tt}function rr($){var tt=$%6;return 0===tt&&(tt=6),tt}function nr($){if($&&0===$.length)throw"MGRSPoint coverting from nothing";for(var tt,et=$.length,nt=null,rt="",it=0;!/[A-Z]/.test(tt=$.charAt(it));){if(it>=2)throw"MGRSPoint bad conversion from: "+$;rt+=tt,it++}var ot=parseInt(rt,10);if(0===it||it+3>et)throw"MGRSPoint bad conversion from: "+$;var at=$.charAt(it++);if(at<="A"||"B"===at||"Y"===at||at>="Z"||"I"===at||"O"===at)throw"MGRSPoint zone letter "+at+" not handled: "+$;nt=$.substring(it,it+=2);for(var Ot=rr(ot),wt=function($,tt){for(var et="AJSAJS".charCodeAt(tt-1),nt=1e5,rt=!1;et!==$.charCodeAt(0);){if(++et===Jn&&et++,et===$n&&et++,et>90){if(rt)throw"Bad character: "+$;et=65,rt=!0}nt+=1e5}return nt}(nt.charAt(0),Ot),St=function($,tt){if($>"V")throw"MGRSPoint given invalid Northing "+$;for(var et="AFAFAF".charCodeAt(tt-1),nt=0,rt=!1;et!==$.charCodeAt(0);){if(++et===Jn&&et++,et===$n&&et++,et>86){if(rt)throw"Bad character: "+$;et=65,rt=!0}nt+=1e5}return nt}(nt.charAt(1),Ot);St<ir(at);)St+=2e6;var Ct=et-it;if(Ct%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+$;var Rt,Tt,At,Nt=Ct/2,kt=0,Dt=0;return Nt>0&&(Rt=1e5/Math.pow(10,Nt),Tt=$.substring(it,it+Nt),kt=parseFloat(Tt)*Rt,At=$.substring(it+Nt),Dt=parseFloat(At)*Rt),{easting:kt+wt,northing:Dt+St,zoneLetter:at,zoneNumber:ot,accuracy:Rt}}function ir($){var tt;switch($){case"C":tt=11e5;break;case"D":tt=2e6;break;case"E":tt=28e5;break;case"F":tt=37e5;break;case"G":tt=46e5;break;case"H":tt=55e5;break;case"J":tt=64e5;break;case"K":tt=73e5;break;case"L":tt=82e5;break;case"M":tt=91e5;break;case"N":tt=0;break;case"P":tt=8e5;break;case"Q":tt=17e5;break;case"R":tt=26e5;break;case"S":tt=35e5;break;case"T":tt=44e5;break;case"U":tt=53e5;break;case"V":tt=62e5;break;case"W":tt=7e6;break;case"X":tt=79e5;break;default:tt=-1}if(tt>=0)return tt;throw"Invalid zone letter: "+$}function or($,tt,et){if(!(this instanceof or))return new or($,tt,et);if(Array.isArray($))this.x=$[0],this.y=$[1],this.z=$[2]||0;else if("object"==typeof $)this.x=$.x,this.y=$.y,this.z=$.z||0;else if("string"==typeof $&&void 0===tt){var nt=$.split(",");this.x=parseFloat(nt[0],10),this.y=parseFloat(nt[1],10),this.z=parseFloat(nt[2],10)||0}else this.x=$,this.y=tt,this.z=et||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}or.fromMGRS=function($){return new or(Qe($))},or.prototype.toMGRS=function($){return He([this.x,this.y],$)};var sr=or,lr=.01068115234375,ur=function($){var tt=[];tt[0]=1-$*(.25+$*(.046875+$*(.01953125+$*lr))),tt[1]=$*(.75-$*(.046875+$*(.01953125+$*lr)));var et=$*$;return tt[2]=et*(.46875-$*(.013020833333333334+.007120768229166667*$)),et*=$,tt[3]=et*(.3645833333333333-.005696614583333333*$),tt[4]=et*$*.3076171875,tt},cr=function($,tt,et,nt){return et*=tt,tt*=tt,nt[0]*$-et*(nt[1]+tt*(nt[2]+tt*(nt[3]+tt*nt[4])))},hr=function($,tt,et){for(var nt=1/(1-tt),rt=$,it=20;it;--it){var ot=Math.sin(rt),at=1-tt*ot*ot;if(rt-=at=(cr(rt,ot,Math.cos(rt),et)-$)*(at*Math.sqrt(at))*nt,Math.abs(at)<1e-10)return rt}return rt},_r={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=ur(this.es),this.ml0=cr(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function($){var tt,et,nt,rt=$.x,it=$.y,ot=be(rt-this.long0),at=Math.sin(it),Ot=Math.cos(it);if(this.es){var wt=Ot*ot,St=Math.pow(wt,2),Ct=this.ep2*Math.pow(Ot,2),Rt=Math.pow(Ct,2),Tt=Math.abs(Ot)>1e-10?Math.tan(it):0,At=Math.pow(Tt,2),Nt=Math.pow(At,2);tt=1-this.es*Math.pow(at,2),wt/=Math.sqrt(tt);var kt=cr(it,at,Ot,this.en);et=this.a*(this.k0*wt*(1+St/6*(1-At+Ct+St/20*(5-18*At+Nt+14*Ct-58*At*Ct+St/42*(61+179*Nt-Nt*At-479*At)))))+this.x0,nt=this.a*(this.k0*(kt-this.ml0+at*ot*wt/2*(1+St/12*(5-At+9*Ct+4*Rt+St/30*(61+Nt-58*At+270*Ct-330*At*Ct+St/56*(1385+543*Nt-Nt*At-3111*At))))))+this.y0}else{var Dt=Ot*Math.sin(ot);if(Math.abs(Math.abs(Dt)-1)<1e-10)return 93;if(et=.5*this.a*this.k0*Math.log((1+Dt)/(1-Dt))+this.x0,nt=Ot*Math.cos(ot)/Math.sqrt(1-Math.pow(Dt,2)),(Dt=Math.abs(nt))>=1){if(Dt-1>1e-10)return 93;nt=0}else nt=Math.acos(nt);it<0&&(nt=-nt),nt=this.a*this.k0*(nt-this.lat0)+this.y0}return $.x=et,$.y=nt,$},inverse:function($){var tt,et,nt,rt,it=($.x-this.x0)*(1/this.a),ot=($.y-this.y0)*(1/this.a);if(this.es)if(tt=this.ml0+ot/this.k0,et=hr(tt,this.es,this.en),Math.abs(et)<wn){var at=Math.sin(et),Ot=Math.cos(et),wt=Math.abs(Ot)>1e-10?Math.tan(et):0,St=this.ep2*Math.pow(Ot,2),Ct=Math.pow(St,2),Rt=Math.pow(wt,2),Tt=Math.pow(Rt,2);tt=1-this.es*Math.pow(at,2);var At=it*Math.sqrt(tt)/this.k0,Nt=Math.pow(At,2);nt=et-(tt*=wt)*Nt/(1-this.es)*.5*(1-Nt/12*(5+3*Rt-9*St*Rt+St-4*Ct-Nt/30*(61+90*Rt-252*St*Rt+45*Tt+46*St-Nt/56*(1385+3633*Rt+4095*Tt+1574*Tt*Rt)))),rt=be(this.long0+At*(1-Nt/6*(1+2*Rt+St-Nt/20*(5+28*Rt+24*Tt+8*St*Rt+6*St-Nt/42*(61+662*Rt+1320*Tt+720*Tt*Rt))))/Ot)}else nt=wn*me(ot),rt=0;else{var kt=Math.exp(it/this.k0),Dt=.5*(kt-1/kt),Gt=this.lat0+ot/this.k0,Ut=Math.cos(Gt);tt=Math.sqrt((1-Math.pow(Ut,2))/(1+Math.pow(Dt,2))),nt=Math.asin(tt),ot<0&&(nt=-nt),rt=0===Dt&&0===Ut?0:be(Math.atan2(Dt,Ut)+this.long0)}return $.x=rt,$.y=nt,$},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},pr=function($){var tt=Math.exp($);return(tt-1/tt)/2},fr=function($,tt){$=Math.abs($),tt=Math.abs(tt);var et=Math.max($,tt),nt=Math.min($,tt)/(et||1);return et*Math.sqrt(1+Math.pow(nt,2))},dr=function($){var tt=Math.abs($);return tt=function($){var tt=1+$,et=tt-1;return 0===et?$:$*Math.log(tt)/et}(tt*(1+tt/(fr(1,tt)+1))),$<0?-tt:tt},yr=function($,tt){for(var et,nt=2*Math.cos(2*tt),rt=$.length-1,it=$[rt],ot=0;--rt>=0;)et=nt*it-ot+$[rt],ot=it,it=et;return tt+et*Math.sin(2*tt)},gr=function($,tt,et){for(var nt,rt,it=Math.sin(tt),ot=Math.cos(tt),at=pr(et),Ot=function($){var tt=Math.exp($);return(tt+1/tt)/2}(et),wt=2*ot*Ot,St=-2*it*at,Ct=$.length-1,Rt=$[Ct],Tt=0,At=0,Nt=0;--Ct>=0;)nt=At,rt=Tt,Rt=wt*(At=Rt)-nt-St*(Tt=Nt)+$[Ct],Nt=St*At-rt+wt*Tt;return[(wt=it*Ot)*Rt-(St=ot*at)*Nt,wt*Nt+St*Rt]},vr={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var $=this.es/(1+Math.sqrt(1-this.es)),tt=$/(2-$),et=tt;this.cgb[0]=tt*(2+tt*(-2/3+tt*(tt*(116/45+tt*(26/45+tt*(-2854/675)))-2))),this.cbg[0]=tt*(tt*(2/3+tt*(4/3+tt*(-82/45+tt*(32/45+tt*(4642/4725)))))-2),et*=tt,this.cgb[1]=et*(7/3+tt*(tt*(-227/45+tt*(2704/315+tt*(2323/945)))-1.6)),this.cbg[1]=et*(5/3+tt*(-16/15+tt*(-13/9+tt*(904/315+tt*(-1522/945))))),et*=tt,this.cgb[2]=et*(56/15+tt*(-136/35+tt*(-1262/105+tt*(73814/2835)))),this.cbg[2]=et*(-26/15+tt*(34/21+tt*(1.6+tt*(-12686/2835)))),et*=tt,this.cgb[3]=et*(4279/630+tt*(-332/35+tt*(-399572/14175))),this.cbg[3]=et*(1237/630+tt*(tt*(-24832/14175)-2.4)),et*=tt,this.cgb[4]=et*(4174/315+tt*(-144838/6237)),this.cbg[4]=et*(-734/315+tt*(109598/31185)),et*=tt,this.cgb[5]=et*(601676/22275),this.cbg[5]=et*(444337/155925),et=Math.pow(tt,2),this.Qn=this.k0/(1+tt)*(1+et*(1/4+et*(1/64+et/256))),this.utg[0]=tt*(tt*(2/3+tt*(-37/96+tt*(1/360+tt*(81/512+tt*(-96199/604800)))))-.5),this.gtu[0]=tt*(.5+tt*(-2/3+tt*(5/16+tt*(41/180+tt*(-127/288+tt*(7891/37800)))))),this.utg[1]=et*(-1/48+tt*(-1/15+tt*(437/1440+tt*(-46/105+tt*(1118711/3870720))))),this.gtu[1]=et*(13/48+tt*(tt*(557/1440+tt*(281/630+tt*(-1983433/1935360)))-.6)),et*=tt,this.utg[2]=et*(-17/480+tt*(37/840+tt*(209/4480+tt*(-5569/90720)))),this.gtu[2]=et*(61/240+tt*(-103/140+tt*(15061/26880+tt*(167603/181440)))),et*=tt,this.utg[3]=et*(-4397/161280+tt*(11/504+tt*(830251/7257600))),this.gtu[3]=et*(49561/161280+tt*(-179/168+tt*(6601661/7257600))),et*=tt,this.utg[4]=et*(-4583/161280+tt*(108847/3991680)),this.gtu[4]=et*(34729/80640+tt*(-3418889/1995840)),et*=tt,this.utg[5]=et*(-20648693/638668800),this.gtu[5]=.6650675310896665*et;var nt=yr(this.cbg,this.lat0);this.Zb=-this.Qn*(nt+function($,tt){for(var et,nt=2*Math.cos(tt),rt=$.length-1,it=$[rt],ot=0;--rt>=0;)et=nt*it-ot+$[rt],ot=it,it=et;return Math.sin(tt)*et}(this.gtu,2*nt))},forward:function($){var tt=be($.x-this.long0),et=$.y;et=yr(this.cbg,et);var nt=Math.sin(et),rt=Math.cos(et),it=Math.sin(tt),ot=Math.cos(tt);et=Math.atan2(nt,ot*rt),tt=Math.atan2(it*rt,fr(nt,rt*ot)),tt=dr(Math.tan(tt));var at,Ot,wt=gr(this.gtu,2*et,2*tt);return et+=wt[0],tt+=wt[1],Math.abs(tt)<=2.623395162778?(at=this.a*(this.Qn*tt)+this.x0,Ot=this.a*(this.Qn*et+this.Zb)+this.y0):(at=1/0,Ot=1/0),$.x=at,$.y=Ot,$},inverse:function($){var tt,et,nt=($.x-this.x0)*(1/this.a),rt=($.y-this.y0)*(1/this.a);if(rt=(rt-this.Zb)/this.Qn,nt/=this.Qn,Math.abs(nt)<=2.623395162778){var it=gr(this.utg,2*rt,2*nt);rt+=it[0],nt+=it[1],nt=Math.atan(pr(nt));var ot=Math.sin(rt),at=Math.cos(rt),Ot=Math.sin(nt),wt=Math.cos(nt);rt=Math.atan2(ot*wt,fr(Ot,wt*at)),nt=Math.atan2(Ot,wt*at),tt=be(nt+this.long0),et=yr(this.cgb,rt)}else tt=1/0,et=1/0;return $.x=tt,$.y=et,$},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},br={init:function(){var $=function($,tt){if(void 0===$){if(($=Math.floor(30*(be(tt)+Math.PI)/Math.PI)+1)<0)return 0;if($>60)return 60}return $}(this.zone,this.long0);if(void 0===$)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs($)-183)*Sn,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,vr.init.apply(this),this.forward=vr.forward,this.inverse=vr.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},mr=function($,tt){return Math.pow((1-$)/(1+$),tt)},Or={init:function(){var $=Math.sin(this.lat0),tt=Math.cos(this.lat0);tt*=tt,this.rc=Math.sqrt(1-this.es)/(1-this.es*$*$),this.C=Math.sqrt(1+this.es*tt*tt/(1-this.es)),this.phic0=Math.asin($/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Rn)/(Math.pow(Math.tan(.5*this.lat0+Rn),this.C)*mr(this.e*$,this.ratexp))},forward:function($){var tt=$.x,et=$.y;return $.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*et+Rn),this.C)*mr(this.e*Math.sin(et),this.ratexp))-wn,$.x=this.C*tt,$},inverse:function($){for(var tt=$.x/this.C,et=$.y,nt=Math.pow(Math.tan(.5*et+Rn)/this.K,1/this.C),rt=20;rt>0&&(et=2*Math.atan(nt*mr(this.e*Math.sin($.y),-.5*this.e))-wn,!(Math.abs(et-$.y)<1e-14));--rt)$.y=et;return rt?($.x=tt,$.y=et,$):null},names:["gauss"]},xr={init:function(){Or.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function($){var tt,et,nt,rt;return $.x=be($.x-this.long0),Or.forward.apply(this,[$]),tt=Math.sin($.y),et=Math.cos($.y),nt=Math.cos($.x),rt=this.k0*this.R2/(1+this.sinc0*tt+this.cosc0*et*nt),$.x=rt*et*Math.sin($.x),$.y=rt*(this.cosc0*tt-this.sinc0*et*nt),$.x=this.a*$.x+this.x0,$.y=this.a*$.y+this.y0,$},inverse:function($){var tt,et,nt,rt,it;if($.x=($.x-this.x0)/this.a,$.y=($.y-this.y0)/this.a,$.x/=this.k0,$.y/=this.k0,it=Math.sqrt($.x*$.x+$.y*$.y)){var ot=2*Math.atan2(it,this.R2);tt=Math.sin(ot),et=Math.cos(ot),rt=Math.asin(et*this.sinc0+$.y*tt*this.cosc0/it),nt=Math.atan2($.x*tt,it*this.cosc0*et-$.y*this.sinc0*tt)}else rt=this.phic0,nt=0;return $.x=nt,$.y=rt,Or.inverse.apply(this,[$]),$.x=be($.x+this.long0),$},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},wr={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+me(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*_e(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Oe(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=_e(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-wn,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function($){var tt,et,nt,rt,it,ot,at=$.x,Ot=$.y,wt=Math.sin(Ot),St=Math.cos(Ot),Ct=be(at-this.long0);return Math.abs(Math.abs(at-this.long0)-Math.PI)<=1e-10&&Math.abs(Ot+this.lat0)<=1e-10?($.x=NaN,$.y=NaN,$):this.sphere?(tt=2*this.k0/(1+this.sinlat0*wt+this.coslat0*St*Math.cos(Ct)),$.x=this.a*tt*St*Math.sin(Ct)+this.x0,$.y=this.a*tt*(this.coslat0*wt-this.sinlat0*St*Math.cos(Ct))+this.y0,$):(et=2*Math.atan(this.ssfn_(Ot,wt,this.e))-wn,rt=Math.cos(et),nt=Math.sin(et),Math.abs(this.coslat0)<=1e-10?(it=Oe(this.e,Ot*this.con,this.con*wt),ot=2*this.a*this.k0*it/this.cons,$.x=this.x0+ot*Math.sin(at-this.long0),$.y=this.y0-this.con*ot*Math.cos(at-this.long0),$):(Math.abs(this.sinlat0)<1e-10?(tt=2*this.a*this.k0/(1+rt*Math.cos(Ct)),$.y=tt*nt):(tt=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*nt+this.cosX0*rt*Math.cos(Ct))),$.y=tt*(this.cosX0*nt-this.sinX0*rt*Math.cos(Ct))+this.y0),$.x=tt*rt*Math.sin(Ct)+this.x0,$))},inverse:function($){var tt,et,nt,rt,it;$.x-=this.x0,$.y-=this.y0;var ot=Math.sqrt($.x*$.x+$.y*$.y);if(this.sphere){var at=2*Math.atan(ot/(2*this.a*this.k0));return tt=this.long0,et=this.lat0,ot<=1e-10?($.x=tt,$.y=et,$):(et=Math.asin(Math.cos(at)*this.sinlat0+$.y*Math.sin(at)*this.coslat0/ot),tt=Math.abs(this.coslat0)<1e-10?this.lat0>0?be(this.long0+Math.atan2($.x,-1*$.y)):be(this.long0+Math.atan2($.x,$.y)):be(this.long0+Math.atan2($.x*Math.sin(at),ot*this.coslat0*Math.cos(at)-$.y*this.sinlat0*Math.sin(at))),$.x=tt,$.y=et,$)}if(Math.abs(this.coslat0)<=1e-10){if(ot<=1e-10)return et=this.lat0,tt=this.long0,$.x=tt,$.y=et,$;$.x*=this.con,$.y*=this.con,nt=ot*this.cons/(2*this.a*this.k0),et=this.con*xe(this.e,nt),tt=this.con*be(this.con*this.long0+Math.atan2($.x,-1*$.y))}else rt=2*Math.atan(ot*this.cosX0/(2*this.a*this.k0*this.ms1)),tt=this.long0,ot<=1e-10?it=this.X0:(it=Math.asin(Math.cos(rt)*this.sinX0+$.y*Math.sin(rt)*this.cosX0/ot),tt=be(this.long0+Math.atan2($.x*Math.sin(rt),ot*this.cosX0*Math.cos(rt)-$.y*this.sinX0*Math.sin(rt)))),et=-1*xe(this.e,Math.tan(.5*(wn+it)));return $.x=tt,$.y=et,$},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function($,tt,et){return tt*=et,Math.tan(.5*(wn+$))*Math.pow((1-tt)/(1+tt),.5*et)}},Sr={init:function(){var $=this.lat0;this.lambda0=this.long0;var tt=Math.sin($),et=this.a,nt=1/this.rf,rt=2*nt-Math.pow(nt,2),it=this.e=Math.sqrt(rt);this.R=this.k0*et*Math.sqrt(1-rt)/(1-rt*Math.pow(tt,2)),this.alpha=Math.sqrt(1+rt/(1-rt)*Math.pow(Math.cos($),4)),this.b0=Math.asin(tt/this.alpha);var ot=Math.log(Math.tan(Math.PI/4+this.b0/2)),at=Math.log(Math.tan(Math.PI/4+$/2)),Ot=Math.log((1+it*tt)/(1-it*tt));this.K=ot-this.alpha*at+this.alpha*it/2*Ot},forward:function($){var tt=Math.log(Math.tan(Math.PI/4-$.y/2)),et=this.e/2*Math.log((1+this.e*Math.sin($.y))/(1-this.e*Math.sin($.y))),nt=-this.alpha*(tt+et)+this.K,rt=2*(Math.atan(Math.exp(nt))-Math.PI/4),it=this.alpha*($.x-this.lambda0),ot=Math.atan(Math.sin(it)/(Math.sin(this.b0)*Math.tan(rt)+Math.cos(this.b0)*Math.cos(it))),at=Math.asin(Math.cos(this.b0)*Math.sin(rt)-Math.sin(this.b0)*Math.cos(rt)*Math.cos(it));return $.y=this.R/2*Math.log((1+Math.sin(at))/(1-Math.sin(at)))+this.y0,$.x=this.R*ot+this.x0,$},inverse:function($){for(var tt=$.x-this.x0,et=$.y-this.y0,nt=tt/this.R,rt=2*(Math.atan(Math.exp(et/this.R))-Math.PI/4),it=Math.asin(Math.cos(this.b0)*Math.sin(rt)+Math.sin(this.b0)*Math.cos(rt)*Math.cos(nt)),ot=Math.atan(Math.sin(nt)/(Math.cos(this.b0)*Math.cos(nt)-Math.sin(this.b0)*Math.tan(rt))),at=this.lambda0+ot/this.alpha,Ot=0,wt=it,St=-1e3,Ct=0;Math.abs(wt-St)>1e-7;){if(++Ct>20)return;Ot=1/this.alpha*(Math.log(Math.tan(Math.PI/4+it/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(wt))/2)),St=wt,wt=2*Math.atan(Math.exp(Ot))-Math.PI/2}return $.x=at,$.y=wt,$},names:["somerc"]},Er={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var $=Math.sin(this.lat0),tt=Math.cos(this.lat0),et=this.e*$;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(tt,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-et*et);var nt,rt,it=Oe(this.e,this.lat0,$),ot=this.bl/tt*Math.sqrt((1-this.es)/(1-et*et));if(ot*ot<1&&(ot=1),isNaN(this.longc)){var at=Oe(this.e,this.lat1,Math.sin(this.lat1)),Ot=Oe(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(ot+Math.sqrt(ot*ot-1))*Math.pow(it,this.bl):this.el=(ot-Math.sqrt(ot*ot-1))*Math.pow(it,this.bl);var wt=Math.pow(at,this.bl),St=Math.pow(Ot,this.bl);rt=.5*((nt=this.el/wt)-1/nt);var Ct=(this.el*this.el-St*wt)/(this.el*this.el+St*wt),Rt=(St-wt)/(St+wt),Tt=be(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(Ct*Math.tan(.5*this.bl*Tt)/Rt)/this.bl,this.long0=be(this.long0);var At=be(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*At)/rt),this.alpha=Math.asin(ot*Math.sin(this.gamma0))}else nt=this.lat0>=0?ot+Math.sqrt(ot*ot-1):ot-Math.sqrt(ot*ot-1),this.el=nt*Math.pow(it,this.bl),rt=.5*(nt-1/nt),this.gamma0=Math.asin(Math.sin(this.alpha)/ot),this.long0=this.longc-Math.asin(rt*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(ot*ot-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(ot*ot-1),Math.cos(this.alpha))},forward:function($){var tt,et,nt,rt=$.x,it=$.y,ot=be(rt-this.long0);if(Math.abs(Math.abs(it)-wn)<=1e-10)nt=it>0?-1:1,et=this.al/this.bl*Math.log(Math.tan(Rn+nt*this.gamma0*.5)),tt=-1*nt*wn*this.al/this.bl;else{var at=Oe(this.e,it,Math.sin(it)),Ot=this.el/Math.pow(at,this.bl),wt=.5*(Ot-1/Ot),St=.5*(Ot+1/Ot),Ct=Math.sin(this.bl*ot),Rt=(wt*Math.sin(this.gamma0)-Ct*Math.cos(this.gamma0))/St;et=Math.abs(Math.abs(Rt)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-Rt)/(1+Rt))/this.bl,tt=Math.abs(Math.cos(this.bl*ot))<=1e-10?this.al*this.bl*ot:this.al*Math.atan2(wt*Math.cos(this.gamma0)+Ct*Math.sin(this.gamma0),Math.cos(this.bl*ot))/this.bl}return this.no_rot?($.x=this.x0+tt,$.y=this.y0+et):(tt-=this.uc,$.x=this.x0+et*Math.cos(this.alpha)+tt*Math.sin(this.alpha),$.y=this.y0+tt*Math.cos(this.alpha)-et*Math.sin(this.alpha)),$},inverse:function($){var tt,et;this.no_rot?(et=$.y-this.y0,tt=$.x-this.x0):(et=($.x-this.x0)*Math.cos(this.alpha)-($.y-this.y0)*Math.sin(this.alpha),tt=($.y-this.y0)*Math.cos(this.alpha)+($.x-this.x0)*Math.sin(this.alpha),tt+=this.uc);var nt=Math.exp(-1*this.bl*et/this.al),rt=.5*(nt-1/nt),it=.5*(nt+1/nt),ot=Math.sin(this.bl*tt/this.al),at=(ot*Math.cos(this.gamma0)+rt*Math.sin(this.gamma0))/it,Ot=Math.pow(this.el/Math.sqrt((1+at)/(1-at)),1/this.bl);return Math.abs(at-1)<1e-10?($.x=this.long0,$.y=wn):Math.abs(at+1)<1e-10?($.x=this.long0,$.y=-1*wn):($.y=xe(this.e,Ot),$.x=be(this.long0-Math.atan2(rt*Math.cos(this.gamma0)-ot*Math.sin(this.gamma0),Math.cos(this.bl*tt/this.al))/this.bl)),$},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},Mr={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var $=this.b/this.a;this.e=Math.sqrt(1-$*$);var tt=Math.sin(this.lat1),et=Math.cos(this.lat1),nt=_e(this.e,tt,et),rt=Oe(this.e,this.lat1,tt),it=Math.sin(this.lat2),ot=Math.cos(this.lat2),at=_e(this.e,it,ot),Ot=Oe(this.e,this.lat2,it),wt=Oe(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(nt/at)/Math.log(rt/Ot):this.ns=tt,isNaN(this.ns)&&(this.ns=tt),this.f0=nt/(this.ns*Math.pow(rt,this.ns)),this.rh=this.a*this.f0*Math.pow(wt,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function($){var tt=$.x,et=$.y;Math.abs(2*Math.abs(et)-Math.PI)<=1e-10&&(et=me(et)*(wn-2e-10));var nt,rt,it=Math.abs(Math.abs(et)-wn);if(it>1e-10)nt=Oe(this.e,et,Math.sin(et)),rt=this.a*this.f0*Math.pow(nt,this.ns);else{if((it=et*this.ns)<=0)return null;rt=0}var ot=this.ns*be(tt-this.long0);return $.x=this.k0*(rt*Math.sin(ot))+this.x0,$.y=this.k0*(this.rh-rt*Math.cos(ot))+this.y0,$},inverse:function($){var tt,et,nt,rt,it,ot=($.x-this.x0)/this.k0,at=this.rh-($.y-this.y0)/this.k0;this.ns>0?(tt=Math.sqrt(ot*ot+at*at),et=1):(tt=-Math.sqrt(ot*ot+at*at),et=-1);var Ot=0;if(0!==tt&&(Ot=Math.atan2(et*ot,et*at)),0!==tt||this.ns>0){if(et=1/this.ns,nt=Math.pow(tt/(this.a*this.f0),et),-9999===(rt=xe(this.e,nt)))return null}else rt=-wn;return it=be(Ot/this.ns+this.long0),$.x=it,$.y=rt,$},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},Fr={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function($){var tt,et,nt,rt,it,ot,at,Ot=$.x,wt=$.y,St=be(Ot-this.long0);return tt=Math.pow((1+this.e*Math.sin(wt))/(1-this.e*Math.sin(wt)),this.alfa*this.e/2),et=2*(Math.atan(this.k*Math.pow(Math.tan(wt/2+this.s45),this.alfa)/tt)-this.s45),nt=-St*this.alfa,rt=Math.asin(Math.cos(this.ad)*Math.sin(et)+Math.sin(this.ad)*Math.cos(et)*Math.cos(nt)),it=Math.asin(Math.cos(et)*Math.sin(nt)/Math.cos(rt)),ot=this.n*it,at=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(rt/2+this.s45),this.n),$.y=at*Math.cos(ot)/1,$.x=at*Math.sin(ot)/1,this.czech||($.y*=-1,$.x*=-1),$},inverse:function($){var tt,et,nt,rt,it,ot,at,Ot=$.x;$.x=$.y,$.y=Ot,this.czech||($.y*=-1,$.x*=-1),it=Math.sqrt($.x*$.x+$.y*$.y),rt=Math.atan2($.y,$.x)/Math.sin(this.s0),nt=2*(Math.atan(Math.pow(this.ro0/it,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),tt=Math.asin(Math.cos(this.ad)*Math.sin(nt)-Math.sin(this.ad)*Math.cos(nt)*Math.cos(rt)),et=Math.asin(Math.cos(nt)*Math.sin(rt)/Math.cos(tt)),$.x=this.long0-et/this.alfa,ot=tt,at=0;var wt=0;do{$.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(tt/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(ot))/(1-this.e*Math.sin(ot)),this.e/2))-this.s45),Math.abs(ot-$.y)<1e-10&&(at=1),ot=$.y,wt+=1}while(0===at&&wt<15);return wt>=15?null:$},names:["Krovak","krovak"]},jr=function($,tt,et,nt,rt){return $*rt-tt*Math.sin(2*rt)+et*Math.sin(4*rt)-nt*Math.sin(6*rt)},Cr=function($){return 1-.25*$*(1+$/16*(3+1.25*$))},Rr=function($){return.375*$*(1+.25*$*(1+.46875*$))},Pr=function($){return.05859375*$*$*(1+.75*$)},Ir=function($){return $*$*$*(35/3072)},Tr=function($,tt,et){var nt=tt*et;return $/Math.sqrt(1-nt*nt)},Ar=function($){return Math.abs($)<wn?$:$-me($)*Math.PI},Lr=function($,tt,et,nt,rt){var it,ot;it=$/tt;for(var at=0;at<15;at++)if(it+=ot=($-(tt*it-et*Math.sin(2*it)+nt*Math.sin(4*it)-rt*Math.sin(6*it)))/(tt-2*et*Math.cos(2*it)+4*nt*Math.cos(4*it)-6*rt*Math.cos(6*it)),Math.abs(ot)<=1e-10)return it;return NaN},kr={init:function(){this.sphere||(this.e0=Cr(this.es),this.e1=Rr(this.es),this.e2=Pr(this.es),this.e3=Ir(this.es),this.ml0=this.a*jr(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function($){var tt,et,nt=$.x,rt=$.y;if(nt=be(nt-this.long0),this.sphere)tt=this.a*Math.asin(Math.cos(rt)*Math.sin(nt)),et=this.a*(Math.atan2(Math.tan(rt),Math.cos(nt))-this.lat0);else{var it=Math.sin(rt),ot=Math.cos(rt),at=Tr(this.a,this.e,it),Ot=Math.tan(rt)*Math.tan(rt),wt=nt*Math.cos(rt),St=wt*wt,Ct=this.es*ot*ot/(1-this.es);tt=at*wt*(1-St*Ot*(1/6-(8-Ot+8*Ct)*St/120)),et=this.a*jr(this.e0,this.e1,this.e2,this.e3,rt)-this.ml0+at*it/ot*St*(.5+(5-Ot+6*Ct)*St/24)}return $.x=tt+this.x0,$.y=et+this.y0,$},inverse:function($){$.x-=this.x0,$.y-=this.y0;var tt,et,nt=$.x/this.a,rt=$.y/this.a;if(this.sphere){var it=rt+this.lat0;tt=Math.asin(Math.sin(it)*Math.cos(nt)),et=Math.atan2(Math.tan(nt),Math.cos(it))}else{var ot=this.ml0/this.a+rt,at=Lr(ot,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(at)-wn)<=1e-10)return $.x=this.long0,$.y=wn,rt<0&&($.y*=-1),$;var Ot=Tr(this.a,this.e,Math.sin(at)),wt=Ot*Ot*Ot/this.a/this.a*(1-this.es),St=Math.pow(Math.tan(at),2),Ct=nt*this.a/Ot,Rt=Ct*Ct;tt=at-Ot*Math.tan(at)/wt*Ct*Ct*(.5-(1+3*St)*Ct*Ct/24),et=Ct*(1-Rt*(St/3+(1+3*St)*St*Rt/15))/Math.cos(at)}return $.x=be(et+this.long0),$.y=Ar(tt),$},names:["Cassini","Cassini_Soldner","cass"]},Nr=function($,tt){var et;return $>1e-7?(1-$*$)*(tt/(1-(et=$*tt)*et)-.5/$*Math.log((1-et)/(1+et))):2*tt},Gr={init:function(){var $,tt=Math.abs(this.lat0);if(Math.abs(tt-wn)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(tt)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Nr(this.e,1),this.mmf=.5/(1-this.es),this.apa=function($){var tt,et=[];return et[0]=.3333333333333333*$,tt=$*$,et[0]+=.17222222222222222*tt,et[1]=.06388888888888888*tt,tt*=$,et[0]+=.10257936507936508*tt,et[1]+=.0664021164021164*tt,et[2]=.016415012942191543*tt,et}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),$=Math.sin(this.lat0),this.sinb1=Nr(this.e,$)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*$*$)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function($){var tt,et,nt,rt,it,ot,at,Ot,wt,St,Ct=$.x,Rt=$.y;if(Ct=be(Ct-this.long0),this.sphere){if(it=Math.sin(Rt),St=Math.cos(Rt),nt=Math.cos(Ct),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((et=this.mode===this.EQUIT?1+St*nt:1+this.sinph0*it+this.cosph0*St*nt)<=1e-10)return null;tt=(et=Math.sqrt(2/et))*St*Math.sin(Ct),et*=this.mode===this.EQUIT?it:this.cosph0*it-this.sinph0*St*nt}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(nt=-nt),Math.abs(Rt+this.lat0)<1e-10)return null;et=Rn-.5*Rt,tt=(et=2*(this.mode===this.S_POLE?Math.cos(et):Math.sin(et)))*Math.sin(Ct),et*=nt}}else{switch(at=0,Ot=0,wt=0,nt=Math.cos(Ct),rt=Math.sin(Ct),it=Math.sin(Rt),ot=Nr(this.e,it),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(at=ot/this.qp,Ot=Math.sqrt(1-at*at)),this.mode){case this.OBLIQ:wt=1+this.sinb1*at+this.cosb1*Ot*nt;break;case this.EQUIT:wt=1+Ot*nt;break;case this.N_POLE:wt=wn+Rt,ot=this.qp-ot;break;case this.S_POLE:wt=Rt-wn,ot=this.qp+ot}if(Math.abs(wt)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:wt=Math.sqrt(2/wt),et=this.mode===this.OBLIQ?this.ymf*wt*(this.cosb1*at-this.sinb1*Ot*nt):(wt=Math.sqrt(2/(1+Ot*nt)))*at*this.ymf,tt=this.xmf*wt*Ot*rt;break;case this.N_POLE:case this.S_POLE:ot>=0?(tt=(wt=Math.sqrt(ot))*rt,et=nt*(this.mode===this.S_POLE?wt:-wt)):tt=et=0}}return $.x=this.a*tt+this.x0,$.y=this.a*et+this.y0,$},inverse:function($){$.x-=this.x0,$.y-=this.y0;var tt,et,nt,rt,it,ot,at,Ot,wt,St,Ct=$.x/this.a,Rt=$.y/this.a;if(this.sphere){var Tt,At=0,Nt=0;if((et=.5*(Tt=Math.sqrt(Ct*Ct+Rt*Rt)))>1)return null;switch(et=2*Math.asin(et),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(Nt=Math.sin(et),At=Math.cos(et)),this.mode){case this.EQUIT:et=Math.abs(Tt)<=1e-10?0:Math.asin(Rt*Nt/Tt),Ct*=Nt,Rt=At*Tt;break;case this.OBLIQ:et=Math.abs(Tt)<=1e-10?this.lat0:Math.asin(At*this.sinph0+Rt*Nt*this.cosph0/Tt),Ct*=Nt*this.cosph0,Rt=(At-Math.sin(et)*this.sinph0)*Tt;break;case this.N_POLE:Rt=-Rt,et=wn-et;break;case this.S_POLE:et-=wn}tt=0!==Rt||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(Ct,Rt):0}else{if(at=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(Ct/=this.dd,Rt*=this.dd,(ot=Math.sqrt(Ct*Ct+Rt*Rt))<1e-10)return $.x=this.long0,$.y=this.lat0,$;rt=2*Math.asin(.5*ot/this.rq),nt=Math.cos(rt),Ct*=rt=Math.sin(rt),this.mode===this.OBLIQ?(at=nt*this.sinb1+Rt*rt*this.cosb1/ot,it=this.qp*at,Rt=ot*this.cosb1*nt-Rt*this.sinb1*rt):(at=Rt*rt/ot,it=this.qp*at,Rt=ot*nt)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(Rt=-Rt),!(it=Ct*Ct+Rt*Rt))return $.x=this.long0,$.y=this.lat0,$;at=1-it/this.qp,this.mode===this.S_POLE&&(at=-at)}tt=Math.atan2(Ct,Rt),St=(Ot=Math.asin(at))+Ot,et=Ot+(wt=this.apa)[0]*Math.sin(St)+wt[1]*Math.sin(St+St)+wt[2]*Math.sin(St+St+St)}return $.x=be(this.long0+tt),$.y=et,$},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Dr=function($){return Math.abs($)>1&&($=$>1?1:-1),Math.asin($)},zr={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=_e(this.e3,this.sin_po,this.cos_po),this.qs1=Nr(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=_e(this.e3,this.sin_po,this.cos_po),this.qs2=Nr(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Nr(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function($){var tt=$.x,et=$.y;this.sin_phi=Math.sin(et),this.cos_phi=Math.cos(et);var nt=Nr(this.e3,this.sin_phi,this.cos_phi),rt=this.a*Math.sqrt(this.c-this.ns0*nt)/this.ns0,it=this.ns0*be(tt-this.long0),ot=rt*Math.sin(it)+this.x0,at=this.rh-rt*Math.cos(it)+this.y0;return $.x=ot,$.y=at,$},inverse:function($){var tt,et,nt,rt,it,ot;return $.x-=this.x0,$.y=this.rh-$.y+this.y0,this.ns0>=0?(tt=Math.sqrt($.x*$.x+$.y*$.y),nt=1):(tt=-Math.sqrt($.x*$.x+$.y*$.y),nt=-1),rt=0,0!==tt&&(rt=Math.atan2(nt*$.x,nt*$.y)),nt=tt*this.ns0/this.a,this.sphere?ot=Math.asin((this.c-nt*nt)/(2*this.ns0)):(et=(this.c-nt*nt)/this.ns0,ot=this.phi1z(this.e3,et)),it=be(rt/this.ns0+this.long0),$.x=it,$.y=ot,$},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function($,tt){var et,nt,rt,it,ot=Dr(.5*tt);if($<1e-10)return ot;for(var at=$*$,Ot=1;Ot<=25;Ot++)if(ot+=it=.5*(rt=1-(nt=$*(et=Math.sin(ot)))*nt)*rt/Math.cos(ot)*(tt/(1-at)-et/rt+.5/$*Math.log((1-nt)/(1+nt))),Math.abs(it)<=1e-7)return ot;return null}},Ur={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function($){var tt,et,nt,rt,it,ot,at,Ot=$.x,wt=$.y;return nt=be(Ot-this.long0),tt=Math.sin(wt),et=Math.cos(wt),rt=Math.cos(nt),(it=this.sin_p14*tt+this.cos_p14*et*rt)>0||Math.abs(it)<=1e-10?(ot=this.x0+1*this.a*et*Math.sin(nt)/it,at=this.y0+1*this.a*(this.cos_p14*tt-this.sin_p14*et*rt)/it):(ot=this.x0+this.infinity_dist*et*Math.sin(nt),at=this.y0+this.infinity_dist*(this.cos_p14*tt-this.sin_p14*et*rt)),$.x=ot,$.y=at,$},inverse:function($){var tt,et,nt,rt,it,ot;return $.x=($.x-this.x0)/this.a,$.y=($.y-this.y0)/this.a,$.x/=this.k0,$.y/=this.k0,(tt=Math.sqrt($.x*$.x+$.y*$.y))?(rt=Math.atan2(tt,this.rc),et=Math.sin(rt),nt=Math.cos(rt),ot=Dr(nt*this.sin_p14+$.y*et*this.cos_p14/tt),it=Math.atan2($.x*et,tt*this.cos_p14*nt-$.y*this.sin_p14*et),it=be(this.long0+it)):(ot=this.phic0,it=0),$.x=it,$.y=ot,$},names:["gnom"]},Yr={init:function(){this.sphere||(this.k0=_e(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function($){var tt,et,nt=$.x,rt=$.y,it=be(nt-this.long0);if(this.sphere)tt=this.x0+this.a*it*Math.cos(this.lat_ts),et=this.y0+this.a*Math.sin(rt)/Math.cos(this.lat_ts);else{var ot=Nr(this.e,Math.sin(rt));tt=this.x0+this.a*this.k0*it,et=this.y0+this.a*ot*.5/this.k0}return $.x=tt,$.y=et,$},inverse:function($){var tt,et;return $.x-=this.x0,$.y-=this.y0,this.sphere?(tt=be(this.long0+$.x/this.a/Math.cos(this.lat_ts)),et=Math.asin($.y/this.a*Math.cos(this.lat_ts))):(et=function($,tt){var et=1-(1-$*$)/(2*$)*Math.log((1-$)/(1+$));if(Math.abs(Math.abs(tt)-et)<1e-6)return tt<0?-1*wn:wn;for(var nt,rt,it,ot,at=Math.asin(.5*tt),Ot=0;Ot<30;Ot++)if(rt=Math.sin(at),it=Math.cos(at),ot=$*rt,at+=nt=Math.pow(1-ot*ot,2)/(2*it)*(tt/(1-$*$)-rt/(1-ot*ot)+.5/$*Math.log((1-ot)/(1+ot))),Math.abs(nt)<=1e-10)return at;return NaN}(this.e,2*$.y*this.k0/this.a),tt=be(this.long0+$.x/(this.a*this.k0))),$.x=tt,$.y=et,$},names:["cea"]},Br={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function($){var tt=$.x,et=$.y,nt=be(tt-this.long0),rt=Ar(et-this.lat0);return $.x=this.x0+this.a*nt*this.rc,$.y=this.y0+this.a*rt,$},inverse:function($){var tt=$.x,et=$.y;return $.x=be(this.long0+(tt-this.x0)/(this.a*this.rc)),$.y=Ar(this.lat0+(et-this.y0)/this.a),$},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Wr={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cr(this.es),this.e1=Rr(this.es),this.e2=Pr(this.es),this.e3=Ir(this.es),this.ml0=this.a*jr(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function($){var tt,et,nt,rt=$.x,it=$.y,ot=be(rt-this.long0);if(nt=ot*Math.sin(it),this.sphere)Math.abs(it)<=1e-10?(tt=this.a*ot,et=-1*this.a*this.lat0):(tt=this.a*Math.sin(nt)/Math.tan(it),et=this.a*(Ar(it-this.lat0)+(1-Math.cos(nt))/Math.tan(it)));else if(Math.abs(it)<=1e-10)tt=this.a*ot,et=-1*this.ml0;else{var at=Tr(this.a,this.e,Math.sin(it))/Math.tan(it);tt=at*Math.sin(nt),et=this.a*jr(this.e0,this.e1,this.e2,this.e3,it)-this.ml0+at*(1-Math.cos(nt))}return $.x=tt+this.x0,$.y=et+this.y0,$},inverse:function($){var tt,et,nt,rt,it,ot,at,Ot,wt;if(nt=$.x-this.x0,rt=$.y-this.y0,this.sphere)if(Math.abs(rt+this.a*this.lat0)<=1e-10)tt=be(nt/this.a+this.long0),et=0;else{var St;for(ot=this.lat0+rt/this.a,at=nt*nt/this.a/this.a+ot*ot,Ot=ot,it=20;it;--it)if(Ot+=wt=-1*(ot*(Ot*(St=Math.tan(Ot))+1)-Ot-.5*(Ot*Ot+at)*St)/((Ot-ot)/St-1),Math.abs(wt)<=1e-10){et=Ot;break}tt=be(this.long0+Math.asin(nt*Math.tan(Ot)/this.a)/Math.sin(et))}else if(Math.abs(rt+this.ml0)<=1e-10)et=0,tt=be(this.long0+nt/this.a);else{var Ct,Rt,Tt,At,Nt;for(ot=(this.ml0+rt)/this.a,at=nt*nt/this.a/this.a+ot*ot,Ot=ot,it=20;it;--it)if(Nt=this.e*Math.sin(Ot),Ct=Math.sqrt(1-Nt*Nt)*Math.tan(Ot),Rt=this.a*jr(this.e0,this.e1,this.e2,this.e3,Ot),Tt=this.e0-2*this.e1*Math.cos(2*Ot)+4*this.e2*Math.cos(4*Ot)-6*this.e3*Math.cos(6*Ot),Ot-=wt=(ot*(Ct*(At=Rt/this.a)+1)-At-.5*Ct*(At*At+at))/(this.es*Math.sin(2*Ot)*(At*At+at-2*ot*At)/(4*Ct)+(ot-At)*(Ct*Tt-2/Math.sin(2*Ot))-Tt),Math.abs(wt)<=1e-10){et=Ot;break}Ct=Math.sqrt(1-this.es*Math.pow(Math.sin(et),2))*Math.tan(et),tt=be(this.long0+Math.asin(nt*Ct/this.a)/Math.sin(et))}return $.x=tt,$.y=et,$},names:["Polyconic","poly"]},Xr={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function($){var tt,et=$.x,nt=$.y-this.lat0,rt=et-this.long0,it=nt/xn*1e-5,ot=rt,at=1,Ot=0;for(tt=1;tt<=10;tt++)at*=it,Ot+=this.A[tt]*at;var wt,St=Ot,Ct=ot,Rt=1,Tt=0,At=0,Nt=0;for(tt=1;tt<=6;tt++)wt=Tt*St+Rt*Ct,Rt=Rt*St-Tt*Ct,Tt=wt,At=At+this.B_re[tt]*Rt-this.B_im[tt]*Tt,Nt=Nt+this.B_im[tt]*Rt+this.B_re[tt]*Tt;return $.x=Nt*this.a+this.x0,$.y=At*this.a+this.y0,$},inverse:function($){var tt,et,nt=$.x,rt=$.y,it=nt-this.x0,ot=(rt-this.y0)/this.a,at=it/this.a,Ot=1,wt=0,St=0,Ct=0;for(tt=1;tt<=6;tt++)et=wt*ot+Ot*at,Ot=Ot*ot-wt*at,wt=et,St=St+this.C_re[tt]*Ot-this.C_im[tt]*wt,Ct=Ct+this.C_im[tt]*Ot+this.C_re[tt]*wt;for(var Rt=0;Rt<this.iterations;Rt++){var Tt,At=St,Nt=Ct,kt=ot,Dt=at;for(tt=2;tt<=6;tt++)Tt=Nt*St+At*Ct,At=At*St-Nt*Ct,Nt=Tt,kt+=(tt-1)*(this.B_re[tt]*At-this.B_im[tt]*Nt),Dt+=(tt-1)*(this.B_im[tt]*At+this.B_re[tt]*Nt);At=1,Nt=0;var Gt=this.B_re[1],Ut=this.B_im[1];for(tt=2;tt<=6;tt++)Tt=Nt*St+At*Ct,At=At*St-Nt*Ct,Nt=Tt,Gt+=tt*(this.B_re[tt]*At-this.B_im[tt]*Nt),Ut+=tt*(this.B_im[tt]*At+this.B_re[tt]*Nt);var Xt=Gt*Gt+Ut*Ut;St=(kt*Gt+Dt*Ut)/Xt,Ct=(Dt*Gt-kt*Ut)/Xt}var Vt=St,Jt=Ct,ne=1,re=0;for(tt=1;tt<=9;tt++)ne*=Vt,re+=this.D[tt]*ne;var ie=this.lat0+re*xn*1e5,oe=this.long0+Jt;return $.x=oe,$.y=ie,$},names:["New_Zealand_Map_Grid","nzmg"]},qr={init:function(){},forward:function($){var tt=$.x,et=$.y,nt=be(tt-this.long0),rt=this.x0+this.a*nt,it=this.y0+this.a*Math.log(Math.tan(Math.PI/4+et/2.5))*1.25;return $.x=rt,$.y=it,$},inverse:function($){$.x-=this.x0,$.y-=this.y0;var tt=be(this.long0+$.x/this.a),et=2.5*(Math.atan(Math.exp(.8*$.y/this.a))-Math.PI/4);return $.x=tt,$.y=et,$},names:["Miller_Cylindrical","mill"]},Zr={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ur(this.es)},forward:function($){var tt,et,nt=$.x,rt=$.y;if(nt=be(nt-this.long0),this.sphere){if(this.m)for(var it=this.n*Math.sin(rt),ot=20;ot;--ot){var at=(this.m*rt+Math.sin(rt)-it)/(this.m+Math.cos(rt));if(rt-=at,Math.abs(at)<1e-10)break}else rt=1!==this.n?Math.asin(this.n*Math.sin(rt)):rt;tt=this.a*this.C_x*nt*(this.m+Math.cos(rt)),et=this.a*this.C_y*rt}else{var Ot=Math.sin(rt),wt=Math.cos(rt);et=this.a*cr(rt,Ot,wt,this.en),tt=this.a*nt*wt/Math.sqrt(1-this.es*Ot*Ot)}return $.x=tt,$.y=et,$},inverse:function($){var tt,et,nt,rt;return $.x-=this.x0,nt=$.x/this.a,$.y-=this.y0,tt=$.y/this.a,this.sphere?(tt/=this.C_y,nt/=this.C_x*(this.m+Math.cos(tt)),this.m?tt=Dr((this.m*tt+Math.sin(tt))/this.n):1!==this.n&&(tt=Dr(Math.sin(tt)/this.n)),nt=be(nt+this.long0),tt=Ar(tt)):(tt=hr($.y/this.a,this.es,this.en),(rt=Math.abs(tt))<wn?(rt=Math.sin(tt),et=this.long0+$.x*Math.sqrt(1-this.es*rt*rt)/(this.a*Math.cos(tt)),nt=be(et)):rt-1e-10<wn&&(nt=this.long0)),$.x=nt,$.y=tt,$},names:["Sinusoidal","sinu"]},Vr={init:function(){},forward:function($){for(var tt=$.x,et=$.y,nt=be(tt-this.long0),rt=et,it=Math.PI*Math.sin(et);;){var ot=-(rt+Math.sin(rt)-it)/(1+Math.cos(rt));if(rt+=ot,Math.abs(ot)<1e-10)break}rt/=2,Math.PI/2-Math.abs(et)<1e-10&&(nt=0);var at=.900316316158*this.a*nt*Math.cos(rt)+this.x0,Ot=1.4142135623731*this.a*Math.sin(rt)+this.y0;return $.x=at,$.y=Ot,$},inverse:function($){var tt,et;$.x-=this.x0,$.y-=this.y0,et=$.y/(1.4142135623731*this.a),Math.abs(et)>.999999999999&&(et=.999999999999),tt=Math.asin(et);var nt=be(this.long0+$.x/(.900316316158*this.a*Math.cos(tt)));nt<-Math.PI&&(nt=-Math.PI),nt>Math.PI&&(nt=Math.PI),et=(2*tt+Math.sin(2*tt))/Math.PI,Math.abs(et)>1&&(et=1);var rt=Math.asin(et);return $.x=nt,$.y=rt,$},names:["Mollweide","moll"]},Kr={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cr(this.es),this.e1=Rr(this.es),this.e2=Pr(this.es),this.e3=Ir(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=_e(this.e,this.sinphi,this.cosphi),this.ml1=jr(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=_e(this.e,this.sinphi,this.cosphi),this.ml2=jr(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=jr(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function($){var tt,et=$.x,nt=$.y;if(this.sphere)tt=this.a*(this.g-nt);else{var rt=jr(this.e0,this.e1,this.e2,this.e3,nt);tt=this.a*(this.g-rt)}var it=this.ns*be(et-this.long0),ot=this.x0+tt*Math.sin(it),at=this.y0+this.rh-tt*Math.cos(it);return $.x=ot,$.y=at,$},inverse:function($){var tt,et,nt,rt;$.x-=this.x0,$.y=this.rh-$.y+this.y0,this.ns>=0?(et=Math.sqrt($.x*$.x+$.y*$.y),tt=1):(et=-Math.sqrt($.x*$.x+$.y*$.y),tt=-1);var it=0;if(0!==et&&(it=Math.atan2(tt*$.x,tt*$.y)),this.sphere)return rt=be(this.long0+it/this.ns),nt=Ar(this.g-et/this.a),$.x=rt,$.y=nt,$;var ot=this.g-et/this.a;return nt=Lr(ot,this.e0,this.e1,this.e2,this.e3),rt=be(this.long0+it/this.ns),$.x=rt,$.y=nt,$},names:["Equidistant_Conic","eqdc"]},Hr={init:function(){this.R=this.a},forward:function($){var tt,et,nt=$.x,rt=$.y,it=be(nt-this.long0);Math.abs(rt)<=1e-10&&(tt=this.x0+this.R*it,et=this.y0);var ot=Dr(2*Math.abs(rt/Math.PI));(Math.abs(it)<=1e-10||Math.abs(Math.abs(rt)-wn)<=1e-10)&&(tt=this.x0,et=rt>=0?this.y0+Math.PI*this.R*Math.tan(.5*ot):this.y0+Math.PI*this.R*-Math.tan(.5*ot));var at=.5*Math.abs(Math.PI/it-it/Math.PI),Ot=at*at,wt=Math.sin(ot),St=Math.cos(ot),Ct=St/(wt+St-1),Rt=Ct*Ct,Tt=Ct*(2/wt-1),At=Tt*Tt,Nt=Math.PI*this.R*(at*(Ct-At)+Math.sqrt(Ot*(Ct-At)*(Ct-At)-(At+Ot)*(Rt-At)))/(At+Ot);it<0&&(Nt=-Nt),tt=this.x0+Nt;var kt=Ot+Ct;return Nt=Math.PI*this.R*(Tt*kt-at*Math.sqrt((At+Ot)*(Ot+1)-kt*kt))/(At+Ot),et=rt>=0?this.y0+Nt:this.y0-Nt,$.x=tt,$.y=et,$},inverse:function($){var tt,et,nt,rt,it,ot,at,Ot,wt,St,Ct,Rt;return $.x-=this.x0,$.y-=this.y0,Ct=Math.PI*this.R,it=(nt=$.x/Ct)*nt+(rt=$.y/Ct)*rt,Ct=3*(rt*rt/(Ot=-2*(ot=-Math.abs(rt)*(1+it))+1+2*rt*rt+it*it)+(2*(at=ot-2*rt*rt+nt*nt)*at*at/Ot/Ot/Ot-9*ot*at/Ot/Ot)/27)/(wt=(ot-at*at/3/Ot)/Ot)/(St=2*Math.sqrt(-wt/3)),Math.abs(Ct)>1&&(Ct=Ct>=0?1:-1),Rt=Math.acos(Ct)/3,et=$.y>=0?(-St*Math.cos(Rt+Math.PI/3)-at/3/Ot)*Math.PI:-(-St*Math.cos(Rt+Math.PI/3)-at/3/Ot)*Math.PI,tt=Math.abs(nt)<1e-10?this.long0:be(this.long0+Math.PI*(it-1+Math.sqrt(1+2*(nt*nt-rt*rt)+it*it))/2/nt),$.x=tt,$.y=et,$},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Qr={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function($){var tt,et,nt,rt,it,ot,at,Ot,wt,St,Ct,Rt,Tt,At,Nt,kt,Dt,Gt,Ut,Xt,Vt,Jt,ne=$.x,re=$.y,ie=Math.sin($.y),oe=Math.cos($.y),ae=be(ne-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?($.x=this.x0+this.a*(wn-re)*Math.sin(ae),$.y=this.y0-this.a*(wn-re)*Math.cos(ae),$):Math.abs(this.sin_p12+1)<=1e-10?($.x=this.x0+this.a*(wn+re)*Math.sin(ae),$.y=this.y0+this.a*(wn+re)*Math.cos(ae),$):(Gt=this.sin_p12*ie+this.cos_p12*oe*Math.cos(ae),Dt=(kt=Math.acos(Gt))?kt/Math.sin(kt):1,$.x=this.x0+this.a*Dt*oe*Math.sin(ae),$.y=this.y0+this.a*Dt*(this.cos_p12*ie-this.sin_p12*oe*Math.cos(ae)),$):(tt=Cr(this.es),et=Rr(this.es),nt=Pr(this.es),rt=Ir(this.es),Math.abs(this.sin_p12-1)<=1e-10?(it=this.a*jr(tt,et,nt,rt,wn),ot=this.a*jr(tt,et,nt,rt,re),$.x=this.x0+(it-ot)*Math.sin(ae),$.y=this.y0-(it-ot)*Math.cos(ae),$):Math.abs(this.sin_p12+1)<=1e-10?(it=this.a*jr(tt,et,nt,rt,wn),ot=this.a*jr(tt,et,nt,rt,re),$.x=this.x0+(it+ot)*Math.sin(ae),$.y=this.y0+(it+ot)*Math.cos(ae),$):(at=ie/oe,Ot=Tr(this.a,this.e,this.sin_p12),wt=Tr(this.a,this.e,ie),St=Math.atan((1-this.es)*at+this.es*Ot*this.sin_p12/(wt*oe)),Ut=0===(Ct=Math.atan2(Math.sin(ae),this.cos_p12*Math.tan(St)-this.sin_p12*Math.cos(ae)))?Math.asin(this.cos_p12*Math.sin(St)-this.sin_p12*Math.cos(St)):Math.abs(Math.abs(Ct)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(St)-this.sin_p12*Math.cos(St)):Math.asin(Math.sin(ae)*Math.cos(St)/Math.sin(Ct)),Rt=this.e*this.sin_p12/Math.sqrt(1-this.es),kt=Ot*Ut*(1-(Xt=Ut*Ut)*(Nt=(Tt=this.e*this.cos_p12*Math.cos(Ct)/Math.sqrt(1-this.es))*Tt)*(1-Nt)/6+(Vt=Xt*Ut)/8*(At=Rt*Tt)*(1-2*Nt)+(Jt=Vt*Ut)/120*(Nt*(4-7*Nt)-3*Rt*Rt*(1-7*Nt))-Jt*Ut/48*At),$.x=this.x0+kt*Math.sin(Ct),$.y=this.y0+kt*Math.cos(Ct),$))},inverse:function($){var tt,et,nt,rt,it,ot,at,Ot,wt,St,Ct,Rt,Tt,At,Nt,kt,Dt,Gt,Ut,Xt,Vt,Jt,ne;if($.x-=this.x0,$.y-=this.y0,this.sphere){if((tt=Math.sqrt($.x*$.x+$.y*$.y))>2*wn*this.a)return;return et=tt/this.a,nt=Math.sin(et),rt=Math.cos(et),it=this.long0,Math.abs(tt)<=1e-10?ot=this.lat0:(ot=Dr(rt*this.sin_p12+$.y*nt*this.cos_p12/tt),at=Math.abs(this.lat0)-wn,it=Math.abs(at)<=1e-10?this.lat0>=0?be(this.long0+Math.atan2($.x,-$.y)):be(this.long0-Math.atan2(-$.x,$.y)):be(this.long0+Math.atan2($.x*nt,tt*this.cos_p12*rt-$.y*this.sin_p12*nt))),$.x=it,$.y=ot,$}return Ot=Cr(this.es),wt=Rr(this.es),St=Pr(this.es),Ct=Ir(this.es),Math.abs(this.sin_p12-1)<=1e-10?(Rt=this.a*jr(Ot,wt,St,Ct,wn),tt=Math.sqrt($.x*$.x+$.y*$.y),ot=Lr((Rt-tt)/this.a,Ot,wt,St,Ct),it=be(this.long0+Math.atan2($.x,-1*$.y)),$.x=it,$.y=ot,$):Math.abs(this.sin_p12+1)<=1e-10?(Rt=this.a*jr(Ot,wt,St,Ct,wn),tt=Math.sqrt($.x*$.x+$.y*$.y),ot=Lr((tt-Rt)/this.a,Ot,wt,St,Ct),it=be(this.long0+Math.atan2($.x,$.y)),$.x=it,$.y=ot,$):(tt=Math.sqrt($.x*$.x+$.y*$.y),Nt=Math.atan2($.x,$.y),Tt=Tr(this.a,this.e,this.sin_p12),kt=Math.cos(Nt),Gt=-(Dt=this.e*this.cos_p12*kt)*Dt/(1-this.es),Ut=3*this.es*(1-Gt)*this.sin_p12*this.cos_p12*kt/(1-this.es),Jt=1-Gt*(Vt=(Xt=tt/Tt)-Gt*(1+Gt)*Math.pow(Xt,3)/6-Ut*(1+3*Gt)*Math.pow(Xt,4)/24)*Vt/2-Xt*Vt*Vt*Vt/6,At=Math.asin(this.sin_p12*Math.cos(Vt)+this.cos_p12*Math.sin(Vt)*kt),it=be(this.long0+Math.asin(Math.sin(Nt)*Math.sin(Vt)/Math.cos(At))),ne=Math.sin(At),ot=Math.atan2((ne-this.es*Jt*this.sin_p12)*Math.tan(At),ne*(1-this.es)),$.x=it,$.y=ot,$)},names:["Azimuthal_Equidistant","aeqd"]},Jr={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function($){var tt,et,nt,rt,it,ot,at,Ot=$.x,wt=$.y;return nt=be(Ot-this.long0),tt=Math.sin(wt),et=Math.cos(wt),rt=Math.cos(nt),((it=this.sin_p14*tt+this.cos_p14*et*rt)>0||Math.abs(it)<=1e-10)&&(ot=1*this.a*et*Math.sin(nt),at=this.y0+1*this.a*(this.cos_p14*tt-this.sin_p14*et*rt)),$.x=ot,$.y=at,$},inverse:function($){var tt,et,nt,rt,it,ot,at;return $.x-=this.x0,$.y-=this.y0,tt=Math.sqrt($.x*$.x+$.y*$.y),et=Dr(tt/this.a),nt=Math.sin(et),rt=Math.cos(et),ot=this.long0,Math.abs(tt)<=1e-10?(at=this.lat0,$.x=ot,$.y=at,$):(at=Dr(rt*this.sin_p14+$.y*nt*this.cos_p14/tt),it=Math.abs(this.lat0)-wn,Math.abs(it)<=1e-10?(ot=this.lat0>=0?be(this.long0+Math.atan2($.x,-$.y)):be(this.long0-Math.atan2(-$.x,$.y)),$.x=ot,$.y=at,$):(ot=be(this.long0+Math.atan2($.x*nt,tt*this.cos_p14*rt-$.y*this.sin_p14*nt)),$.x=ot,$.y=at,$))},names:["ortho"]};function cn($,tt,et,nt){var rt;return $<1e-10?(nt.value=1,rt=0):(rt=Math.atan2(tt,et),Math.abs(rt)<=Rn?nt.value=1:rt>Rn&&rt<=wn+Rn?(nt.value=2,rt-=wn):rt>wn+Rn||rt<=-(wn+Rn)?(nt.value=3,rt=rt>=0?rt-In:rt+In):(nt.value=4,rt+=wn)),rt}function hn($,tt){var et=$+tt;return et<-In?et+=Pn:et>+In&&(et-=Pn),et}var $r,ti={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=wn-Rn/2?this.face=5:this.lat0<=-(wn-Rn/2)?this.face=6:Math.abs(this.long0)<=Rn?this.face=1:Math.abs(this.long0)<=wn+Rn?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function($){var tt,et,nt,rt,it,ot,at={x:0,y:0},Ot={value:0};if($.x-=this.long0,tt=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan($.y)):$.y,et=$.x,5===this.face)rt=wn-tt,et>=Rn&&et<=wn+Rn?(Ot.value=1,nt=et-wn):et>wn+Rn||et<=-(wn+Rn)?(Ot.value=2,nt=et>0?et-In:et+In):et>-(wn+Rn)&&et<=-Rn?(Ot.value=3,nt=et+wn):(Ot.value=4,nt=et);else if(6===this.face)rt=wn+tt,et>=Rn&&et<=wn+Rn?(Ot.value=1,nt=-et+wn):et<Rn&&et>=-Rn?(Ot.value=2,nt=-et):et<-Rn&&et>=-(wn+Rn)?(Ot.value=3,nt=-et-wn):(Ot.value=4,nt=et>0?-et+In:-et-In);else{var wt,St,Ct,Rt,Tt,At;2===this.face?et=hn(et,+wn):3===this.face?et=hn(et,+In):4===this.face&&(et=hn(et,-wn)),Rt=Math.sin(tt),Tt=Math.cos(tt),At=Math.sin(et),wt=Tt*Math.cos(et),St=Tt*At,Ct=Rt,1===this.face?nt=cn(rt=Math.acos(wt),Ct,St,Ot):2===this.face?nt=cn(rt=Math.acos(St),Ct,-wt,Ot):3===this.face?nt=cn(rt=Math.acos(-wt),Ct,-St,Ot):4===this.face?nt=cn(rt=Math.acos(-St),Ct,wt,Ot):(rt=nt=0,Ot.value=1)}return ot=Math.atan(12/In*(nt+Math.acos(Math.sin(nt)*Math.cos(Rn))-wn)),it=Math.sqrt((1-Math.cos(rt))/(Math.cos(ot)*Math.cos(ot))/(1-Math.cos(Math.atan(1/Math.cos(nt))))),2===Ot.value?ot+=wn:3===Ot.value?ot+=In:4===Ot.value&&(ot+=1.5*In),at.x=it*Math.cos(ot),at.y=it*Math.sin(ot),at.x=at.x*this.a+this.x0,at.y=at.y*this.a+this.y0,$.x=at.x,$.y=at.y,$},inverse:function($){var tt,et,nt,rt,it,ot,at,Ot,wt,St,Ct,Rt,Tt={lam:0,phi:0},At={value:0};if($.x=($.x-this.x0)/this.a,$.y=($.y-this.y0)/this.a,et=Math.atan(Math.sqrt($.x*$.x+$.y*$.y)),tt=Math.atan2($.y,$.x),$.x>=0&&$.x>=Math.abs($.y)?At.value=1:$.y>=0&&$.y>=Math.abs($.x)?(At.value=2,tt-=wn):$.x<0&&-$.x>=Math.abs($.y)?(At.value=3,tt=tt<0?tt+In:tt-In):(At.value=4,tt+=wn),wt=In/12*Math.tan(tt),it=Math.sin(wt)/(Math.cos(wt)-1/Math.sqrt(2)),ot=Math.atan(it),(at=1-(nt=Math.cos(tt))*nt*(rt=Math.tan(et))*rt*(1-Math.cos(Math.atan(1/Math.cos(ot)))))<-1?at=-1:at>1&&(at=1),5===this.face)Ot=Math.acos(at),Tt.phi=wn-Ot,1===At.value?Tt.lam=ot+wn:2===At.value?Tt.lam=ot<0?ot+In:ot-In:3===At.value?Tt.lam=ot-wn:Tt.lam=ot;else if(6===this.face)Ot=Math.acos(at),Tt.phi=Ot-wn,1===At.value?Tt.lam=-ot+wn:2===At.value?Tt.lam=-ot:3===At.value?Tt.lam=-ot-wn:Tt.lam=ot<0?-ot-In:-ot+In;else{var Nt,kt,Dt;wt=(Nt=at)*Nt,kt=(wt+=(Dt=wt>=1?0:Math.sqrt(1-wt)*Math.sin(ot))*Dt)>=1?0:Math.sqrt(1-wt),2===At.value?(wt=kt,kt=-Dt,Dt=wt):3===At.value?(kt=-kt,Dt=-Dt):4===At.value&&(wt=kt,kt=Dt,Dt=-wt),2===this.face?(wt=Nt,Nt=-kt,kt=wt):3===this.face?(Nt=-Nt,kt=-kt):4===this.face&&(wt=Nt,Nt=kt,kt=-wt),Tt.phi=Math.acos(-Dt)-wn,Tt.lam=Math.atan2(kt,Nt),2===this.face?Tt.lam=hn(Tt.lam,-wn):3===this.face?Tt.lam=hn(Tt.lam,-In):4===this.face&&(Tt.lam=hn(Tt.lam,+wn))}return 0!==this.es&&(St=Tt.phi<0?1:0,Ct=Math.tan(Tt.phi),Rt=this.b/Math.sqrt(Ct*Ct+this.one_minus_f_squared),Tt.phi=Math.atan(Math.sqrt(this.a*this.a-Rt*Rt)/(this.one_minus_f*Rt)),St&&(Tt.phi=-Tt.phi)),Tt.lam+=this.long0,$.x=Tt.lam,$.y=Tt.phi,$},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},ei=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ni=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],yn=function($,tt){return $[0]+tt*($[1]+tt*($[2]+tt*$[3]))},ri={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function($){var tt=be($.x-this.long0),et=Math.abs($.y),nt=Math.floor(11.459155902616464*et);nt<0?nt=0:nt>=18&&(nt=17);var rt={x:yn(ei[nt],et=En*(et-.08726646259971647*nt))*tt,y:yn(ni[nt],et)};return $.y<0&&(rt.y=-rt.y),rt.x=rt.x*this.a*.8487+this.x0,rt.y=rt.y*this.a*1.3523+this.y0,rt},inverse:function($){var tt={x:($.x-this.x0)/(.8487*this.a),y:Math.abs($.y-this.y0)/(1.3523*this.a)};if(tt.y>=1)tt.x/=ei[18][0],tt.y=$.y<0?-wn:wn;else{var et=Math.floor(18*tt.y);for(et<0?et=0:et>=18&&(et=17);;)if(ni[et][0]>tt.y)--et;else{if(!(ni[et+1][0]<=tt.y))break;++et}var nt=ni[et],rt=5*(tt.y-nt[0])/(ni[et+1][0]-nt[0]);rt=function($,tt,et,nt){for(var rt=tt;nt;--nt){var it=$(rt);if(rt-=it,Math.abs(it)<1e-10)break}return rt}((function($){return(yn(nt,$)-tt.y)/function($,tt){return $[1]+tt*(2*$[2]+3*tt*$[3])}(nt,$)}),rt,0,100),tt.x/=yn(ei[et],rt),tt.y=(5*et+rt)*Sn,$.y<0&&(tt.y=-tt.y)}return tt.x=be(tt.x+this.long0),tt},names:["Robinson","robin"]},ii={init:function(){this.name="geocent"},forward:function($){return Fe($,this.es,this.a)},inverse:function($){return Ne($,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},oi={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},ai={init:function(){if(Object.keys(oi).forEach(function($){if(void 0===this[$])this[$]=oi[$].def;else{if(oi[$].num&&isNaN(this[$]))throw new Error("Invalid parameter value, must be numeric "+$+" = "+this[$]);oi[$].num&&(this[$]=parseFloat(this[$]))}oi[$].degrees&&(this[$]=this[$]*Sn)}.bind(this)),Math.abs(Math.abs(this.lat0)-wn)<1e-10?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<1e-10?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var $=this.tilt,tt=this.azi;this.cg=Math.cos(tt),this.sg=Math.sin(tt),this.cw=Math.cos($),this.sw=Math.sin($)},forward:function($){$.x-=this.long0;var tt,et,nt,rt,it=Math.sin($.y),ot=Math.cos($.y),at=Math.cos($.x);switch(this.mode){case 3:et=this.sinph0*it+this.cosph0*ot*at;break;case 2:et=ot*at;break;case 1:et=-it;break;case 0:et=it}switch(tt=(et=this.pn1/(this.p-et))*ot*Math.sin($.x),this.mode){case 3:et*=this.cosph0*it-this.sinph0*ot*at;break;case 2:et*=it;break;case 0:et*=-ot*at;break;case 1:et*=ot*at}return rt=1/((nt=et*this.cg+tt*this.sg)*this.sw*this.h1+this.cw),tt=(tt*this.cg-et*this.sg)*this.cw*rt,et=nt*rt,$.x=tt*this.a,$.y=et*this.a,$},inverse:function($){$.x/=this.a,$.y/=this.a;var tt,et,nt,rt={x:$.x,y:$.y};nt=1/(this.pn1-$.y*this.sw),tt=this.pn1*$.x*nt,et=this.pn1*$.y*this.cw*nt,$.x=tt*this.cg+et*this.sg,$.y=et*this.cg-tt*this.sg;var it=fr($.x,$.y);if(Math.abs(it)<1e-10)rt.x=0,rt.y=$.y;else{var ot,at;switch(at=1-it*it*this.pfact,at=(this.p-Math.sqrt(at))/(this.pn1/it+it/this.pn1),ot=Math.sqrt(1-at*at),this.mode){case 3:rt.y=Math.asin(ot*this.sinph0+$.y*at*this.cosph0/it),$.y=(ot-this.sinph0*Math.sin(rt.y))*it,$.x*=at*this.cosph0;break;case 2:rt.y=Math.asin($.y*at/it),$.y=ot*it,$.x*=at;break;case 0:rt.y=Math.asin(ot),$.y=-$.y;break;case 1:rt.y=-Math.asin(ot)}rt.x=Math.atan2($.x,$.y)}return $.x=rt.x+this.long0,$.y=rt.y,$},names:["Tilted_Perspective","tpers"]};qe.defaultDatum="WGS84",qe.Proj=Hn,qe.WGS84=new qe.Proj("WGS84"),qe.Point=sr,qe.toPoint=ze,qe.defs=zn,qe.transform=Ye,qe.mgrs=ar,qe.version="__VERSION__",($r=qe).Proj.projections.add(_r),$r.Proj.projections.add(vr),$r.Proj.projections.add(br),$r.Proj.projections.add(xr),$r.Proj.projections.add(wr),$r.Proj.projections.add(Sr),$r.Proj.projections.add(Er),$r.Proj.projections.add(Mr),$r.Proj.projections.add(Fr),$r.Proj.projections.add(kr),$r.Proj.projections.add(Gr),$r.Proj.projections.add(zr),$r.Proj.projections.add(Ur),$r.Proj.projections.add(Yr),$r.Proj.projections.add(Br),$r.Proj.projections.add(Wr),$r.Proj.projections.add(Xr),$r.Proj.projections.add(qr),$r.Proj.projections.add(Zr),$r.Proj.projections.add(Vr),$r.Proj.projections.add(Kr),$r.Proj.projections.add(Hr),$r.Proj.projections.add(Qr),$r.Proj.projections.add(Jr),$r.Proj.projections.add(ti),$r.Proj.projections.add(ri),$r.Proj.projections.add(ii),$r.Proj.projections.add(ai);var si=qe;function Mn($){return jn.apply(this,arguments)}function jn(){return(jn=Ve()(Re.a.mark((function t($){var tt,et,nt,rt,it,ot,at,Ot,wt;return Re.a.wrap((function(St){for(;;)switch(St.prev=St.next){case 0:return St.next=2,fetch("https://epsg.io/?format=json&q="+$);case 2:return tt=St.sent,St.next=5,tt.json();case 5:if(et=St.sent,!((nt=et.results)&&nt.length>0)){St.next=20;break}rt=0,it=nt.length;case 9:if(!(rt<it)){St.next=20;break}if(!(ot=nt[rt])){St.next=17;break}if(at=ot.code,Ot=ot.proj4,wt=ot.bbox,!(at&&at.length>0&&Ot&&Ot.length>0&&wt&&4==wt.length)){St.next=17;break}return St.abrupt("return",{name:"EPSG:"+at,proj4def:Ot,bbox:wt});case 17:rt++,St.next=9;break;case 20:case"end":return St.stop()}}),t)})))).apply(this,arguments)}function Cn($,tt,et){si.defs($,tt),function($){var tt,et,nt=Object.keys($.defs),rt=nt.length;for(tt=0;tt<rt;++tt){var it=nt[tt];if(!Object(_n.k)(it)){var ot=$.defs(it),at=ot.units;at||"longlat"!==ot.projName||(at=mn.default.DEGREES),Object(_n.d)(new vn.a({code:it,axisOrientation:ot.axis,metersPerUnit:ot.to_meter,units:at}))}}for(tt=0;tt<rt;++tt){var Ot=nt[tt],wt=Object(_n.k)(Ot);for(et=0;et<rt;++et){var St=nt[et],Ct=Object(_n.k)(St);if(!Object(On.c)(Ot,St)){var Rt=$.defs(Ot),Tt=$.defs(St);if(Rt===Tt)Object(_n.c)([wt,Ct]);else{var At=$(Object(bn.a)({},Rt,{axis:void 0}),Object(bn.a)({},Tt,{axis:void 0}));Object(_n.b)(wt,Ct,Object(_n.f)(wt,Ct,At.forward),Object(_n.f)(Ct,wt,At.inverse))}}}}}(si);var nt=Object(_n.k)($),rt=Object(_n.m)("EPSG:4326",nt),it=[et[1],et[2],et[3],et[0]];nt.setWorldExtent(it),et[1]>et[3]&&(it=[et[1],et[2],et[3]+360,et[0]]);var ot=Object(gn.a)(it,rt,void 0,8);nt.setExtent(ot)}var ci=et(41),ui="preload",hi="useInterimTilesOnError",li=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),pi=function($){function e(tt){var et=this,nt=tt||{},rt=Object(bn.a)({},nt);return delete rt.preload,delete rt.useInterimTilesOnError,(et=$.call(this,rt)||this).setPreload(void 0!==nt.preload?nt.preload:0),et.setUseInterimTilesOnError(void 0===nt.useInterimTilesOnError||nt.useInterimTilesOnError),et}return li(e,$),e.prototype.getPreload=function(){return this.get(ui)},e.prototype.setPreload=function($){this.set(ui,$)},e.prototype.getUseInterimTilesOnError=function(){return this.get(hi)},e.prototype.setUseInterimTilesOnError=function($){this.set(hi,$)},e}(ci.a),fi=et(8),di=et(13),yi=et(104),gi=et(36),_i=et(2),vi=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),mi=function($){function e(tt){var et=$.call(this)||this;return et.boundHandleImageChange_=et.handleImageChange_.bind(et),et.layer_=tt,et.declutterExecutorGroup=null,et}return vi(e,$),e.prototype.getFeatures=function($){return Object(_i.b)()},e.prototype.prepareFrame=function($){return Object(_i.b)()},e.prototype.renderFrame=function($,tt){return Object(_i.b)()},e.prototype.loadedTileCallback=function($,tt,et){$[tt]||($[tt]={}),$[tt][et.tileCoord.toString()]=et},e.prototype.createLoadedTileFinder=function($,tt,et){return function(nt,rt){var it=this.loadedTileCallback.bind(this,et,nt);return $.forEachLoadedTile(tt,nt,rt,it)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function($,tt,et,nt,rt){},e.prototype.getDataAtPixel=function($,tt,et){return Object(_i.b)()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function($){$.target.getState()===di.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function($){var tt=$.getState();return tt!=di.a.LOADED&&tt!=di.a.ERROR&&$.addEventListener(fi.a.CHANGE,this.boundHandleImageChange_),tt==di.a.IDLE&&($.load(),tt=$.getState()),tt==di.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var $=this.getLayer();$.getVisible()&&$.getSourceState()==gi.a.READY&&$.changed()},e}(yi.a),bi=et(110),Oi=et(48),xi=et(11),wi=et(6),Si=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ei=function($){function e(tt){var et=$.call(this,tt)||this;return et.container=null,et.renderedResolution,et.tempTransform=Object(xi.c)(),et.pixelTransform=Object(xi.c)(),et.inversePixelTransform=Object(xi.c)(),et.context=null,et.containerReused=!1,et}return Si(e,$),e.prototype.useContainer=function($,tt,et){var nt,rt,it=this.getLayer().getClassName();if($&&""===$.style.opacity&&$.className===it&&(at=$.firstElementChild)instanceof HTMLCanvasElement&&(rt=at.getContext("2d")),!rt||0!==rt.canvas.width&&rt.canvas.style.transform!==tt?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=$,this.context=rt,this.containerReused=!0),!this.container){(nt=document.createElement("div")).className=it;var ot=nt.style;ot.position="absolute",ot.width="100%",ot.height="100%";var at=(rt=Object(Ke.a)()).canvas;nt.appendChild(at),(ot=at.style).position="absolute",ot.left="0",ot.transformOrigin="top left",this.container=nt,this.context=rt}},e.prototype.clip=function($,tt,et){var nt=tt.pixelRatio,rt=tt.size[0]*nt/2,it=tt.size[1]*nt/2,ot=tt.viewState.rotation,at=Object(gn.C)(et),Ot=Object(gn.D)(et),wt=Object(gn.w)(et),St=Object(gn.v)(et);Object(xi.a)(tt.coordinateToPixelTransform,at),Object(xi.a)(tt.coordinateToPixelTransform,Ot),Object(xi.a)(tt.coordinateToPixelTransform,wt),Object(xi.a)(tt.coordinateToPixelTransform,St),$.save(),Object(wi.t)($,-ot,rt,it),$.beginPath(),$.moveTo(at[0]*nt,at[1]*nt),$.lineTo(Ot[0]*nt,Ot[1]*nt),$.lineTo(wt[0]*nt,wt[1]*nt),$.lineTo(St[0]*nt,St[1]*nt),$.clip(),Object(wi.t)($,ot,rt,it)},e.prototype.clipUnrotated=function($,tt,et){var nt=Object(gn.C)(et),rt=Object(gn.D)(et),it=Object(gn.w)(et),ot=Object(gn.v)(et);Object(xi.a)(tt.coordinateToPixelTransform,nt),Object(xi.a)(tt.coordinateToPixelTransform,rt),Object(xi.a)(tt.coordinateToPixelTransform,it),Object(xi.a)(tt.coordinateToPixelTransform,ot);var at=this.inversePixelTransform;Object(xi.a)(at,nt),Object(xi.a)(at,rt),Object(xi.a)(at,it),Object(xi.a)(at,ot),$.save(),$.beginPath(),$.moveTo(Math.round(nt[0]),Math.round(nt[1])),$.lineTo(Math.round(rt[0]),Math.round(rt[1])),$.lineTo(Math.round(it[0]),Math.round(it[1])),$.lineTo(Math.round(ot[0]),Math.round(ot[1])),$.clip()},e.prototype.dispatchRenderEvent_=function($,tt,et){var nt=this.getLayer();if(nt.hasListener($)){var rt=new bi.a($,this.inversePixelTransform,et,tt);nt.dispatchEvent(rt)}},e.prototype.preRender=function($,tt){this.dispatchRenderEvent_(Oi.a.PRERENDER,$,tt)},e.prototype.postRender=function($,tt){this.dispatchRenderEvent_(Oi.a.POSTRENDER,$,tt)},e.prototype.getRenderTransform=function($,tt,et,nt,rt,it,ot){var at=rt/2,Ot=it/2,wt=nt/tt,St=-wt,Ct=-$[0]+ot,Rt=-$[1];return Object(xi.b)(this.tempTransform,at,Ot,wt,St,-et,Ct,Rt)},e.prototype.getDataAtPixel=function($,tt,et){var nt,rt=Object(xi.a)(this.inversePixelTransform,$.slice()),it=this.context,ot=this.getLayer().getExtent();if(ot){var at=Object(xi.a)(tt.pixelToCoordinateTransform,$.slice());if(!Object(gn.f)(ot,at))return null}try{var Ot=Math.round(rt[0]),wt=Math.round(rt[1]),St=document.createElement("canvas"),Ct=St.getContext("2d");St.width=1,St.height=1,Ct.clearRect(0,0,1,1),Ct.drawImage(it.canvas,Ot,wt,1,1,0,0,1,1),nt=Ct.getImageData(0,0,1,1).data}catch($){return"SecurityError"===$.name?new Uint8Array:nt}return 0===nt[3]?null:nt},e}(mi),Mi=et(70),ji=et(12),Ci=et(10),Ri=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ti=function($){function e(tt){var et=$.call(this,tt)||this;return et.extentChanged=!0,et.renderedExtent_=null,et.renderedPixelRatio,et.renderedProjection=null,et.renderedRevision,et.renderedTiles=[],et.newTiles_=!1,et.tmpExtent=Object(gn.j)(),et.tmpTileRange_=new Mi.b(0,0,0,0),et}return Ri(e,$),e.prototype.isDrawableTile=function($){var tt=this.getLayer(),et=$.getState(),nt=tt.getUseInterimTilesOnError();return et==ji.a.LOADED||et==ji.a.EMPTY||et==ji.a.ERROR&&!nt},e.prototype.getTile=function($,tt,et,nt){var rt=nt.pixelRatio,it=nt.viewState.projection,ot=this.getLayer(),at=ot.getSource().getTile($,tt,et,rt,it);return at.getState()==ji.a.ERROR&&(ot.getUseInterimTilesOnError()?ot.getPreload()>0&&(this.newTiles_=!0):at.setState(ji.a.LOADED)),this.isDrawableTile(at)||(at=at.getInterimTile()),at},e.prototype.loadedTileCallback=function(tt,et,nt){return!!this.isDrawableTile(nt)&&$.prototype.loadedTileCallback.call(this,tt,et,nt)},e.prototype.prepareFrame=function($){return!!this.getLayer().getSource()},e.prototype.renderFrame=function($,tt){var et=$.layerStatesArray[$.layerIndex],nt=$.viewState,rt=nt.projection,it=nt.resolution,ot=nt.center,at=nt.rotation,Ot=$.pixelRatio,wt=this.getLayer(),St=wt.getSource(),Ct=St.getRevision(),Rt=St.getTileGridForProjection(rt),Tt=Rt.getZForResolution(it,St.zDirection),At=Rt.getResolution(Tt),Nt=$.extent,kt=et.extent&&Object(_n.j)(et.extent,rt);kt&&(Nt=Object(gn.B)(Nt,Object(_n.j)(et.extent,rt)));var Dt=St.getTilePixelRatio(Ot),Gt=Math.round($.size[0]*Dt),Ut=Math.round($.size[1]*Dt);if(at){var Xt=Math.round(Math.sqrt(Gt*Gt+Ut*Ut));Gt=Xt,Ut=Xt}var Vt=At*Gt/2/Dt,Jt=At*Ut/2/Dt,ne=[ot[0]-Vt,ot[1]-Jt,ot[0]+Vt,ot[1]+Jt],re=Rt.getTileRangeForExtentAndZ(Nt,Tt),ie={};ie[Tt]={};var oe=this.createLoadedTileFinder(St,rt,ie),ae=this.tmpExtent,fe=this.tmpTileRange_;this.newTiles_=!1;for(var de=re.minX;de<=re.maxX;++de)for(var ye=re.minY;ye<=re.maxY;++ye){var Se=this.getTile(Tt,de,ye,$);if(this.isDrawableTile(Se)){var Ee=Object(_i.c)(this);if(Se.getState()==ji.a.LOADED){ie[Tt][Se.tileCoord.toString()]=Se;var Me=Se.inTransition(Ee);this.newTiles_||!Me&&-1!==this.renderedTiles.indexOf(Se)||(this.newTiles_=!0)}if(1===Se.getAlpha(Ee,$.time))continue}var Ce=Rt.getTileCoordChildTileRange(Se.tileCoord,fe,ae),Re=!1;Ce&&(Re=oe(Tt+1,Ce)),Re||Rt.forEachTileCoordParentTileRange(Se.tileCoord,oe,fe,ae)}var Pe=At/it;Object(xi.b)(this.pixelTransform,$.size[0]/2,$.size[1]/2,1/Dt,1/Dt,at,-Gt/2,-Ut/2);var Ie=Object(wi.b)(this.pixelTransform);this.useContainer(tt,Ie,et.opacity);var Le=this.context,Be=Le.canvas;Object(xi.d)(this.inversePixelTransform,this.pixelTransform),Object(xi.b)(this.tempTransform,Gt/2,Ut/2,Pe,Pe,0,-Gt/2,-Ut/2),Be.width!=Gt||Be.height!=Ut?(Be.width=Gt,Be.height=Ut):this.containerReused||Le.clearRect(0,0,Gt,Ut),kt&&this.clipUnrotated(Le,$,kt),Object(bn.a)(Le,St.getContextOptions()),this.preRender(Le,$),this.renderedTiles.length=0;var Ze,Ve,Ke,tn=Object.keys(ie).map(Number);tn.sort(Ci.i),1!==et.opacity||this.containerReused&&!St.getOpaque($.viewState.projection)?(Ze=[],Ve=[]):tn=tn.reverse();for(var en=tn.length-1;en>=0;--en){var nn=tn[en],rn=St.getTilePixelSize(nn,Ot,rt),on=Rt.getResolution(nn)/At,an=rn[0]*on*Pe,sn=rn[1]*on*Pe,un=Rt.getTileCoordForCoordAndZ(Object(gn.C)(ne),nn),ln=Rt.getTileCoordExtent(un),pn=Object(xi.a)(this.tempTransform,[Dt*(ln[0]-ne[0])/At,Dt*(ne[3]-ln[3])/At]),fn=Dt*St.getGutterForProjection(rt),dn=ie[nn];for(var vn in dn){var mn=(Se=dn[vn]).tileCoord,On=pn[0]-(un[1]-mn[1])*an,xn=Math.round(On+an),wn=pn[1]-(un[2]-mn[2])*sn,Sn=Math.round(wn+sn),En=xn-(de=Math.round(On)),Rn=Sn-(ye=Math.round(wn)),Pn=Tt===nn;if(!(Me=Pn&&1!==Se.getAlpha(Object(_i.c)(this),$.time)))if(Ze){Le.save(),Ke=[de,ye,de+En,ye,de+En,ye+Rn,de,ye+Rn];for(var In=0,Tn=Ze.length;In<Tn;++In)if(Tt!==nn&&nn<Ve[In]){var An=Ze[In];Le.beginPath(),Le.moveTo(Ke[0],Ke[1]),Le.lineTo(Ke[2],Ke[3]),Le.lineTo(Ke[4],Ke[5]),Le.lineTo(Ke[6],Ke[7]),Le.moveTo(An[6],An[7]),Le.lineTo(An[4],An[5]),Le.lineTo(An[2],An[3]),Le.lineTo(An[0],An[1]),Le.clip()}Ze.push(Ke),Ve.push(nn)}else Le.clearRect(de,ye,En,Rn);this.drawTileImage(Se,$,de,ye,En,Rn,fn,Pn,et.opacity),Ze&&!Me&&Le.restore(),this.renderedTiles.push(Se),this.updateUsedTiles($.usedTiles,St,Se)}}return this.renderedRevision=Ct,this.renderedResolution=At,this.extentChanged=!this.renderedExtent_||!Object(gn.p)(this.renderedExtent_,ne),this.renderedExtent_=ne,this.renderedPixelRatio=Ot,this.renderedProjection=rt,this.manageTilePyramid($,St,Rt,Ot,rt,Nt,Tt,wt.getPreload()),this.scheduleExpireCache($,St),this.postRender(Le,$),et.extent&&Le.restore(),Ie!==Be.style.transform&&(Be.style.transform=Ie),this.container},e.prototype.drawTileImage=function($,tt,et,nt,rt,it,ot,at,Ot){var wt=this.getTileImage($);if(wt){var St=Object(_i.c)(this),Ct=at?$.getAlpha(St,tt.time):1,Rt=Ot*Ct,Tt=Rt!==this.context.globalAlpha;Tt&&(this.context.save(),this.context.globalAlpha=Rt),this.context.drawImage(wt,ot,ot,wt.width-2*ot,wt.height-2*ot,et,nt,rt,it),Tt&&this.context.restore(),1!==Ct?tt.animate=!0:at&&$.endTransition(St)}},e.prototype.getImage=function(){var $=this.context;return $?$.canvas:null},e.prototype.getTileImage=function($){return $.getImage()},e.prototype.scheduleExpireCache=function($,tt){if(tt.canExpireCache()){var et=function($,tt,et){var nt=Object(_i.c)($);nt in et.usedTiles&&$.expireCache(et.viewState.projection,et.usedTiles[nt])}.bind(null,tt);$.postRenderFunctions.push(et)}},e.prototype.updateUsedTiles=function($,tt,et){var nt=Object(_i.c)(tt);nt in $||($[nt]={}),$[nt][et.getKey()]=!0},e.prototype.manageTilePyramid=function($,tt,et,nt,rt,it,ot,at,Ot){var wt=Object(_i.c)(tt);wt in $.wantedTiles||($.wantedTiles[wt]={});var St,Ct,Rt,Tt,At,Nt,kt=$.wantedTiles[wt],Dt=$.tileQueue,Gt=0;for(Nt=et.getMinZoom();Nt<=ot;++Nt)for(Ct=et.getTileRangeForExtentAndZ(it,Nt,Ct),Rt=et.getResolution(Nt),Tt=Ct.minX;Tt<=Ct.maxX;++Tt)for(At=Ct.minY;At<=Ct.maxY;++At)ot-Nt<=at?(++Gt,(St=tt.getTile(Nt,Tt,At,nt,rt)).getState()==ji.a.IDLE&&(kt[St.getKey()]=!0,Dt.isKeyQueued(St.getKey())||Dt.enqueue([St,wt,et.getTileCoordCenter(St.tileCoord),Rt])),void 0!==Ot&&Ot(St)):tt.useTile(Nt,Tt,At,rt);tt.updateCacheSize(Gt,rt)},e}(Ei);Ti.prototype.getLayer;var Li=Ti,Fi=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ni=function($){function e(tt){return $.call(this,tt)||this}return Fi(e,$),e.prototype.createRenderer=function(){return new Li(this)},e}(pi),ki=et(79),Di="KVP",Gi=et(59),zi=et(90),Ui=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Yi=function($){function e(tt){var et=$.call(this,{extent:tt.extent,origin:tt.origin,origins:tt.origins,resolutions:tt.resolutions,tileSize:tt.tileSize,tileSizes:tt.tileSizes,sizes:tt.sizes})||this;return et.matrixIds_=tt.matrixIds,et}return Ui(e,$),e.prototype.getMatrixId=function($){return this.matrixIds_[$]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(zi.a),Bi=Yi,Wi=et(71),Xi=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),qi=function($){function e(tt){var et=this,nt=void 0!==tt.requestEncoding?tt.requestEncoding:Di,rt=tt.tileGrid,it=tt.urls;return void 0===it&&void 0!==tt.url&&(it=Object(Wi.c)(tt.url)),(et=$.call(this,{attributions:tt.attributions,cacheSize:tt.cacheSize,crossOrigin:tt.crossOrigin,imageSmoothing:tt.imageSmoothing,projection:tt.projection,reprojectionErrorThreshold:tt.reprojectionErrorThreshold,tileClass:tt.tileClass,tileGrid:rt,tileLoadFunction:tt.tileLoadFunction,tilePixelRatio:tt.tilePixelRatio,urls:it,wrapX:void 0!==tt.wrapX&&tt.wrapX,transition:tt.transition})||this).version_=void 0!==tt.version?tt.version:"1.0.0",et.format_=void 0!==tt.format?tt.format:"image/jpeg",et.dimensions_=void 0!==tt.dimensions?tt.dimensions:{},et.layer_=tt.layer,et.matrixSet_=tt.matrixSet,et.style_=tt.style,et.requestEncoding_=nt,et.setKey(et.getKeyForDimensions_()),it&&it.length>0&&(et.tileUrlFunction=Object(Wi.b)(it.map(et.createFromWMTSTemplate.bind(et)))),et}return Xi(e,$),e.prototype.setUrls=function($){this.urls=$;var tt=$.join("\n");this.setTileUrlFunction(Object(Wi.b)($.map(this.createFromWMTSTemplate.bind(this))),tt)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var $=0,tt=[];for(var et in this.dimensions_)tt[$++]=et+"-"+this.dimensions_[et];return tt.join("/")},e.prototype.updateDimensions=function($){Object(bn.a)(this.dimensions_,$),this.setKey(this.getKeyForDimensions_())},e.prototype.createFromWMTSTemplate=function($){var tt=this.requestEncoding_,et={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};tt==Di&&Object(bn.a)(et,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),$=tt==Di?Object(Gi.a)($,et):$.replace(/\{(\w+?)\}/g,(function($,tt){return tt.toLowerCase()in et?et[tt.toLowerCase()]:$}));var nt=this.tileGrid,rt=this.dimensions_;return function(et,it,ot){if(et){var at={TileMatrix:nt.getMatrixId(et[0]),TileCol:et[1],TileRow:et[2]};Object(bn.a)(at,rt);var Ot=$;return tt==Di?Object(Gi.a)(Ot,at):Ot.replace(/\{(\w+?)\}/g,(function($,tt){return at[tt]}))}}},e}(ki.a),Zi=et(53),Vi=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ki=function($){function e(tt){var et=tt||{},nt=void 0!==et.projection?et.projection:"EPSG:3857",rt=void 0!==et.tileGrid?et.tileGrid:Object(Zi.a)({extent:Object(Zi.b)(nt),maxResolution:et.maxResolution,maxZoom:et.maxZoom,minZoom:et.minZoom,tileSize:et.tileSize});return $.call(this,{attributions:et.attributions,cacheSize:et.cacheSize,crossOrigin:et.crossOrigin,imageSmoothing:et.imageSmoothing,opaque:et.opaque,projection:nt,reprojectionErrorThreshold:et.reprojectionErrorThreshold,tileGrid:rt,tileLoadFunction:et.tileLoadFunction,tilePixelRatio:et.tilePixelRatio,tileUrlFunction:et.tileUrlFunction,url:et.url,urls:et.urls,wrapX:void 0===et.wrapX||et.wrapX,transition:et.transition,attributionsCollapsible:et.attributionsCollapsible,zDirection:et.zDirection})||this}return Vi(e,$),e}(ki.a),Ji=et(134),$i=et(132),to=et(17),eo=et(9),lo=et(7),_o=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),vo=function($){function e(tt){var et=$.call(this)||this;if(et.id_=void 0,et.geometryName_="geometry",et.style_=null,et.styleFunction_=void 0,et.geometryChangeKey_=null,et.addEventListener(Object(to.b)(et.geometryName_),et.handleGeometryChanged_),tt)if("function"==typeof tt.getSimplifiedGeometry){var nt=tt;et.setGeometry(nt)}else{var rt=tt;et.setProperties(rt)}return et}return _o(e,$),e.prototype.clone=function(){var $=new e(this.hasProperties()?this.getProperties():null);$.setGeometryName(this.getGeometryName());var tt=this.getGeometry();tt&&$.setGeometry(tt.clone());var et=this.getStyle();return et&&$.setStyle(et),$},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(lo.c)(this.geometryChangeKey_),this.geometryChangeKey_=null);var $=this.getGeometry();$&&(this.geometryChangeKey_=Object(lo.a)($,fi.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function($){this.set(this.geometryName_,$)},e.prototype.setStyle=function($){this.style_=$,this.styleFunction_=$?function($){return"function"==typeof $?$:(Array.isArray($)?tt=$:(Object(eo.a)("function"==typeof $.getZIndex,41),tt=[$]),function(){return tt});var tt}($):void 0,this.changed()},e.prototype.setId=function($){this.id_=$,this.changed()},e.prototype.setGeometryName=function($){this.removeEventListener(Object(to.b)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=$,this.addEventListener(Object(to.b)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(to.a),bo=et(15),Oo=et(3),xo=et(33),wo=et(37),So=et(38),Eo=et(44),Mo=et(109),Po=et(31),Io=et(5);function Pi($,tt,et,nt,rt,it,ot){var at,Ot,wt=(et-tt)/nt;if(1===wt)at=tt;else if(2===wt)at=tt,Ot=rt;else if(0!==wt){for(var St=$[tt],Ct=$[tt+1],Rt=0,Tt=[0],At=tt+nt;At<et;At+=nt){var Nt=$[At],kt=$[At+1];Rt+=Math.sqrt((Nt-St)*(Nt-St)+(kt-Ct)*(kt-Ct)),Tt.push(Rt),St=Nt,Ct=kt}var Dt=rt*Rt,Gt=Object(Ci.a)(Tt,Dt);Gt<0?(Ot=(Dt-Tt[-Gt-2])/(Tt[-Gt-1]-Tt[-Gt-2]),at=tt+(-Gt-2)*nt):at=tt+Gt*nt}var Ut=ot>1?ot:2,Xt=it||new Array(Ut);for(At=0;At<Ut;++At)Xt[At]=void 0===at?NaN:void 0===Ot?$[at+At]:Object(Io.c)($[at+At],$[at+nt+At],Ot);return Xt}function Ii($,tt,et,nt,rt,it){if(et==tt)return null;var ot;if(rt<$[tt+nt-1])return it?((ot=$.slice(tt,tt+nt))[nt-1]=rt,ot):null;if($[et-1]<rt)return it?((ot=$.slice(et-nt,et))[nt-1]=rt,ot):null;if(rt==$[tt+nt-1])return $.slice(tt,tt+nt);for(var at=tt/nt,Ot=et/nt;at<Ot;){var wt=at+Ot>>1;rt<$[(wt+1)*nt-1]?Ot=wt:at=wt+1}var St=$[at*nt-1];if(rt==St)return $.slice((at-1)*nt,(at-1)*nt+nt);var Ct=(rt-St)/($[(at+1)*nt-1]-St);ot=[];for(var Rt=0;Rt<nt-1;++Rt)ot.push(Object(Io.c)($[(at-1)*nt+Rt],$[at*nt+Rt],Ct));return ot.push(rt),ot}var To=et(63);function Ai($,tt,et,nt){for(var rt=$[tt],it=$[tt+1],ot=0,at=tt+nt;at<et;at+=nt){var Ot=$[at],wt=$[at+1];ot+=Math.sqrt((Ot-rt)*(Ot-rt)+(wt-it)*(wt-it)),rt=Ot,it=wt}return ot}var Ao=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Lo=function($){function e(tt,et){var nt=$.call(this)||this;return nt.flatMidpoint_=null,nt.flatMidpointRevision_=-1,nt.maxDelta_=-1,nt.maxDeltaRevision_=-1,void 0===et||Array.isArray(tt[0])?nt.setCoordinates(tt,et):nt.setFlatCoordinates(et,tt),nt}return Ao(e,$),e.prototype.appendCoordinate=function($){this.flatCoordinates?Object(Ci.c)(this.flatCoordinates,$):this.flatCoordinates=$.slice(),this.changed()},e.prototype.clone=function(){var $=new e(this.flatCoordinates.slice(),this.layout);return $.applyProperties(this),$},e.prototype.closestPointXY=function($,tt,et,nt){return nt<Object(gn.e)(this.getExtent(),$,tt)?nt:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(wo.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(wo.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,$,tt,et,nt))},e.prototype.forEachSegment=function($){return Object(Mo.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,$)},e.prototype.getCoordinateAtM=function($,tt){if(this.layout!=bo.a.XYM&&this.layout!=bo.a.XYZM)return null;var et=void 0!==tt&&tt;return Ii(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,$,et)},e.prototype.getCoordinates=function(){return Object(Po.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function($,tt){return Pi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,$,tt,this.stride)},e.prototype.getLength=function(){return Ai(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function($){var tt=[];return tt.length=Object(Eo.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,$,tt,0),new e(tt,bo.a.XY)},e.prototype.getType=function(){return Oo.a.LINE_STRING},e.prototype.intersectsExtent=function($){return Object(To.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,$)},e.prototype.setCoordinates=function($,tt){this.setLayout(tt,$,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(So.b)(this.flatCoordinates,0,$,this.stride),this.changed()},e}(xo.a),Fo=et(89),No=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ko=function($){function e(tt,et,nt){var rt=$.call(this)||this;if(rt.ends_=[],rt.maxDelta_=-1,rt.maxDeltaRevision_=-1,Array.isArray(tt[0]))rt.setCoordinates(tt,et);else if(void 0!==et&&nt)rt.setFlatCoordinates(et,tt),rt.ends_=nt;else{for(var it=rt.getLayout(),ot=tt,at=[],Ot=[],wt=0,St=ot.length;wt<St;++wt){var Ct=ot[wt];0===wt&&(it=Ct.getLayout()),Object(Ci.c)(at,Ct.getFlatCoordinates()),Ot.push(at.length)}rt.setFlatCoordinates(it,at),rt.ends_=Ot}return rt}return No(e,$),e.prototype.appendLineString=function($){this.flatCoordinates?Object(Ci.c)(this.flatCoordinates,$.getFlatCoordinates().slice()):this.flatCoordinates=$.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var $=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return $.applyProperties(this),$},e.prototype.closestPointXY=function($,tt,et,nt){return nt<Object(gn.e)(this.getExtent(),$,tt)?nt:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(wo.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(wo.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,$,tt,et,nt))},e.prototype.getCoordinateAtM=function($,tt,et){if(this.layout!=bo.a.XYM&&this.layout!=bo.a.XYZM||0===this.flatCoordinates.length)return null;var nt=void 0!==tt&&tt,rt=void 0!==et&&et;return function($,tt,et,nt,rt,it,ot){if(ot)return Ii($,tt,et[et.length-1],nt,rt,it);var at;if(rt<$[nt-1])return it?((at=$.slice(0,nt))[nt-1]=rt,at):null;if($[$.length-1]<rt)return it?((at=$.slice($.length-nt))[nt-1]=rt,at):null;for(var Ot=0,wt=et.length;Ot<wt;++Ot){var St=et[Ot];if(tt!=St){if(rt<$[tt+nt-1])return null;if(rt<=$[St-1])return Ii($,tt,St,nt,rt,!1);tt=St}}return null}(this.flatCoordinates,0,this.ends_,this.stride,$,nt,rt)},e.prototype.getCoordinates=function(){return Object(Po.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function($){return $<0||this.ends_.length<=$?null:new Lo(this.flatCoordinates.slice(0===$?0:this.ends_[$-1],this.ends_[$]),this.layout)},e.prototype.getLineStrings=function(){for(var $=this.flatCoordinates,tt=this.ends_,et=this.layout,nt=[],rt=0,it=0,ot=tt.length;it<ot;++it){var at=tt[it],Ot=new Lo($.slice(rt,at),et);nt.push(Ot),rt=at}return nt},e.prototype.getFlatMidpoints=function(){for(var $=[],tt=this.flatCoordinates,et=0,nt=this.ends_,rt=this.stride,it=0,ot=nt.length;it<ot;++it){var at=nt[it],Ot=Pi(tt,et,at,rt,.5);Object(Ci.c)($,Ot),et=at}return $},e.prototype.getSimplifiedGeometryInternal=function($){var tt=[],et=[];return tt.length=Object(Eo.b)(this.flatCoordinates,0,this.ends_,this.stride,$,tt,0,et),new e(tt,bo.a.XY,et)},e.prototype.getType=function(){return Oo.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function($){return Object(To.b)(this.flatCoordinates,0,this.ends_,this.stride,$)},e.prototype.setCoordinates=function($,tt){this.setLayout(tt,$,2),this.flatCoordinates||(this.flatCoordinates=[]);var et=Object(So.c)(this.flatCoordinates,0,$,this.stride,this.ends_);this.flatCoordinates.length=0===et.length?0:et[et.length-1],this.changed()},e}(xo.a),Do=et(57),Go=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),zo=function($){function e(tt,et){var nt=$.call(this)||this;return et&&!Array.isArray(tt[0])?nt.setFlatCoordinates(et,tt):nt.setCoordinates(tt,et),nt}return Go(e,$),e.prototype.appendPoint=function($){this.flatCoordinates?Object(Ci.c)(this.flatCoordinates,$.getFlatCoordinates()):this.flatCoordinates=$.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var $=new e(this.flatCoordinates.slice(),this.layout);return $.applyProperties(this),$},e.prototype.closestPointXY=function($,tt,et,nt){if(nt<Object(gn.e)(this.getExtent(),$,tt))return nt;for(var rt=this.flatCoordinates,it=this.stride,ot=0,at=rt.length;ot<at;ot+=it){var Ot=Object(Io.g)($,tt,rt[ot],rt[ot+1]);if(Ot<nt){nt=Ot;for(var wt=0;wt<it;++wt)et[wt]=rt[ot+wt];et.length=it}}return nt},e.prototype.getCoordinates=function(){return Object(Po.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function($){var tt=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return $<0||tt<=$?null:new Do.a(this.flatCoordinates.slice($*this.stride,($+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var $=this.flatCoordinates,tt=this.layout,et=this.stride,nt=[],rt=0,it=$.length;rt<it;rt+=et){var ot=new Do.a($.slice(rt,rt+et),tt);nt.push(ot)}return nt},e.prototype.getType=function(){return Oo.a.MULTI_POINT},e.prototype.intersectsExtent=function($){for(var tt=this.flatCoordinates,et=this.stride,nt=0,rt=tt.length;nt<rt;nt+=et){var it=tt[nt],ot=tt[nt+1];if(Object(gn.h)($,it,ot))return!0}return!1},e.prototype.setCoordinates=function($,tt){this.setLayout(tt,$,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(So.b)(this.flatCoordinates,0,$,this.stride),this.changed()},e}(xo.a),Uo=et(39),Yo=et(107),Bo=et(64),Wo=et(77),Xo=et(46),qo=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Zo=function($){function e(tt,et,nt){var rt=$.call(this)||this;if(rt.endss_=[],rt.flatInteriorPointsRevision_=-1,rt.flatInteriorPoints_=null,rt.maxDelta_=-1,rt.maxDeltaRevision_=-1,rt.orientedRevision_=-1,rt.orientedFlatCoordinates_=null,!nt&&!Array.isArray(tt[0])){for(var it=rt.getLayout(),ot=tt,at=[],Ot=[],wt=0,St=ot.length;wt<St;++wt){var Ct=ot[wt];0===wt&&(it=Ct.getLayout());for(var Rt=at.length,Tt=Ct.getEnds(),At=0,Nt=Tt.length;At<Nt;++At)Tt[At]+=Rt;Object(Ci.c)(at,Ct.getFlatCoordinates()),Ot.push(Tt)}et=it,tt=at,nt=Ot}return void 0!==et&&nt?(rt.setFlatCoordinates(et,tt),rt.endss_=nt):rt.setCoordinates(tt,et),rt}return qo(e,$),e.prototype.appendPolygon=function($){var tt;if(this.flatCoordinates){var et=this.flatCoordinates.length;Object(Ci.c)(this.flatCoordinates,$.getFlatCoordinates());for(var nt=0,rt=(tt=$.getEnds().slice()).length;nt<rt;++nt)tt[nt]+=et}else this.flatCoordinates=$.getFlatCoordinates().slice(),tt=$.getEnds().slice(),this.endss_.push();this.endss_.push(tt),this.changed()},e.prototype.clone=function(){for(var $=this.endss_.length,tt=new Array($),et=0;et<$;++et)tt[et]=this.endss_[et].slice();var nt=new e(this.flatCoordinates.slice(),this.layout,tt);return nt.applyProperties(this),nt},e.prototype.closestPointXY=function($,tt,et,nt){return nt<Object(gn.e)(this.getExtent(),$,tt)?nt:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(wo.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(wo.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,$,tt,et,nt))},e.prototype.containsXY=function($,tt){return Object(Xo.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,$,tt)},e.prototype.getArea=function(){return Object(Wo.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function($){var tt;return void 0!==$?(tt=this.getOrientedFlatCoordinates().slice(),Object(Bo.d)(tt,0,this.endss_,this.stride,$)):tt=this.flatCoordinates,Object(Po.c)(tt,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var $=function($,tt,et,nt){for(var rt=[],it=Object(gn.j)(),ot=0,at=et.length;ot<at;++ot){var Ot=et[ot];it=Object(gn.o)($,tt,Ot[0],nt),rt.push((it[0]+it[2])/2,(it[1]+it[3])/2),tt=Ot[Ot.length-1]}return rt}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(Yo.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,$),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new zo(this.getFlatInteriorPoints().slice(),bo.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var $=this.flatCoordinates;Object(Bo.b)($,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=$:(this.orientedFlatCoordinates_=$.slice(),this.orientedFlatCoordinates_.length=Object(Bo.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function($){var tt=[],et=[];return tt.length=Object(Eo.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt($),tt,0,et),new e(tt,bo.a.XY,et)},e.prototype.getPolygon=function($){if($<0||this.endss_.length<=$)return null;var tt;if(0===$)tt=0;else{var et=this.endss_[$-1];tt=et[et.length-1]}var nt=this.endss_[$].slice(),rt=nt[nt.length-1];if(0!==tt)for(var it=0,ot=nt.length;it<ot;++it)nt[it]-=tt;return new Uo.a(this.flatCoordinates.slice(tt,rt),this.layout,nt)},e.prototype.getPolygons=function(){for(var $=this.layout,tt=this.flatCoordinates,et=this.endss_,nt=[],rt=0,it=0,ot=et.length;it<ot;++it){var at=et[it].slice(),Ot=at[at.length-1];if(0!==rt)for(var wt=0,St=at.length;wt<St;++wt)at[wt]-=rt;var Ct=new Uo.a(tt.slice(rt,Ot),$,at);nt.push(Ct),rt=Ot}return nt},e.prototype.getType=function(){return Oo.a.MULTI_POLYGON},e.prototype.intersectsExtent=function($){return Object(To.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,$)},e.prototype.setCoordinates=function($,tt){this.setLayout(tt,$,3),this.flatCoordinates||(this.flatCoordinates=[]);var et=Object(So.d)(this.flatCoordinates,0,$,this.stride,this.endss_);if(0===et.length)this.flatCoordinates.length=0;else{var nt=et[et.length-1];this.flatCoordinates.length=0===nt.length?0:nt[nt.length-1]}this.changed()},e}(xo.a),Vo=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function($,tt){var et;if(tt){var nt=tt.dataProjection?Object(_n.k)(tt.dataProjection):this.readProjection($);tt.extent&&nt&&nt.getUnits()===mn.default.TILE_PIXELS&&(nt=Object(_n.k)(nt)).setWorldExtent(tt.extent),et={dataProjection:nt,featureProjection:tt.featureProjection}}return this.adaptOptions(et)},t.prototype.adaptOptions=function($){return Object(bn.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},$)},t.prototype.getType=function(){return Object(_i.b)()},t.prototype.readFeature=function($,tt){return Object(_i.b)()},t.prototype.readFeatures=function($,tt){return Object(_i.b)()},t.prototype.readGeometry=function($,tt){return Object(_i.b)()},t.prototype.readProjection=function($){return Object(_i.b)()},t.prototype.writeFeature=function($,tt){return Object(_i.b)()},t.prototype.writeFeatures=function($,tt){return Object(_i.b)()},t.prototype.writeGeometry=function($,tt){return Object(_i.b)()},t}();function Hi($,tt,et){var nt,rt=et?Object(_n.k)(et.featureProjection):null,it=et?Object(_n.k)(et.dataProjection):null;if(nt=rt&&it&&!Object(_n.g)(rt,it)?(tt?$.clone():$).transform(tt?rt:it,tt?it:rt):$,tt&&et&&void 0!==et.decimals){var ot=Math.pow(10,et.decimals);nt===$&&(nt=$.clone()),nt.applyTransform((function($){for(var tt=0,et=$.length;tt<et;++tt)$[tt]=Math.round($[tt]*ot)/ot;return $}))}return nt}function Qi($,tt){var et=tt?Object(_n.k)(tt.featureProjection):null,nt=tt?Object(_n.k)(tt.dataProjection):null;return et&&nt&&!Object(_n.g)(et,nt)?Object(_n.s)($,nt,et):$}var Ko="arraybuffer",Ho="json";function ro($,tt){return mo().createElementNS($,tt)}function no($,tt){return function t($,tt,et){if($.nodeType==Node.CDATA_SECTION_NODE||$.nodeType==Node.TEXT_NODE)tt?et.push(String($.nodeValue).replace(/(\r\n|\r|\n)/g,"")):et.push($.nodeValue);else{var nt=void 0;for(nt=$.firstChild;nt;nt=nt.nextSibling)t(nt,tt,et)}return et}($,tt,[]).join("")}function io($){return"documentElement"in $}function oo($){return(new DOMParser).parseFromString($,"application/xml")}function ao($,tt){return function(et,nt){var rt=$.call(void 0!==tt?tt:this,et,nt);void 0!==rt&&nt[nt.length-1].push(rt)}}function so($,tt){return function(et,nt){var rt=$.call(void 0!==tt?tt:this,et,nt);void 0!==rt&&(nt[nt.length-1]=rt)}}function uo($,tt,et){return function(nt,rt){var it=$.call(void 0!==et?et:this,nt,rt);void 0!==it&&(rt[rt.length-1][void 0!==tt?tt:nt.localName]=it)}}function co($,tt){return function(et,nt,rt){$.call(void 0!==tt?tt:this,et,nt,rt),rt[rt.length-1].node.appendChild(et)}}function ho($,tt){var et=$;return function($,nt,rt){var it=nt[nt.length-1].node,ot=et;return void 0===ot&&(ot=rt),ro(void 0!==tt?tt:it.namespaceURI,ot)}}var Qo=ho();function po($,tt,et,nt){var rt;for(rt=tt.firstElementChild;rt;rt=rt.nextElementSibling){var it=$[rt.namespaceURI];if(void 0!==it){var ot=it[rt.localName];void 0!==ot&&ot.call(nt,rt,et)}}}function fo($,tt,et,nt,rt){return nt.push($),po(tt,et,nt,rt),nt.pop()}function yo($,tt,et,nt,rt,it){for(var ot,at,Ot=(void 0!==rt?rt:et).length,wt=0;wt<Ot;++wt)void 0!==(ot=et[wt])&&void 0!==(at=tt.call(void 0!==it?it:this,ot,nt,void 0!==rt?rt[wt]:void 0))&&$[at.namespaceURI][at.localName].call(it,at,ot,nt)}function go($,tt,et,nt,rt,it,ot){return rt.push($),yo(tt,et,nt,rt,it,ot),rt.pop()}var Jo=void 0,$o=void 0;function mo(){return void 0===$o&&"undefined"!=typeof document&&($o=document.implementation.createDocument("","",null)),$o}var ta=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ea=function($){function e(){var tt=$.call(this)||this;return tt.xmlSerializer_=(void 0===Jo&&"undefined"!=typeof XMLSerializer&&(Jo=new XMLSerializer),Jo),tt}return ta(e,$),e.prototype.getType=function(){return"xml"},e.prototype.readFeature=function($,tt){if($){if("string"==typeof $){var et=oo($);return this.readFeatureFromDocument(et,tt)}return io($)?this.readFeatureFromDocument($,tt):this.readFeatureFromNode($,tt)}return null},e.prototype.readFeatureFromDocument=function($,tt){var et=this.readFeaturesFromDocument($,tt);return et.length>0?et[0]:null},e.prototype.readFeatureFromNode=function($,tt){return null},e.prototype.readFeatures=function($,tt){if($){if("string"==typeof $){var et=oo($);return this.readFeaturesFromDocument(et,tt)}return io($)?this.readFeaturesFromDocument($,tt):this.readFeaturesFromNode($,tt)}return[]},e.prototype.readFeaturesFromDocument=function($,tt){for(var et=[],nt=$.firstChild;nt;nt=nt.nextSibling)nt.nodeType==Node.ELEMENT_NODE&&Object(Ci.c)(et,this.readFeaturesFromNode(nt,tt));return et},e.prototype.readFeaturesFromNode=function($,tt){return Object(_i.b)()},e.prototype.readGeometry=function($,tt){if($){if("string"==typeof $){var et=oo($);return this.readGeometryFromDocument(et,tt)}return io($)?this.readGeometryFromDocument($,tt):this.readGeometryFromNode($,tt)}return null},e.prototype.readGeometryFromDocument=function($,tt){return null},e.prototype.readGeometryFromNode=function($,tt){return null},e.prototype.readProjection=function($){if($){if("string"==typeof $){var tt=oo($);return this.readProjectionFromDocument(tt)}return io($)?this.readProjectionFromDocument($):this.readProjectionFromNode($)}return null},e.prototype.readProjectionFromDocument=function($){return this.dataProjection},e.prototype.readProjectionFromNode=function($){return this.dataProjection},e.prototype.writeFeature=function($,tt){var et=this.writeFeatureNode($,tt);return this.xmlSerializer_.serializeToString(et)},e.prototype.writeFeatureNode=function($,tt){return null},e.prototype.writeFeatures=function($,tt){var et=this.writeFeaturesNode($,tt);return this.xmlSerializer_.serializeToString(et)},e.prototype.writeFeaturesNode=function($,tt){return null},e.prototype.writeGeometry=function($,tt){var et=this.writeGeometryNode($,tt);return this.xmlSerializer_.serializeToString(et)},e.prototype.writeGeometryNode=function($,tt){return null},e}(Vo),na=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ra="http://www.opengis.net/gml",ia=/^[\s\xa0]*$/,oa=function($){function e(tt){var et=$.call(this)||this,nt=tt||{};return et.featureType=nt.featureType,et.featureNS=nt.featureNS,et.srsName=nt.srsName,et.schemaLocation="",et.FEATURE_COLLECTION_PARSERS={},et.FEATURE_COLLECTION_PARSERS[et.namespace]={featureMember:ao(et.readFeaturesInternal),featureMembers:so(et.readFeaturesInternal)},et}return na(e,$),e.prototype.readFeaturesInternal=function($,tt){var et=$.localName,nt=null;if("FeatureCollection"==et)nt=fo([],this.FEATURE_COLLECTION_PARSERS,$,tt,this);else if("featureMembers"==et||"featureMember"==et||"member"==et){var rt=tt[0],it=rt.featureType,ot=rt.featureNS;if(!it&&$.childNodes){it=[],ot={};for(var at=0,Ot=$.childNodes.length;at<Ot;++at){var wt=$.childNodes[at];if(1===wt.nodeType){var St=wt.nodeName.split(":").pop();if(-1===it.indexOf(St)){var Ct="",Rt=0,Tt=wt.namespaceURI;for(var At in ot){if(ot[At]===Tt){Ct=At;break}++Rt}Ct||(ot[Ct="p"+Rt]=Tt),it.push(Ct+":"+St)}}}"featureMember"!=et&&(rt.featureType=it,rt.featureNS=ot)}if("string"==typeof ot){var Nt=ot;(ot={}).p0=Nt}var kt={},Dt=Array.isArray(it)?it:[it];for(var Gt in ot){var Ut={};for(at=0,Ot=Dt.length;at<Ot;++at)(-1===Dt[at].indexOf(":")?"p0":Dt[at].split(":")[0])===Gt&&(Ut[Dt[at].split(":").pop()]="featureMembers"==et?ao(this.readFeatureElement,this):so(this.readFeatureElement,this));kt[ot[Gt]]=Ut}nt=fo("featureMember"==et||"member"==et?void 0:[],kt,$,tt)}return null===nt&&(nt=[]),nt},e.prototype.readGeometryElement=function($,tt){var et=tt[0];et.srsName=$.firstElementChild.getAttribute("srsName"),et.srsDimension=$.firstElementChild.getAttribute("srsDimension");var nt=fo(null,this.GEOMETRY_PARSERS,$,tt,this);return nt?Array.isArray(nt)?Qi(nt,et):Hi(nt,!1,et):void 0},e.prototype.readFeatureElementInternal=function($,tt,et){for(var nt,rt={},it=$.firstElementChild;it;it=it.nextElementSibling){var ot=void 0,at=it.localName;0===it.childNodes.length||1===it.childNodes.length&&(3===it.firstChild.nodeType||4===it.firstChild.nodeType)?(ot=no(it,!1),ia.test(ot)&&(ot=void 0)):(et&&(ot=this.readGeometryElement(it,tt)),ot?"boundedBy"!==at&&(nt=at):ot=this.readFeatureElementInternal(it,tt,!1)),rt[at]?(rt[at]instanceof Array||(rt[at]=[rt[at]]),rt[at].push(ot)):rt[at]=ot;var Ot=it.attributes.length;if(Ot>0){rt[at]={_content_:rt[at]};for(var wt=0;wt<Ot;wt++){var St=it.attributes[wt].name;rt[at][St]=it.attributes[wt].value}}}if(et){var Ct=new vo(rt);nt&&Ct.setGeometryName(nt);var Rt=$.getAttribute("fid")||function($,tt,et){return $.getAttributeNS(tt,"id")||""}($,this.namespace);return Rt&&Ct.setId(Rt),Ct}return rt},e.prototype.readFeatureElement=function($,tt){return this.readFeatureElementInternal($,tt,!0)},e.prototype.readPoint=function($,tt){var et=this.readFlatCoordinatesFromNode($,tt);if(et)return new Do.a(et,bo.a.XYZ)},e.prototype.readMultiPoint=function($,tt){var et=fo([],this.MULTIPOINT_PARSERS,$,tt,this);return et?new zo(et):void 0},e.prototype.readMultiLineString=function($,tt){var et=fo([],this.MULTILINESTRING_PARSERS,$,tt,this);if(et)return new ko(et)},e.prototype.readMultiPolygon=function($,tt){var et=fo([],this.MULTIPOLYGON_PARSERS,$,tt,this);if(et)return new Zo(et)},e.prototype.pointMemberParser=function($,tt){po(this.POINTMEMBER_PARSERS,$,tt,this)},e.prototype.lineStringMemberParser=function($,tt){po(this.LINESTRINGMEMBER_PARSERS,$,tt,this)},e.prototype.polygonMemberParser=function($,tt){po(this.POLYGONMEMBER_PARSERS,$,tt,this)},e.prototype.readLineString=function($,tt){var et=this.readFlatCoordinatesFromNode($,tt);return et?new Lo(et,bo.a.XYZ):void 0},e.prototype.readFlatLinearRing=function($,tt){return fo(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,$,tt,this)||void 0},e.prototype.readLinearRing=function($,tt){var et=this.readFlatCoordinatesFromNode($,tt);if(et)return new Fo.a(et,bo.a.XYZ)},e.prototype.readPolygon=function($,tt){var et=fo([null],this.FLAT_LINEAR_RINGS_PARSERS,$,tt,this);if(et&&et[0]){var nt,rt=et[0],it=[rt.length],ot=void 0;for(ot=1,nt=et.length;ot<nt;++ot)Object(Ci.c)(rt,et[ot]),it.push(rt.length);return new Uo.a(rt,bo.a.XYZ,it)}},e.prototype.readFlatCoordinatesFromNode=function($,tt){return fo(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,$,tt,this)},e.prototype.readGeometryFromNode=function($,tt){return this.readGeometryElement($,[this.getReadOptions($,tt||{})])||null},e.prototype.readFeaturesFromNode=function($,tt){var et={featureType:this.featureType,featureNS:this.featureNS};return tt&&Object(bn.a)(et,this.getReadOptions($,tt)),this.readFeaturesInternal($,[et])||[]},e.prototype.readProjectionFromNode=function($){return Object(_n.k)(this.srsName?this.srsName:$.firstElementChild.getAttribute("srsName"))},e}(ea);oa.prototype.namespace=ra,oa.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},oa.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},oa.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},oa.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:ao(oa.prototype.pointMemberParser),pointMembers:ao(oa.prototype.pointMemberParser)}},oa.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:ao(oa.prototype.lineStringMemberParser),lineStringMembers:ao(oa.prototype.lineStringMemberParser)}},oa.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:ao(oa.prototype.polygonMemberParser),polygonMembers:ao(oa.prototype.polygonMemberParser)}},oa.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:ao(oa.prototype.readFlatCoordinatesFromNode)}},oa.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ao(oa.prototype.readLineString)}},oa.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ao(oa.prototype.readPolygon)}},oa.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:so(oa.prototype.readFlatLinearRing)}};var aa=oa;function jo($){return Co(no($,!1))}function Co($){var tt=/^\s*(\d+)\s*$/.exec($);return tt?parseInt(tt[1],10):void 0}function Ro($,tt){$.appendChild(mo().createTextNode(tt))}et(42);var sa=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ca={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},ua=function($){function e(tt){var et=this,nt=tt||{};return(et=$.call(this,nt)||this).FEATURE_COLLECTION_PARSERS[ra].featureMember=ao(et.readFeaturesInternal),et.schemaLocation=nt.schemaLocation?nt.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",et}return sa(e,$),e.prototype.readFlatCoordinates=function($,tt){var et=no($,!1).replace(/^\s*|\s*$/g,""),nt=tt[0].srsName,rt="enu";if(nt){var it=Object(_n.k)(nt);it&&(rt=it.getAxisOrientation())}for(var ot=et.trim().split(/\s+/),at=[],Ot=0,wt=ot.length;Ot<wt;Ot++){var St=ot[Ot].split(/,+/),Ct=parseFloat(St[0]),Rt=parseFloat(St[1]),Tt=3===St.length?parseFloat(St[2]):0;"en"===rt.substr(0,2)?at.push(Ct,Rt,Tt):at.push(Rt,Ct,Tt)}return at},e.prototype.readBox=function($,tt){var et=fo([null],this.BOX_PARSERS_,$,tt,this);return Object(gn.k)(et[1][0],et[1][1],et[1][3],et[1][4])},e.prototype.innerBoundaryIsParser=function($,tt){var et=fo(void 0,this.RING_PARSERS,$,tt,this);et&&tt[tt.length-1].push(et)},e.prototype.outerBoundaryIsParser=function($,tt){var et=fo(void 0,this.RING_PARSERS,$,tt,this);et&&(tt[tt.length-1][0]=et)},e.prototype.GEOMETRY_NODE_FACTORY_=function($,tt,et){var nt,rt=tt[tt.length-1],it=rt.multiSurface,ot=rt.surface,at=rt.multiCurve;return Array.isArray($)?nt="Envelope":"MultiPolygon"===(nt=$.getType())&&!0===it?nt="MultiSurface":"Polygon"===nt&&!0===ot?nt="Surface":"MultiLineString"===nt&&!0===at&&(nt="MultiCurve"),ro("http://www.opengis.net/gml",nt)},e.prototype.writeFeatureElement=function($,tt,et){var nt=tt.getId();nt&&$.setAttribute("fid",nt);var rt=et[et.length-1],it=rt.featureNS,ot=tt.getGeometryName();rt.serializers||(rt.serializers={},rt.serializers[it]={});var at=[],Ot=[];if(tt.hasProperties()){var wt=tt.getProperties();for(var St in wt){var Ct=wt[St];null!==Ct&&(at.push(St),Ot.push(Ct),St==ot||"function"==typeof Ct.getSimplifiedGeometry?St in rt.serializers[it]||(rt.serializers[it][St]=co(this.writeGeometryElement,this)):St in rt.serializers[it]||(rt.serializers[it][St]=co(Ro)))}}var Rt=Object(bn.a)({},rt);Rt.node=$,go(Rt,rt.serializers,ho(void 0,it),Ot,et,at)},e.prototype.writeCurveOrLineString=function($,tt,et){var nt=et[et.length-1].srsName;if("LineStringSegment"!==$.nodeName&&nt&&$.setAttribute("srsName",nt),"LineString"===$.nodeName||"LineStringSegment"===$.nodeName){var rt=this.createCoordinatesNode_($.namespaceURI);$.appendChild(rt),this.writeCoordinates_(rt,tt,et)}else if("Curve"===$.nodeName){var it=ro($.namespaceURI,"segments");$.appendChild(it),this.writeCurveSegments_(it,tt,et)}},e.prototype.writeLineStringOrCurveMember=function($,tt,et){var nt=this.GEOMETRY_NODE_FACTORY_(tt,et);nt&&($.appendChild(nt),this.writeCurveOrLineString(nt,tt,et))},e.prototype.writeMultiCurveOrLineString=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=nt.srsName,ot=nt.curve;it&&$.setAttribute("srsName",it);var at=tt.getLineStrings();go({node:$,hasZ:rt,srsName:it,curve:ot},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,at,et,void 0,this)},e.prototype.writeGeometryElement=function($,tt,et){var nt,rt=et[et.length-1],it=Object(bn.a)({},rt);it.node=$,nt=Array.isArray(tt)?Qi(tt,rt):Hi(tt,!0,rt),go(it,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[nt],et,void 0,this)},e.prototype.createCoordinatesNode_=function($){var tt=ro($,"coordinates");return tt.setAttribute("decimal","."),tt.setAttribute("cs",","),tt.setAttribute("ts"," "),tt},e.prototype.writeCoordinates_=function($,tt,et){for(var nt=et[et.length-1],rt=nt.hasZ,it=nt.srsName,ot=tt.getCoordinates(),at=ot.length,Ot=new Array(at),wt=0;wt<at;++wt){var St=ot[wt];Ot[wt]=this.getCoords_(St,it,rt)}Ro($,Ot.join(" "))},e.prototype.writeCurveSegments_=function($,tt,et){var nt=ro($.namespaceURI,"LineStringSegment");$.appendChild(nt),this.writeCurveOrLineString(nt,tt,et)},e.prototype.writeSurfaceOrPolygon=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=nt.srsName;if("PolygonPatch"!==$.nodeName&&it&&$.setAttribute("srsName",it),"Polygon"===$.nodeName||"PolygonPatch"===$.nodeName){var ot=tt.getLinearRings();go({node:$,hasZ:rt,srsName:it},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,ot,et,void 0,this)}else if("Surface"===$.nodeName){var at=ro($.namespaceURI,"patches");$.appendChild(at),this.writeSurfacePatches_(at,tt,et)}},e.prototype.RING_NODE_FACTORY_=function($,tt,et){var nt=tt[tt.length-1],rt=nt.node,it=nt.exteriorWritten;return void 0===it&&(nt.exteriorWritten=!0),ro(rt.namespaceURI,void 0!==it?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function($,tt,et){var nt=ro($.namespaceURI,"PolygonPatch");$.appendChild(nt),this.writeSurfaceOrPolygon(nt,tt,et)},e.prototype.writeRing=function($,tt,et){var nt=ro($.namespaceURI,"LinearRing");$.appendChild(nt),this.writeLinearRing(nt,tt,et)},e.prototype.getCoords_=function($,tt,et){var nt="enu";tt&&(nt=Object(_n.k)(tt).getAxisOrientation());var rt="en"===nt.substr(0,2)?$[0]+","+$[1]:$[1]+","+$[0];return et&&(rt+=","+($[2]||0)),rt},e.prototype.writePoint=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=nt.srsName;it&&$.setAttribute("srsName",it);var ot=this.createCoordinatesNode_($.namespaceURI);$.appendChild(ot);var at=tt.getCoordinates();Ro(ot,this.getCoords_(at,it,rt))},e.prototype.writeMultiPoint=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=nt.srsName;it&&$.setAttribute("srsName",it);var ot=tt.getPoints();go({node:$,hasZ:rt,srsName:it},this.POINTMEMBER_SERIALIZERS,ho("pointMember"),ot,et,void 0,this)},e.prototype.writePointMember=function($,tt,et){var nt=ro($.namespaceURI,"Point");$.appendChild(nt),this.writePoint(nt,tt,et)},e.prototype.writeLinearRing=function($,tt,et){var nt=et[et.length-1].srsName;nt&&$.setAttribute("srsName",nt);var rt=this.createCoordinatesNode_($.namespaceURI);$.appendChild(rt),this.writeCoordinates_(rt,tt,et)},e.prototype.writeMultiSurfaceOrPolygon=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=nt.srsName,ot=nt.surface;it&&$.setAttribute("srsName",it);var at=tt.getPolygons();go({node:$,hasZ:rt,srsName:it,surface:ot},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,at,et,void 0,this)},e.prototype.writeSurfaceOrPolygonMember=function($,tt,et){var nt=this.GEOMETRY_NODE_FACTORY_(tt,et);nt&&($.appendChild(nt),this.writeSurfaceOrPolygon(nt,tt,et))},e.prototype.writeEnvelope=function($,tt,et){var nt=et[et.length-1].srsName;nt&&$.setAttribute("srsName",nt);var rt=[tt[0]+" "+tt[1],tt[2]+" "+tt[3]];go({node:$},this.ENVELOPE_SERIALIZERS,Qo,rt,et,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function($,tt,et){var nt=tt[tt.length-1].node;return ro("http://www.opengis.net/gml",ca[nt.nodeName])},e}(aa);ua.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:so(ua.prototype.readFlatCoordinates)}},ua.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:ua.prototype.innerBoundaryIsParser,outerBoundaryIs:ua.prototype.outerBoundaryIsParser}},ua.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:ao(ua.prototype.readFlatCoordinates)}},ua.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:so(aa.prototype.readPoint),MultiPoint:so(aa.prototype.readMultiPoint),LineString:so(aa.prototype.readLineString),MultiLineString:so(aa.prototype.readMultiLineString),LinearRing:so(aa.prototype.readLinearRing),Polygon:so(aa.prototype.readPolygon),MultiPolygon:so(aa.prototype.readMultiPolygon),Box:so(ua.prototype.readBox)}},ua.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:co(ua.prototype.writeCurveOrLineString),MultiCurve:co(ua.prototype.writeMultiCurveOrLineString),Point:co(ua.prototype.writePoint),MultiPoint:co(ua.prototype.writeMultiPoint),LineString:co(ua.prototype.writeCurveOrLineString),MultiLineString:co(ua.prototype.writeMultiCurveOrLineString),LinearRing:co(ua.prototype.writeLinearRing),Polygon:co(ua.prototype.writeSurfaceOrPolygon),MultiPolygon:co(ua.prototype.writeMultiSurfaceOrPolygon),Surface:co(ua.prototype.writeSurfaceOrPolygon),MultiSurface:co(ua.prototype.writeMultiSurfaceOrPolygon),Envelope:co(ua.prototype.writeEnvelope)}},ua.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:co(ua.prototype.writeLineStringOrCurveMember),curveMember:co(ua.prototype.writeLineStringOrCurveMember)}},ua.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:co(ua.prototype.writeRing),innerBoundaryIs:co(ua.prototype.writeRing)}},ua.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:co(ua.prototype.writePointMember)}},ua.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:co(ua.prototype.writeSurfaceOrPolygonMember),polygonMember:co(ua.prototype.writeSurfaceOrPolygonMember)}},ua.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:co(Ro),upperCorner:co(Ro)}};var ha=ua,la=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),pa={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},fa=function($){function e(tt){var et=this,nt=tt||{};return(et=$.call(this,nt)||this).surface_=void 0!==nt.surface&&nt.surface,et.curve_=void 0!==nt.curve&&nt.curve,et.multiCurve_=void 0===nt.multiCurve||nt.multiCurve,et.multiSurface_=void 0===nt.multiSurface||nt.multiSurface,et.schemaLocation=nt.schemaLocation?nt.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",et.hasZ=void 0!==nt.hasZ&&nt.hasZ,et}return la(e,$),e.prototype.readMultiCurve=function($,tt){var et=fo([],this.MULTICURVE_PARSERS,$,tt,this);return et?new ko(et):void 0},e.prototype.readMultiSurface=function($,tt){var et=fo([],this.MULTISURFACE_PARSERS,$,tt,this);if(et)return new Zo(et)},e.prototype.curveMemberParser=function($,tt){po(this.CURVEMEMBER_PARSERS,$,tt,this)},e.prototype.surfaceMemberParser=function($,tt){po(this.SURFACEMEMBER_PARSERS,$,tt,this)},e.prototype.readPatch=function($,tt){return fo([null],this.PATCHES_PARSERS,$,tt,this)},e.prototype.readSegment=function($,tt){return fo([null],this.SEGMENTS_PARSERS,$,tt,this)},e.prototype.readPolygonPatch=function($,tt){return fo([null],this.FLAT_LINEAR_RINGS_PARSERS,$,tt,this)},e.prototype.readLineStringSegment=function($,tt){return fo([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,$,tt,this)},e.prototype.interiorParser=function($,tt){var et=fo(void 0,this.RING_PARSERS,$,tt,this);et&&tt[tt.length-1].push(et)},e.prototype.exteriorParser=function($,tt){var et=fo(void 0,this.RING_PARSERS,$,tt,this);et&&(tt[tt.length-1][0]=et)},e.prototype.readSurface=function($,tt){var et=fo([null],this.SURFACE_PARSERS,$,tt,this);if(et&&et[0]){var nt,rt=et[0],it=[rt.length],ot=void 0;for(ot=1,nt=et.length;ot<nt;++ot)Object(Ci.c)(rt,et[ot]),it.push(rt.length);return new Uo.a(rt,bo.a.XYZ,it)}},e.prototype.readCurve=function($,tt){var et=fo([null],this.CURVE_PARSERS,$,tt,this);return et?new Lo(et,bo.a.XYZ):void 0},e.prototype.readEnvelope=function($,tt){var et=fo([null],this.ENVELOPE_PARSERS,$,tt,this);return Object(gn.k)(et[1][0],et[1][1],et[2][0],et[2][1])},e.prototype.readFlatPos=function($,tt){for(var et,nt=no($,!1),rt=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,it=[];et=rt.exec(nt);)it.push(parseFloat(et[1])),nt=nt.substr(et[0].length);if(""===nt){var ot=tt[0].srsName,at="enu";if(ot&&(at=Object(_n.k)(ot).getAxisOrientation()),"neu"===at){var Ot,wt=void 0;for(wt=0,Ot=it.length;wt<Ot;wt+=3){var St=it[wt],Ct=it[wt+1];it[wt]=Ct,it[wt+1]=St}}var Rt=it.length;if(2==Rt&&it.push(0),0!==Rt)return it}},e.prototype.readFlatPosList=function($,tt){var et=no($,!1).replace(/^\s*|\s*$/g,""),nt=tt[0],rt=nt.srsName,it=nt.srsDimension,ot="enu";rt&&(ot=Object(_n.k)(rt).getAxisOrientation());var at,Ot,wt,St=et.split(/\s+/),Ct=2;$.getAttribute("srsDimension")?Ct=Co($.getAttribute("srsDimension")):$.getAttribute("dimension")?Ct=Co($.getAttribute("dimension")):$.parentNode.getAttribute("srsDimension")?Ct=Co($.parentNode.getAttribute("srsDimension")):it&&(Ct=Co(it));for(var Rt=[],Tt=0,At=St.length;Tt<At;Tt+=Ct)at=parseFloat(St[Tt]),Ot=parseFloat(St[Tt+1]),wt=3===Ct?parseFloat(St[Tt+2]):0,"en"===ot.substr(0,2)?Rt.push(at,Ot,wt):Rt.push(Ot,at,wt);return Rt},e.prototype.writePos_=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=rt?"3":"2";$.setAttribute("srsDimension",it);var ot=nt.srsName,at="enu";ot&&(at=Object(_n.k)(ot).getAxisOrientation());var Ot,wt=tt.getCoordinates();Ot="en"===at.substr(0,2)?wt[0]+" "+wt[1]:wt[1]+" "+wt[0],rt&&(Ot+=" "+(wt[2]||0)),Ro($,Ot)},e.prototype.getCoords_=function($,tt,et){var nt="enu";tt&&(nt=Object(_n.k)(tt).getAxisOrientation());var rt="en"===nt.substr(0,2)?$[0]+" "+$[1]:$[1]+" "+$[0];return et&&(rt+=" "+($[2]||0)),rt},e.prototype.writePosList_=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=rt?"3":"2";$.setAttribute("srsDimension",it);for(var ot,at=nt.srsName,Ot=tt.getCoordinates(),wt=Ot.length,St=new Array(wt),Ct=0;Ct<wt;++Ct)ot=Ot[Ct],St[Ct]=this.getCoords_(ot,at,rt);Ro($,St.join(" "))},e.prototype.writePoint=function($,tt,et){var nt=et[et.length-1].srsName;nt&&$.setAttribute("srsName",nt);var rt=ro($.namespaceURI,"pos");$.appendChild(rt),this.writePos_(rt,tt,et)},e.prototype.writeEnvelope=function($,tt,et){var nt=et[et.length-1].srsName;nt&&$.setAttribute("srsName",nt);var rt=[tt[0]+" "+tt[1],tt[2]+" "+tt[3]];go({node:$},this.ENVELOPE_SERIALIZERS,Qo,rt,et,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing=function($,tt,et){var nt=et[et.length-1].srsName;nt&&$.setAttribute("srsName",nt);var rt=ro($.namespaceURI,"posList");$.appendChild(rt),this.writePosList_(rt,tt,et)},e.prototype.RING_NODE_FACTORY_=function($,tt,et){var nt=tt[tt.length-1],rt=nt.node,it=nt.exteriorWritten;return void 0===it&&(nt.exteriorWritten=!0),ro(rt.namespaceURI,void 0!==it?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=nt.srsName;if("PolygonPatch"!==$.nodeName&&it&&$.setAttribute("srsName",it),"Polygon"===$.nodeName||"PolygonPatch"===$.nodeName){var ot=tt.getLinearRings();go({node:$,hasZ:rt,srsName:it},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,ot,et,void 0,this)}else if("Surface"===$.nodeName){var at=ro($.namespaceURI,"patches");$.appendChild(at),this.writeSurfacePatches_(at,tt,et)}},e.prototype.writeCurveOrLineString=function($,tt,et){var nt=et[et.length-1].srsName;if("LineStringSegment"!==$.nodeName&&nt&&$.setAttribute("srsName",nt),"LineString"===$.nodeName||"LineStringSegment"===$.nodeName){var rt=ro($.namespaceURI,"posList");$.appendChild(rt),this.writePosList_(rt,tt,et)}else if("Curve"===$.nodeName){var it=ro($.namespaceURI,"segments");$.appendChild(it),this.writeCurveSegments_(it,tt,et)}},e.prototype.writeMultiSurfaceOrPolygon=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=nt.srsName,ot=nt.surface;it&&$.setAttribute("srsName",it);var at=tt.getPolygons();go({node:$,hasZ:rt,srsName:it,surface:ot},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,at,et,void 0,this)},e.prototype.writeMultiPoint=function($,tt,et){var nt=et[et.length-1],rt=nt.srsName,it=nt.hasZ;rt&&$.setAttribute("srsName",rt);var ot=tt.getPoints();go({node:$,hasZ:it,srsName:rt},this.POINTMEMBER_SERIALIZERS,ho("pointMember"),ot,et,void 0,this)},e.prototype.writeMultiCurveOrLineString=function($,tt,et){var nt=et[et.length-1],rt=nt.hasZ,it=nt.srsName,ot=nt.curve;it&&$.setAttribute("srsName",it);var at=tt.getLineStrings();go({node:$,hasZ:rt,srsName:it,curve:ot},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,at,et,void 0,this)},e.prototype.writeRing=function($,tt,et){var nt=ro($.namespaceURI,"LinearRing");$.appendChild(nt),this.writeLinearRing(nt,tt,et)},e.prototype.writeSurfaceOrPolygonMember=function($,tt,et){var nt=this.GEOMETRY_NODE_FACTORY_(tt,et);nt&&($.appendChild(nt),this.writeSurfaceOrPolygon(nt,tt,et))},e.prototype.writePointMember=function($,tt,et){var nt=ro($.namespaceURI,"Point");$.appendChild(nt),this.writePoint(nt,tt,et)},e.prototype.writeLineStringOrCurveMember=function($,tt,et){var nt=this.GEOMETRY_NODE_FACTORY_(tt,et);nt&&($.appendChild(nt),this.writeCurveOrLineString(nt,tt,et))},e.prototype.writeSurfacePatches_=function($,tt,et){var nt=ro($.namespaceURI,"PolygonPatch");$.appendChild(nt),this.writeSurfaceOrPolygon(nt,tt,et)},e.prototype.writeCurveSegments_=function($,tt,et){var nt=ro($.namespaceURI,"LineStringSegment");$.appendChild(nt),this.writeCurveOrLineString(nt,tt,et)},e.prototype.writeGeometryElement=function($,tt,et){var nt,rt=et[et.length-1],it=Object(bn.a)({},rt);it.node=$,nt=Array.isArray(tt)?Qi(tt,rt):Hi(tt,!0,rt),go(it,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[nt],et,void 0,this)},e.prototype.writeFeatureElement=function($,tt,et){var nt=tt.getId();nt&&$.setAttribute("fid",nt);var rt=et[et.length-1],it=rt.featureNS,ot=tt.getGeometryName();rt.serializers||(rt.serializers={},rt.serializers[it]={});var at=[],Ot=[];if(tt.hasProperties()){var wt=tt.getProperties();for(var St in wt){var Ct=wt[St];null!==Ct&&(at.push(St),Ot.push(Ct),St==ot||"function"==typeof Ct.getSimplifiedGeometry?St in rt.serializers[it]||(rt.serializers[it][St]=co(this.writeGeometryElement,this)):St in rt.serializers[it]||(rt.serializers[it][St]=co(Ro)))}}var Rt=Object(bn.a)({},rt);Rt.node=$,go(Rt,rt.serializers,ho(void 0,it),Ot,et,at)},e.prototype.writeFeatureMembers_=function($,tt,et){var nt=et[et.length-1],rt=nt.featureType,it=nt.featureNS,ot={};ot[it]={},ot[it][rt]=co(this.writeFeatureElement,this);var at=Object(bn.a)({},nt);at.node=$,go(at,ot,ho(rt,it),tt,et)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function($,tt,et){var nt=tt[tt.length-1].node;return ro(this.namespace,pa[nt.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function($,tt,et){var nt,rt=tt[tt.length-1],it=rt.multiSurface,ot=rt.surface,at=rt.curve,Ot=rt.multiCurve;return Array.isArray($)?nt="Envelope":"MultiPolygon"===(nt=$.getType())&&!0===it?nt="MultiSurface":"Polygon"===nt&&!0===ot?nt="Surface":"LineString"===nt&&!0===at?nt="Curve":"MultiLineString"===nt&&!0===Ot&&(nt="MultiCurve"),ro(this.namespace,nt)},e.prototype.writeGeometryNode=function($,tt){tt=this.adaptOptions(tt);var et=ro(this.namespace,"geom"),nt={node:et,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return tt&&Object(bn.a)(nt,tt),this.writeGeometryElement(et,$,[nt]),et},e.prototype.writeFeaturesNode=function($,tt){tt=this.adaptOptions(tt);var et=ro(this.namespace,"featureMembers");et.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var nt={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return tt&&Object(bn.a)(nt,tt),this.writeFeatureMembers_(et,$,[nt]),et},e}(aa);fa.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:so(fa.prototype.readFlatPos),posList:so(fa.prototype.readFlatPosList),coordinates:so(ha.prototype.readFlatCoordinates)}},fa.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:fa.prototype.interiorParser,exterior:fa.prototype.exteriorParser}},fa.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:so(aa.prototype.readPoint),MultiPoint:so(aa.prototype.readMultiPoint),LineString:so(aa.prototype.readLineString),MultiLineString:so(aa.prototype.readMultiLineString),LinearRing:so(aa.prototype.readLinearRing),Polygon:so(aa.prototype.readPolygon),MultiPolygon:so(aa.prototype.readMultiPolygon),Surface:so(fa.prototype.readSurface),MultiSurface:so(fa.prototype.readMultiSurface),Curve:so(fa.prototype.readCurve),MultiCurve:so(fa.prototype.readMultiCurve),Envelope:so(fa.prototype.readEnvelope)}},fa.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:ao(fa.prototype.curveMemberParser),curveMembers:ao(fa.prototype.curveMemberParser)}},fa.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:ao(fa.prototype.surfaceMemberParser),surfaceMembers:ao(fa.prototype.surfaceMemberParser)}},fa.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ao(aa.prototype.readLineString),Curve:ao(fa.prototype.readCurve)}},fa.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ao(aa.prototype.readPolygon),Surface:ao(fa.prototype.readSurface)}},fa.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:so(fa.prototype.readPatch)}},fa.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:so(fa.prototype.readSegment)}},fa.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:ao(fa.prototype.readFlatPosList),upperCorner:ao(fa.prototype.readFlatPosList)}},fa.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:so(fa.prototype.readPolygonPatch)}},fa.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:so(fa.prototype.readLineStringSegment)}},fa.prototype.writeFeatures,fa.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:co(fa.prototype.writeRing),interior:co(fa.prototype.writeRing)}},fa.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:co(Ro),upperCorner:co(Ro)}},fa.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:co(fa.prototype.writeSurfaceOrPolygonMember),polygonMember:co(fa.prototype.writeSurfaceOrPolygonMember)}},fa.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:co(fa.prototype.writePointMember)}},fa.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:co(fa.prototype.writeLineStringOrCurveMember),curveMember:co(fa.prototype.writeLineStringOrCurveMember)}},fa.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:co(fa.prototype.writeCurveOrLineString),MultiCurve:co(fa.prototype.writeMultiCurveOrLineString),Point:co(fa.prototype.writePoint),MultiPoint:co(fa.prototype.writeMultiPoint),LineString:co(fa.prototype.writeCurveOrLineString),MultiLineString:co(fa.prototype.writeMultiCurveOrLineString),LinearRing:co(fa.prototype.writeLinearRing),Polygon:co(fa.prototype.writeSurfaceOrPolygon),MultiPolygon:co(fa.prototype.writeMultiSurfaceOrPolygon),Surface:co(fa.prototype.writeSurfaceOrPolygon),MultiSurface:co(fa.prototype.writeMultiSurfaceOrPolygon),Envelope:co(fa.prototype.writeEnvelope)}};var da=fa,ya=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ga=function($){function e(tt){var et=this,nt=tt||{};return(et=$.call(this,nt)||this).schemaLocation=nt.schemaLocation?nt.schemaLocation:et.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",et}return ya(e,$),e}(da);ga.prototype.namespace="http://www.opengis.net/gml/3.2",ga.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:so(da.prototype.readFlatPos),posList:so(da.prototype.readFlatPosList),coordinates:so(ha.prototype.readFlatCoordinates)}},ga.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:da.prototype.interiorParser,exterior:da.prototype.exteriorParser}},ga.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:so(aa.prototype.readPoint),MultiPoint:so(aa.prototype.readMultiPoint),LineString:so(aa.prototype.readLineString),MultiLineString:so(aa.prototype.readMultiLineString),LinearRing:so(aa.prototype.readLinearRing),Polygon:so(aa.prototype.readPolygon),MultiPolygon:so(aa.prototype.readMultiPolygon),Surface:so(ga.prototype.readSurface),MultiSurface:so(da.prototype.readMultiSurface),Curve:so(ga.prototype.readCurve),MultiCurve:so(da.prototype.readMultiCurve),Envelope:so(ga.prototype.readEnvelope)}},ga.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:ao(da.prototype.curveMemberParser),curveMembers:ao(da.prototype.curveMemberParser)}},ga.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:ao(da.prototype.surfaceMemberParser),surfaceMembers:ao(da.prototype.surfaceMemberParser)}},ga.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ao(aa.prototype.readLineString),Curve:ao(da.prototype.readCurve)}},ga.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ao(aa.prototype.readPolygon),Surface:ao(da.prototype.readSurface)}},ga.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:so(da.prototype.readPatch)}},ga.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:so(da.prototype.readSegment)}},ga.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:ao(da.prototype.readFlatPosList),upperCorner:ao(da.prototype.readFlatPosList)}},ga.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:so(da.prototype.readPolygonPatch)}},ga.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:so(da.prototype.readLineStringSegment)}},ga.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:ao(aa.prototype.pointMemberParser),pointMembers:ao(aa.prototype.pointMemberParser)}},ga.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:ao(aa.prototype.lineStringMemberParser),lineStringMembers:ao(aa.prototype.lineStringMemberParser)}},ga.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:ao(aa.prototype.polygonMemberParser),polygonMembers:ao(aa.prototype.polygonMemberParser)}},ga.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:ao(aa.prototype.readFlatCoordinatesFromNode)}},ga.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ao(aa.prototype.readLineString)}},ga.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ao(aa.prototype.readPolygon)}},ga.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:so(aa.prototype.readFlatLinearRing)}},ga.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:co(da.prototype.writeRing),interior:co(da.prototype.writeRing)}},ga.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:co(Ro),upperCorner:co(Ro)}},ga.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:co(da.prototype.writeSurfaceOrPolygonMember),polygonMember:co(da.prototype.writeSurfaceOrPolygonMember)}},ga.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:co(da.prototype.writePointMember)}},ga.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:co(da.prototype.writeLineStringOrCurveMember),curveMember:co(da.prototype.writeLineStringOrCurveMember)}},ga.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:co(da.prototype.writeCurveOrLineString),MultiCurve:co(da.prototype.writeMultiCurveOrLineString),Point:co(ga.prototype.writePoint),MultiPoint:co(da.prototype.writeMultiPoint),LineString:co(da.prototype.writeCurveOrLineString),MultiLineString:co(da.prototype.writeMultiCurveOrLineString),LinearRing:co(da.prototype.writeLinearRing),Polygon:co(da.prototype.writeSurfaceOrPolygon),MultiPolygon:co(da.prototype.writeMultiSurfaceOrPolygon),Surface:co(da.prototype.writeSurfaceOrPolygon),MultiSurface:co(da.prototype.writeMultiSurfaceOrPolygon),Envelope:co(da.prototype.writeEnvelope)}};var _a=ga,va=function(){function t($){this.tagName_=$}return t.prototype.getTagName=function(){return this.tagName_},t}(),ma=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ba=function($){function e(tt,et){var nt=$.call(this,tt)||this;return nt.conditions=et,Object(eo.a)(nt.conditions.length>=2,57),nt}return ma(e,$),e}(va),Oa=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),xa=function($){function e(tt){return $.call(this,"And",Array.prototype.slice.call(arguments))||this}return Oa(e,$),e}(ba),wa=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Sa=function($){function e(tt,et,nt){var rt=$.call(this,"BBOX")||this;if(rt.geometryName=tt,rt.extent=et,4!==et.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return rt.srsName=nt,rt}return wa(e,$),e}(va),Ea=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ma=function($){function e(tt,et,nt,rt){var it=$.call(this,tt)||this;return it.geometryName=et||"the_geom",it.geometry=nt,it.srsName=rt,it}return Ea(e,$),e}(va),ja=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ca=(function($){ja((function e(tt,et,nt){return $.call(this,"Contains",tt,et,nt)||this}),$)}(Ma),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),Ra=(function($){Ca((function e(tt,et,nt,rt,it){var ot=$.call(this,"DWithin",tt,et,it)||this;return ot.distance=nt,ot.unit=rt,ot}),$)}(Ma),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),Pa=(function($){Ra((function e(tt,et,nt){return $.call(this,"Disjoint",tt,et,nt)||this}),$)}(Ma),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),Aa=function($){function e(tt,et){var nt=$.call(this,tt)||this;return nt.propertyName=et,nt}return Pa(e,$),e}(va),Fa=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Wa=(function($){Fa((function e(tt,et,nt){var rt=$.call(this,"During",tt)||this;return rt.begin=et,rt.end=nt,rt}),$)}(Aa),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),cs=function($){function e(tt,et,nt,rt){var it=$.call(this,tt,et)||this;return it.expression=nt,it.matchCase=rt,it}return Wa(e,$),e}(Aa),hs=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ls=(function($){hs((function e(tt,et,nt){return $.call(this,"PropertyIsEqualTo",tt,et,nt)||this}),$)}(cs),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),fs=(function($){ls((function e(tt,et){return $.call(this,"PropertyIsGreaterThan",tt,et)||this}),$)}(cs),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),ds=(function($){fs((function e(tt,et){return $.call(this,"PropertyIsGreaterThanOrEqualTo",tt,et)||this}),$)}(cs),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),_s=(function($){ds((function e(tt,et,nt){return $.call(this,"Intersects",tt,et,nt)||this}),$)}(Ma),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),vs=(function($){_s((function e(tt,et,nt){var rt=$.call(this,"PropertyIsBetween",tt)||this;return rt.lowerBoundary=et,rt.upperBoundary=nt,rt}),$)}(Aa),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),ms=(function($){vs((function e(tt,et,nt,rt,it,ot){var at=$.call(this,"PropertyIsLike",tt)||this;return at.pattern=et,at.wildCard=void 0!==nt?nt:"*",at.singleChar=void 0!==rt?rt:".",at.escapeChar=void 0!==it?it:"!",at.matchCase=ot,at}),$)}(Aa),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),bs=(function($){ms((function e(tt){return $.call(this,"PropertyIsNull",tt)||this}),$)}(Aa),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),Os=(function($){bs((function e(tt,et){return $.call(this,"PropertyIsLessThan",tt,et)||this}),$)}(cs),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),xs=(function($){Os((function e(tt,et){return $.call(this,"PropertyIsLessThanOrEqualTo",tt,et)||this}),$)}(cs),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),ws=(function($){xs((function e(tt){var et=$.call(this,"Not")||this;return et.condition=tt,et}),$)}(va),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),Ss=(function($){ws((function e(tt,et,nt){return $.call(this,"PropertyIsNotEqualTo",tt,et,nt)||this}),$)}(cs),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),Es=(function($){Ss((function e(tt){return $.call(this,"Or",Array.prototype.slice.call(arguments))||this}),$)}(ba),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}()),Ms=(function($){Es((function e(tt){var et=$.call(this,"ResourceId")||this;return et.rid=tt,et}),$)}(va),function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}());!function($){Ms((function e(tt,et,nt){return $.call(this,"Within",tt,et,nt)||this}),$)}(Ma);var js=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Cs={"http://www.opengis.net/gml":{boundedBy:uo(aa.prototype.readGeometryElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:ao(aa.prototype.readFeaturesInternal)}},Rs={"http://www.opengis.net/wfs":{totalInserted:uo(jo),totalUpdated:uo(jo),totalDeleted:uo(jo)},"http://www.opengis.net/wfs/2.0":{totalInserted:uo(jo),totalUpdated:uo(jo),totalDeleted:uo(jo)}},Ps={"http://www.opengis.net/wfs":{TransactionSummary:uo(Ta,"transactionSummary"),InsertResults:uo(Na,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:uo(Ta,"transactionSummary"),InsertResults:uo(Na,"insertIds")}},Is={"http://www.opengis.net/wfs":{PropertyName:co(Ro)},"http://www.opengis.net/wfs/2.0":{PropertyName:co(Ro)}},Ts={"http://www.opengis.net/wfs":{Insert:co(ka),Update:co(Ua),Delete:co(za),Property:co(Ya),Native:co(Ba)},"http://www.opengis.net/wfs/2.0":{Insert:co(ka),Update:co(Ua),Delete:co(za),Property:co(Ya),Native:co(Ba)}},As="http://www.w3.org/2000/xmlns/",Ns={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},Ds={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},Gs={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},zs={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},Us={"2.0.0":_a,"1.1.0":da,"1.0.0":ha},Ys=function($){function e(tt){var et=$.call(this)||this,nt=tt||{};return et.version_=nt.version?nt.version:"1.1.0",et.featureType_=nt.featureType,et.featureNS_=nt.featureNS,et.gmlFormat_=nt.gmlFormat?nt.gmlFormat:new Us[et.version_],et.schemaLocation_=nt.schemaLocation?nt.schemaLocation:zs[et.version_],et}return js(e,$),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function($){this.featureType_=$},e.prototype.readFeaturesFromNode=function($,tt){var et={node:$};Object(bn.a)(et,{featureType:this.featureType_,featureNS:this.featureNS_}),Object(bn.a)(et,this.getReadOptions($,tt||{}));var nt=[et],rt=fo([],"2.0.0"===this.version_?Cs:this.gmlFormat_.FEATURE_COLLECTION_PARSERS,$,nt,this.gmlFormat_);return rt||(rt=[]),rt},e.prototype.readTransactionResponse=function($){if($){if("string"==typeof $){var tt=oo($);return this.readTransactionResponseFromDocument(tt)}return io($)?this.readTransactionResponseFromDocument($):this.readTransactionResponseFromNode($)}},e.prototype.readFeatureCollectionMetadata=function($){if($){if("string"==typeof $){var tt=oo($);return this.readFeatureCollectionMetadataFromDocument(tt)}return io($)?this.readFeatureCollectionMetadataFromDocument($):this.readFeatureCollectionMetadataFromNode($)}},e.prototype.readFeatureCollectionMetadataFromDocument=function($){for(var tt=$.firstChild;tt;tt=tt.nextSibling)if(tt.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(tt)},e.prototype.readFeatureCollectionMetadataFromNode=function($){var tt={},et=Co($.getAttribute("numberOfFeatures"));return tt.numberOfFeatures=et,fo(tt,Cs,$,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function($){for(var tt=$.firstChild;tt;tt=tt.nextSibling)if(tt.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(tt)},e.prototype.readTransactionResponseFromNode=function($){return fo({},Ps,$,[])},e.prototype.writeGetFeature=function($){var tt=this,et=ro(Ds[this.version_],"GetFeature");et.setAttribute("service","WFS"),et.setAttribute("version",this.version_),$.handle&&et.setAttribute("handle",$.handle),$.outputFormat&&et.setAttribute("outputFormat",$.outputFormat),void 0!==$.maxFeatures&&et.setAttribute("maxFeatures",String($.maxFeatures)),$.resultType&&et.setAttribute("resultType",$.resultType),void 0!==$.startIndex&&et.setAttribute("startIndex",String($.startIndex)),void 0!==$.count&&et.setAttribute("count",String($.count)),void 0!==$.viewParams&&et.setAttribute("viewParams",$.viewParams),et.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);var nt={node:et};if(Object(bn.a)(nt,{version:this.version_,srsName:$.srsName,featureNS:$.featureNS?$.featureNS:this.featureNS_,featurePrefix:$.featurePrefix,propertyNames:$.propertyNames?$.propertyNames:[]}),Object(eo.a)(Array.isArray($.featureTypes),11),"string"==typeof $.featureTypes[0]){var rt=$.filter;$.bbox&&(Object(eo.a)($.geometryName,12),rt=this.combineBboxAndFilter($.geometryName,$.bbox,$.srsName,rt)),Object(bn.a)(nt,{geometryName:$.geometryName,filter:rt}),ss(et,$.featureTypes,[nt])}else $.featureTypes.forEach((function(rt){var it=tt.combineBboxAndFilter(rt.geometryName,rt.bbox,$.srsName,$.filter);Object(bn.a)(nt,{geometryName:rt.geometryName,filter:it}),ss(et,[rt.name],[nt])}));return et},e.prototype.combineBboxAndFilter=function($,tt,et,nt){var rt=function($,tt,et){return new Sa($,tt,et)}($,tt,et);return nt?function($){var tt=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(xa,tt))}(nt,rt):rt},e.prototype.writeTransaction=function($,tt,et,nt){var rt,it=[],ot=nt.version?nt.version:this.version_,at=ro(Ds[ot],"Transaction");at.setAttribute("service","WFS"),at.setAttribute("version",ot),nt&&(rt=nt.gmlOptions?nt.gmlOptions:{},nt.handle&&at.setAttribute("handle",nt.handle)),at.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",zs[ot]);var Ot=function($,tt,et,nt){var rt,it=nt.featurePrefix?nt.featurePrefix:"feature";return"1.0.0"===et?rt=2:"1.1.0"===et?rt=3:"2.0.0"===et&&(rt=3.2),Object(bn.a)({node:$},{version:et,featureNS:nt.featureNS,featureType:nt.featureType,featurePrefix:it,gmlVersion:rt,hasZ:nt.hasZ,srsName:nt.srsName},tt)}(at,rt,ot,nt);return $&&Ia("Insert",$,it,Ot),tt&&Ia("Update",tt,it,Ot),et&&Ia("Delete",et,it,Ot),nt.nativeElements&&Ia("Native",nt.nativeElements,it,Ot),at},e.prototype.readProjectionFromDocument=function($){for(var tt=$.firstChild;tt;tt=tt.nextSibling)if(tt.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(tt);return null},e.prototype.readProjectionFromNode=function($){if($.firstElementChild&&$.firstElementChild.firstElementChild)for(var tt=($=$.firstElementChild.firstElementChild).firstElementChild;tt;tt=tt.nextElementSibling)if(0!==tt.childNodes.length&&(1!==tt.childNodes.length||3!==tt.firstChild.nodeType)){var et=[{}];return this.gmlFormat_.readGeometryElement(tt,et),Object(_n.k)(et.pop().srsName)}return null},e}(ea);function Ia($,tt,et,nt){go(nt,Ts,ho($),tt,et)}function Ta($,tt){return fo({},Rs,$,tt)}var Bs={"http://www.opengis.net/ogc":{FeatureId:ao((function($,tt){return $.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:ao((function($,tt){return $.getAttribute("fid")}))}};function La($,tt){po(Bs,$,tt)}var Ws={"http://www.opengis.net/wfs":{Feature:La},"http://www.opengis.net/wfs/2.0":{Feature:La}};function Na($,tt){return fo([],Ws,$,tt)}function ka($,tt,et){var nt=et[et.length-1],rt=nt.featureType,it=nt.featureNS,ot=nt.gmlVersion,at=ro(it,rt);$.appendChild(at),2===ot?ha.prototype.writeFeatureElement(at,tt,et):3===ot?da.prototype.writeFeatureElement(at,tt,et):_a.prototype.writeFeatureElement(at,tt,et)}function Da($,tt,et){var nt=et[et.length-1].version,rt=Ns[nt],it=ro(rt,"Filter"),ot=ro(rt,"FeatureId");it.appendChild(ot),ot.setAttribute("fid",tt),$.appendChild(it)}function Ga($,tt){var et=($=$||"feature")+":";return 0===tt.indexOf(et)?tt:et+tt}function za($,tt,et){var nt=et[et.length-1];Object(eo.a)(void 0!==tt.getId(),26);var rt=nt.featureType,it=nt.featurePrefix,ot=nt.featureNS,at=Ga(it,rt);$.setAttribute("typeName",at),$.setAttributeNS(As,"xmlns:"+it,ot);var Ot=tt.getId();void 0!==Ot&&Da($,Ot,et)}function Ua($,tt,et){var nt=et[et.length-1];Object(eo.a)(void 0!==tt.getId(),27);var rt=nt.version,it=nt.featureType,ot=nt.featurePrefix,at=nt.featureNS,Ot=Ga(ot,it),wt=tt.getGeometryName();$.setAttribute("typeName",Ot),$.setAttributeNS(As,"xmlns:"+ot,at);var St=tt.getId();if(void 0!==St){for(var Ct=tt.getKeys(),Rt=[],Tt=0,At=Ct.length;Tt<At;Tt++){var Nt=tt.get(Ct[Tt]);if(void 0!==Nt){var kt=Ct[Tt];Nt&&"function"==typeof Nt.getSimplifiedGeometry&&(kt=wt),Rt.push({name:kt,value:Nt})}}go({version:rt,gmlVersion:nt.gmlVersion,node:$,hasZ:nt.hasZ,srsName:nt.srsName},Ts,ho("Property"),Rt,et),Da($,St,et)}}function Ya($,tt,et){var nt=et[et.length-1],rt=nt.version,it=Ds[rt],ot=ro(it,"Name"),at=nt.gmlVersion;if($.appendChild(ot),Ro(ot,tt.name),void 0!==tt.value&&null!==tt.value){var Ot=ro(it,"Value");$.appendChild(Ot),tt.value&&"function"==typeof tt.value.getSimplifiedGeometry?2===at?ha.prototype.writeGeometryElement(Ot,tt.value,et):3===at?da.prototype.writeGeometryElement(Ot,tt.value,et):_a.prototype.writeGeometryElement(Ot,tt.value,et):Ro(Ot,tt.value)}}function Ba($,tt,et){tt.vendorId&&$.setAttribute("vendorId",tt.vendorId),void 0!==tt.safeToIgnore&&$.setAttribute("safeToIgnore",String(tt.safeToIgnore)),void 0!==tt.value&&Ro($,tt.value)}var Xs={"http://www.opengis.net/wfs":{Query:co(Xa)},"http://www.opengis.net/wfs/2.0":{Query:co(Xa)},"http://www.opengis.net/ogc":{During:co(Ha),And:co(Qa),Or:co(Qa),Not:co(Ja),BBOX:co(Va),Contains:co(Za),Intersects:co(Za),Within:co(Za),DWithin:co(Ka),PropertyIsEqualTo:co($a),PropertyIsNotEqualTo:co($a),PropertyIsLessThan:co($a),PropertyIsLessThanOrEqualTo:co($a),PropertyIsGreaterThan:co($a),PropertyIsGreaterThanOrEqualTo:co($a),PropertyIsNull:co(ts),PropertyIsBetween:co(es),PropertyIsLike:co(rs)},"http://www.opengis.net/fes/2.0":{During:co(Ha),And:co(Qa),Or:co(Qa),Not:co(Ja),BBOX:co(Va),Contains:co(Za),Disjoint:co(Za),Intersects:co(Za),ResourceId:co((function($,tt,et){$.setAttribute("rid",tt.rid)})),Within:co(Za),DWithin:co(Ka),PropertyIsEqualTo:co($a),PropertyIsNotEqualTo:co($a),PropertyIsLessThan:co($a),PropertyIsLessThanOrEqualTo:co($a),PropertyIsGreaterThan:co($a),PropertyIsGreaterThanOrEqualTo:co($a),PropertyIsNull:co(ts),PropertyIsBetween:co(es),PropertyIsLike:co(rs)}};function Xa($,tt,et){var nt,rt,it=et[et.length-1],ot=it.version,at=it.featurePrefix,Ot=it.featureNS,wt=it.propertyNames,St=it.srsName;nt=at?Ga(at,tt):tt,rt="2.0.0"===ot?"typeNames":"typeName",$.setAttribute(rt,nt),St&&$.setAttribute("srsName",St),Ot&&$.setAttributeNS(As,"xmlns:"+at,Ot);var Ct=Object(bn.a)({},it);Ct.node=$,go(Ct,Is,ho("PropertyName"),wt,et);var Rt=it.filter;if(Rt){var Tt=ro(us(ot),"Filter");$.appendChild(Tt),qa(Tt,Rt,et)}}function qa($,tt,et){var nt=et[et.length-1],rt={node:$};Object(bn.a)(rt,{context:nt}),go(rt,Xs,ho(tt.getTagName()),[tt],et)}function Va($,tt,et){var nt=et[et.length-1],rt=nt.context.version;nt.srsName=tt.srsName;var it=Us[rt];os(rt,$,tt.geometryName),it.prototype.writeGeometryElement($,tt.extent,et)}function Za($,tt,et){var nt=et[et.length-1],rt=nt.context.version;nt.srsName=tt.srsName;var it=Us[rt];os(rt,$,tt.geometryName),it.prototype.writeGeometryElement($,tt.geometry,et)}function Ka($,tt,et){var nt=et[et.length-1].context.version;Za($,tt,et);var rt=ro(us(nt),"Distance");Ro(rt,tt.distance.toString()),"2.0.0"===nt?rt.setAttribute("uom",tt.unit):rt.setAttribute("units",tt.unit),$.appendChild(rt)}function Ha($,tt,et){var nt=et[et.length-1].context.version;ns(Gs[nt],"ValueReference",$,tt.propertyName);var rt=ro(ra,"TimePeriod");$.appendChild(rt);var it=ro(ra,"begin");rt.appendChild(it),as(it,tt.begin);var ot=ro(ra,"end");rt.appendChild(ot),as(ot,tt.end)}function Qa($,tt,et){var nt=et[et.length-1].context,rt={node:$};Object(bn.a)(rt,{context:nt});for(var it=tt.conditions,ot=0,at=it.length;ot<at;++ot){var Ot=it[ot];go(rt,Xs,ho(Ot.getTagName()),[Ot],et)}}function Ja($,tt,et){var nt=et[et.length-1].context,rt={node:$};Object(bn.a)(rt,{context:nt});var it=tt.condition;go(rt,Xs,ho(it.getTagName()),[it],et)}function $a($,tt,et){var nt=et[et.length-1].context.version;void 0!==tt.matchCase&&$.setAttribute("matchCase",tt.matchCase.toString()),os(nt,$,tt.propertyName),is(nt,$,""+tt.expression)}function ts($,tt,et){os(et[et.length-1].context.version,$,tt.propertyName)}function es($,tt,et){var nt=et[et.length-1].context.version,rt=us(nt);os(nt,$,tt.propertyName);var it=ro(rt,"LowerBoundary");$.appendChild(it),is(nt,it,""+tt.lowerBoundary);var ot=ro(rt,"UpperBoundary");$.appendChild(ot),is(nt,ot,""+tt.upperBoundary)}function rs($,tt,et){var nt=et[et.length-1].context.version;$.setAttribute("wildCard",tt.wildCard),$.setAttribute("singleChar",tt.singleChar),$.setAttribute("escapeChar",tt.escapeChar),void 0!==tt.matchCase&&$.setAttribute("matchCase",tt.matchCase.toString()),os(nt,$,tt.propertyName),is(nt,$,""+tt.pattern)}function ns($,tt,et,nt){var rt=ro($,tt);Ro(rt,nt),et.appendChild(rt)}function is($,tt,et){ns(us($),"Literal",tt,et)}function os($,tt,et){"2.0.0"===$?ns(Gs[$],"ValueReference",tt,et):ns(Ns[$],"PropertyName",tt,et)}function as($,tt){var et=ro(ra,"TimeInstant");$.appendChild(et);var nt=ro(ra,"timePosition");et.appendChild(nt),Ro(nt,tt)}function ss($,tt,et){var nt=et[et.length-1],rt=Object(bn.a)({},nt);rt.node=$,go(rt,Xs,ho("Query"),tt,et)}function us($){return"2.0.0"===$?Gs[$]:Ns[$]}var qs=Ys,Zs=et(133),Vs=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}();function ps($){return"string"==typeof $?JSON.parse($)||null:null!==$?$:null}var Ks=function($){function e(){return $.call(this)||this}return Vs(e,$),e.prototype.getType=function(){return Ho},e.prototype.readFeature=function($,tt){return this.readFeatureFromObject(ps($),this.getReadOptions($,tt))},e.prototype.readFeatures=function($,tt){return this.readFeaturesFromObject(ps($),this.getReadOptions($,tt))},e.prototype.readFeatureFromObject=function($,tt){return Object(_i.b)()},e.prototype.readFeaturesFromObject=function($,tt){return Object(_i.b)()},e.prototype.readGeometry=function($,tt){return this.readGeometryFromObject(ps($),this.getReadOptions($,tt))},e.prototype.readGeometryFromObject=function($,tt){return Object(_i.b)()},e.prototype.readProjection=function($){return this.readProjectionFromObject(ps($))},e.prototype.readProjectionFromObject=function($){return Object(_i.b)()},e.prototype.writeFeature=function($,tt){return JSON.stringify(this.writeFeatureObject($,tt))},e.prototype.writeFeatureObject=function($,tt){return Object(_i.b)()},e.prototype.writeFeatures=function($,tt){return JSON.stringify(this.writeFeaturesObject($,tt))},e.prototype.writeFeaturesObject=function($,tt){return Object(_i.b)()},e.prototype.writeGeometry=function($,tt){return JSON.stringify(this.writeGeometryObject($,tt))},e.prototype.writeGeometryObject=function($,tt){return Object(_i.b)()},e}(Vo),Hs=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}();function ys($,tt){if(!$)return null;var et;switch($.type){case Oo.a.POINT:et=function($){return new Do.a($.coordinates)}($);break;case Oo.a.LINE_STRING:et=function($){return new Lo($.coordinates)}($);break;case Oo.a.POLYGON:et=function($){return new Uo.a($.coordinates)}($);break;case Oo.a.MULTI_POINT:et=function($){return new zo($.coordinates)}($);break;case Oo.a.MULTI_LINE_STRING:et=function($){return new ko($.coordinates)}($);break;case Oo.a.MULTI_POLYGON:et=function($){return new Zo($.coordinates)}($);break;case Oo.a.GEOMETRY_COLLECTION:et=function($,tt){var et=$.geometries.map((function($){return ys($,undefined)}));return new Zs.default(et)}($);break;default:throw new Error("Unsupported GeoJSON type: "+$.type)}return Hi(et,!1,tt)}function gs($,tt){var et,nt=($=Hi($,!0,tt)).getType();switch(nt){case Oo.a.POINT:et=function($,tt){return{type:"Point",coordinates:$.getCoordinates()}}($);break;case Oo.a.LINE_STRING:et=function($,tt){return{type:"LineString",coordinates:$.getCoordinates()}}($);break;case Oo.a.POLYGON:et=function($,tt){var et;return tt&&(et=tt.rightHanded),{type:"Polygon",coordinates:$.getCoordinates(et)}}($,tt);break;case Oo.a.MULTI_POINT:et=function($,tt){return{type:"MultiPoint",coordinates:$.getCoordinates()}}($);break;case Oo.a.MULTI_LINE_STRING:et=function($,tt){return{type:"MultiLineString",coordinates:$.getCoordinates()}}($);break;case Oo.a.MULTI_POLYGON:et=function($,tt){var et;return tt&&(et=tt.rightHanded),{type:"MultiPolygon",coordinates:$.getCoordinates(et)}}($,tt);break;case Oo.a.GEOMETRY_COLLECTION:et=function($,tt){return{type:"GeometryCollection",geometries:$.getGeometriesArray().map((function($){var et=Object(bn.a)({},tt);return delete et.featureProjection,gs($,et)}))}}($,tt);break;case Oo.a.CIRCLE:et={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+nt)}return et}var Qs=function($){function e(tt){var et=this,nt=tt||{};return(et=$.call(this)||this).dataProjection=Object(_n.k)(nt.dataProjection?nt.dataProjection:"EPSG:4326"),nt.featureProjection&&(et.defaultFeatureProjection=Object(_n.k)(nt.featureProjection)),et.geometryName_=nt.geometryName,et.extractGeometryName_=nt.extractGeometryName,et}return Hs(e,$),e.prototype.readFeatureFromObject=function($,tt){var et,nt=ys((et="Feature"===$.type?$:{type:"Feature",geometry:$,properties:null}).geometry,tt),rt=new vo;return this.geometryName_?rt.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in et!==void 0&&rt.setGeometryName(et.geometry_name),rt.setGeometry(nt),"id"in et&&rt.setId(et.id),et.properties&&rt.setProperties(et.properties,!0),rt},e.prototype.readFeaturesFromObject=function($,tt){var et=null;if("FeatureCollection"===$.type){et=[];for(var nt=$.features,rt=0,it=nt.length;rt<it;++rt)et.push(this.readFeatureFromObject(nt[rt],tt))}else et=[this.readFeatureFromObject($,tt)];return et},e.prototype.readGeometryFromObject=function($,tt){return ys($,tt)},e.prototype.readProjectionFromObject=function($){var tt,et=$.crs;return et?"name"==et.type?tt=Object(_n.k)(et.properties.name):"EPSG"===et.type?tt=Object(_n.k)("EPSG:"+et.properties.code):Object(eo.a)(!1,36):tt=this.dataProjection,tt},e.prototype.writeFeatureObject=function($,tt){tt=this.adaptOptions(tt);var et={type:"Feature",geometry:null,properties:null},nt=$.getId();if(void 0!==nt&&(et.id=nt),!$.hasProperties())return et;var rt=$.getProperties(),it=$.getGeometry();return it&&(et.geometry=gs(it,tt),delete rt[$.getGeometryName()]),Object(bn.d)(rt)||(et.properties=rt),et},e.prototype.writeFeaturesObject=function($,tt){tt=this.adaptOptions(tt);for(var et=[],nt=0,rt=$.length;nt<rt;++nt)et.push(this.writeFeatureObject($[nt],tt));return{type:"FeatureCollection",features:et}},e.prototype.writeGeometryObject=function($,tt){return gs($,this.adaptOptions(tt))},e}(Ks),Js=et(34),$s=et(29),tc=et(25),ec=et(45),nc=et(112),rc=et.n(nc),ic=function(){function t($){this.rbush_=new rc.a($),this.items_={}}return t.prototype.insert=function($,tt){var et={minX:$[0],minY:$[1],maxX:$[2],maxY:$[3],value:tt};this.rbush_.insert(et),this.items_[Object(_i.c)(tt)]=et},t.prototype.load=function($,tt){for(var et=new Array(tt.length),nt=0,rt=tt.length;nt<rt;nt++){var it=$[nt],ot=tt[nt],at={minX:it[0],minY:it[1],maxX:it[2],maxY:it[3],value:ot};et[nt]=at,this.items_[Object(_i.c)(ot)]=at}this.rbush_.load(et)},t.prototype.remove=function($){var tt=Object(_i.c)($),et=this.items_[tt];return delete this.items_[tt],null!==this.rbush_.remove(et)},t.prototype.update=function($,tt){var et=this.items_[Object(_i.c)(tt)],nt=[et.minX,et.minY,et.maxX,et.maxY];Object(gn.p)(nt,$)||(this.remove(tt),this.insert($,tt))},t.prototype.getAll=function(){return this.rbush_.all().map((function($){return $.value}))},t.prototype.getInExtent=function($){var tt={minX:$[0],minY:$[1],maxX:$[2],maxY:$[3]};return this.rbush_.search(tt).map((function($){return $.value}))},t.prototype.forEach=function($){return this.forEach_(this.getAll(),$)},t.prototype.forEachInExtent=function($,tt){return this.forEach_(this.getInExtent($),tt)},t.prototype.forEach_=function($,tt){for(var et,nt=0,rt=$.length;nt<rt;nt++)if(et=tt($[nt]))return et;return et},t.prototype.isEmpty=function(){return Object(bn.d)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function($){var tt=this.rbush_.toJSON();return Object(gn.k)(tt.minX,tt.minY,tt.maxX,tt.maxY,$)},t.prototype.concat=function($){for(var tt in this.rbush_.load($.rbush_.all()),$.items_)this.items_[tt]=$.items_[tt]},t}(),oc=et(78),sc="addfeature",cc="removefeature",uc=et(16);function Ls($,tt){return[[-1/0,-1/0,1/0,1/0]]}function Fs($,tt){return[$]}function ks($,tt){return function(et,nt,rt,it,ot){var at=this;!function($,tt,et,nt,rt,it,ot){var at=new XMLHttpRequest;at.open("GET","function"==typeof $?$(et,nt,rt):$,!0),tt.getType()==Ko&&(at.responseType="arraybuffer"),at.withCredentials=false,at.onload=function($){if(!at.status||at.status>=200&&at.status<300){var nt=tt.getType(),Ot=void 0;nt==Ho||"text"==nt?Ot=at.responseText:"xml"==nt?(Ot=at.responseXML)||(Ot=(new DOMParser).parseFromString(at.responseText,"application/xml")):nt==Ko&&(Ot=at.response),Ot?it(tt.readFeatures(Ot,{extent:et,featureProjection:rt}),tt.readProjection(Ot)):ot()}else ot()},at.onerror=ot,at.send()}($,tt,et,nt,rt,(function($,tt){void 0!==it&&it($),at.addFeatures($)}),ot||uc.c)}}var hc=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),lc=function($){function e(tt,et,nt){var rt=$.call(this,tt)||this;return rt.feature=et,rt.features=nt,rt}return hc(e,$),e}(tc.a),fc=function($){function e(tt){var et=this,nt=tt||{};(et=$.call(this,{attributions:nt.attributions,projection:void 0,state:gi.a.READY,wrapX:void 0===nt.wrapX||nt.wrapX})||this).loader_=uc.c,et.format_=nt.format,et.overlaps_=void 0===nt.overlaps||nt.overlaps,et.url_=nt.url,void 0!==nt.loader?et.loader_=nt.loader:void 0!==et.url_&&(Object(eo.a)(et.format_,7),et.loader_=ks(et.url_,et.format_)),et.strategy_=void 0!==nt.strategy?nt.strategy:Ls;var rt,it,ot=void 0===nt.useSpatialIndex||nt.useSpatialIndex;return et.featuresRtree_=ot?new ic:null,et.loadedExtentsRtree_=new ic,et.nullGeometryFeatures_={},et.idIndex_={},et.uidIndex_={},et.featureChangeKeys_={},et.featuresCollection_=null,Array.isArray(nt.features)?it=nt.features:nt.features&&(it=(rt=nt.features).getArray()),ot||void 0!==rt||(rt=new Js.a(it)),void 0!==it&&et.addFeaturesInternal(it),void 0!==rt&&et.bindFeaturesCollection_(rt),et}return hc(e,$),e.prototype.addFeature=function($){this.addFeatureInternal($),this.changed()},e.prototype.addFeatureInternal=function($){var tt=Object(_i.c)($);if(this.addToIndex_(tt,$)){this.setupChangeEvents_(tt,$);var et=$.getGeometry();if(et){var nt=et.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(nt,$)}else this.nullGeometryFeatures_[tt]=$;this.dispatchEvent(new lc(sc,$))}else this.featuresCollection_&&this.featuresCollection_.remove($)},e.prototype.setupChangeEvents_=function($,tt){this.featureChangeKeys_[$]=[Object(lo.a)(tt,fi.a.CHANGE,this.handleFeatureChange_,this),Object(lo.a)(tt,ec.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function($,tt){var et=!0,nt=tt.getId();return void 0!==nt&&(nt.toString()in this.idIndex_?et=!1:this.idIndex_[nt.toString()]=tt),et&&(Object(eo.a)(!($ in this.uidIndex_),30),this.uidIndex_[$]=tt),et},e.prototype.addFeatures=function($){this.addFeaturesInternal($),this.changed()},e.prototype.addFeaturesInternal=function($){for(var tt=[],et=[],nt=[],rt=0,it=$.length;rt<it;rt++){var ot=$[rt],at=Object(_i.c)(ot);this.addToIndex_(at,ot)&&et.push(ot)}rt=0;for(var Ot=et.length;rt<Ot;rt++){ot=et[rt],at=Object(_i.c)(ot),this.setupChangeEvents_(at,ot);var wt=ot.getGeometry();if(wt){var St=wt.getExtent();tt.push(St),nt.push(ot)}else this.nullGeometryFeatures_[at]=ot}this.featuresRtree_&&this.featuresRtree_.load(tt,nt),rt=0;for(var Ct=et.length;rt<Ct;rt++)this.dispatchEvent(new lc(sc,et[rt]))},e.prototype.bindFeaturesCollection_=function($){var tt=!1;this.addEventListener(sc,(function(et){tt||(tt=!0,$.push(et.feature),tt=!1)})),this.addEventListener(cc,(function(et){tt||(tt=!0,$.remove(et.feature),tt=!1)})),$.addEventListener($s.a.ADD,function($){tt||(tt=!0,this.addFeature($.element),tt=!1)}.bind(this)),$.addEventListener($s.a.REMOVE,function($){tt||(tt=!0,this.removeFeature($.element),tt=!1)}.bind(this)),this.featuresCollection_=$},e.prototype.clear=function($){if($){for(var tt in this.featureChangeKeys_)this.featureChangeKeys_[tt].forEach(lo.c);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var et in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[et]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var nt=new lc("clear");this.dispatchEvent(nt),this.changed()},e.prototype.forEachFeature=function($){if(this.featuresRtree_)return this.featuresRtree_.forEach($);this.featuresCollection_&&this.featuresCollection_.forEach($)},e.prototype.forEachFeatureAtCoordinateDirect=function($,tt){var et=[$[0],$[1],$[0],$[1]];return this.forEachFeatureInExtent(et,(function(et){return et.getGeometry().intersectsCoordinate($)?tt(et):void 0}))},e.prototype.forEachFeatureInExtent=function($,tt){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent($,tt);this.featuresCollection_&&this.featuresCollection_.forEach(tt)},e.prototype.forEachFeatureIntersectingExtent=function($,tt){return this.forEachFeatureInExtent($,(function(et){if(et.getGeometry().intersectsExtent($)){var nt=tt(et);if(nt)return nt}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var $;return this.featuresCollection_?$=this.featuresCollection_.getArray():this.featuresRtree_&&($=this.featuresRtree_.getAll(),Object(bn.d)(this.nullGeometryFeatures_)||Object(Ci.c)($,Object(bn.c)(this.nullGeometryFeatures_))),$},e.prototype.getFeaturesAtCoordinate=function($){var tt=[];return this.forEachFeatureAtCoordinateDirect($,(function($){tt.push($)})),tt},e.prototype.getFeaturesInExtent=function($){return this.featuresRtree_?this.featuresRtree_.getInExtent($):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function($,tt){var et=$[0],nt=$[1],rt=null,it=[NaN,NaN],ot=1/0,at=[-1/0,-1/0,1/0,1/0],Ot=tt||uc.b;return this.featuresRtree_.forEachInExtent(at,(function($){if(Ot($)){var tt=$.getGeometry(),wt=ot;if((ot=tt.closestPointXY(et,nt,it,ot))<wt){rt=$;var St=Math.sqrt(ot);at[0]=et-St,at[1]=nt-St,at[2]=et+St,at[3]=nt+St}}})),rt},e.prototype.getExtent=function($){return this.featuresRtree_.getExtent($)},e.prototype.getFeatureById=function($){var tt=this.idIndex_[$.toString()];return void 0!==tt?tt:null},e.prototype.getFeatureByUid=function($){var tt=this.uidIndex_[$];return void 0!==tt?tt:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function($){var tt=$.target,et=Object(_i.c)(tt),nt=tt.getGeometry();if(nt){var rt=nt.getExtent();et in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[et],this.featuresRtree_&&this.featuresRtree_.insert(rt,tt)):this.featuresRtree_&&this.featuresRtree_.update(rt,tt)}else et in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(tt),this.nullGeometryFeatures_[et]=tt);var it=tt.getId();if(void 0!==it){var ot=it.toString();this.idIndex_[ot]!==tt&&(this.removeFromIdIndex_(tt),this.idIndex_[ot]=tt)}else this.removeFromIdIndex_(tt),this.uidIndex_[et]=tt;this.changed(),this.dispatchEvent(new lc("changefeature",tt))},e.prototype.hasFeature=function($){var tt=$.getId();return void 0!==tt?tt in this.idIndex_:Object(_i.c)($)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(bn.d)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function($,tt,et){var nt=this.loadedExtentsRtree_,rt=this.strategy_($,tt);this.loading=!1;for(var o=function($,ot){var at=rt[$];nt.forEachInExtent(at,(function($){return Object(gn.g)($.extent,at)}))||(it.dispatchEvent(new lc("featuresloadstart")),it.loader_.call(it,at,tt,et,function($){this.dispatchEvent(new lc("featuresloadend",void 0,$))}.bind(it),function(){this.dispatchEvent(new lc("featuresloaderror"))}.bind(it)),nt.insert(at,{extent:at.slice()}),it.loading=it.loader_!==uc.c)},it=this,ot=0,at=rt.length;ot<at;++ot)o(ot)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),$.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function($){var tt,et=this.loadedExtentsRtree_;et.forEachInExtent($,(function(et){if(Object(gn.p)(et.extent,$))return tt=et,!0})),tt&&et.remove(tt)},e.prototype.removeFeature=function($){var tt=Object(_i.c)($);tt in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[tt]:this.featuresRtree_&&this.featuresRtree_.remove($),this.removeFeatureInternal($),this.changed()},e.prototype.removeFeatureInternal=function($){var tt=Object(_i.c)($);this.featureChangeKeys_[tt].forEach(lo.c),delete this.featureChangeKeys_[tt];var et=$.getId();void 0!==et&&delete this.idIndex_[et.toString()],delete this.uidIndex_[tt],this.dispatchEvent(new lc(cc,$))},e.prototype.removeFromIdIndex_=function($){var tt=!1;for(var et in this.idIndex_)if(this.idIndex_[et]===$){delete this.idIndex_[et],tt=!0;break}return tt},e.prototype.setLoader=function($){this.loader_=$},e.prototype.setUrl=function($){Object(eo.a)(this.format_,7),this.setLoader(ks($,this.format_))},e}(oc.a),dc=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),gc=function($){function e(tt){var et=tt||{};return $.call(this,et)||this}return dc(e,$),e}(ci.a),mc=et(22),bc=et(28),Oc=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Sc=function($){function e(tt){var et=$.call(this,tt)||this;return et.image_=null,et}return Oc(e,$),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function($){var tt=$.layerStatesArray[$.layerIndex],et=$.pixelRatio,nt=$.viewState,rt=nt.resolution,it=this.getLayer().getSource(),ot=$.viewHints,at=$.extent;if(void 0!==tt.extent&&(at=Object(gn.B)(at,Object(_n.j)(tt.extent,nt.projection))),!ot[mc.a.ANIMATING]&&!ot[mc.a.INTERACTING]&&!Object(gn.H)(at))if(it){var Ot=nt.projection;if(!bc.a){var wt=it.getProjection();wt&&(Ot=wt)}var St=it.getImage(at,rt,et,Ot);St&&this.loadImage(St)&&(this.image_=St)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function($,tt){var et=this.image_,nt=et.getExtent(),rt=et.getResolution(),it=et.getPixelRatio(),ot=$.layerStatesArray[$.layerIndex],at=$.pixelRatio,Ot=$.viewState,wt=Ot.center,St=Ot.resolution,Ct=$.size,Rt=at*rt/(St*it),Tt=Math.round(Ct[0]*at),At=Math.round(Ct[1]*at),Nt=Ot.rotation;if(Nt){var kt=Math.round(Math.sqrt(Tt*Tt+At*At));Tt=kt,At=kt}Object(xi.b)(this.pixelTransform,$.size[0]/2,$.size[1]/2,1/at,1/at,Nt,-Tt/2,-At/2),Object(xi.d)(this.inversePixelTransform,this.pixelTransform);var Dt=Object(wi.b)(this.pixelTransform);this.useContainer(tt,Dt,ot.opacity);var Gt=this.context,Ut=Gt.canvas;Ut.width!=Tt||Ut.height!=At?(Ut.width=Tt,Ut.height=At):this.containerReused||Gt.clearRect(0,0,Tt,At);var Xt=!1;if(ot.extent){var Vt=Object(_n.j)(ot.extent,Ot.projection);(Xt=!Object(gn.g)(Vt,$.extent)&&Object(gn.F)(Vt,$.extent))&&this.clipUnrotated(Gt,$,Vt)}var Jt=et.getImage(),ne=Object(xi.b)(this.tempTransform,Tt/2,At/2,Rt,Rt,0,it*(nt[0]-wt[0])/rt,it*(wt[1]-nt[3])/rt);this.renderedResolution=rt*at/it;var re=ne[4],ie=ne[5],oe=Jt.width*ne[0],ae=Jt.height*ne[3];if(Object(bn.a)(Gt,this.getLayer().getSource().getContextOptions()),this.preRender(Gt,$),oe>=.5&&ae>=.5){var fe=ot.opacity,de=void 0;1!==fe&&(de=this.context.globalAlpha,this.context.globalAlpha=fe),this.context.drawImage(Jt,0,0,+Jt.width,+Jt.height,Math.round(re),Math.round(ie),Math.round(oe),Math.round(ae)),1!==fe&&(this.context.globalAlpha=de)}return this.postRender(Gt,$),Xt&&Gt.restore(),Dt!==Ut.style.transform&&(Ut.style.transform=Dt),this.container},e}(Ei),Ec=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Mc=function($){function e(tt){return $.call(this,tt)||this}return Ec(e,$),e.prototype.createRenderer=function(){return new Sc(this)},e}(gc),jc=et(102),Pc=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ic="renderOrder",Tc=function($){function e(tt){var et=this,nt=tt||{},rt=Object(bn.a)({},nt);return delete rt.style,delete rt.renderBuffer,delete rt.updateWhileAnimating,delete rt.updateWhileInteracting,(et=$.call(this,rt)||this).declutter_=void 0!==nt.declutter&&nt.declutter,et.renderBuffer_=void 0!==nt.renderBuffer?nt.renderBuffer:100,et.style_=null,et.styleFunction_=void 0,et.setStyle(nt.style),et.updateWhileAnimating_=void 0!==nt.updateWhileAnimating&&nt.updateWhileAnimating,et.updateWhileInteracting_=void 0!==nt.updateWhileInteracting&&nt.updateWhileInteracting,et}return Pc(e,$),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(tt){return $.prototype.getFeatures.call(this,tt)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Ic)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function($){$.declutterTree||($.declutterTree=new rc.a(9)),this.getRenderer().renderDeclutter($)},e.prototype.setRenderOrder=function($){this.set(Ic,$)},e.prototype.setStyle=function($){this.style_=void 0!==$?$:jc.createDefaultStyle,this.styleFunction_=null===$?void 0:Object(jc.toFunction)(this.style_),this.changed()},e}(ci.a),Xc={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},qc=[Xc.FILL],Kc=[Xc.STROKE],Hc=[Xc.BEGIN_PATH],Qc=[Xc.CLOSE_PATH],Jc=Xc,$c=et(24),tu=function(){function t(){}return t.prototype.drawCustom=function($,tt,et){},t.prototype.drawGeometry=function($){},t.prototype.setStyle=function($){},t.prototype.drawCircle=function($,tt){},t.prototype.drawFeature=function($,tt){},t.prototype.drawGeometryCollection=function($,tt){},t.prototype.drawLineString=function($,tt){},t.prototype.drawMultiLineString=function($,tt){},t.prototype.drawMultiPoint=function($,tt){},t.prototype.drawMultiPolygon=function($,tt){},t.prototype.drawPoint=function($,tt){},t.prototype.drawPolygon=function($,tt){},t.prototype.drawText=function($,tt){},t.prototype.setFillStrokeStyle=function($,tt){},t.prototype.setImageStyle=function($,tt){},t.prototype.setTextStyle=function($,tt){},t}(),eu=et(40),nu=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ru=function($){function e(tt,et,nt,rt){var it=$.call(this)||this;return it.tolerance=tt,it.maxExtent=et,it.pixelRatio=rt,it.maxLineWidth=0,it.resolution=nt,it.beginGeometryInstruction1_=null,it.beginGeometryInstruction2_=null,it.bufferedMaxExtent_=null,it.instructions=[],it.coordinates=[],it.tmpCoordinate_=[],it.hitDetectionInstructions=[],it.state={},it}return nu(e,$),e.prototype.applyPixelRatio=function($){var tt=this.pixelRatio;return 1==tt?$:$.map((function($){return $*tt}))},e.prototype.appendFlatPointCoordinates=function($,tt){for(var et=this.getBufferedMaxExtent(),nt=this.tmpCoordinate_,rt=this.coordinates,it=rt.length,ot=0,at=$.length;ot<at;ot+=tt)nt[0]=$[ot],nt[1]=$[ot+1],Object(gn.f)(et,nt)&&(rt[it++]=nt[0],rt[it++]=nt[1]);return it},e.prototype.appendFlatLineCoordinates=function($,tt,et,nt,rt,it){var ot=this.coordinates,at=ot.length,Ot=this.getBufferedMaxExtent();it&&(tt+=nt);var wt,St,Ct,Rt=$[tt],Tt=$[tt+1],At=this.tmpCoordinate_,Nt=!0;for(wt=tt+nt;wt<et;wt+=nt)At[0]=$[wt],At[1]=$[wt+1],(Ct=Object(gn.i)(Ot,At))!==St?(Nt&&(ot[at++]=Rt,ot[at++]=Tt,Nt=!1),ot[at++]=At[0],ot[at++]=At[1]):Ct===$c.a.INTERSECTING?(ot[at++]=At[0],ot[at++]=At[1],Nt=!1):Nt=!0,Rt=At[0],Tt=At[1],St=Ct;return(rt&&Nt||wt===tt+nt)&&(ot[at++]=Rt,ot[at++]=Tt),at},e.prototype.drawCustomCoordinates_=function($,tt,et,nt,rt){for(var it=0,ot=et.length;it<ot;++it){var at=et[it],Ot=this.appendFlatLineCoordinates($,tt,at,nt,!1,!1);rt.push(Ot),tt=at}return tt},e.prototype.drawCustom=function($,tt,et){this.beginGeometry($,tt);var nt,rt,it,ot,at,Ot=$.getType(),wt=$.getStride(),St=this.coordinates.length;if(Ot==Oo.a.MULTI_POLYGON){nt=$.getOrientedFlatCoordinates(),ot=[];var Ct=$.getEndss();at=0;for(var Rt=0,Tt=Ct.length;Rt<Tt;++Rt){var At=[];at=this.drawCustomCoordinates_(nt,at,Ct[Rt],wt,At),ot.push(At)}this.instructions.push([Jc.CUSTOM,St,ot,$,et,Po.c])}else Ot==Oo.a.POLYGON||Ot==Oo.a.MULTI_LINE_STRING?(it=[],nt=Ot==Oo.a.POLYGON?$.getOrientedFlatCoordinates():$.getFlatCoordinates(),at=this.drawCustomCoordinates_(nt,0,$.getEnds(),wt,it),this.instructions.push([Jc.CUSTOM,St,it,$,et,Po.b])):Ot==Oo.a.LINE_STRING||Ot==Oo.a.CIRCLE?(nt=$.getFlatCoordinates(),rt=this.appendFlatLineCoordinates(nt,0,nt.length,wt,!1,!1),this.instructions.push([Jc.CUSTOM,St,rt,$,et,Po.a])):Ot==Oo.a.MULTI_POINT?(nt=$.getFlatCoordinates(),(rt=this.appendFlatPointCoordinates(nt,wt))>St&&this.instructions.push([Jc.CUSTOM,St,rt,$,et,Po.a])):Ot==Oo.a.POINT&&(nt=$.getFlatCoordinates(),this.coordinates.push(nt[0],nt[1]),rt=this.coordinates.length,this.instructions.push([Jc.CUSTOM,St,rt,$,et]));this.endGeometry(tt)},e.prototype.beginGeometry=function($,tt){this.beginGeometryInstruction1_=[Jc.BEGIN_GEOMETRY,tt,0,$],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Jc.BEGIN_GEOMETRY,tt,0,$],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var $,tt=this.hitDetectionInstructions;tt.reverse();var et,nt,rt=tt.length,it=-1;for($=0;$<rt;++$)(nt=(et=tt[$])[0])==Jc.END_GEOMETRY?it=$:nt==Jc.BEGIN_GEOMETRY&&(et[2]=$,Object(Ci.j)(this.hitDetectionInstructions,it,$),it=-1)},e.prototype.setFillStrokeStyle=function($,tt){var et=this.state;if($){var nt=$.getColor();et.fillStyle=Object(eu.a)(nt||wi.c)}else et.fillStyle=void 0;if(tt){var rt=tt.getColor();et.strokeStyle=Object(eu.a)(rt||wi.l);var it=tt.getLineCap();et.lineCap=void 0!==it?it:wi.e;var ot=tt.getLineDash();et.lineDash=ot?ot.slice():wi.f;var at=tt.getLineDashOffset();et.lineDashOffset=at||wi.g;var Ot=tt.getLineJoin();et.lineJoin=void 0!==Ot?Ot:wi.h;var wt=tt.getWidth();et.lineWidth=void 0!==wt?wt:wi.i;var St=tt.getMiterLimit();et.miterLimit=void 0!==St?St:wi.j,et.lineWidth>this.maxLineWidth&&(this.maxLineWidth=et.lineWidth,this.bufferedMaxExtent_=null)}else et.strokeStyle=void 0,et.lineCap=void 0,et.lineDash=null,et.lineDashOffset=void 0,et.lineJoin=void 0,et.lineWidth=void 0,et.miterLimit=void 0},e.prototype.createFill=function($){var tt=$.fillStyle,et=[Jc.SET_FILL_STYLE,tt];return"string"!=typeof tt&&et.push(!0),et},e.prototype.applyStroke=function($){this.instructions.push(this.createStroke($))},e.prototype.createStroke=function($){return[Jc.SET_STROKE_STYLE,$.strokeStyle,$.lineWidth*this.pixelRatio,$.lineCap,$.lineJoin,$.miterLimit,this.applyPixelRatio($.lineDash),$.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function($,tt){var et=$.fillStyle;"string"==typeof et&&$.currentFillStyle==et||(void 0!==et&&this.instructions.push(tt.call(this,$)),$.currentFillStyle=et)},e.prototype.updateStrokeStyle=function($,tt){var et=$.strokeStyle,nt=$.lineCap,rt=$.lineDash,it=$.lineDashOffset,ot=$.lineJoin,at=$.lineWidth,Ot=$.miterLimit;($.currentStrokeStyle!=et||$.currentLineCap!=nt||rt!=$.currentLineDash&&!Object(Ci.b)($.currentLineDash,rt)||$.currentLineDashOffset!=it||$.currentLineJoin!=ot||$.currentLineWidth!=at||$.currentMiterLimit!=Ot)&&(void 0!==et&&tt.call(this,$),$.currentStrokeStyle=et,$.currentLineCap=nt,$.currentLineDash=rt,$.currentLineDashOffset=it,$.currentLineJoin=ot,$.currentLineWidth=at,$.currentMiterLimit=Ot)},e.prototype.endGeometry=function($){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var tt=[Jc.END_GEOMETRY,$];this.instructions.push(tt),this.hitDetectionInstructions.push(tt)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(gn.d)(this.maxExtent),this.maxLineWidth>0)){var $=this.resolution*(this.maxLineWidth+1)/2;Object(gn.c)(this.bufferedMaxExtent_,$,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(tu),iu=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ou=function($){function e(tt,et,nt,rt){var it=$.call(this,tt,et,nt,rt)||this;return it.hitDetectionImage_=null,it.image_=null,it.imagePixelRatio_=void 0,it.anchorX_=void 0,it.anchorY_=void 0,it.height_=void 0,it.opacity_=void 0,it.originX_=void 0,it.originY_=void 0,it.rotateWithView_=void 0,it.rotation_=void 0,it.scale_=void 0,it.width_=void 0,it.declutterImageWithText_=void 0,it}return iu(e,$),e.prototype.drawPoint=function($,tt){if(this.image_){this.beginGeometry($,tt);var et=$.getFlatCoordinates(),nt=$.getStride(),rt=this.coordinates.length,it=this.appendFlatPointCoordinates(et,nt);this.instructions.push([Jc.DRAW_IMAGE,rt,it,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Jc.DRAW_IMAGE,rt,it,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(tt)}},e.prototype.drawMultiPoint=function($,tt){if(this.image_){this.beginGeometry($,tt);var et=$.getFlatCoordinates(),nt=$.getStride(),rt=this.coordinates.length,it=this.appendFlatPointCoordinates(et,nt);this.instructions.push([Jc.DRAW_IMAGE,rt,it,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Jc.DRAW_IMAGE,rt,it,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(tt)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,$.prototype.finish.call(this)},e.prototype.setImageStyle=function($,tt){var et=$.getAnchor(),nt=$.getSize(),rt=$.getHitDetectionImage(),it=$.getImage(this.pixelRatio),ot=$.getOrigin();this.imagePixelRatio_=$.getPixelRatio(this.pixelRatio),this.anchorX_=et[0],this.anchorY_=et[1],this.hitDetectionImage_=rt,this.image_=it,this.height_=nt[1],this.opacity_=$.getOpacity(),this.originX_=ot[0],this.originY_=ot[1],this.rotateWithView_=$.getRotateWithView(),this.rotation_=$.getRotation(),this.scale_=$.getScaleArray(),this.width_=nt[0],this.declutterImageWithText_=tt},e}(ru),au=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),su=function($){function e(tt,et,nt,rt){return $.call(this,tt,et,nt,rt)||this}return au(e,$),e.prototype.drawFlatCoordinates_=function($,tt,et,nt){var rt=this.coordinates.length,it=this.appendFlatLineCoordinates($,tt,et,nt,!1,!1),ot=[Jc.MOVE_TO_LINE_TO,rt,it];return this.instructions.push(ot),this.hitDetectionInstructions.push(ot),et},e.prototype.drawLineString=function($,tt){var et=this.state,nt=et.strokeStyle,rt=et.lineWidth;if(void 0!==nt&&void 0!==rt){this.updateStrokeStyle(et,this.applyStroke),this.beginGeometry($,tt),this.hitDetectionInstructions.push([Jc.SET_STROKE_STYLE,et.strokeStyle,et.lineWidth,et.lineCap,et.lineJoin,et.miterLimit,et.lineDash,et.lineDashOffset],Hc);var it=$.getFlatCoordinates(),ot=$.getStride();this.drawFlatCoordinates_(it,0,it.length,ot),this.hitDetectionInstructions.push(Kc),this.endGeometry(tt)}},e.prototype.drawMultiLineString=function($,tt){var et=this.state,nt=et.strokeStyle,rt=et.lineWidth;if(void 0!==nt&&void 0!==rt){this.updateStrokeStyle(et,this.applyStroke),this.beginGeometry($,tt),this.hitDetectionInstructions.push([Jc.SET_STROKE_STYLE,et.strokeStyle,et.lineWidth,et.lineCap,et.lineJoin,et.miterLimit,et.lineDash,et.lineDashOffset],Hc);for(var it=$.getEnds(),ot=$.getFlatCoordinates(),at=$.getStride(),Ot=0,wt=0,St=it.length;wt<St;++wt)Ot=this.drawFlatCoordinates_(ot,Ot,it[wt],at);this.hitDetectionInstructions.push(Kc),this.endGeometry(tt)}},e.prototype.finish=function(){var tt=this.state;return null!=tt.lastStroke&&tt.lastStroke!=this.coordinates.length&&this.instructions.push(Kc),this.reverseHitDetectionInstructions(),this.state=null,$.prototype.finish.call(this)},e.prototype.applyStroke=function(tt){null!=tt.lastStroke&&tt.lastStroke!=this.coordinates.length&&(this.instructions.push(Kc),tt.lastStroke=this.coordinates.length),tt.lastStroke=0,$.prototype.applyStroke.call(this,tt),this.instructions.push(Hc)},e}(ru),cu=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),uu=function($){function e(tt,et,nt,rt){return $.call(this,tt,et,nt,rt)||this}return cu(e,$),e.prototype.drawFlatCoordinatess_=function($,tt,et,nt){var rt=this.state,it=void 0!==rt.fillStyle,ot=void 0!==rt.strokeStyle,at=et.length;this.instructions.push(Hc),this.hitDetectionInstructions.push(Hc);for(var Ot=0;Ot<at;++Ot){var wt=et[Ot],St=this.coordinates.length,Ct=this.appendFlatLineCoordinates($,tt,wt,nt,!0,!ot),Rt=[Jc.MOVE_TO_LINE_TO,St,Ct];this.instructions.push(Rt),this.hitDetectionInstructions.push(Rt),ot&&(this.instructions.push(Qc),this.hitDetectionInstructions.push(Qc)),tt=wt}return it&&(this.instructions.push(qc),this.hitDetectionInstructions.push(qc)),ot&&(this.instructions.push(Kc),this.hitDetectionInstructions.push(Kc)),tt},e.prototype.drawCircle=function($,tt){var et=this.state,nt=et.fillStyle,rt=et.strokeStyle;if(void 0!==nt||void 0!==rt){this.setFillStrokeStyles_(),this.beginGeometry($,tt),void 0!==et.fillStyle&&this.hitDetectionInstructions.push([Jc.SET_FILL_STYLE,wi.c]),void 0!==et.strokeStyle&&this.hitDetectionInstructions.push([Jc.SET_STROKE_STYLE,et.strokeStyle,et.lineWidth,et.lineCap,et.lineJoin,et.miterLimit,et.lineDash,et.lineDashOffset]);var it=$.getFlatCoordinates(),ot=$.getStride(),at=this.coordinates.length;this.appendFlatLineCoordinates(it,0,it.length,ot,!1,!1);var Ot=[Jc.CIRCLE,at];this.instructions.push(Hc,Ot),this.hitDetectionInstructions.push(Hc,Ot),void 0!==et.fillStyle&&(this.instructions.push(qc),this.hitDetectionInstructions.push(qc)),void 0!==et.strokeStyle&&(this.instructions.push(Kc),this.hitDetectionInstructions.push(Kc)),this.endGeometry(tt)}},e.prototype.drawPolygon=function($,tt){var et=this.state,nt=et.fillStyle,rt=et.strokeStyle;if(void 0!==nt||void 0!==rt){this.setFillStrokeStyles_(),this.beginGeometry($,tt),void 0!==et.fillStyle&&this.hitDetectionInstructions.push([Jc.SET_FILL_STYLE,wi.c]),void 0!==et.strokeStyle&&this.hitDetectionInstructions.push([Jc.SET_STROKE_STYLE,et.strokeStyle,et.lineWidth,et.lineCap,et.lineJoin,et.miterLimit,et.lineDash,et.lineDashOffset]);var it=$.getEnds(),ot=$.getOrientedFlatCoordinates(),at=$.getStride();this.drawFlatCoordinatess_(ot,0,it,at),this.endGeometry(tt)}},e.prototype.drawMultiPolygon=function($,tt){var et=this.state,nt=et.fillStyle,rt=et.strokeStyle;if(void 0!==nt||void 0!==rt){this.setFillStrokeStyles_(),this.beginGeometry($,tt),void 0!==et.fillStyle&&this.hitDetectionInstructions.push([Jc.SET_FILL_STYLE,wi.c]),void 0!==et.strokeStyle&&this.hitDetectionInstructions.push([Jc.SET_STROKE_STYLE,et.strokeStyle,et.lineWidth,et.lineCap,et.lineJoin,et.miterLimit,et.lineDash,et.lineDashOffset]);for(var it=$.getEndss(),ot=$.getOrientedFlatCoordinates(),at=$.getStride(),Ot=0,wt=0,St=it.length;wt<St;++wt)Ot=this.drawFlatCoordinatess_(ot,Ot,it[wt],at);this.endGeometry(tt)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var tt=this.tolerance;if(0!==tt)for(var et=this.coordinates,nt=0,rt=et.length;nt<rt;++nt)et[nt]=Object(Eo.e)(et[nt],tt);return $.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var $=this.state;void 0!==$.fillStyle&&this.updateFillStyle($,this.createFill),void 0!==$.strokeStyle&&this.updateStrokeStyle($,this.applyStroke)},e}(ru),hu=et(105);function vu($,tt,et,nt,rt){var it,ot,at,Ot,wt,St,Ct,Rt,Tt,At=et,Nt=et,kt=0,Dt=0,Gt=et;for(it=et;it<nt;it+=rt){var Ut=tt[it],Xt=tt[it+1];void 0!==Ot&&(Rt=Ut-Ot,Tt=Xt-wt,at=Math.sqrt(Rt*Rt+Tt*Tt),void 0!==St&&(Dt+=ot,Math.acos((St*Rt+Ct*Tt)/(ot*at))>$&&(Dt>kt&&(kt=Dt,At=Gt,Nt=it),Dt=0,Gt=it-rt)),ot=at,St=Rt,Ct=Tt),Ot=Ut,wt=Xt}return(Dt+=at)>kt?[Gt,it]:[At,Nt]}var lu=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),pu={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},fu={Circle:uu,Default:ru,Image:ou,LineString:su,Polygon:uu,Text:function($){function e(tt,et,nt,rt){var it=$.call(this,tt,et,nt,rt)||this;return it.labels_=null,it.text_="",it.textOffsetX_=0,it.textOffsetY_=0,it.textRotateWithView_=void 0,it.textRotation_=0,it.textFillState_=null,it.fillStates={},it.textStrokeState_=null,it.strokeStates={},it.textState_={},it.textStates={},it.textKey_="",it.fillKey_="",it.strokeKey_="",it.declutterImageWithText_=void 0,it}return lu(e,$),e.prototype.finish=function(){var tt=$.prototype.finish.call(this);return tt.textStates=this.textStates,tt.fillStates=this.fillStates,tt.strokeStates=this.strokeStates,tt},e.prototype.drawText=function($,tt){var et=this.textFillState_,nt=this.textStrokeState_,rt=this.textState_;if(""!==this.text_&&rt&&(et||nt)){var it=this.coordinates,ot=it.length,at=$.getType(),Ot=null,wt=$.getStride();if(rt.placement!==hu.a.LINE||at!=Oo.a.LINE_STRING&&at!=Oo.a.MULTI_LINE_STRING&&at!=Oo.a.POLYGON&&at!=Oo.a.MULTI_POLYGON){var St=rt.overflow?null:[];switch(at){case Oo.a.POINT:case Oo.a.MULTI_POINT:Ot=$.getFlatCoordinates();break;case Oo.a.LINE_STRING:Ot=$.getFlatMidpoint();break;case Oo.a.CIRCLE:Ot=$.getCenter();break;case Oo.a.MULTI_LINE_STRING:Ot=$.getFlatMidpoints(),wt=2;break;case Oo.a.POLYGON:Ot=$.getFlatInteriorPoint(),rt.overflow||St.push(Ot[2]/this.resolution),wt=3;break;case Oo.a.MULTI_POLYGON:var Ct=$.getFlatInteriorPoints();for(Ot=[],Vt=0,Jt=Ct.length;Vt<Jt;Vt+=3)rt.overflow||St.push(Ct[Vt+2]/this.resolution),Ot.push(Ct[Vt],Ct[Vt+1]);if(0===Ot.length)return;wt=2}if((de=this.appendFlatPointCoordinates(Ot,wt))===ot)return;this.saveTextStates_(),(rt.backgroundFill||rt.backgroundStroke)&&(this.setFillStrokeStyle(rt.backgroundFill,rt.backgroundStroke),rt.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),rt.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry($,tt);var Rt=rt.padding;if(Rt!=wi.k&&(rt.scale[0]<0||rt.scale[1]<0)){var Tt=rt.padding[0],At=rt.padding[1],Nt=rt.padding[2],kt=rt.padding[3];rt.scale[0]<0&&(At=-At,kt=-kt),rt.scale[1]<0&&(Tt=-Tt,Nt=-Nt),Rt=[Tt,At,Nt,kt]}var Dt=this.pixelRatio;this.instructions.push([Jc.DRAW_IMAGE,ot,de,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,Rt==wi.k?wi.k:Rt.map((function($){return $*Dt})),!!rt.backgroundFill,!!rt.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,St]);var Gt=1/Dt;this.hitDetectionInstructions.push([Jc.DRAW_IMAGE,ot,de,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Gt,Gt],NaN,this.declutterImageWithText_,Rt,!!rt.backgroundFill,!!rt.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,St]),this.endGeometry(tt)}else{if(!Object(gn.F)(this.getBufferedMaxExtent(),$.getExtent()))return;var Ut=void 0;if(Ot=$.getFlatCoordinates(),at==Oo.a.LINE_STRING)Ut=[Ot.length];else if(at==Oo.a.MULTI_LINE_STRING)Ut=$.getEnds();else if(at==Oo.a.POLYGON)Ut=$.getEnds().slice(0,1);else if(at==Oo.a.MULTI_POLYGON){var Xt=$.getEndss();Ut=[];for(var Vt=0,Jt=Xt.length;Vt<Jt;++Vt)Ut.push(Xt[Vt][0])}this.beginGeometry($,tt);for(var ne=rt.textAlign,re=0,ie=void 0,oe=0,ae=Ut.length;oe<ae;++oe){if(null==ne){var fe=vu(rt.maxAngle,Ot,re,Ut[oe],wt);re=fe[0],ie=fe[1]}else ie=Ut[oe];for(Vt=re;Vt<ie;Vt+=wt)it.push(Ot[Vt],Ot[Vt+1]);var de=it.length;re=Ut[oe],this.drawChars_(ot,de),ot=de}this.endGeometry(tt)}}},e.prototype.saveTextStates_=function(){var $=this.textStrokeState_,tt=this.textState_,et=this.textFillState_,nt=this.strokeKey_;$&&(nt in this.strokeStates||(this.strokeStates[nt]={strokeStyle:$.strokeStyle,lineCap:$.lineCap,lineDashOffset:$.lineDashOffset,lineWidth:$.lineWidth,lineJoin:$.lineJoin,miterLimit:$.miterLimit,lineDash:$.lineDash}));var rt=this.textKey_;rt in this.textStates||(this.textStates[rt]={font:tt.font,textAlign:tt.textAlign||wi.m,textBaseline:tt.textBaseline||wi.n,scale:tt.scale});var it=this.fillKey_;et&&(it in this.fillStates||(this.fillStates[it]={fillStyle:et.fillStyle}))},e.prototype.drawChars_=function($,tt){var et=this.textStrokeState_,nt=this.textState_,rt=this.strokeKey_,it=this.textKey_,ot=this.fillKey_;this.saveTextStates_();var at=this.pixelRatio,Ot=pu[nt.textBaseline],wt=this.textOffsetY_*at,St=this.text_,Ct=et?et.lineWidth*Math.abs(nt.scale[0])/2:0;this.instructions.push([Jc.DRAW_CHARS,$,tt,Ot,nt.overflow,ot,nt.maxAngle,at,wt,rt,Ct*at,St,it,1]),this.hitDetectionInstructions.push([Jc.DRAW_CHARS,$,tt,Ot,nt.overflow,ot,nt.maxAngle,1,wt,rt,Ct,St,it,1/at])},e.prototype.setTextStyle=function($,tt){var et,nt,rt;if($){var it=$.getFill();it?((nt=this.textFillState_)||(nt={},this.textFillState_=nt),nt.fillStyle=Object(eu.a)(it.getColor()||wi.c)):(nt=null,this.textFillState_=nt);var ot=$.getStroke();if(ot){(rt=this.textStrokeState_)||(rt={},this.textStrokeState_=rt);var at=ot.getLineDash(),Ot=ot.getLineDashOffset(),wt=ot.getWidth(),St=ot.getMiterLimit();rt.lineCap=ot.getLineCap()||wi.e,rt.lineDash=at?at.slice():wi.f,rt.lineDashOffset=void 0===Ot?wi.g:Ot,rt.lineJoin=ot.getLineJoin()||wi.h,rt.lineWidth=void 0===wt?wi.i:wt,rt.miterLimit=void 0===St?wi.j:St,rt.strokeStyle=Object(eu.a)(ot.getColor()||wi.l)}else rt=null,this.textStrokeState_=rt;et=this.textState_;var Ct=$.getFont()||wi.d;Object(wi.s)(Ct);var Rt=$.getScaleArray();et.overflow=$.getOverflow(),et.font=Ct,et.maxAngle=$.getMaxAngle(),et.placement=$.getPlacement(),et.textAlign=$.getTextAlign(),et.textBaseline=$.getTextBaseline()||wi.n,et.backgroundFill=$.getBackgroundFill(),et.backgroundStroke=$.getBackgroundStroke(),et.padding=$.getPadding()||wi.k,et.scale=void 0===Rt?[1,1]:Rt;var Tt=$.getOffsetX(),At=$.getOffsetY(),Nt=$.getRotateWithView(),kt=$.getRotation();this.text_=$.getText()||"",this.textOffsetX_=void 0===Tt?0:Tt,this.textOffsetY_=void 0===At?0:At,this.textRotateWithView_=void 0!==Nt&&Nt,this.textRotation_=void 0===kt?0:kt,this.strokeKey_=rt?("string"==typeof rt.strokeStyle?rt.strokeStyle:Object(_i.c)(rt.strokeStyle))+rt.lineCap+rt.lineDashOffset+"|"+rt.lineWidth+rt.lineJoin+rt.miterLimit+"["+rt.lineDash.join()+"]":"",this.textKey_=et.font+et.scale+(et.textAlign||"?")+(et.textBaseline||"?"),this.fillKey_=nt?"string"==typeof nt.fillStyle?nt.fillStyle:"|"+Object(_i.c)(nt.fillStyle):""}else this.text_="";this.declutterImageWithText_=tt},e}(ru)},du=function(){function t($,tt,et,nt){this.tolerance_=$,this.maxExtent_=tt,this.pixelRatio_=nt,this.resolution_=et,this.buildersByZIndex_={}}return t.prototype.finish=function(){var $={};for(var tt in this.buildersByZIndex_){$[tt]=$[tt]||{};var et=this.buildersByZIndex_[tt];for(var nt in et){var rt=et[nt].finish();$[tt][nt]=rt}}return $},t.prototype.getBuilder=function($,tt){var et=void 0!==$?$.toString():"0",nt=this.buildersByZIndex_[et];void 0===nt&&(nt={},this.buildersByZIndex_[et]=nt);var rt=nt[tt];return void 0===rt&&(rt=new(0,fu[tt])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),nt[tt]=rt),rt},t}(),yu="Circle",gu="Default",_u="Image",mu="LineString",bu="Polygon",Ou="Text",xu=et(21),wu=et(32);function Pu($,tt,et,nt,rt,it,ot,at,Ot,wt,St,Ct){var Rt=$[tt],Tt=$[tt+1],At=0,Nt=0,kt=0,Dt=0;function _(){At=Rt,Nt=Tt,Rt=$[tt+=nt],Tt=$[tt+1],Dt+=kt,kt=Math.sqrt((Rt-At)*(Rt-At)+(Tt-Nt)*(Tt-Nt))}do{_()}while(tt<et-nt&&Dt+kt<it);for(var Gt=(it-Dt)/kt,Ut=Object(Io.c)(At,Rt,Gt),Xt=Object(Io.c)(Nt,Tt,Gt),Vt=tt-nt,Jt=Dt,ne=it+at*Ot(wt,rt,St);tt<et-nt&&Dt+kt<ne;)_();Gt=(ne-Dt)/kt;var re,ie=Object(Io.c)(At,Rt,Gt),oe=Object(Io.c)(Nt,Tt,Gt);if(Ct){var ae=[Ut,Xt,ie,oe];Object(wu.a)(ae,0,4,2,Ct,ae,ae),re=ae[0]>ae[2]}else re=Ut>ie;var fe,de=Math.PI,ye=[],Se=Vt+nt===tt;if(kt=0,Dt=Jt,Rt=$[tt=Vt],Tt=$[tt+1],Se){_();var Ee=Math.atan2(Tt-Nt,Rt-At);re&&(Ee+=Ee>0?-de:de);var Me=(ie+Ut)/2,Ce=(oe+Xt)/2;return ye[0]=[Me,Ce,(ne-it)/2,Ee,rt],ye}for(var Re=0,Pe=rt.length;Re<Pe;){_();var Ie=Math.atan2(Tt-Nt,Rt-At);if(re&&(Ie+=Ie>0?-de:de),void 0!==fe){var Le=Ie-fe;if(Le+=Le>de?-2*de:Le<-de?2*de:0,Math.abs(Le)>ot)return null}fe=Ie;for(var Be=Re,Ze=0;Re<Pe;++Re){var Ve=at*Ot(wt,rt[re?Pe-Re-1:Re],St);if(tt+nt<et&&Dt+kt<it+Ze+Ve/2)break;Ze+=Ve}if(Re!==Be){var Ke=re?rt.substring(Pe-Be,Pe-Re):rt.substring(Be,Re);Gt=(it+Ze/2-Dt)/kt,Me=Object(Io.c)(At,Rt,Gt),Ce=Object(Io.c)(Nt,Tt,Gt),ye.push([Me,Ce,Ze/2,Ie,Ke]),it+=Ze}}return ye}var Su=Object(gn.j)(),Eu=[],Mu=[],ju=[],Cu=[];function Nu($){return $[3].declutterBox}var Ru=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Du($,tt){return"start"!==tt&&"end"!==tt||Ru.test($)||(tt="start"===tt?"left":"right"),pu[tt]}var Iu=function(){function t($,tt,et,nt,rt){this.overlaps=et,this.pixelRatio=tt,this.resolution=$,this.alignFill_,this.instructions=nt.instructions,this.coordinates=nt.coordinates,this.coordinateCache_={},this.renderBuffer_=rt,this.renderedTransform_=Object(xi.c)(),this.hitDetectionInstructions=nt.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=nt.fillStates||{},this.strokeStates=nt.strokeStates||{},this.textStates=nt.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function($,tt,et,nt){var rt=$+tt+et+nt;if(this.labels_[rt])return this.labels_[rt];var it=nt?this.strokeStates[nt]:null,ot=et?this.fillStates[et]:null,at=this.textStates[tt],Ot=this.pixelRatio,wt=[at.scale[0]*Ot,at.scale[1]*Ot],St=Du($,at.textAlign||wi.m),Ct=nt&&it.lineWidth?it.lineWidth:0,Rt=$.split("\n"),Tt=Rt.length,At=[],Nt=Object(wi.r)(at.font,Rt,At),kt=Object(wi.q)(at.font),Dt=Nt+Ct,Gt=[],Ut=(Dt+2)*wt[0],Xt=(kt*Tt+Ct)*wt[1],Vt={width:Ut<0?Math.floor(Ut):Math.ceil(Ut),height:Xt<0?Math.floor(Xt):Math.ceil(Xt),contextInstructions:Gt};1==wt[0]&&1==wt[1]||Gt.push("scale",wt),Gt.push("font",at.font),nt&&(Gt.push("strokeStyle",it.strokeStyle),Gt.push("lineWidth",Ct),Gt.push("lineCap",it.lineCap),Gt.push("lineJoin",it.lineJoin),Gt.push("miterLimit",it.miterLimit),(xu.g?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(Gt.push("setLineDash",[it.lineDash]),Gt.push("lineDashOffset",it.lineDashOffset))),et&&Gt.push("fillStyle",ot.fillStyle),Gt.push("textBaseline","middle"),Gt.push("textAlign","center");var Jt,ne=.5-St,re=St*Dt+ne*Ct;if(nt)for(Jt=0;Jt<Tt;++Jt)Gt.push("strokeText",[Rt[Jt],re+ne*At[Jt],.5*(Ct+kt)+Jt*kt]);if(et)for(Jt=0;Jt<Tt;++Jt)Gt.push("fillText",[Rt[Jt],re+ne*At[Jt],.5*(Ct+kt)+Jt*kt]);return this.labels_[rt]=Vt,Vt},t.prototype.replayTextBackground_=function($,tt,et,nt,rt,it,ot){$.beginPath(),$.moveTo.apply($,tt),$.lineTo.apply($,et),$.lineTo.apply($,nt),$.lineTo.apply($,rt),$.lineTo.apply($,tt),it&&(this.alignFill_=it[2],this.fill_($)),ot&&(this.setStrokeStyle_($,ot),$.stroke())},t.prototype.calculateImageOrLabelDimensions_=function($,tt,et,nt,rt,it,ot,at,Ot,wt,St,Ct,Rt,Tt,At,Nt){var kt,Dt=et-(ot*=Ct[0]),Gt=nt-(at*=Ct[1]),Ut=rt+Ot>$?$-Ot:rt,Xt=it+wt>tt?tt-wt:it,Vt=Tt[3]+Ut*Ct[0]+Tt[1],Jt=Tt[0]+Xt*Ct[1]+Tt[2],ne=Dt-Tt[3],re=Gt-Tt[0];return(At||0!==St)&&(Eu[0]=ne,Cu[0]=ne,Eu[1]=re,Mu[1]=re,Mu[0]=ne+Vt,ju[0]=Mu[0],ju[1]=re+Jt,Cu[1]=ju[1]),0!==St?(kt=Object(xi.b)(Object(xi.c)(),et,nt,1,1,St,-et,-nt),Object(xi.a)(kt,Eu),Object(xi.a)(kt,Mu),Object(xi.a)(kt,ju),Object(xi.a)(kt,Cu),Object(gn.k)(Math.min(Eu[0],Mu[0],ju[0],Cu[0]),Math.min(Eu[1],Mu[1],ju[1],Cu[1]),Math.max(Eu[0],Mu[0],ju[0],Cu[0]),Math.max(Eu[1],Mu[1],ju[1],Cu[1]),Su)):Object(gn.k)(Math.min(ne,ne+Vt),Math.min(re,re+Jt),Math.max(ne,ne+Vt),Math.max(re,re+Jt),Su),Rt&&(Dt=Math.round(Dt),Gt=Math.round(Gt)),{drawImageX:Dt,drawImageY:Gt,drawImageW:Ut,drawImageH:Xt,originX:Ot,originY:wt,declutterBox:{minX:Su[0],minY:Su[1],maxX:Su[2],maxY:Su[3],value:Nt},canvasTransform:kt,scale:Ct}},t.prototype.replayImageOrLabel_=function($,tt,et,nt,rt,it,ot){var at=!(!it&&!ot),Ot=nt.declutterBox,wt=$.canvas,St=ot?ot[2]*nt.scale[0]/2:0;return Ot.minX-St<=wt.width/tt&&Ot.maxX+St>=0&&Ot.minY-St<=wt.height/tt&&Ot.maxY+St>=0&&(at&&this.replayTextBackground_($,Eu,Mu,ju,Cu,it,ot),Object(wi.o)($,nt.canvasTransform,rt,et,nt.originX,nt.originY,nt.drawImageW,nt.drawImageH,nt.drawImageX,nt.drawImageY,nt.scale)),!0},t.prototype.fill_=function($){if(this.alignFill_){var tt=Object(xi.a)(this.renderedTransform_,[0,0]),et=512*this.pixelRatio;$.save(),$.translate(tt[0]%et,tt[1]%et),$.rotate(this.viewRotation_)}$.fill(),this.alignFill_&&$.restore()},t.prototype.setStrokeStyle_=function($,tt){$.strokeStyle=tt[1],$.lineWidth=tt[2],$.lineCap=tt[3],$.lineJoin=tt[4],$.miterLimit=tt[5],$.setLineDash&&($.lineDashOffset=tt[7],$.setLineDash(tt[6]))},t.prototype.drawLabelWithPointPlacement_=function($,tt,et,nt){var rt=this.textStates[tt],it=this.createLabel($,tt,nt,et),ot=this.strokeStates[et],at=this.pixelRatio,Ot=Du($,rt.textAlign||wi.m),wt=pu[rt.textBaseline||wi.n],St=ot&&ot.lineWidth?ot.lineWidth:0;return{label:it,anchorX:Ot*(it.width/at-2*rt.scale[0])+2*(.5-Ot)*St,anchorY:wt*it.height/at+2*(.5-wt)*St}},t.prototype.execute_=function($,tt,et,nt,rt,it,ot,at){var Ot;this.pixelCoordinates_&&Object(Ci.b)(et,this.renderedTransform_)?Ot=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),Ot=Object(wu.c)(this.coordinates,0,this.coordinates.length,2,et,this.pixelCoordinates_),Object(xi.f)(this.renderedTransform_,et));for(var wt,St,Ct,Rt,Tt,At,Nt,kt,Dt,Gt,Ut,Xt,Vt,Jt,ne,re,ie=0,oe=nt.length,ae=0,fe=0,de=0,ye=null,Se=null,Ee=this.coordinateCache_,Me=this.viewRotation_,Ce=Math.round(1e12*Math.atan2(-et[1],et[0]))/1e12,Re={context:$,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Me},Pe=this.instructions!=nt||this.overlaps?0:200;ie<oe;){var Ie=nt[ie];switch(Ie[0]){case Jc.BEGIN_GEOMETRY:Vt=Ie[1],re=Ie[3],Vt.getGeometry()?void 0===ot||Object(gn.F)(ot,re.getExtent())?++ie:ie=Ie[2]+1:ie=Ie[2];break;case Jc.BEGIN_PATH:fe>Pe&&(this.fill_($),fe=0),de>Pe&&($.stroke(),de=0),fe||de||($.beginPath(),Rt=NaN,Tt=NaN),++ie;break;case Jc.CIRCLE:var Le=Ot[ae=Ie[1]],Be=Ot[ae+1],Ze=Ot[ae+2]-Le,Ve=Ot[ae+3]-Be,Ke=Math.sqrt(Ze*Ze+Ve*Ve);$.moveTo(Le+Ke,Be),$.arc(Le,Be,Ke,0,2*Math.PI,!0),++ie;break;case Jc.CLOSE_PATH:$.closePath(),++ie;break;case Jc.CUSTOM:ae=Ie[1],wt=Ie[2];var tn=Ie[3],en=Ie[4],nn=6==Ie.length?Ie[5]:void 0;Re.geometry=tn,Re.feature=Vt,ie in Ee||(Ee[ie]=[]);var rn=Ee[ie];nn?nn(Ot,ae,wt,2,rn):(rn[0]=Ot[ae],rn[1]=Ot[ae+1],rn.length=2),en(rn,Re),++ie;break;case Jc.DRAW_IMAGE:ae=Ie[1],wt=Ie[2],kt=Ie[3],St=Ie[4],Ct=Ie[5];var on=Ie[6],an=Ie[7],sn=Ie[8],un=Ie[9],ln=Ie[10],pn=Ie[11],fn=Ie[12],dn=Ie[13],_n=Ie[14];if(!kt&&Ie.length>=19){Dt=Ie[18],Gt=Ie[19],Ut=Ie[20],Xt=Ie[21];var vn=this.drawLabelWithPointPlacement_(Dt,Gt,Ut,Xt);kt=vn.label,Ie[3]=kt;var mn=Ie[22];St=(vn.anchorX-mn)*this.pixelRatio,Ie[4]=St;var bn=Ie[23];Ct=(vn.anchorY-bn)*this.pixelRatio,Ie[5]=Ct,on=kt.height,Ie[6]=on,dn=kt.width,Ie[13]=dn}var On=void 0;Ie.length>24&&(On=Ie[24]);var xn=void 0,wn=void 0,Sn=void 0;Ie.length>16?(xn=Ie[15],wn=Ie[16],Sn=Ie[17]):(xn=wi.k,wn=!1,Sn=!1),ln&&Ce?pn+=Me:ln||Ce||(pn-=Me);for(var En=0;ae<wt;ae+=2)if(!(On&&On[En++]<dn/this.pixelRatio)){var Rn=[$,tt,kt,sr=this.calculateImageOrLabelDimensions_(kt.width,kt.height,Ot[ae],Ot[ae+1],dn,on,St,Ct,sn,un,pn,fn,rt,xn,wn||Sn,Vt),an,wn?ye:null,Sn?Se:null],Pn=void 0,In=void 0;if(at&&_n){if(!_n[ae]){_n[ae]=Rn;continue}if(Pn=_n[ae],delete _n[ae],In=Nu(Pn),at.collides(In))continue}at&&at.collides(sr.declutterBox)||(Pn&&(at&&at.insert(In),this.replayImageOrLabel_.apply(this,Pn)),at&&at.insert(sr.declutterBox),this.replayImageOrLabel_.apply(this,Rn))}++ie;break;case Jc.DRAW_CHARS:var Tn=Ie[1],An=Ie[2],Ln=Ie[3],Fn=Ie[4];Xt=Ie[5];var Nn=Ie[6],kn=Ie[7],Dn=Ie[8];Ut=Ie[9];var Gn=Ie[10];Dt=Ie[11],Gt=Ie[12];var zn=[Ie[13],Ie[13]],Un=this.textStates[Gt],Yn=Un.font,Bn=[Un.scale[0]*kn,Un.scale[1]*kn],Wn=void 0;Yn in this.widths_?Wn=this.widths_[Yn]:(Wn={},this.widths_[Yn]=Wn);var Xn=Ai(Ot,Tn,An,2),qn=Math.abs(Bn[0])*Object(wi.p)(Yn,Dt,Wn);if(Fn||qn<=Xn){var Zn=this.textStates[Gt].textAlign,Vn=Pu(Ot,Tn,An,2,Dt,(Xn-qn)*pu[Zn],Nn,Math.abs(Bn[0]),wi.p,Yn,Wn,Ce?0:this.viewRotation_);t:if(Vn){var Kn=[],Hn=void 0,Qn=void 0,Jn=void 0,$n=void 0,ar=void 0;if(Ut)for(Hn=0,Qn=Vn.length;Hn<Qn;++Hn){Jn=(ar=Vn[Hn])[4],$n=this.createLabel(Jn,Gt,"",Ut),St=ar[2]+(Bn[0]<0?-Gn:Gn),Ct=Ln*$n.height+2*(.5-Ln)*Gn*Bn[1]/Bn[0]-Dn;var sr=this.calculateImageOrLabelDimensions_($n.width,$n.height,ar[0],ar[1],$n.width,$n.height,St,Ct,0,0,ar[3],zn,!1,wi.k,!1,Vt);if(at&&at.collides(sr.declutterBox))break t;Kn.push([$,tt,$n,sr,1,null,null])}if(Xt)for(Hn=0,Qn=Vn.length;Hn<Qn;++Hn){if(Jn=(ar=Vn[Hn])[4],$n=this.createLabel(Jn,Gt,Xt,""),St=ar[2],Ct=Ln*$n.height-Dn,sr=this.calculateImageOrLabelDimensions_($n.width,$n.height,ar[0],ar[1],$n.width,$n.height,St,Ct,0,0,ar[3],zn,!1,wi.k,!1,Vt),at&&at.collides(sr.declutterBox))break t;Kn.push([$,tt,$n,sr,1,null,null])}at&&at.load(Kn.map(Nu));for(var lr=0,_r=Kn.length;lr<_r;++lr)this.replayImageOrLabel_.apply(this,Kn[lr])}}++ie;break;case Jc.END_GEOMETRY:if(void 0!==it){var vr=it(Vt=Ie[1],re);if(vr)return vr}++ie;break;case Jc.FILL:Pe?fe++:this.fill_($),++ie;break;case Jc.MOVE_TO_LINE_TO:for(ae=Ie[1],wt=Ie[2],Jt=Ot[ae],Nt=(ne=Ot[ae+1])+.5|0,(At=Jt+.5|0)===Rt&&Nt===Tt||($.moveTo(Jt,ne),Rt=At,Tt=Nt),ae+=2;ae<wt;ae+=2)At=(Jt=Ot[ae])+.5|0,Nt=(ne=Ot[ae+1])+.5|0,ae!=wt-2&&At===Rt&&Nt===Tt||($.lineTo(Jt,ne),Rt=At,Tt=Nt);++ie;break;case Jc.SET_FILL_STYLE:ye=Ie,this.alignFill_=Ie[2],fe&&(this.fill_($),fe=0,de&&($.stroke(),de=0)),$.fillStyle=Ie[1],++ie;break;case Jc.SET_STROKE_STYLE:Se=Ie,de&&($.stroke(),de=0),this.setStrokeStyle_($,Ie),++ie;break;case Jc.STROKE:Pe?de++:$.stroke(),++ie;break;default:++ie}}fe&&this.fill_($),de&&$.stroke()},t.prototype.execute=function($,tt,et,nt,rt,it){this.viewRotation_=nt,this.execute_($,tt,et,this.instructions,rt,void 0,void 0,it)},t.prototype.executeHitDetection=function($,tt,et,nt,rt){return this.viewRotation_=et,this.execute_($,1,tt,this.hitDetectionInstructions,!0,nt,rt)},t}(),Tu=[bu,yu,mu,_u,Ou,gu],Au=function(){function t($,tt,et,nt,rt,it){this.maxExtent_=$,this.overlaps_=nt,this.pixelRatio_=et,this.resolution_=tt,this.renderBuffer_=it,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Object(xi.c)(),this.createExecutors_(rt)}return t.prototype.clip=function($,tt){var et=this.getClipCoords(tt);$.beginPath(),$.moveTo(et[0],et[1]),$.lineTo(et[2],et[3]),$.lineTo(et[4],et[5]),$.lineTo(et[6],et[7]),$.clip()},t.prototype.createExecutors_=function($){for(var tt in $){var et=this.executorsByZIndex_[tt];void 0===et&&(et={},this.executorsByZIndex_[tt]=et);var nt=$[tt],rt=[this.renderBuffer_||0,this.renderBuffer_||0];for(var it in nt){var ot=nt[it];et[it]=new Iu(this.resolution_,this.pixelRatio_,this.overlaps_,ot,rt)}}},t.prototype.hasExecutors=function($){for(var tt in this.executorsByZIndex_)for(var et=this.executorsByZIndex_[tt],nt=0,rt=$.length;nt<rt;++nt)if($[nt]in et)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function($,tt,et,nt,rt,it){var ot=2*(nt=Math.round(nt))+1,at=Object(xi.b)(this.hitDetectionTransform_,nt+.5,nt+.5,1/tt,-1/tt,-et,-$[0],-$[1]),Ot=!this.hitDetectionContext_;Ot&&(this.hitDetectionContext_=Object(Ke.a)(ot,ot));var wt,St=this.hitDetectionContext_;St.canvas.width!==ot||St.canvas.height!==ot?(St.canvas.width=ot,St.canvas.height=ot):Ot||St.clearRect(0,0,ot,ot),void 0!==this.renderBuffer_&&(wt=Object(gn.j)(),Object(gn.r)(wt,$),Object(gn.c)(wt,tt*(this.renderBuffer_+nt),wt));var Ct,Rt=function($){if(void 0!==Lu[$])return Lu[$];for(var tt=2*$+1,et=$*$,nt=new Array(et+1),rt=0;rt<=$;++rt)for(var it=0;it<=$;++it){var ot=rt*rt+it*it;if(ot>et)break;var at=nt[ot];at||(at=[],nt[ot]=at),at.push(4*(($+rt)*tt+($+it))+3),rt>0&&at.push(4*(($-rt)*tt+($+it))+3),it>0&&(at.push(4*(($+rt)*tt+($-it))+3),rt>0&&at.push(4*(($-rt)*tt+($-it))+3))}for(var Ot=[],wt=(rt=0,nt.length);rt<wt;++rt)nt[rt]&&Ot.push.apply(Ot,nt[rt]);return Lu[$]=Ot,Ot}(nt);function f($,tt){for(var et=St.getImageData(0,0,ot,ot).data,at=0,Ot=Rt.length;at<Ot;at++)if(et[Rt[at]]>0){if(!it||Ct!==_u&&Ct!==Ou||-1!==it.indexOf($)){var wt=(Rt[at]-3)/4,Tt=nt-wt%ot,At=nt-(wt/ot|0),Nt=rt($,tt,Tt*Tt+At*At);if(Nt)return Nt}St.clearRect(0,0,ot,ot);break}}var Tt,At,Nt,kt,Dt,Gt=Object.keys(this.executorsByZIndex_).map(Number);for(Gt.sort(Ci.i),Tt=Gt.length-1;Tt>=0;--Tt){var Ut=Gt[Tt].toString();for(Nt=this.executorsByZIndex_[Ut],At=Tu.length-1;At>=0;--At)if(void 0!==(kt=Nt[Ct=Tu[At]])&&(Dt=kt.executeHitDetection(St,at,et,f,wt)))return Dt}},t.prototype.getClipCoords=function($){var tt=this.maxExtent_;if(!tt)return null;var et=tt[0],nt=tt[1],rt=tt[2],it=tt[3],ot=[et,nt,et,it,rt,it,rt,nt];return Object(wu.c)(ot,0,8,2,$,ot),ot},t.prototype.isEmpty=function(){return Object(bn.d)(this.executorsByZIndex_)},t.prototype.execute=function($,tt,et,nt,rt,it,ot){var at=Object.keys(this.executorsByZIndex_).map(Number);at.sort(Ci.i),this.maxExtent_&&($.save(),this.clip($,et));var Ot,wt,St,Ct,Rt,Tt,At=it||Tu;for(ot&&at.reverse(),Ot=0,wt=at.length;Ot<wt;++Ot){var Nt=at[Ot].toString();for(Rt=this.executorsByZIndex_[Nt],St=0,Ct=At.length;St<Ct;++St)void 0!==(Tt=Rt[At[St]])&&Tt.execute($,tt,et,nt,rt,ot)}this.maxExtent_&&$.restore()},t}(),Lu={},Fu=Au,ku=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Gu=function($){function e(tt,et,nt,rt,it,ot,at){var Ot=$.call(this)||this;return Ot.context_=tt,Ot.pixelRatio_=et,Ot.extent_=nt,Ot.transform_=rt,Ot.viewRotation_=it,Ot.squaredTolerance_=ot,Ot.userTransform_=at,Ot.contextFillState_=null,Ot.contextStrokeState_=null,Ot.contextTextState_=null,Ot.fillState_=null,Ot.strokeState_=null,Ot.image_=null,Ot.imageAnchorX_=0,Ot.imageAnchorY_=0,Ot.imageHeight_=0,Ot.imageOpacity_=0,Ot.imageOriginX_=0,Ot.imageOriginY_=0,Ot.imageRotateWithView_=!1,Ot.imageRotation_=0,Ot.imageScale_=[0,0],Ot.imageWidth_=0,Ot.text_="",Ot.textOffsetX_=0,Ot.textOffsetY_=0,Ot.textRotateWithView_=!1,Ot.textRotation_=0,Ot.textScale_=[0,0],Ot.textFillState_=null,Ot.textStrokeState_=null,Ot.textState_=null,Ot.pixelCoordinates_=[],Ot.tmpLocalTransform_=Object(xi.c)(),Ot}return ku(e,$),e.prototype.drawImages_=function($,tt,et,nt){if(this.image_){var rt=Object(wu.c)($,tt,et,2,this.transform_,this.pixelCoordinates_),it=this.context_,ot=this.tmpLocalTransform_,at=it.globalAlpha;1!=this.imageOpacity_&&(it.globalAlpha=at*this.imageOpacity_);var Ot=this.imageRotation_;this.imageRotateWithView_&&(Ot+=this.viewRotation_);for(var wt=0,St=rt.length;wt<St;wt+=2){var Ct=rt[wt]-this.imageAnchorX_,Rt=rt[wt+1]-this.imageAnchorY_;if(0!==Ot||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var Tt=Ct+this.imageAnchorX_,At=Rt+this.imageAnchorY_;Object(xi.b)(ot,Tt,At,1,1,Ot,-Tt,-At),it.setTransform.apply(it,ot),it.translate(Tt,At),it.scale(this.imageScale_[0],this.imageScale_[1]),it.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),it.setTransform(1,0,0,1,0,0)}else it.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,Ct,Rt,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(it.globalAlpha=at)}},e.prototype.drawText_=function($,tt,et,nt){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var rt=Object(wu.c)($,tt,et,nt,this.transform_,this.pixelCoordinates_),it=this.context_,ot=this.textRotation_;for(this.textRotateWithView_&&(ot+=this.viewRotation_);tt<et;tt+=nt){var at=rt[tt]+this.textOffsetX_,Ot=rt[tt+1]+this.textOffsetY_;if(0!==ot||1!=this.textScale_[0]||1!=this.textScale_[1]){var wt=Object(xi.b)(this.tmpLocalTransform_,at,Ot,1,1,ot,-at,-Ot);it.setTransform.apply(it,wt),it.translate(at,Ot),it.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&it.strokeText(this.text_,0,0),this.textFillState_&&it.fillText(this.text_,0,0),it.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&it.strokeText(this.text_,at,Ot),this.textFillState_&&it.fillText(this.text_,at,Ot)}}},e.prototype.moveToLineTo_=function($,tt,et,nt,rt){var it=this.context_,ot=Object(wu.c)($,tt,et,nt,this.transform_,this.pixelCoordinates_);it.moveTo(ot[0],ot[1]);var at=ot.length;rt&&(at-=2);for(var Ot=2;Ot<at;Ot+=2)it.lineTo(ot[Ot],ot[Ot+1]);return rt&&it.closePath(),et},e.prototype.drawRings_=function($,tt,et,nt){for(var rt=0,it=et.length;rt<it;++rt)tt=this.moveToLineTo_($,tt,et[rt],nt,!0);return tt},e.prototype.drawCircle=function($){if(Object(gn.F)(this.extent_,$.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var tt=Object(xo.b)($,this.transform_,this.pixelCoordinates_),et=tt[2]-tt[0],nt=tt[3]-tt[1],rt=Math.sqrt(et*et+nt*nt),it=this.context_;it.beginPath(),it.arc(tt[0],tt[1],rt,0,2*Math.PI),this.fillState_&&it.fill(),this.strokeState_&&it.stroke()}""!==this.text_&&this.drawText_($.getCenter(),0,2,2)}},e.prototype.setStyle=function($){this.setFillStrokeStyle($.getFill(),$.getStroke()),this.setImageStyle($.getImage()),this.setTextStyle($.getText())},e.prototype.setTransform=function($){this.transform_=$},e.prototype.drawGeometry=function($){switch($.getType()){case Oo.a.POINT:this.drawPoint($);break;case Oo.a.LINE_STRING:this.drawLineString($);break;case Oo.a.POLYGON:this.drawPolygon($);break;case Oo.a.MULTI_POINT:this.drawMultiPoint($);break;case Oo.a.MULTI_LINE_STRING:this.drawMultiLineString($);break;case Oo.a.MULTI_POLYGON:this.drawMultiPolygon($);break;case Oo.a.GEOMETRY_COLLECTION:this.drawGeometryCollection($);break;case Oo.a.CIRCLE:this.drawCircle($)}},e.prototype.drawFeature=function($,tt){var et=tt.getGeometryFunction()($);et&&Object(gn.F)(this.extent_,et.getExtent())&&(this.setStyle(tt),this.drawGeometry(et))},e.prototype.drawGeometryCollection=function($){for(var tt=$.getGeometriesArray(),et=0,nt=tt.length;et<nt;++et)this.drawGeometry(tt[et])},e.prototype.drawPoint=function($){this.squaredTolerance_&&($=$.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var tt=$.getFlatCoordinates(),et=$.getStride();this.image_&&this.drawImages_(tt,0,tt.length,et),""!==this.text_&&this.drawText_(tt,0,tt.length,et)},e.prototype.drawMultiPoint=function($){this.squaredTolerance_&&($=$.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var tt=$.getFlatCoordinates(),et=$.getStride();this.image_&&this.drawImages_(tt,0,tt.length,et),""!==this.text_&&this.drawText_(tt,0,tt.length,et)},e.prototype.drawLineString=function($){if(this.squaredTolerance_&&($=$.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(gn.F)(this.extent_,$.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var tt=this.context_,et=$.getFlatCoordinates();tt.beginPath(),this.moveToLineTo_(et,0,et.length,$.getStride(),!1),tt.stroke()}if(""!==this.text_){var nt=$.getFlatMidpoint();this.drawText_(nt,0,2,2)}}},e.prototype.drawMultiLineString=function($){this.squaredTolerance_&&($=$.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var tt=$.getExtent();if(Object(gn.F)(this.extent_,tt)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var et=this.context_,nt=$.getFlatCoordinates(),rt=0,it=$.getEnds(),ot=$.getStride();et.beginPath();for(var at=0,Ot=it.length;at<Ot;++at)rt=this.moveToLineTo_(nt,rt,it[at],ot,!1);et.stroke()}if(""!==this.text_){var wt=$.getFlatMidpoints();this.drawText_(wt,0,wt.length,2)}}},e.prototype.drawPolygon=function($){if(this.squaredTolerance_&&($=$.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(gn.F)(this.extent_,$.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var tt=this.context_;tt.beginPath(),this.drawRings_($.getOrientedFlatCoordinates(),0,$.getEnds(),$.getStride()),this.fillState_&&tt.fill(),this.strokeState_&&tt.stroke()}if(""!==this.text_){var et=$.getFlatInteriorPoint();this.drawText_(et,0,2,2)}}},e.prototype.drawMultiPolygon=function($){if(this.squaredTolerance_&&($=$.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(gn.F)(this.extent_,$.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var tt=this.context_,et=$.getOrientedFlatCoordinates(),nt=0,rt=$.getEndss(),it=$.getStride();tt.beginPath();for(var ot=0,at=rt.length;ot<at;++ot){var Ot=rt[ot];nt=this.drawRings_(et,nt,Ot,it)}this.fillState_&&tt.fill(),this.strokeState_&&tt.stroke()}if(""!==this.text_){var wt=$.getFlatInteriorPoints();this.drawText_(wt,0,wt.length,2)}}},e.prototype.setContextFillState_=function($){var tt=this.context_,et=this.contextFillState_;et?et.fillStyle!=$.fillStyle&&(et.fillStyle=$.fillStyle,tt.fillStyle=$.fillStyle):(tt.fillStyle=$.fillStyle,this.contextFillState_={fillStyle:$.fillStyle})},e.prototype.setContextStrokeState_=function($){var tt=this.context_,et=this.contextStrokeState_;et?(et.lineCap!=$.lineCap&&(et.lineCap=$.lineCap,tt.lineCap=$.lineCap),tt.setLineDash&&(Object(Ci.b)(et.lineDash,$.lineDash)||tt.setLineDash(et.lineDash=$.lineDash),et.lineDashOffset!=$.lineDashOffset&&(et.lineDashOffset=$.lineDashOffset,tt.lineDashOffset=$.lineDashOffset)),et.lineJoin!=$.lineJoin&&(et.lineJoin=$.lineJoin,tt.lineJoin=$.lineJoin),et.lineWidth!=$.lineWidth&&(et.lineWidth=$.lineWidth,tt.lineWidth=$.lineWidth),et.miterLimit!=$.miterLimit&&(et.miterLimit=$.miterLimit,tt.miterLimit=$.miterLimit),et.strokeStyle!=$.strokeStyle&&(et.strokeStyle=$.strokeStyle,tt.strokeStyle=$.strokeStyle)):(tt.lineCap=$.lineCap,tt.setLineDash&&(tt.setLineDash($.lineDash),tt.lineDashOffset=$.lineDashOffset),tt.lineJoin=$.lineJoin,tt.lineWidth=$.lineWidth,tt.miterLimit=$.miterLimit,tt.strokeStyle=$.strokeStyle,this.contextStrokeState_={lineCap:$.lineCap,lineDash:$.lineDash,lineDashOffset:$.lineDashOffset,lineJoin:$.lineJoin,lineWidth:$.lineWidth,miterLimit:$.miterLimit,strokeStyle:$.strokeStyle})},e.prototype.setContextTextState_=function($){var tt=this.context_,et=this.contextTextState_,nt=$.textAlign?$.textAlign:wi.m;et?(et.font!=$.font&&(et.font=$.font,tt.font=$.font),et.textAlign!=nt&&(et.textAlign=nt,tt.textAlign=nt),et.textBaseline!=$.textBaseline&&(et.textBaseline=$.textBaseline,tt.textBaseline=$.textBaseline)):(tt.font=$.font,tt.textAlign=nt,tt.textBaseline=$.textBaseline,this.contextTextState_={font:$.font,textAlign:nt,textBaseline:$.textBaseline})},e.prototype.setFillStrokeStyle=function($,tt){if($){var et=$.getColor();this.fillState_={fillStyle:Object(eu.a)(et||wi.c)}}else this.fillState_=null;if(tt){var nt=tt.getColor(),rt=tt.getLineCap(),it=tt.getLineDash(),ot=tt.getLineDashOffset(),at=tt.getLineJoin(),Ot=tt.getWidth(),wt=tt.getMiterLimit();this.strokeState_={lineCap:void 0!==rt?rt:wi.e,lineDash:it||wi.f,lineDashOffset:ot||wi.g,lineJoin:void 0!==at?at:wi.h,lineWidth:this.pixelRatio_*(void 0!==Ot?Ot:wi.i),miterLimit:void 0!==wt?wt:wi.j,strokeStyle:Object(eu.a)(nt||wi.l)}}else this.strokeState_=null},e.prototype.setImageStyle=function($){if($){var tt=$.getSize();if(tt){var et=$.getAnchor(),nt=$.getImage(1),rt=$.getOrigin(),it=$.getScaleArray();this.imageAnchorX_=et[0],this.imageAnchorY_=et[1],this.imageHeight_=tt[1],this.image_=nt,this.imageOpacity_=$.getOpacity(),this.imageOriginX_=rt[0],this.imageOriginY_=rt[1],this.imageRotateWithView_=$.getRotateWithView(),this.imageRotation_=$.getRotation(),this.imageScale_=[this.pixelRatio_*it[0],this.pixelRatio_*it[1]],this.imageWidth_=tt[0]}else this.image_=null}else this.image_=null},e.prototype.setTextStyle=function($){if($){var tt=$.getFill();if(tt){var et=tt.getColor();this.textFillState_={fillStyle:Object(eu.a)(et||wi.c)}}else this.textFillState_=null;var nt=$.getStroke();if(nt){var rt=nt.getColor(),it=nt.getLineCap(),ot=nt.getLineDash(),at=nt.getLineDashOffset(),Ot=nt.getLineJoin(),wt=nt.getWidth(),St=nt.getMiterLimit();this.textStrokeState_={lineCap:void 0!==it?it:wi.e,lineDash:ot||wi.f,lineDashOffset:at||wi.g,lineJoin:void 0!==Ot?Ot:wi.h,lineWidth:void 0!==wt?wt:wi.i,miterLimit:void 0!==St?St:wi.j,strokeStyle:Object(eu.a)(rt||wi.l)}}else this.textStrokeState_=null;var Ct=$.getFont(),Rt=$.getOffsetX(),Tt=$.getOffsetY(),At=$.getRotateWithView(),Nt=$.getRotation(),kt=$.getScaleArray(),Dt=$.getText(),Gt=$.getTextAlign(),Ut=$.getTextBaseline();this.textState_={font:void 0!==Ct?Ct:wi.d,textAlign:void 0!==Gt?Gt:wi.m,textBaseline:void 0!==Ut?Ut:wi.n},this.text_=void 0!==Dt?Dt:"",this.textOffsetX_=void 0!==Rt?this.pixelRatio_*Rt:0,this.textOffsetY_=void 0!==Tt?this.pixelRatio_*Tt:0,this.textRotateWithView_=void 0!==At&&At,this.textRotation_=void 0!==Nt?Nt:0,this.textScale_=[this.pixelRatio_*kt[0],this.pixelRatio_*kt[1]]}else this.text_=""},e}(tu),zu=et(55),Uu=et(314),Yu={Point:function($,tt,et,nt,rt){var it,ot=et.getImage(),at=et.getText();if(rt&&($=rt,it=ot&&at&&at.getText()?{}:void 0),ot){if(ot.getImageState()!=di.a.LOADED)return;var Ot=$.getBuilder(et.getZIndex(),_u);Ot.setImageStyle(ot,it),Ot.drawPoint(tt,nt)}if(at&&at.getText()){var wt=$.getBuilder(et.getZIndex(),Ou);wt.setTextStyle(at,it),wt.drawText(tt,nt)}},LineString:function($,tt,et,nt,rt){var it=et.getStroke();if(it){var ot=$.getBuilder(et.getZIndex(),mu);ot.setFillStrokeStyle(null,it),ot.drawLineString(tt,nt)}var at=et.getText();if(at&&at.getText()){var Ot=(rt||$).getBuilder(et.getZIndex(),Ou);Ot.setTextStyle(at),Ot.drawText(tt,nt)}},Polygon:function($,tt,et,nt,rt){var it=et.getFill(),ot=et.getStroke();if(it||ot){var at=$.getBuilder(et.getZIndex(),bu);at.setFillStrokeStyle(it,ot),at.drawPolygon(tt,nt)}var Ot=et.getText();if(Ot&&Ot.getText()){var wt=(rt||$).getBuilder(et.getZIndex(),Ou);wt.setTextStyle(Ot),wt.drawText(tt,nt)}},MultiPoint:function($,tt,et,nt,rt){var it,ot=et.getImage(),at=et.getText();if(rt&&($=rt,it=ot&&at&&at.getText()?{}:void 0),ot){if(ot.getImageState()!=di.a.LOADED)return;var Ot=$.getBuilder(et.getZIndex(),_u);Ot.setImageStyle(ot,it),Ot.drawMultiPoint(tt,nt)}if(at&&at.getText()){var wt=(rt||$).getBuilder(et.getZIndex(),Ou);wt.setTextStyle(at,it),wt.drawText(tt,nt)}},MultiLineString:function($,tt,et,nt,rt){var it=et.getStroke();if(it){var ot=$.getBuilder(et.getZIndex(),mu);ot.setFillStrokeStyle(null,it),ot.drawMultiLineString(tt,nt)}var at=et.getText();if(at&&at.getText()){var Ot=(rt||$).getBuilder(et.getZIndex(),Ou);Ot.setTextStyle(at),Ot.drawText(tt,nt)}},MultiPolygon:function($,tt,et,nt,rt){var it=et.getFill(),ot=et.getStroke();if(ot||it){var at=$.getBuilder(et.getZIndex(),bu);at.setFillStrokeStyle(it,ot),at.drawMultiPolygon(tt,nt)}var Ot=et.getText();if(Ot&&Ot.getText()){var wt=(rt||$).getBuilder(et.getZIndex(),Ou);wt.setTextStyle(Ot),wt.drawText(tt,nt)}},GeometryCollection:function($,tt,et,nt,rt){var it,ot,at=tt.getGeometriesArray();for(it=0,ot=at.length;it<ot;++it)(0,Yu[at[it].getType()])($,at[it],et,nt,rt)},Circle:function($,tt,et,nt,rt){var it=et.getFill(),ot=et.getStroke();if(it||ot){var at=$.getBuilder(et.getZIndex(),yu);at.setFillStrokeStyle(it,ot),at.drawCircle(tt,nt)}var Ot=et.getText();if(Ot&&Ot.getText()){var wt=(rt||$).getBuilder(et.getZIndex(),Ou);wt.setTextStyle(Ot),wt.drawText(tt,nt)}}};function Ku($,tt){return parseInt(Object(_i.c)($),10)-parseInt(Object(_i.c)(tt),10)}function Hu($,tt){return.5*$/tt}function Qu($,tt,et,nt,rt,it,ot){var at=!1,Ot=et.getImage();if(Ot){var wt=Ot.getImageState();wt==di.a.LOADED||wt==di.a.ERROR?Ot.unlistenImageChange(rt):(wt==di.a.IDLE&&Ot.load(),wt=Ot.getImageState(),Ot.listenImageChange(rt),at=!0)}return function($,tt,et,nt,rt,it){var ot=et.getGeometryFunction()(tt);if(ot){var at=ot.simplifyTransformed(nt,rt);et.getRenderer()?function t($,tt,et,nt){if(tt.getType()!=Oo.a.GEOMETRY_COLLECTION)$.getBuilder(et.getZIndex(),gu).drawCustom(tt,nt,et.getRenderer());else for(var rt=tt.getGeometries(),it=0,ot=rt.length;it<ot;++it)t($,rt[it],et,nt)}($,at,et,tt):(0,Yu[at.getType()])($,at,et,tt,it)}}($,tt,et,nt,it,ot),at}var Bu=et(26),Wu=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Xu=function($){function e(tt){var et=$.call(this,tt)||this;return et.boundHandleStyleImageChange_=et.handleStyleImageChange_.bind(et),et.animatingOrInteracting_,et.dirty_=!1,et.hitDetectionImageData_=null,et.renderedFeatures_=null,et.renderedRevision_=-1,et.renderedResolution_=NaN,et.renderedExtent_=Object(gn.j)(),et.renderedRotation_,et.renderedCenter_=null,et.renderedProjection_=null,et.renderedRenderOrder_=null,et.replayGroup_=null,et.replayGroupChanged=!0,et.declutterExecutorGroup=null,et.clipping=!0,et}return Wu(e,$),e.prototype.useContainer=function(tt,et,nt){nt<1&&(tt=null),$.prototype.useContainer.call(this,tt,et,nt)},e.prototype.renderWorlds=function($,tt,et){var nt=tt.extent,rt=tt.viewState,it=rt.center,ot=rt.resolution,at=rt.projection,Ot=rt.rotation,wt=at.getExtent(),St=this.getLayer().getSource(),Ct=tt.pixelRatio,Rt=tt.viewHints,Tt=!(Rt[mc.a.ANIMATING]||Rt[mc.a.INTERACTING]),At=this.context,Nt=Math.round(tt.size[0]*Ct),kt=Math.round(tt.size[1]*Ct),Dt=St.getWrapX()&&at.canWrapX(),Gt=Dt?Object(gn.E)(wt):null,Ut=Dt?Math.ceil((nt[2]-wt[2])/Gt)+1:1,Xt=Dt?Math.floor((nt[0]-wt[0])/Gt):0;do{var Vt=this.getRenderTransform(it,ot,Ot,Ct,Nt,kt,Xt*Gt);$.execute(At,1,Vt,Ot,Tt,void 0,et)}while(++Xt<Ut)},e.prototype.renderDeclutter=function($){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,$,$.declutterTree)},e.prototype.renderFrame=function($,tt){var et=$.pixelRatio,nt=$.layerStatesArray[$.layerIndex];Object(xi.e)(this.pixelTransform,1/et,1/et),Object(xi.d)(this.inversePixelTransform,this.pixelTransform);var rt=Object(xi.g)(this.pixelTransform);this.useContainer(tt,rt,nt.opacity);var it=this.context,ot=it.canvas,at=this.replayGroup_,Ot=this.declutterExecutorGroup;if((!at||at.isEmpty())&&(!Ot||Ot.isEmpty()))return!this.containerReused&&ot.width>0&&(ot.width=0),this.container;var wt=Math.round($.size[0]*et),St=Math.round($.size[1]*et);ot.width!=wt||ot.height!=St?(ot.width=wt,ot.height=St,ot.style.transform!==rt&&(ot.style.transform=rt)):this.containerReused||it.clearRect(0,0,wt,St),this.preRender(it,$);var Ct=$.viewState,Rt=Ct.projection,Tt=!1;if(nt.extent&&this.clipping){var At=Object(_n.j)(nt.extent,Rt);(Tt=!Object(gn.g)(At,$.extent)&&Object(gn.F)(At,$.extent))&&this.clipUnrotated(it,$,At)}this.renderWorlds(at,$),Tt&&it.restore(),this.postRender(it,$);var Nt=nt.opacity,kt=this.container;return Nt!==parseFloat(kt.style.opacity)&&(kt.style.opacity=1===Nt?"":String(Nt)),this.renderedRotation_!==Ct.rotation&&(this.renderedRotation_=Ct.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function($){return new Promise(function(tt){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var et=[this.context.canvas.width,this.context.canvas.height];Object(xi.a)(this.pixelTransform,et);var nt=this.renderedCenter_,rt=this.renderedResolution_,it=this.renderedRotation_,ot=this.renderedProjection_,at=this.renderedExtent_,Ot=this.getLayer(),wt=[],St=et[0]/2,Ct=et[1]/2;wt.push(this.getRenderTransform(nt,rt,it,.5,St,Ct,0).slice());var Rt=Ot.getSource(),Tt=ot.getExtent();if(Rt.getWrapX()&&ot.canWrapX()&&!Object(gn.g)(Tt,at)){for(var At=at[0],Nt=Object(gn.E)(Tt),kt=0,Dt=void 0;At<Tt[0];)Dt=Nt*--kt,wt.push(this.getRenderTransform(nt,rt,it,.5,St,Ct,Dt).slice()),At+=Nt;for(kt=0,At=at[2];At>Tt[2];)Dt=Nt*++kt,wt.push(this.getRenderTransform(nt,rt,it,.5,St,Ct,Dt).slice()),At-=Nt}this.hitDetectionImageData_=function($,tt,et,nt,rt,it,ot){var at=$[0]/2,Ot=$[1]/2,wt=Object(Ke.a)(at,Ot);wt.imageSmoothingEnabled=!1;for(var St=wt.canvas,Ct=new Gu(wt,.5,rt,null,ot),Rt=et.length,Tt=Math.floor(16777215/Rt),At={},Nt=1;Nt<=Rt;++Nt){var kt=et[Nt-1],Dt=kt.getStyleFunction()||nt;if(nt){var Gt=Dt(kt,it);if(Gt){Array.isArray(Gt)||(Gt=[Gt]);for(var Ut="#"+("000000"+(Nt*Tt).toString(16)).slice(-6),Xt=0,Vt=Gt.length;Xt<Vt;++Xt){var Jt=Gt[Xt],ne=Jt.clone(),re=ne.getFill();re&&re.setColor(Ut);var ie=ne.getStroke();ie&&ie.setColor(Ut),ne.setText(void 0);var oe=Jt.getImage();if(oe){var ae=oe.getImageSize();if(!ae)continue;var fe=document.createElement("canvas");fe.width=ae[0],fe.height=ae[1];var de=fe.getContext("2d",{alpha:!1});de.fillStyle=Ut;var ye=de.canvas;de.fillRect(0,0,ye.width,ye.height);var Se=ae?ae[0]:ye.width,Ee=ae?ae[1]:ye.height;Object(Ke.a)(Se,Ee).drawImage(ye,0,0),ne.setImage(new Uu.default({img:ye,imgSize:ae,anchor:oe.getAnchor(),anchorXUnits:zu.a.PIXELS,anchorYUnits:zu.a.PIXELS,offset:oe.getOrigin(),size:oe.getSize(),opacity:oe.getOpacity(),scale:oe.getScale(),rotation:oe.getRotation(),rotateWithView:oe.getRotateWithView()}))}var Me=Number(ne.getZIndex());(Ie=At[Me])||(Ie={},At[Me]=Ie,Ie[Oo.a.POLYGON]=[],Ie[Oo.a.CIRCLE]=[],Ie[Oo.a.LINE_STRING]=[],Ie[Oo.a.POINT]=[]);var Ce=ne.getGeometryFunction()(kt);Ce&&Object(gn.F)(rt,Ce.getExtent())&&Ie[Ce.getType().replace("Multi","")].push(Ce,ne)}}}}for(var Re=Object.keys(At).map(Number).sort(Ci.i),Pe=(Nt=0,Re.length);Nt<Pe;++Nt){var Ie=At[Re[Nt]];for(var Le in Ie){var Be=Ie[Le];for(Xt=0,Vt=Be.length;Xt<Vt;Xt+=2){Ct.setStyle(Be[Xt+1]);for(var Ze=0,Ve=tt.length;Ze<Ve;++Ze)Ct.setTransform(tt[Ze]),Ct.drawGeometry(Be[Xt])}}}return wt.getImageData(0,0,St.width,St.height)}(et,wt,this.renderedFeatures_,Ot.getStyleFunction(),at,rt,it)}tt(function($,tt,et){var nt=[];if(et){var rt=4*(Math.round($[0]/2)+Math.round($[1]/2)*et.width),it=et.data[rt],ot=et.data[rt+1],at=et.data[rt+2]+256*(ot+256*it),Ot=Math.floor(16777215/tt.length);at&&at%Ot==0&&nt.push(tt[at/Ot-1])}return nt}($,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function($,tt,et,nt,rt){var it=this;if(this.replayGroup_){var ot,at=tt.viewState.resolution,Ot=tt.viewState.rotation,wt=this.getLayer(),St={},l=function($,tt,et){var it=Object(_i.c)($),ot=St[it];if(ot){if(!0!==ot&&et<ot.distanceSq){if(0===et)return St[it]=!0,rt.splice(rt.lastIndexOf(ot),1),nt($,wt,tt);ot.geometry=tt,ot.distanceSq=et}}else{if(0===et)return St[it]=!0,nt($,wt,tt);rt.push(St[it]={feature:$,layer:wt,geometry:tt,distanceSq:et,callback:nt})}},Ct=[this.replayGroup_];return this.declutterExecutorGroup&&Ct.push(this.declutterExecutorGroup),Ct.some((function(nt){return ot=nt.forEachFeatureAtCoordinate($,at,Ot,et,l,nt===it.declutterExecutorGroup?tt.declutterTree.all().map((function($){return $.value})):null)})),ot}},e.prototype.handleFontsChanged=function(){var $=this.getLayer();$.getVisible()&&this.replayGroup_&&$.changed()},e.prototype.handleStyleImageChange_=function($){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function($){var tt=this.getLayer(),et=tt.getSource();if(!et)return!1;var nt=$.viewHints[mc.a.ANIMATING],rt=$.viewHints[mc.a.INTERACTING],it=tt.getUpdateWhileAnimating(),ot=tt.getUpdateWhileInteracting();if(!this.dirty_&&!it&&nt||!ot&&rt)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var at=$.extent,Ot=$.viewState,wt=Ot.projection,St=Ot.resolution,Ct=$.pixelRatio,Rt=tt.getRevision(),Tt=tt.getRenderBuffer(),At=tt.getRenderOrder();void 0===At&&(At=Ku);var Nt=Ot.center.slice(),kt=Object(gn.c)(at,Tt*St),Dt=[kt.slice()],Gt=wt.getExtent();if(et.getWrapX()&&wt.canWrapX()&&!Object(gn.g)(Gt,$.extent)){var Ut=Object(gn.E)(Gt),Xt=Math.max(Object(gn.E)(kt)/2,Ut);kt[0]=Gt[0]-Xt,kt[2]=Gt[2]+Xt,Object(Bu.f)(Nt,wt);var Vt=Object(gn.K)(Dt[0],wt);Vt[0]<Gt[0]&&Vt[2]<Gt[2]?Dt.push([Vt[0]+Ut,Vt[1],Vt[2]+Ut,Vt[3]]):Vt[0]>Gt[0]&&Vt[2]>Gt[2]&&Dt.push([Vt[0]-Ut,Vt[1],Vt[2]-Ut,Vt[3]])}if(!this.dirty_&&this.renderedResolution_==St&&this.renderedRevision_==Rt&&this.renderedRenderOrder_==At&&Object(gn.g)(this.renderedExtent_,kt))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var Jt,ne=new du(Hu(St,Ct),kt,St,Ct);this.getLayer().getDeclutter()&&(Jt=new du(Hu(St,Ct),kt,St,Ct));var re,ie=Object(_n.o)();if(ie){for(var oe=0,ae=Dt.length;oe<ae;++oe)et.loadFeatures(Object(_n.q)(Dt[oe],wt),St,ie);re=Object(_n.n)(ie,wt)}else for(oe=0,ae=Dt.length;oe<ae;++oe)et.loadFeatures(Dt[oe],St,wt);var fe=function($,tt){var et=Hu($,tt);return et*et}(St,Ct),de=function($){var et,nt=$.getStyleFunction()||tt.getStyleFunction();if(nt&&(et=nt($,St)),et){var rt=this.renderFeature($,fe,et,ne,re,Jt);this.dirty_=this.dirty_||rt}}.bind(this),ye=Object(_n.q)(kt,wt),Se=et.getFeaturesInExtent(ye);for(At&&Se.sort(At),oe=0,ae=Se.length;oe<ae;++oe)de(Se[oe]);this.renderedFeatures_=Se;var Ee=ne.finish(),Me=new Fu(kt,St,Ct,et.getOverlaps(),Ee,tt.getRenderBuffer());return Jt&&(this.declutterExecutorGroup=new Fu(kt,St,Ct,et.getOverlaps(),Jt.finish(),tt.getRenderBuffer())),this.renderedResolution_=St,this.renderedRevision_=Rt,this.renderedRenderOrder_=At,this.renderedExtent_=kt,this.renderedCenter_=Nt,this.renderedProjection_=wt,this.replayGroup_=Me,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function($,tt,et,nt,rt,it){if(!et)return!1;var ot=!1;if(Array.isArray(et))for(var at=0,Ot=et.length;at<Ot;++at)ot=Qu(nt,$,et[at],tt,this.boundHandleStyleImageChange_,rt,it)||ot;else ot=Qu(nt,$,et,tt,this.boundHandleStyleImageChange_,rt,it);return ot},e}(Ei),qu=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Zu=function($){function e(tt){return $.call(this,tt)||this}return qu(e,$),e.prototype.createRenderer=function(){return new Xu(this)},e}(Tc),Vu=function($){function e(tt,et){var nt=$.call(this,tt,et)||this;return nt.scheduler=tt,nt.work=et,nt.pending=!1,nt}return b(e,$),e.prototype.schedule=function($,tt){if(void 0===tt&&(tt=0),this.closed)return this;this.state=$;var et=this.id,nt=this.scheduler;return null!=et&&(this.id=this.recycleAsyncId(nt,et,tt)),this.pending=!0,this.delay=tt,this.id=this.id||this.requestAsyncId(nt,this.id,tt),this},e.prototype.requestAsyncId=function($,tt,et){return void 0===et&&(et=0),setInterval($.flush.bind($,this),et)},e.prototype.recycleAsyncId=function($,tt,et){if(void 0===et&&(et=0),null!==et&&this.delay===et&&!1===this.pending)return tt;clearInterval(tt)},e.prototype.execute=function($,tt){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var et=this._execute($,tt);if(et)return et;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function($,tt){var et=!1,nt=void 0;try{this.work($)}catch($){et=!0,nt=!!$&&$||new Error($)}if(et)return this.unsubscribe(),nt},e.prototype._unsubscribe=function(){var $=this.id,tt=this.scheduler,et=tt.actions,nt=et.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==nt&&et.splice(nt,1),null!=$&&(this.id=this.recycleAsyncId(tt,$,null)),this.delay=null},e}(function($){function e(tt,et){return $.call(this)||this}return b(e,$),e.prototype.schedule=function($,tt){return void 0===tt&&(tt=0),this},e}(ne)),Ju=function(){function t($,tt){void 0===tt&&(tt=t.now),this.SchedulerAction=$,this.now=tt}return t.prototype.schedule=function($,tt,et){return void 0===tt&&(tt=0),new this.SchedulerAction(this,$).schedule(et,tt)},t.now=function(){return Date.now()},t}(),$u=new(function($){function e(tt,et){void 0===et&&(et=Ju.now);var nt=$.call(this,tt,(function(){return e.delegate&&e.delegate!==nt?e.delegate.now():et()}))||this;return nt.actions=[],nt.active=!1,nt.scheduled=void 0,nt}return b(e,$),e.prototype.schedule=function(tt,et,nt){return void 0===et&&(et=0),e.delegate&&e.delegate!==this?e.delegate.schedule(tt,et,nt):$.prototype.schedule.call(this,tt,et,nt)},e.prototype.flush=function($){var tt=this.actions;if(this.active)tt.push($);else{var et;this.active=!0;do{if(et=$.execute($.state,$.delay))break}while($=tt.shift());if(this.active=!1,et){for(;$=tt.shift();)$.unsubscribe();throw et}}},e}(Ju))(Vu);function ac($){var tt=$.subscriber,et=$.counter,nt=$.period;tt.next(et),this.schedule({subscriber:tt,counter:et+1,period:nt},nt)}var oh=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),ah=function($){function e(tt,et){var nt=$.call(this)||this;return nt.subject=tt,nt.subscriber=et,nt.closed=!1,nt}return b(e,$),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var $=this.subject,tt=$.observers;if(this.subject=null,tt&&0!==tt.length&&!$.isStopped&&!$.closed){var et=tt.indexOf(this.subscriber);-1!==et&&tt.splice(et,1)}}},e}(ne),sh=function($){function e(tt){var et=$.call(this,tt)||this;return et.destination=tt,et}return b(e,$),e}(ie),uh=function($){function e(){var tt=$.call(this)||this;return tt.observers=[],tt.closed=!1,tt.isStopped=!1,tt.hasError=!1,tt.thrownError=null,tt}return b(e,$),e.prototype[re]=function(){return new sh(this)},e.prototype.lift=function($){var tt=new bh(this,this);return tt.operator=$,tt},e.prototype.next=function($){if(this.closed)throw new oh;if(!this.isStopped)for(var tt=this.observers,et=tt.length,nt=tt.slice(),rt=0;rt<et;rt++)nt[rt].next($)},e.prototype.error=function($){if(this.closed)throw new oh;this.hasError=!0,this.thrownError=$,this.isStopped=!0;for(var tt=this.observers,et=tt.length,nt=tt.slice(),rt=0;rt<et;rt++)nt[rt].error($);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new oh;this.isStopped=!0;for(var $=this.observers,tt=$.length,et=$.slice(),nt=0;nt<tt;nt++)et[nt].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(tt){if(this.closed)throw new oh;return $.prototype._trySubscribe.call(this,tt)},e.prototype._subscribe=function($){if(this.closed)throw new oh;return this.hasError?($.error(this.thrownError),ne.EMPTY):this.isStopped?($.complete(),ne.EMPTY):(this.observers.push($),new ah(this,$))},e.prototype.asObservable=function(){var $=new fe;return $.source=this,$},e.create=function($,tt){return new bh($,tt)},e}(fe),bh=function($){function e(tt,et){var nt=$.call(this)||this;return nt.destination=tt,nt.source=et,nt}return b(e,$),e.prototype.next=function($){var tt=this.destination;tt&&tt.next&&tt.next($)},e.prototype.error=function($){var tt=this.destination;tt&&tt.error&&this.destination.error($)},e.prototype.complete=function(){var $=this.destination;$&&$.complete&&this.destination.complete()},e.prototype._subscribe=function($){return this.source?this.source.subscribe($):ne.EMPTY},e}(uh);function pc($,tt,et){return void 0===et&&(et=Number.POSITIVE_INFINITY),"function"==typeof tt?function(nt){return nt.pipe(pc((function(et,nt){return jt($(et,nt)).pipe(G((function($,rt){return tt(et,$,nt,rt)})))}),et))}:("number"==typeof tt&&(et=tt),function(tt){return tt.lift(new wh($,et))})}var wh=function(){function t($,tt){void 0===tt&&(tt=Number.POSITIVE_INFINITY),this.project=$,this.concurrent=tt}return t.prototype.call=function($,tt){return tt.subscribe(new Sh($,this.project,this.concurrent))},t}(),Sh=function($){function e(tt,et,nt){void 0===nt&&(nt=Number.POSITIVE_INFINITY);var rt=$.call(this,tt)||this;return rt.project=et,rt.concurrent=nt,rt.hasCompleted=!1,rt.buffer=[],rt.active=0,rt.index=0,rt}return b(e,$),e.prototype._next=function($){this.active<this.concurrent?this._tryNext($):this.buffer.push($)},e.prototype._tryNext=function($){var tt,et=this.index++;try{tt=this.project($,et)}catch($){return void this.destination.error($)}this.active++,this._innerSub(tt)},e.prototype._innerSub=function($){var tt=new sn(this),et=this.destination;et.add(tt);var nt=Pt($,tt);nt!==tt&&et.add(nt)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function($){this.destination.next($)},e.prototype.notifyComplete=function(){var $=this.buffer;this.active--,$.length>0?this._next($.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(un);function yc($){return void 0===$&&($=Number.POSITIVE_INFINITY),pc(F,$)}var Eh=function($){function e(tt){var et=$.call(this)||this;return et._value=tt,et}return b(e,$),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(tt){var et=$.prototype._subscribe.call(this,tt);return et&&!et.closed&&tt.next(this._value),et},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new oh;return this._value},e.prototype.next=function(tt){$.prototype.next.call(this,this._value=tt)},e}(uh);function vc(){return yc(1)}function _c(){for(var $=[],tt=0;tt<arguments.length;tt++)$[tt]=arguments[tt];return vc()(Et.apply(void 0,$))}var Mh={leading:!0,trailing:!1},jh=function(){function t($,tt,et,nt){this.duration=$,this.scheduler=tt,this.leading=et,this.trailing=nt}return t.prototype.call=function($,tt){return tt.subscribe(new Ch($,this.duration,this.scheduler,this.leading,this.trailing))},t}(),Ch=function($){function e(tt,et,nt,rt,it){var ot=$.call(this,tt)||this;return ot.duration=et,ot.scheduler=nt,ot.leading=rt,ot.trailing=it,ot._hasTrailingValue=!1,ot._trailingValue=null,ot}return b(e,$),e.prototype._next=function($){this.throttled?this.trailing&&(this._trailingValue=$,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(xc,this.duration,{subscriber:this})),this.leading?this.destination.next($):this.trailing&&(this._trailingValue=$,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var $=this.throttled;$&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),$.unsubscribe(),this.remove($),this.throttled=null)},e}(ie);function xc($){$.subscriber.clearThrottle()}function wc($,tt){return function(et){return et.lift(new Rh($,tt))}}var Rh=function(){function t($,tt){this.predicate=$,this.thisArg=tt}return t.prototype.call=function($,tt){return tt.subscribe(new Ph($,this.predicate,this.thisArg))},t}(),Ph=function($){function e(tt,et,nt){var rt=$.call(this,tt)||this;return rt.predicate=et,rt.thisArg=nt,rt.count=0,rt}return b(e,$),e.prototype._next=function($){var tt;try{tt=this.predicate.call(this.thisArg,$,this.count++)}catch($){return void this.destination.error($)}tt&&this.destination.next($)},e}(ie),Ih=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Th=new fe((function($){return $.complete()}));function Cc($){return $?function($){return new fe((function(tt){return $.schedule((function(){return tt.complete()}))}))}($):Th}function Rc($){return function(tt){return 0===$?Cc():tt.lift(new Ah($))}}var Ah=function(){function t($){if(this.total=$,this.total<0)throw new Ih}return t.prototype.call=function($,tt){return tt.subscribe(new Lh($,this.total))},t}(),Lh=function($){function e(tt,et){var nt=$.call(this,tt)||this;return nt.total=et,nt.count=0,nt}return b(e,$),e.prototype._next=function($){var tt=this.total,et=++this.count;et<=tt&&(this.destination.next($),et===tt&&(this.destination.complete(),this.unsubscribe()))},e}(ie),Fh=et(82);function Ac($,tt){switch($){case"in":return 1/tt;case"cm":return 2.54/tt;case"mm":return 25.4/tt;case"m":return.0254/tt;case"px":return 1;default:throw new Error("Invalid real world unit: ".concat($))}}function Lc($,tt,et){return $/Ac(tt,et)}function Fc($,tt,et){return $*Ac(tt,et)}function Nc($,tt,et){return 2.54*tt/et/Object(_n.k)($).getMetersPerUnit()/100}function kc($,tt){var et=Object.keys($);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols($);tt&&(nt=nt.filter((function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable}))),et.push.apply(et,nt)}return et}function Dc($){for(var tt=1;tt<arguments.length;tt++){var et=null!=arguments[tt]?arguments[tt]:{};tt%2?kc(Object(et),!0).forEach((function(tt){Dt()($,tt,et[tt])})):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(et)):kc(Object(et)).forEach((function(tt){Object.defineProperty($,tt,Object.getOwnPropertyDescriptor(et,tt))}))}return $}function Gc($){return K()?jt($.convertToBlob()):new fe((function(tt){$.toBlob((function($){tt.next($),tt.complete()}),"image/png")}))}function zc($,tt){return Uc.apply(this,arguments)}function Uc(){return(Uc=Ve()(Re.a.mark((function t($,tt){var et,nt,rt,it,ot,at,Ot,wt;return Re.a.wrap((function(St){for(;;)switch(St.prev=St.next){case 0:if((et=Object(_n.k)($.projection))||!$.projection.startsWith("EPSG:")){St.next=11;break}return nt=$.projection.split(":"),St.next=5,Mn(nt[1]);case 5:rt=St.sent,it=rt.name,ot=rt.proj4def,at=rt.bbox,Cn(it,ot,at),et=Object(_n.k)($.projection);case 11:return Ot=Nc($.projection,$.scale,$.dpi),wt={center:Object(_n.h)($.center,et),resolution:Ot,projection:et,rotation:0},St.abrupt("return",{animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterItems:[],extent:Object(gn.z)(wt.center,wt.resolution,wt.rotation,tt),index:0,layerIndex:0,layerStatesArray:[],pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:tt,time:Date.now(),usedTiles:{},viewState:wt,viewHints:[0,0],wantedTiles:{},tileQueue:null});case 14:case"end":return St.stop()}}),t)})))).apply(this,arguments)}function Yc($){var tt,et,nt=$.size,rt=$.dpi;if(!nt[2]||"px"===nt[2])return[nt[0],nt[1]];switch(nt[2]){case"in":tt=rt*nt[0],et=rt*nt[1];break;case"cm":tt=rt*nt[0]/2.54,et=rt*nt[1]/2.54;break;case"mm":tt=rt*nt[0]/25.4,et=rt*nt[1]/25.4;break;case"m":tt=rt*nt[0]*100/2.54,et=rt*nt[1]*100/2.54;break;default:tt=nt[0],et=nt[1]}return[Math.round(tt),Math.round(et)]}function Bc($,tt,et){var nt=0,rt=Dc(Dc({},$),{},{layerStatesArray:[{layer:tt,managed:!0,maxResolution:null,maxZoom:null,minResolution:0,minZoom:null,opacity:void 0!==et?et:1,sourceState:gi.a,visible:!0,zIndex:0}],get time(){return nt+=1e4}});return rt.tileQueue=new Fh.a((function($,tt,et,nt){return Object(Fh.b)(rt,$,tt,et,nt)}),(function(){})),rt}function Wc($){this.containerReused=!1,this.canvas=$.canvas,this.context=$,this.container={firstElementChild:$.canvas,style:{opacity:1}}}var Nh=et(135),kh=et.n(Nh);function Vc($,tt){var et=Object.keys($);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols($);tt&&(nt=nt.filter((function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable}))),et.push.apply(et,nt)}return et}function Zc($){for(var tt=1;tt<arguments.length;tt++){var et=null!=arguments[tt]?arguments[tt]:{};tt%2?Vc(Object(et),!0).forEach((function(tt){Dt()($,tt,et[tt])})):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(et)):Vc(Object(et)).forEach((function(tt){Object.defineProperty($,tt,Object.getOwnPropertyDescriptor(et,tt))}))}return $}var Dh,Gh,zh,Uh=(void 0===(Dh=500)&&(Dh=0),void 0===Gh&&(Gh=$u),(Vt(zh=Dh)||!(zh-parseFloat(zh)+1>=0)||Dh<0)&&(Dh=0),Gh&&"function"==typeof Gh.schedule||(Gh=$u),new fe((function($){return $.add(Gh.schedule(ac,Dh,{subscriber:$,counter:0,period:Dh})),$}))),Yh=new uh;function th($,tt,et){switch(tt.type){case"XYZ":return function($,tt,et){return eh($,new Ki({crossOrigin:"anonymous",url:tt.url,transition:0}),et,tt.opacity)}($,tt,et);case"WMS":return function($,tt,et){if(tt.tiled)return eh($,new $i.default({crossOrigin:"anonymous",url:tt.url,params:rh(tt),transition:0}),et,tt.opacity);var nt,rt,it,ot=et.size[0],at=et.size[1],Ot=Object(Ke.a)(ot,at);Ot.canvas.style={};var wt=new Eh([0,null,void 0]),St=new Ji.default({crossOrigin:"anonymous",url:tt.url,params:rh(tt),ratio:1});return rt=new Mc({source:St}),St.setImageLoadFunction((function(tt,et){var nt=tt.getImage();K()&&nt.hintImageSize(ot,at),Yh.pipe(wc((function(tt){return tt===$})),Rc(1),q((function(){wt.next([-1,null,void 0]),wt.complete(),nt.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}))).subscribe(),nt.src=et})),nt=Bc(et,rt,tt.opacity),(it=rt.getRenderer()).useContainer=Wc.bind(it,Ot),rt.getSource().once("imageloaderror",(function($){var tt=$.target.getUrl();wt.next([1,Ot.canvas,tt]),wt.complete()})),rt.getSource().once("imageloadend",(function(){it.prepareFrame(Zc(Zc({},nt),{},{time:Date.now()})),it.renderFrame(Zc(Zc({},nt),{},{time:Date.now()}),Ot.canvas),wt.next([1,Ot.canvas,void 0]),wt.complete()})),it.prepareFrame(Zc(Zc({},nt),{},{time:Date.now()})),wt}($,tt,et);case"WMTS":return function($,tt,et){var nt=tt.tileGrid,rt=tt.projection,it=nt,ot=it.resolutions,at=it.extent,Ot=it.matrixIds;return at=at||Object(Zi.b)(rt),Ot=Ot||Array(ot.length).fill(0).map((function($,tt){return"".concat(tt)})),nt=new Bi(Zc(Zc({},nt),{},{extent:at,matrixIds:Ot})),eh($,new qi(Zc(Zc({},tt),{},{tileGrid:nt,projection:rt,transition:0,crossOrigin:"anonymous"})),et,tt.opacity)}($,tt,et);case"WFS":return function($,tt,et){var nt,rt,it=et.size[0],ot=et.size[1],at=Object(Ke.a)(it,ot);at.canvas.style={};var Ot=tt.version||"1.1.0",wt="geojson"===tt.format?new Qs:new qs({version:Ot}),St=new Eh([0,null]),Ct=new fc({format:wt,loader:function(et,it,ot){var wt=ot.getCode(),Rt=function($,tt,et,nt,rt,it){if("http"!==$.substring(0,4))return $;var ot=new URL($),at="2.0.0"===tt?"typenames":"typename";return ot.searchParams.set("SERVICE","WFS"),ot.searchParams.set("version",tt),ot.searchParams.set("request","GetFeature"),ot.searchParams.set(at,et),ot.searchParams.set("srsName",rt),ot.searchParams.set("bbox","".concat(it.join(","),",").concat(rt)),"geojson"===nt&&ot.searchParams.set("outputFormat","application/json"),ot.href}(tt.url,Ot,tt.layer,tt.format,wt,et);fetch(Rt).then((function($){if($.status>=400)throw new Error;return $.text()})).then((function($){Ct.addFeatures(Ct.getFormat().readFeatures($)),0!==Ct.getFeatures().length&&(rt.prepareFrame(Zc(Zc({},nt),{},{time:Date.now()})),rt.renderFrame(Zc(Zc({},nt),{},{time:Date.now()}),at.canvas)),St.next([1,at.canvas]),St.complete()})).catch((function(){St.next([1,at.canvas,tt.url]),St.complete()})),Yh.pipe(wc((function(tt){return tt===$})),Rc(1),q((function(){St.next([-1,null]),St.complete()}))).subscribe()},strategy:Fs}),Rt=new Zu({source:Ct});return tt.style&&(new kh.a).writeStyle(tt.style).then((function($){return Rt.setStyle($)})).catch((function($){return console.log($)})),nt=Bc(et,Rt),(rt=Rt.getRenderer()).useContainer=Wc.bind(rt,at),rt.prepareFrame(Zc(Zc({},nt),{},{time:Date.now()})),St}($,tt,et);case"GeoJSON":return function($,tt){var et=tt.size[0],nt=tt.size[1],rt=Object(Ke.a)(et,nt);rt.canvas.style={};var it=new fc({features:(new Qs).readFeatures($.geojson)}),ot=new Zu({source:it}),at=Bc(tt,ot),Ot=ot.getRenderer();Ot.useContainer=Wc.bind(Ot,rt);var wt=new Eh([0,null]);return($.style?(new kh.a).writeStyle($.style).then((function($){return ot.setStyle($)})).catch((function($){return console.log($)})):Promise.resolve()).then((function(){Ot.prepareFrame(Zc(Zc({},at),{},{time:Date.now()})),Ot.renderFrame(Zc(Zc({},at),{},{time:Date.now()}),rt.canvas),wt.next([1,rt.canvas]),wt.complete()})),wt}(tt,et)}}function eh($,tt,et,nt){var rt,it,ot,at,Ot=et.size[0],wt=et.size[1],St=Object(Ke.a)(Ot,wt);St.canvas.style={},it=new Ni({source:tt}),tt.setTileLoadFunction((function($,tt){var nt=$.getImage();if(K()){var rt=it.getSource().getTilePixelSize(0,et.pixelRatio,et.viewState.projection);nt.hintImageSize(rt[0],rt[1])}nt.src=tt})),it.getSource().on("tileloaderror",(function($){at=$.target.getUrls()[0]})),rt=Bc(et,it,nt),(ot=it.getRenderer()).useContainer=Wc.bind(ot,St),ot.renderFrame(rt,St.canvas);var Ct=Object.keys(rt.tileQueue.queuedElements_).length;return function(){for(var $=[],tt=0;tt<arguments.length;tt++)$[tt]=arguments[tt];var et=Number.POSITIVE_INFINITY,nt=null,rt=$[$.length-1];return ct(rt)?(nt=$.pop(),$.length>1&&"number"==typeof $[$.length-1]&&(et=$.pop())):"number"==typeof rt&&(et=$.pop()),null===nt&&1===$.length&&$[0]instanceof fe?$[0]:yc(et)(bt($,nt))}(Uh.pipe(function(){for(var $=[],tt=0;tt<arguments.length;tt++)$[tt]=arguments[tt];var et=$[$.length-1];return ct(et)?($.pop(),function(tt){return _c($,tt,et)}):function(tt){return _c($,tt)}}(!0),Lt((function(){return rt.tileQueue.reprioritize(),rt.tileQueue.loadMoreTiles(12,4),rt.tileQueue.getTilesLoading()}),!0),G((function(){var $=1-Object.keys(rt.tileQueue.queuedElements_).length/Ct;return 1===$&&rt.tileQueue.getTilesLoading()>0&&($-=.001),1===$?(ot.renderFrame(rt,St.canvas),[1,St.canvas,at]):[$,null,at]})),function($,tt,et){return void 0===tt&&(tt=$u),void 0===et&&(et=Mh),function($){return $.lift(new jh(500,tt,et.leading,et.trailing))}}(0,void 0,{leading:!0,trailing:!0})),Yh.pipe(wc((function(tt){return tt===$})),G((function(){return[-1,null,void 0]})))).pipe(Lt((function($){var tt=Be()($,1)[0];return-1!==tt&&1!==tt}),!0))}function rh($){return $.tiled?{LAYERS:$.layer,VERSION:$.version||"1.3.0",TILED:!0}:{LAYERS:$.layer,VERSION:$.version||"1.3.0"}}function nh($,tt,et,nt){var rt=tt.split("-")[1],it=tt.split("-")[0],ot=Math.round(4*nt/25.4);$.translate("left"===rt?ot:$.canvas.width-ot-et[0],"top"===it?ot:$.canvas.height-ot-et[1])}function ih($,tt){var et=tt.dpi/25.4;$.miterLimit=2,$.strokeStyle="#ffffff",$.fillStyle="#000000",$.lineWidth=1,$.lineJoin="round",$.lineCap="round",$.textBaseline="top",$.font="".concat(6,"px Arial");var nt=function($){return $.layers.filter((function($){return!!$.attribution})).map((function($){return $.attribution})).join(", ")||"Unknown source"}(tt);$.save(),nh($,!0===tt.attributions?"bottom-right":tt.attributions,[$.measureText(nt).width*et,6*et*.85],tt.dpi),$.scale(et,et),$.strokeText(nt,0,0),$.fillText(nt,0,0)}var Bh=["M 12.940954,-48.296291 A 50,50 0 0 1 49.809735,-4.3577871","M -49.809735,-4.3577863 A 50,50 0 0 1 -12.940952,-48.296291","M -4.3577877,49.809735 A 50,50 0 0 1 -49.809735,4.3577867","M 49.809735,4.3577872 A 50,50 0 0 1 4.3577854,49.809735","M -5.2916667,-43.38024 V -56.609407 L 5.2916667,-43.38024 v -13.229167","M -21.166667,31.75 0,-31.75 21.166667,31.75 0,15.875 Z"],Wh=["M 0,-31.75 21.166667,31.75 0,15.875 Z"],Xh=["m 8,-50 a 8,8 0 0 1 -8,8 8,8 0 0 1 -8,-8 8,8 0 0 1 8,-8 8,8 0 0 1 8,8 z","M 50,0 A 50,50 0 0 1 0,50 50,50 0 0 1 -50,0 50,50 0 0 1 0,-50 50,50 0 0 1 50,0 Z"],qh=["M -21.166667,31.75 0,-31.75 21.166667,31.75 0,15.875 Z"];function ch($,tt,et){var nt=hh(et);$.save(),nh($,!0===tt?"top-right":tt,[nt,nt],et),$.translate(nt/2,nt/2),$.scale(nt/130,nt/130),lh($),$.restore()}function hh($){return Lc(30,"mm",$)}function lh($){$.lineCap="round",$.lineJoin="round",$.fillStyle="rgb(255, 255, 255)",$.strokeStyle="rgb(255, 255, 255)",$.lineWidth=8,Xh.forEach((function(tt){$.stroke(new Path2D(tt))})),qh.forEach((function(tt){$.fill(new Path2D(tt))})),$.fillStyle="rgb(0, 0, 0)",$.strokeStyle="rgb(0, 0, 0)",$.lineWidth=3,Bh.forEach((function(tt){$.stroke(new Path2D(tt))})),Wh.forEach((function(tt){$.fill(new Path2D(tt))}))}function ph($,tt){var et=fh(tt),nt="object"===Ie()(tt.scaleBar)?tt.scaleBar.position:tt.scaleBar,rt=dh(et,tt.dpi,$),it=Be()(rt,2),ot=it[0],at=it[1];$.save(),nh($,"boolean"==typeof nt?"bottom-left":nt,[ot,at],tt.dpi);var Ot=Lc(1,"mm",tt.dpi);$.scale(Ot,Ot),yh($,et),$.restore()}function fh($,tt){var et=tt||Lc(40,"mm",$.dpi),nt=[1,2,5],rt="object"===Ie()($.scaleBar)&&$.scaleBar.units||"metric",it=Object(_n.h)($.center,$.projection),ot=Nc($.projection,$.scale,$.dpi),at="degrees"===rt?mn.default.DEGREES:mn.default.METERS,Ot=Object(_n.l)($.projection,ot,it,at),wt=et*Ot,St="";if("degrees"===rt){var Ct=_n.a[mn.default.DEGREES];(wt*=Ct)<Ct/60?(St="″",Ot*=3600):wt<Ct?(St="′",Ot*=60):St="°"}else"imperial"===rt?wt<.9144?(St="in",Ot/=.0254):wt<1609.344?(St="ft",Ot/=.3048):(St="mi",Ot/=1609.344):"nautical"===rt?(Ot/=1852,St="nm"):"metric"===rt?wt<.001?(St="μm",Ot*=1e6):wt<1?(St="mm",Ot*=1e3):wt<1e3?St="m":(St="km",Ot/=1e3):"us"===rt&&(wt<.9144?(St="in",Ot*=39.37):wt<1609.344?(St="ft",Ot/=.30480061):(St="mi",Ot/=1609.3472));for(var Rt,Tt,At,Nt=3*Math.floor(Math.log(et*Ot)/Math.log(10));;){At=Math.floor(Nt/3);var kt=Math.pow(10,At);if(Rt=nt[(Nt%3+3)%3]*kt,Tt=Math.round(Rt/Ot),isNaN(Tt))return;if(Tt>=et)break;++Nt}return{widthMm:Fc(Tt,"mm",$.dpi),scaleIndication:"".concat(Rt," ").concat(St)}}function dh($,tt,et){et.font="".concat(6,"px Arial");var nt=et.measureText($.scaleIndication).width;return[Lc($.widthMm+nt+1,"mm",tt),Lc(11,"mm",tt)]}function yh($,tt){var et=tt.widthMm;$.lineJoin="round",$.lineCap="round",$.lineWidth=1,$.font="".concat(6,"px Arial"),$.translate(.5,.5),$.textAlign="left",$.strokeStyle="#FFFFFF",$.fillStyle="#000000",$.textBaseline="top",$.strokeText("0",0,0),$.fillText("0",0,0),$.strokeText(tt.scaleIndication,et,0),$.fillText(tt.scaleIndication,et,0),$.translate(6*.3,7),$.strokeRect(0,0,et,3),$.fillRect(0,0,et,3),$.fillStyle="#FFFFFF",$.fillRect(.25*et,.5,.25*et,2),$.fillRect(.75*et,.5,.25*et-.5,2)}function gh($,tt){var et=Object.keys($);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols($);tt&&(nt=nt.filter((function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable}))),et.push.apply(et,nt)}return et}function vh($){for(var tt=1;tt<arguments.length;tt++){var et=null!=arguments[tt]?arguments[tt]:{};tt%2?gh(Object(et),!0).forEach((function(tt){Dt()($,tt,et[tt])})):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(et)):gh(Object(et)).forEach((function(tt){Object.defineProperty($,tt,Object.getOwnPropertyDescriptor(et,tt))}))}return $}function _h($,tt){var et;if("undefined"==typeof Symbol||null==$[Symbol.iterator]){if(Array.isArray($)||(et=function($,tt){if($){if("string"==typeof $)return mh($,tt);var et=Object.prototype.toString.call($).slice(8,-1);return"Object"===et&&$.constructor&&(et=$.constructor.name),"Map"===et||"Set"===et?Array.from($):"Arguments"===et||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et)?mh($,tt):void 0}}($))||tt&&$&&"number"==typeof $.length){et&&($=et);var nt=0,i=function(){};return{s:i,n:function(){return nt>=$.length?{done:!0}:{done:!1,value:$[nt++]}},e:function($){throw $},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var rt,it=!0,ot=!1;return{s:function(){et=$[Symbol.iterator]()},n:function(){var $=et.next();return it=$.done,$},e:function($){ot=!0,rt=$},f:function(){try{it||null==et.return||et.return()}finally{if(ot)throw rt}}}}function mh($,tt){(null==tt||tt>$.length)&&(tt=$.length);for(var et=0,nt=new Array(tt);et<tt;et++)nt[et]=$[et];return nt}var Zh=0;function Oh(){return(Oh=Ve()(Re.a.mark((function t($){var tt,et,nt,rt;return Re.a.wrap((function(it){for(;;)switch(it.prev=it.next){case 0:return xh($.projectionDefinitions),tt=Yc($),it.next=4,zc($,tt);case 4:et=it.sent,nt={id:Zh++,spec:$,status:"pending",progress:0,sourceLoadErrors:[]},rt=Object(Ke.a)(tt[0],tt[1]),xt($.layers.map((function($){return th(nt.id,$,et)}))).pipe(It((function(tt){var et=tt.every((function($){return 1===Be()($,1)[0]})),nt=tt.some((function($){return-1===Be()($,1)[0]})),it=[];if(et){for(var ot=0;ot<tt.length;ot++){var at=tt[ot][1],Ot=tt[ot][2];0!==at.width&&0!==at.height&&(rt.drawImage(at,0,0),Ot&&it.push({url:Ot}))}return $.northArrow&&ch(rt,$.northArrow,$.dpi),("object"===Ie()($.scaleBar)&&$.scaleBar.position||$.scaleBar)&&ph(rt,$),$.attributions&&ih(rt,$),Gc(rt.canvas).pipe(G((function($){return[1,$,it]})))}if(nt)return Et([-1,null,it]);var wt=tt.reduce((function($,tt){return Be()(tt,1)[0]+$}),0)/tt.length;return Et([Math.min(.999,parseFloat(wt.toFixed(4))),null,it])})),G((function($){var tt=Be()($,3),et=tt[0],rt=tt[1],it=tt[2];return vh(vh({},nt),{},{progress:et,imageBlob:rt,status:1===et?"finished":-1===et?"canceled":"ongoing",sourceLoadErrors:it})})),Lt((function($){return $.progress<1&&-1!==$.progress}),!0)).subscribe((function($){return J("jobStatus",{status:$})}));case 8:case"end":return it.stop()}}),t)})))).apply(this,arguments)}function xh($){if($){var tt,et=_h($);try{for(et.s();!(tt=et.n()).done;){var nt=tt.value;Cn(nt.name,nt.proj4,nt.bbox)}}catch($){et.e($)}finally{et.f()}}}Me.subscribe((function($){switch($.type){case"requestJob":!function($){Oh.apply(this,arguments)}($.spec);break;case"cancelJob":tt=$.jobId,Yh.next(tt);break;default:console.log("[inkmap] Unhandled message",$)}var tt})),self.addEventListener("install",(function(){console.log("[inkmap] Installing worker..."),self.skipWaiting()})),self.addEventListener("activate",(function(){console.log("[inkmap] Activated worker, claiming clients."),self.clients.claim()}))},function($,tt,et){"use strict";et.r(tt);var nt,rt=et(75),it=et(16),ot=et(2),at=et(11),Ot=et(0),wt=et(81),St=et(41),Ct=et(26),Rt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)});function f($,tt){wt.a.expire()}var Tt=function($){function e(tt){var et=$.call(this)||this;return et.map_=tt,et}return Rt(e,$),e.prototype.dispatchRenderEvent=function($,tt){Object(ot.b)()},e.prototype.calculateMatrices2D=function($){var tt=$.viewState,et=$.coordinateToPixelTransform,nt=$.pixelToCoordinateTransform;Object(at.b)(et,$.size[0]/2,$.size[1]/2,1/tt.resolution,-1/tt.resolution,-tt.rotation,-tt.center[0],-tt.center[1]),Object(at.d)(nt,et)},e.prototype.forEachFeatureAtCoordinate=function($,tt,et,nt,rt,it,ot,at){var wt,Rt=tt.viewState;function f($,tt,et,nt){return rt.call(it,tt,$?et:null,nt)}var Tt=Rt.projection,At=Object(Ct.f)($.slice(),Tt),Nt=[[0,0]];if(Tt.canWrapX()&&nt){var kt=Tt.getExtent(),Dt=Object(Ot.E)(kt);Nt.push([-Dt,0],[Dt,0])}for(var Gt=tt.layerStatesArray,Ut=Gt.length,Xt=[],Vt=[],Jt=0;Jt<Nt.length;Jt++)for(var ne=Ut-1;ne>=0;--ne){var re=Gt[ne],ie=re.layer;if(ie.hasRenderer()&&Object(St.b)(re,Rt)&&ot.call(at,ie)){var oe=ie.getRenderer(),ae=ie.getSource();if(oe&&ae){var fe=ae.getWrapX()?At:$,de=f.bind(null,re.managed);Vt[0]=fe[0]+Nt[Jt][0],Vt[1]=fe[1]+Nt[Jt][1],wt=oe.forEachFeatureAtCoordinate(Vt,tt,et,de,Xt)}if(wt)return wt}}if(0!==Xt.length){var ye=1/Xt.length;return Xt.forEach((function($,tt){return $.distanceSq+=tt*ye})),Xt.sort((function($,tt){return $.distanceSq-tt.distanceSq})),Xt.some((function($){return wt=$.callback($.feature,$.layer,$.geometry)})),wt}},e.prototype.forEachLayerAtPixel=function($,tt,et,nt,rt){return Object(ot.b)()},e.prototype.hasFeatureAtCoordinate=function($,tt,et,nt,rt,ot){return void 0!==this.forEachFeatureAtCoordinate($,tt,et,nt,it.b,this,rt,ot)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function($){Object(ot.b)()},e.prototype.scheduleExpireIconCache=function($){wt.a.canExpireCache()&&$.postRenderFunctions.push(f)},e}(rt.a),At=et(45),Nt=et(110),kt=et(48),Dt=et(36),Gt=et(23),Ut=et(6),Xt=et(7),Vt=et(14),Jt=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ne=function($){function e(tt){var et=$.call(this,tt)||this;et.fontChangeListenerKey_=Object(Xt.a)(Ut.a,At.a.PROPERTYCHANGE,tt.redrawText.bind(tt)),et.element_=document.createElement("div");var nt=et.element_.style;nt.position="absolute",nt.width="100%",nt.height="100%",nt.zIndex="0",et.element_.className=Gt.d+" ol-layers";var rt=tt.getViewport();return rt.insertBefore(et.element_,rt.firstChild||null),et.children_=[],et.renderedVisible_=!0,et}return Jt(e,$),e.prototype.dispatchRenderEvent=function($,tt){var et=this.getMap();if(et.hasListener($)){var nt=new Nt.a($,void 0,tt);et.dispatchEvent(nt)}},e.prototype.disposeInternal=function(){Object(Xt.c)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),$.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function($){if($){this.calculateMatrices2D($),this.dispatchRenderEvent(kt.a.PRECOMPOSE,$);var tt=$.layerStatesArray.sort((function($,tt){return $.zIndex-tt.zIndex})),et=$.viewState;this.children_.length=0;for(var nt=[],rt=null,it=0,ot=tt.length;it<ot;++it){var at=tt[it];if($.layerIndex=it,Object(St.b)(at,et)&&(at.sourceState==Dt.a.READY||at.sourceState==Dt.a.UNDEFINED)){var Ot=at.layer,wt=Ot.render($,rt);wt&&(wt!==rt&&(this.children_.push(wt),rt=wt),"getDeclutter"in Ot&&nt.push(Ot))}}for(it=nt.length-1;it>=0;--it)nt[it].renderDeclutter($);Object(Vt.d)(this.element_,this.children_),this.dispatchRenderEvent(kt.a.POSTCOMPOSE,$),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache($)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function($,tt,et,nt,rt){for(var it=tt.viewState,ot=tt.layerStatesArray,at=ot.length-1;at>=0;--at){var Ot=ot[at],wt=Ot.layer;if(wt.hasRenderer()&&Object(St.b)(Ot,it)&&rt(wt)){var Ct=wt.getRenderer().getDataAtPixel($,tt,et);if(Ct){var Rt=nt(wt,Ct);if(Rt)return Rt}}}},e}(Tt),re=et(17),ie=et(34),oe=et(29),ae=et(8),fe=et(131),de=et(25),ye=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Se=function($){function e(tt,et,nt){var rt=$.call(this,tt)||this;return rt.map=et,rt.frameState=void 0!==nt?nt:null,rt}return ye(e,$),e}(de.a),Ee=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Me=function($){function e(tt,et,nt,rt,it){var ot=$.call(this,tt,et,it)||this;return ot.originalEvent=nt,ot.pixel_=null,ot.coordinate_=null,ot.dragging=void 0!==rt&&rt,ot}return Ee(e,$),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function($){this.pixel_=$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function($){this.coordinate_=$},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){$.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){$.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Se),Ce=et(43),Re={SINGLECLICK:"singleclick",CLICK:ae.a.CLICK,DBLCLICK:ae.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Pe="pointerdown",Ie=et(21),Le=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Be=function($){function e(tt,et){var nt=$.call(this,tt)||this;nt.map_=tt,nt.clickTimeoutId_,nt.emulateClicks_=!1,nt.dragging_=!1,nt.dragListenerKeys_=[],nt.moveTolerance_=et?et*Ie.a:Ie.a,nt.down_=null;var rt=nt.map_.getViewport();return nt.activePointers_=0,nt.trackedTouches_={},nt.element_=rt,nt.pointerdownListenerKey_=Object(Xt.a)(rt,Pe,nt.handlePointerDown_,nt),nt.originalPointerMoveEvent_,nt.relayedListenerKey_=Object(Xt.a)(rt,"pointermove",nt.relayEvent_,nt),nt.boundHandleTouchMove_=nt.handleTouchMove_.bind(nt),nt.element_.addEventListener(ae.a.TOUCHMOVE,nt.boundHandleTouchMove_,!!Ie.e&&{passive:!1}),nt}return Le(e,$),e.prototype.emulateClick_=function($){var tt=new Me(Re.CLICK,this.map_,$);this.dispatchEvent(tt),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,tt=new Me(Re.DBLCLICK,this.map_,$),this.dispatchEvent(tt)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var tt=new Me(Re.SINGLECLICK,this.map_,$);this.dispatchEvent(tt)}.bind(this),250)},e.prototype.updateActivePointers_=function($){var tt=$;tt.type==Re.POINTERUP||tt.type==Re.POINTERCANCEL?delete this.trackedTouches_[tt.pointerId]:tt.type==Re.POINTERDOWN&&(this.trackedTouches_[tt.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function($){this.updateActivePointers_($);var tt=new Me(Re.POINTERUP,this.map_,$);this.dispatchEvent(tt),this.emulateClicks_&&!tt.propagationStopped&&!this.dragging_&&this.isMouseActionButton_($)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(Xt.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function($){return 0===$.button},e.prototype.handlePointerDown_=function($){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_($);var tt=new Me(Re.POINTERDOWN,this.map_,$);if(this.dispatchEvent(tt),this.down_=$,0===this.dragListenerKeys_.length){var et=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Object(Xt.a)(et,Re.POINTERMOVE,this.handlePointerMove_,this),Object(Xt.a)(et,Re.POINTERUP,this.handlePointerUp_,this),Object(Xt.a)(this.element_,Re.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==et&&this.dragListenerKeys_.push(Object(Xt.a)(this.element_.getRootNode(),Re.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function($){if(this.isMoving_($)){this.dragging_=!0;var tt=new Me(Re.POINTERDRAG,this.map_,$,this.dragging_);this.dispatchEvent(tt)}},e.prototype.relayEvent_=function($){this.originalPointerMoveEvent_=$;var tt=!(!this.down_||!this.isMoving_($));this.dispatchEvent(new Me($.type,this.map_,$,tt))},e.prototype.handleTouchMove_=function($){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||$.preventDefault()},e.prototype.isMoving_=function($){return this.dragging_||Math.abs($.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs($.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(Xt.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ae.a.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Object(Xt.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Xt.c),this.dragListenerKeys_.length=0,this.element_=null,$.prototype.disposeInternal.call(this)},e}(Ce.a),Ze="postrender",Ve="layergroup",Ke="size",tn="target",en="view",nn=et(82),rn=et(3),on=et(19),an=et(22),sn="center",un="resolution",ln="rotation",pn=et(68),fn=et(1),dn=et(9),gn=et(4),_n=et(5);function st($,tt,et){return function(nt,rt,it,ot,at){if(nt){var Ot=tt?0:it[0]*rt,wt=tt?0:it[1]*rt,St=at?at[0]:0,Ct=at?at[1]:0,Rt=$[0]+Ot/2+St,Tt=$[2]-Ot/2+St,At=$[1]+wt/2+Ct,Nt=$[3]-wt/2+Ct;Rt>Tt&&(Tt=Rt=(Tt+Rt)/2),At>Nt&&(Nt=At=(Nt+At)/2);var kt=Object(_n.a)(nt[0],Rt,Tt),Dt=Object(_n.a)(nt[1],At,Nt),Gt=30*rt;return ot&&et&&(kt+=-Gt*Math.log(1+Math.max(0,Rt-nt[0])/Gt)+Gt*Math.log(1+Math.max(0,nt[0]-Tt)/Gt),Dt+=-Gt*Math.log(1+Math.max(0,At-nt[1])/Gt)+Gt*Math.log(1+Math.max(0,nt[1]-Nt)/Gt)),[kt,Dt]}}}function ut($){return $}var vn=et(10);function ht($,tt,et,nt){var rt=Object(Ot.E)(tt)/et[0],it=Object(Ot.A)(tt)/et[1];return nt?Math.min($,Math.max(rt,it)):Math.min($,Math.min(rt,it))}function lt($,tt,et){var nt=Math.min($,tt);return nt*=Math.log(1+50*Math.max(0,$/tt-1))/50+1,et&&(nt=Math.max(nt,et),nt/=Math.log(1+50*Math.max(0,et/$-1))/50+1),Object(_n.a)(nt,et/2,2*tt)}function pt($,tt,et,nt,rt){return function(it,ot,at,Ot){if(void 0!==it){var wt=nt?ht($,nt,at,rt):$;return(void 0===et||et)&&Ot?lt(it,wt,tt):Object(_n.a)(it,tt,wt)}}}function ft($){return void 0!==$?0:void 0}function dt($){return void 0!==$?$:void 0}var mn=et(30),bn=et(39),On=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}();function _t($,tt){setTimeout((function(){$(tt)}),0)}function mt($){return!($.sourceCenter&&$.targetCenter&&!Object(Ct.b)($.sourceCenter,$.targetCenter))&&$.sourceResolution===$.targetResolution&&$.sourceRotation===$.targetRotation}function bt($,tt,et,nt,rt){var it=Math.cos(-rt),ot=Math.sin(-rt),at=$[0]*it-$[1]*ot,Ot=$[1]*it+$[0]*ot;return[(at+=(tt[0]/2-et[0])*nt)*it-(Ot+=(et[1]-tt[1]/2)*nt)*(ot=-ot),Ot*it+at*ot]}var xn=function($){function e(tt){var et=$.call(this)||this,nt=Object(gn.a)({},tt);return et.hints_=[0,0],et.animations_=[],et.updateAnimationKey_,et.projection_=Object(fn.e)(nt.projection,"EPSG:3857"),et.viewportSize_=[100,100],et.targetCenter_=null,et.targetResolution_,et.targetRotation_,et.cancelAnchor_=void 0,nt.center&&(nt.center=Object(fn.i)(nt.center,et.projection_)),nt.extent&&(nt.extent=Object(fn.j)(nt.extent,et.projection_)),et.applyOptions_(nt),et}return On(e,$),e.prototype.applyOptions_=function($){var tt=function($){var tt,et,nt,rt=void 0!==$.minZoom?$.minZoom:0,it=void 0!==$.maxZoom?$.maxZoom:28,ot=void 0!==$.zoomFactor?$.zoomFactor:2,at=void 0!==$.multiWorld&&$.multiWorld,wt=void 0===$.smoothResolutionConstraint||$.smoothResolutionConstraint,St=void 0!==$.showFullExtent&&$.showFullExtent,Ct=Object(fn.e)($.projection,"EPSG:3857"),Rt=Ct.getExtent(),Tt=$.constrainOnlyCenter,At=$.extent;if(at||At||!Ct.isGlobal()||(Tt=!1,At=Rt),void 0!==$.resolutions){var Nt=$.resolutions;et=Nt[rt],nt=void 0!==Nt[it]?Nt[it]:Nt[Nt.length-1],tt=$.constrainResolution?function($,tt,et,nt){return function(rt,it,ot,at){if(void 0!==rt){var Ot=$[0],wt=$[$.length-1],St=et?ht(Ot,et,ot,nt):Ot;if(at)return void 0===tt||tt?lt(rt,St,wt):Object(_n.a)(rt,wt,St);var Ct=Math.min(St,rt),Rt=Math.floor(Object(vn.h)($,Ct,it));return $[Rt]>St&&Rt<$.length-1?$[Rt+1]:$[Rt]}}}(Nt,wt,!Tt&&At,St):pt(et,nt,wt,!Tt&&At,St)}else{var kt=(Rt?Math.max(Object(Ot.E)(Rt),Object(Ot.A)(Rt)):360*fn.a[on.default.DEGREES]/Ct.getMetersPerUnit())/pn.b/Math.pow(2,0),Dt=kt/Math.pow(2,28);void 0!==(et=$.maxResolution)?rt=0:et=kt/Math.pow(ot,rt),void 0===(nt=$.minResolution)&&(nt=void 0!==$.maxZoom?void 0!==$.maxResolution?et/Math.pow(ot,it):kt/Math.pow(ot,it):Dt),it=rt+Math.floor(Math.log(et/nt)/Math.log(ot)),nt=et/Math.pow(ot,it-rt),tt=$.constrainResolution?function($,tt,et,nt,rt,it){return function(ot,at,Ot,wt){if(void 0!==ot){var St=rt?ht(tt,rt,Ot,it):tt,Ct=void 0!==et?et:0;if(wt)return void 0===nt||nt?lt(ot,St,Ct):Object(_n.a)(ot,Ct,St);var Rt=Math.ceil(Math.log(tt/St)/Math.log($)-1e-9),Tt=-at*(.5-1e-9)+.5,At=Math.min(St,ot),Nt=Math.floor(Math.log(tt/At)/Math.log($)+Tt),kt=Math.max(Rt,Nt),Dt=tt/Math.pow($,kt);return Object(_n.a)(Dt,Ct,St)}}}(ot,et,nt,wt,!Tt&&At,St):pt(et,nt,wt,!Tt&&At,St)}return{constraint:tt,maxResolution:et,minResolution:nt,minZoom:rt,zoomFactor:ot}}($);this.maxResolution_=tt.maxResolution,this.minResolution_=tt.minResolution,this.zoomFactor_=tt.zoomFactor,this.resolutions_=$.resolutions,this.padding=$.padding,this.minZoom_=tt.minZoom;var et=function($){if(void 0!==$.extent){var tt=void 0===$.smoothExtentConstraint||$.smoothExtentConstraint;return st($.extent,$.constrainOnlyCenter,tt)}var et=Object(fn.e)($.projection,"EPSG:3857");if(!0!==$.multiWorld&&et.isGlobal()){var nt=et.getExtent().slice();return nt[0]=-1/0,nt[2]=1/0,st(nt,!1,!1)}return ut}($),nt=tt.constraint,rt=function($){if(void 0===$.enableRotation||$.enableRotation){var tt=$.constrainRotation;return void 0===tt||!0===tt?(rt=Object(_n.j)(5),function($,tt){return tt?$:void 0!==$?Math.abs($)<=rt?0:$:void 0}):!1===tt?dt:"number"==typeof tt?(et=tt,nt=2*Math.PI/et,function($,tt){return tt?$:void 0!==$?$=Math.floor($/nt+.5)*nt:void 0}):dt}return ft;var et,nt,rt}($);this.constraints_={center:et,resolution:nt,rotation:rt},this.setRotation(void 0!==$.rotation?$.rotation:0),this.setCenterInternal(void 0!==$.center?$.center:null),void 0!==$.resolution?this.setResolution($.resolution):void 0!==$.zoom&&this.setZoom($.zoom),this.setProperties({}),this.options_=$},e.prototype.getUpdatedOptions_=function($){var tt=Object(gn.a)({},this.options_);return void 0!==tt.resolution?tt.resolution=this.getResolution():tt.zoom=this.getZoom(),tt.center=this.getCenterInternal(),tt.rotation=this.getRotation(),Object(gn.a)({},tt,$)},e.prototype.animate=function($){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var tt=new Array(arguments.length),et=0;et<tt.length;++et){var nt=arguments[et];nt.center&&((nt=Object(gn.a)({},nt)).center=Object(fn.i)(nt.center,this.getProjection())),nt.anchor&&((nt=Object(gn.a)({},nt)).anchor=Object(fn.i)(nt.anchor,this.getProjection())),tt[et]=nt}this.animateInternal.apply(this,tt)},e.prototype.animateInternal=function($){var tt,et=arguments.length;if(et>1&&"function"==typeof arguments[et-1]&&(tt=arguments[et-1],--et),!this.isDef()){var nt=arguments[et-1];return nt.center&&this.setCenterInternal(nt.center),void 0!==nt.zoom&&this.setZoom(nt.zoom),void 0!==nt.rotation&&this.setRotation(nt.rotation),void(tt&&_t(tt,!0))}for(var rt=Date.now(),it=this.targetCenter_.slice(),ot=this.targetResolution_,at=this.targetRotation_,Ot=[],wt=0;wt<et;++wt){var St=arguments[wt],Ct={start:rt,complete:!1,anchor:St.anchor,duration:void 0!==St.duration?St.duration:1e3,easing:St.easing||mn.c,callback:tt};if(St.center&&(Ct.sourceCenter=it,Ct.targetCenter=St.center.slice(),it=Ct.targetCenter),void 0!==St.zoom?(Ct.sourceResolution=ot,Ct.targetResolution=this.getResolutionForZoom(St.zoom),ot=Ct.targetResolution):St.resolution&&(Ct.sourceResolution=ot,Ct.targetResolution=St.resolution,ot=Ct.targetResolution),void 0!==St.rotation){Ct.sourceRotation=at;var Rt=Object(_n.e)(St.rotation-at+Math.PI,2*Math.PI)-Math.PI;Ct.targetRotation=at+Rt,at=Ct.targetRotation}mt(Ct)?Ct.complete=!0:rt+=Ct.duration,Ot.push(Ct)}this.animations_.push(Ot),this.setHint(an.a.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[an.a.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[an.a.INTERACTING]>0},e.prototype.cancelAnimations=function(){var $;this.setHint(an.a.ANIMATING,-this.hints_[an.a.ANIMATING]);for(var tt=0,et=this.animations_.length;tt<et;++tt){var nt=this.animations_[tt];if(nt[0].callback&&_t(nt[0].callback,!1),!$)for(var rt=0,it=nt.length;rt<it;++rt){var ot=nt[rt];if(!ot.complete){$=ot.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=$},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var $=Date.now(),tt=!1,et=this.animations_.length-1;et>=0;--et){for(var nt=this.animations_[et],rt=!0,it=0,ot=nt.length;it<ot;++it){var at=nt[it];if(!at.complete){var Ot=$-at.start,wt=at.duration>0?Ot/at.duration:1;wt>=1?(at.complete=!0,wt=1):rt=!1;var St=at.easing(wt);if(at.sourceCenter){var Ct=at.sourceCenter[0],Rt=at.sourceCenter[1],Tt=Ct+St*(at.targetCenter[0]-Ct),At=Rt+St*(at.targetCenter[1]-Rt);this.targetCenter_=[Tt,At]}if(at.sourceResolution&&at.targetResolution){var Nt=1===St?at.targetResolution:at.sourceResolution+St*(at.targetResolution-at.sourceResolution);if(at.anchor){var kt=this.getViewportSize_(this.getRotation()),Dt=this.constraints_.resolution(Nt,0,kt,!0);this.targetCenter_=this.calculateCenterZoom(Dt,at.anchor)}this.targetResolution_=Nt,this.applyTargetState_(!0)}if(void 0!==at.sourceRotation&&void 0!==at.targetRotation){var Gt=1===St?Object(_n.e)(at.targetRotation+Math.PI,2*Math.PI)-Math.PI:at.sourceRotation+St*(at.targetRotation-at.sourceRotation);if(at.anchor){var Ut=this.constraints_.rotation(Gt,!0);this.targetCenter_=this.calculateCenterRotate(Ut,at.anchor)}this.targetRotation_=Gt}if(this.applyTargetState_(!0),tt=!0,!at.complete)break}}if(rt){this.animations_[et]=null,this.setHint(an.a.ANIMATING,-1);var Xt=nt[0].callback;Xt&&_t(Xt,!0)}}this.animations_=this.animations_.filter(Boolean),tt&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function($,tt){var et,nt=this.getCenterInternal();return void 0!==nt&&(et=[nt[0]-tt[0],nt[1]-tt[1]],Object(Ct.d)(et,$-this.getRotation()),Object(Ct.a)(et,tt)),et},e.prototype.calculateCenterZoom=function($,tt){var et,nt=this.getCenterInternal(),rt=this.getResolution();return void 0!==nt&&void 0!==rt&&(et=[tt[0]-$*(tt[0]-nt[0])/rt,tt[1]-$*(tt[1]-nt[1])/rt]),et},e.prototype.getViewportSize_=function($){var tt=this.viewportSize_;if($){var et=tt[0],nt=tt[1];return[Math.abs(et*Math.cos($))+Math.abs(nt*Math.sin($)),Math.abs(et*Math.sin($))+Math.abs(nt*Math.cos($))]}return tt},e.prototype.setViewportSize=function($){this.viewportSize_=Array.isArray($)?$.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var $=this.getCenterInternal();return $?Object(fn.p)($,this.getProjection()):$},e.prototype.getCenterInternal=function(){return this.get(sn)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function($){return void 0!==$?($[0]=this.hints_[0],$[1]=this.hints_[1],$):this.hints_.slice()},e.prototype.calculateExtent=function($){var tt=this.calculateExtentInternal($);return Object(fn.q)(tt,this.getProjection())},e.prototype.calculateExtentInternal=function($){var tt=$||this.getViewportSize_(),et=this.getCenterInternal();Object(dn.a)(et,1);var nt=this.getResolution();Object(dn.a)(void 0!==nt,2);var rt=this.getRotation();return Object(dn.a)(void 0!==rt,3),Object(Ot.z)(et,nt,rt,tt)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function($){this.applyOptions_(this.getUpdatedOptions_({maxZoom:$}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function($){this.applyOptions_(this.getUpdatedOptions_({minZoom:$}))},e.prototype.setConstrainResolution=function($){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:$}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(un)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function($,tt){return this.getResolutionForExtentInternal(Object(fn.j)($,this.getProjection()),tt)},e.prototype.getResolutionForExtentInternal=function($,tt){var et=tt||this.getViewportSize_(),nt=Object(Ot.E)($)/et[0],rt=Object(Ot.A)($)/et[1];return Math.max(nt,rt)},e.prototype.getResolutionForValueFunction=function($){var tt=$||2,et=this.getConstrainedResolution(this.maxResolution_),nt=this.minResolution_,rt=Math.log(et/nt)/Math.log(tt);return function($){return et/Math.pow(tt,$*rt)}},e.prototype.getRotation=function(){return this.get(ln)},e.prototype.getValueForResolutionFunction=function($){var tt=Math.log($||2),et=this.getConstrainedResolution(this.maxResolution_),nt=this.minResolution_,rt=Math.log(et/nt)/tt;return function($){return Math.log(et/$)/tt/rt}},e.prototype.getViewportSizeMinusPadding_=function($){var tt=this.getViewportSize_($),et=this.padding;return et&&(tt=[tt[0]-et[1]-et[3],tt[1]-et[0]-et[2]]),tt},e.prototype.getState=function(){var $=this.getProjection(),tt=this.getResolution(),et=this.getRotation(),nt=this.getCenterInternal(),rt=this.padding;if(rt){var it=this.getViewportSizeMinusPadding_();nt=bt(nt,this.getViewportSize_(),[it[0]/2+rt[3],it[1]/2+rt[0]],tt,et)}return{center:nt.slice(0),projection:void 0!==$?$:null,resolution:tt,rotation:et,zoom:this.getZoom()}},e.prototype.getZoom=function(){var $,tt=this.getResolution();return void 0!==tt&&($=this.getZoomForResolution(tt)),$},e.prototype.getZoomForResolution=function($){var tt,et,nt=this.minZoom_||0;if(this.resolutions_){var rt=Object(vn.h)(this.resolutions_,$,1);nt=rt,tt=this.resolutions_[rt],et=rt==this.resolutions_.length-1?2:tt/this.resolutions_[rt+1]}else tt=this.maxResolution_,et=this.zoomFactor_;return nt+Math.log(tt/$)/Math.log(et)},e.prototype.getResolutionForZoom=function($){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var tt=Object(_n.a)(Math.floor($),0,this.resolutions_.length-2),et=this.resolutions_[tt]/this.resolutions_[tt+1];return this.resolutions_[tt]/Math.pow(et,Object(_n.a)($-tt,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,$-this.minZoom_)},e.prototype.fit=function($,tt){var et;if(Object(dn.a)(Array.isArray($)||"function"==typeof $.getSimplifiedGeometry,24),Array.isArray($)){Object(dn.a)(!Object(Ot.H)($),25);var nt=Object(fn.j)($,this.getProjection());et=Object(bn.b)(nt)}else if($.getType()===rn.a.CIRCLE)nt=Object(fn.j)($.getExtent(),this.getProjection()),(et=Object(bn.b)(nt)).rotate(this.getRotation(),Object(Ot.x)(nt));else{var rt=Object(fn.o)();et=rt?$.clone().transform(rt,this.getProjection()):$}this.fitInternal(et,tt)},e.prototype.fitInternal=function($,tt){var et=tt||{},nt=et.size;nt||(nt=this.getViewportSizeMinusPadding_());var rt,ot=void 0!==et.padding?et.padding:[0,0,0,0],at=void 0!==et.nearest&&et.nearest;rt=void 0!==et.minResolution?et.minResolution:void 0!==et.maxZoom?this.getResolutionForZoom(et.maxZoom):0;for(var Ot=$.getFlatCoordinates(),wt=this.getRotation(),St=Math.cos(-wt),Ct=Math.sin(-wt),Rt=1/0,Tt=1/0,At=-1/0,Nt=-1/0,kt=$.getStride(),Dt=0,Gt=Ot.length;Dt<Gt;Dt+=kt){var Ut=Ot[Dt]*St-Ot[Dt+1]*Ct,Xt=Ot[Dt]*Ct+Ot[Dt+1]*St;Rt=Math.min(Rt,Ut),Tt=Math.min(Tt,Xt),At=Math.max(At,Ut),Nt=Math.max(Nt,Xt)}var Vt=this.getResolutionForExtentInternal([Rt,Tt,At,Nt],[nt[0]-ot[1]-ot[3],nt[1]-ot[0]-ot[2]]);Vt=isNaN(Vt)?rt:Math.max(Vt,rt),Vt=this.getConstrainedResolution(Vt,at?0:1),Ct=-Ct;var Jt=(Rt+At)/2,ne=(Tt+Nt)/2,re=(Jt+=(ot[1]-ot[3])/2*Vt)*St-(ne+=(ot[0]-ot[2])/2*Vt)*Ct,ie=ne*St+Jt*Ct,oe=this.getConstrainedCenter([re,ie],Vt),ae=et.callback?et.callback:it.c;void 0!==et.duration?this.animateInternal({resolution:Vt,center:oe,duration:et.duration,easing:et.easing},ae):(this.targetResolution_=Vt,this.targetCenter_=oe,this.applyTargetState_(!1,!0),_t(ae,!0))},e.prototype.centerOn=function($,tt,et){this.centerOnInternal(Object(fn.i)($,this.getProjection()),tt,et)},e.prototype.centerOnInternal=function($,tt,et){this.setCenterInternal(bt($,tt,et,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function($,tt,et,nt){var rt,it=this.padding;if(it&&$){var ot=this.getViewportSizeMinusPadding_(-et),at=bt($,nt,[ot[0]/2+it[3],ot[1]/2+it[0]],tt,et);rt=[$[0]-at[0],$[1]-at[1]]}return rt},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function($){var tt=Object(fn.p)(this.targetCenter_,this.getProjection());this.setCenter([tt[0]+$[0],tt[1]+$[1]])},e.prototype.adjustCenterInternal=function($){var tt=this.targetCenter_;this.setCenterInternal([tt[0]+$[0],tt[1]+$[1]])},e.prototype.adjustResolution=function($,tt){var et=tt&&Object(fn.i)(tt,this.getProjection());this.adjustResolutionInternal($,et)},e.prototype.adjustResolutionInternal=function($,tt){var et=this.getAnimating()||this.getInteracting(),nt=this.getViewportSize_(this.getRotation()),rt=this.constraints_.resolution(this.targetResolution_*$,0,nt,et);tt&&(this.targetCenter_=this.calculateCenterZoom(rt,tt)),this.targetResolution_*=$,this.applyTargetState_()},e.prototype.adjustZoom=function($,tt){this.adjustResolution(Math.pow(this.zoomFactor_,-$),tt)},e.prototype.adjustRotation=function($,tt){tt&&(tt=Object(fn.i)(tt,this.getProjection())),this.adjustRotationInternal($,tt)},e.prototype.adjustRotationInternal=function($,tt){var et=this.getAnimating()||this.getInteracting(),nt=this.constraints_.rotation(this.targetRotation_+$,et);tt&&(this.targetCenter_=this.calculateCenterRotate(nt,tt)),this.targetRotation_+=$,this.applyTargetState_()},e.prototype.setCenter=function($){this.setCenterInternal(Object(fn.i)($,this.getProjection()))},e.prototype.setCenterInternal=function($){this.targetCenter_=$,this.applyTargetState_()},e.prototype.setHint=function($,tt){return this.hints_[$]+=tt,this.changed(),this.hints_[$]},e.prototype.setResolution=function($){this.targetResolution_=$,this.applyTargetState_()},e.prototype.setRotation=function($){this.targetRotation_=$,this.applyTargetState_()},e.prototype.setZoom=function($){this.setResolution(this.getResolutionForZoom($))},e.prototype.applyTargetState_=function($,tt){var et=this.getAnimating()||this.getInteracting()||tt,nt=this.constraints_.rotation(this.targetRotation_,et),rt=this.getViewportSize_(nt),it=this.constraints_.resolution(this.targetResolution_,0,rt,et),ot=this.constraints_.center(this.targetCenter_,it,rt,et,this.calculateCenterShift(this.targetCenter_,it,nt,rt));this.get(ln)!==nt&&this.set(ln,nt),this.get(un)!==it&&this.set(un,it),this.get(sn)&&Object(Ct.b)(this.get(sn),ot)||this.set(sn,ot),this.getAnimating()&&!$&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function($,tt,et){var nt=void 0!==$?$:200,rt=tt||0,it=this.constraints_.rotation(this.targetRotation_),ot=this.getViewportSize_(it),at=this.constraints_.resolution(this.targetResolution_,rt,ot),Ot=this.constraints_.center(this.targetCenter_,at,ot,!1,this.calculateCenterShift(this.targetCenter_,at,it,ot));if(0===nt&&!this.cancelAnchor_)return this.targetResolution_=at,this.targetRotation_=it,this.targetCenter_=Ot,void this.applyTargetState_();var wt=et||(0===nt?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===at&&this.getRotation()===it&&this.getCenterInternal()&&Object(Ct.b)(this.getCenterInternal(),Ot)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:it,center:Ot,resolution:at,duration:nt,easing:mn.b,anchor:wt}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(an.a.INTERACTING,1)},e.prototype.endInteraction=function($,tt,et){var nt=et&&Object(fn.i)(et,this.getProjection());this.endInteractionInternal($,tt,nt)},e.prototype.endInteractionInternal=function($,tt,et){this.setHint(an.a.INTERACTING,-1),this.resolveConstraints($,tt,et)},e.prototype.getConstrainedCenter=function($,tt){var et=this.getViewportSize_(this.getRotation());return this.constraints_.center($,tt||this.getResolution(),et)},e.prototype.getConstrainedZoom=function($,tt){var et=this.getResolutionForZoom($);return this.getZoomForResolution(this.getConstrainedResolution(et,tt))},e.prototype.getConstrainedResolution=function($,tt){var et=tt||0,nt=this.getViewportSize_(this.getRotation());return this.constraints_.resolution($,et,nt)},e}(re.a),wn=et(20),Sn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),En=function($){function e(tt){var et=$.call(this)||this,nt=function($){var tt=null;void 0!==$.keyboardEventTarget&&(tt="string"==typeof $.keyboardEventTarget?document.getElementById($.keyboardEventTarget):$.keyboardEventTarget);var et,nt,rt,it={},ot=$.layers&&"function"==typeof $.layers.getLayers?$.layers:new fe.default({layers:$.layers});return it[Ve]=ot,it[tn]=$.target,it[en]=void 0!==$.view?$.view:new xn,void 0!==$.controls&&(Array.isArray($.controls)?et=new ie.a($.controls.slice()):(Object(dn.a)("function"==typeof $.controls.getArray,47),et=$.controls)),void 0!==$.interactions&&(Array.isArray($.interactions)?nt=new ie.a($.interactions.slice()):(Object(dn.a)("function"==typeof $.interactions.getArray,48),nt=$.interactions)),void 0!==$.overlays?Array.isArray($.overlays)?rt=new ie.a($.overlays.slice()):(Object(dn.a)("function"==typeof $.overlays.getArray,49),rt=$.overlays):rt=new ie.a,{controls:et,interactions:nt,keyboardEventTarget:tt,overlays:rt,values:it}}(tt);return et.boundHandleBrowserEvent_=et.handleBrowserEvent.bind(et),et.maxTilesLoading_=void 0!==tt.maxTilesLoading?tt.maxTilesLoading:16,et.pixelRatio_=void 0!==tt.pixelRatio?tt.pixelRatio:Ie.a,et.postRenderTimeoutHandle_,et.animationDelayKey_,et.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(et),et.coordinateToPixelTransform_=Object(at.c)(),et.pixelToCoordinateTransform_=Object(at.c)(),et.frameIndex_=0,et.frameState_=null,et.previousExtent_=null,et.viewPropertyListenerKey_=null,et.viewChangeListenerKey_=null,et.layerGroupPropertyListenerKeys_=null,et.viewport_=document.createElement("div"),et.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),et.viewport_.style.position="relative",et.viewport_.style.overflow="hidden",et.viewport_.style.width="100%",et.viewport_.style.height="100%",et.overlayContainer_=document.createElement("div"),et.overlayContainer_.style.position="absolute",et.overlayContainer_.style.zIndex="0",et.overlayContainer_.style.width="100%",et.overlayContainer_.style.height="100%",et.overlayContainer_.style.pointerEvents="none",et.overlayContainer_.className="ol-overlaycontainer",et.viewport_.appendChild(et.overlayContainer_),et.overlayContainerStopEvent_=document.createElement("div"),et.overlayContainerStopEvent_.style.position="absolute",et.overlayContainerStopEvent_.style.zIndex="0",et.overlayContainerStopEvent_.style.width="100%",et.overlayContainerStopEvent_.style.height="100%",et.overlayContainerStopEvent_.style.pointerEvents="none",et.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",et.viewport_.appendChild(et.overlayContainerStopEvent_),et.mapBrowserEventHandler_=null,et.moveTolerance_=tt.moveTolerance,et.keyboardEventTarget_=nt.keyboardEventTarget,et.keyHandlerKeys_=null,et.controls=nt.controls||new ie.a,et.interactions=nt.interactions||new ie.a,et.overlays_=nt.overlays,et.overlayIdIndex_={},et.renderer_=null,et.handleResize_,et.postRenderFunctions_=[],et.tileQueue_=new nn.a(et.getTilePriority.bind(et),et.handleTileChange_.bind(et)),et.addEventListener(Object(re.b)(Ve),et.handleLayerGroupChanged_),et.addEventListener(Object(re.b)(en),et.handleViewChanged_),et.addEventListener(Object(re.b)(Ke),et.handleSizeChanged_),et.addEventListener(Object(re.b)(tn),et.handleTargetChanged_),et.setProperties(nt.values),et.controls.forEach(function($){$.setMap(this)}.bind(et)),et.controls.addEventListener(oe.a.ADD,function($){$.element.setMap(this)}.bind(et)),et.controls.addEventListener(oe.a.REMOVE,function($){$.element.setMap(null)}.bind(et)),et.interactions.forEach(function($){$.setMap(this)}.bind(et)),et.interactions.addEventListener(oe.a.ADD,function($){$.element.setMap(this)}.bind(et)),et.interactions.addEventListener(oe.a.REMOVE,function($){$.element.setMap(null)}.bind(et)),et.overlays_.forEach(et.addOverlayInternal_.bind(et)),et.overlays_.addEventListener(oe.a.ADD,function($){this.addOverlayInternal_($.element)}.bind(et)),et.overlays_.addEventListener(oe.a.REMOVE,function($){var tt=$.element.getId();void 0!==tt&&delete this.overlayIdIndex_[tt.toString()],$.element.setMap(null)}.bind(et)),et}return Sn(e,$),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function($){this.getControls().push($)},e.prototype.addInteraction=function($){this.getInteractions().push($)},e.prototype.addLayer=function($){this.getLayerGroup().getLayers().push($)},e.prototype.addOverlay=function($){this.getOverlays().push($)},e.prototype.addOverlayInternal_=function($){var tt=$.getId();void 0!==tt&&(this.overlayIdIndex_[tt.toString()]=$),$.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),$.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function($,tt,et){if(this.frameState_){var nt=this.getCoordinateFromPixelInternal($),rt=void 0!==(et=void 0!==et?et:{}).hitTolerance?et.hitTolerance:0,ot=void 0!==et.layerFilter?et.layerFilter:it.b,at=!1!==et.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(nt,this.frameState_,rt,at,tt,null,ot,null)}},e.prototype.getFeaturesAtPixel=function($,tt){var et=[];return this.forEachFeatureAtPixel($,(function($){et.push($)}),tt),et},e.prototype.forEachLayerAtPixel=function($,tt,et){if(this.frameState_){var nt=et||{},rt=void 0!==nt.hitTolerance?nt.hitTolerance:0,ot=nt.layerFilter||it.b;return this.renderer_.forEachLayerAtPixel($,this.frameState_,rt,tt,ot)}},e.prototype.hasFeatureAtPixel=function($,tt){if(!this.frameState_)return!1;var et=this.getCoordinateFromPixelInternal($),nt=void 0!==(tt=void 0!==tt?tt:{}).layerFilter?tt.layerFilter:it.b,rt=void 0!==tt.hitTolerance?tt.hitTolerance:0,ot=!1!==tt.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(et,this.frameState_,rt,ot,nt,null)},e.prototype.getEventCoordinate=function($){return this.getCoordinateFromPixel(this.getEventPixel($))},e.prototype.getEventCoordinateInternal=function($){return this.getCoordinateFromPixelInternal(this.getEventPixel($))},e.prototype.getEventPixel=function($){var tt=this.viewport_.getBoundingClientRect(),et="changedTouches"in $?$.changedTouches[0]:$;return[et.clientX-tt.left,et.clientY-tt.top]},e.prototype.getTarget=function(){return this.get(tn)},e.prototype.getTargetElement=function(){var $=this.getTarget();return void 0!==$?"string"==typeof $?document.getElementById($):$:null},e.prototype.getCoordinateFromPixel=function($){return Object(fn.p)(this.getCoordinateFromPixelInternal($),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function($){var tt=this.frameState_;return tt?Object(at.a)(tt.pixelToCoordinateTransform,$.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function($){var tt=this.overlayIdIndex_[$.toString()];return void 0!==tt?tt:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ve)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var $=this.getLayerGroup().getLayerStatesArray(),tt=0,et=$.length;tt<et;++tt){var nt=$[tt].layer.getSource();if(nt&&nt.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function($){var tt=Object(fn.i)($,this.getView().getProjection());return this.getPixelFromCoordinateInternal(tt)},e.prototype.getPixelFromCoordinateInternal=function($){var tt=this.frameState_;return tt?Object(at.a)(tt.coordinateToPixelTransform,$.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Ke)},e.prototype.getView=function(){return this.get(en)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){return this.getTargetElement()?this.getTargetElement().ownerDocument:document},e.prototype.getTilePriority=function($,tt,et,nt){return Object(nn.b)(this.frameState_,$,tt,et,nt)},e.prototype.handleBrowserEvent=function($,tt){var et=tt||$.type,nt=new Me(et,this,$);this.handleMapBrowserEvent(nt)},e.prototype.handleMapBrowserEvent=function($){if(this.frameState_){var tt=$.originalEvent,et=tt.type;if(et===Pe||et===ae.a.WHEEL||et===ae.a.KEYDOWN){var nt=this.getOwnerDocument(),rt=this.viewport_.getRootNode?this.viewport_.getRootNode():nt,it="host"in rt?rt.elementFromPoint(tt.clientX,tt.clientY):tt.target;if(this.overlayContainerStopEvent_.contains(it)||!(rt===nt?nt.documentElement:rt).contains(it))return}if($.frameState=this.frameState_,!1!==this.dispatchEvent($))for(var ot=this.getInteractions().getArray().slice(),at=ot.length-1;at>=0;at--){var Ot=ot[at];if(Ot.getMap()===this&&Ot.getActive()&&this.getTargetElement()&&(!Ot.handleEvent($)||$.propagationStopped))break}}},e.prototype.handlePostRender=function(){var $=this.frameState_,tt=this.tileQueue_;if(!tt.isEmpty()){var et=this.maxTilesLoading_,nt=et;if($){var rt=$.viewHints;if(rt[an.a.ANIMATING]||rt[an.a.INTERACTING]){var it=!Ie.c&&Date.now()-$.time>8;et=it?0:8,nt=it?0:2}}tt.getTilesLoading()<et&&(tt.reprioritize(),tt.loadMoreTiles(et,nt))}!$||!this.hasListener(kt.a.RENDERCOMPLETE)||$.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(kt.a.RENDERCOMPLETE,$);for(var ot=this.postRenderFunctions_,at=0,Ot=ot.length;at<Ot;++at)ot[at](this,$);ot.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var $;if(this.getTarget()&&($=this.getTargetElement()),this.mapBrowserEventHandler_){for(var tt=0,et=this.keyHandlerKeys_.length;tt<et;++tt)Object(Xt.c)(this.keyHandlerKeys_[tt]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(ae.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ae.a.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(ae.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Object(Vt.c)(this.viewport_)}if($){for(var nt in $.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Be(this,this.moveTolerance_),Re)this.mapBrowserEventHandler_.addEventListener(Re[nt],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ae.a.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ae.a.WHEEL,this.boundHandleBrowserEvent_,!!Ie.e&&{passive:!1});var rt=this.keyboardEventTarget_?this.keyboardEventTarget_:$;this.keyHandlerKeys_=[Object(Xt.a)(rt,ae.a.KEYDOWN,this.handleBrowserEvent,this),Object(Xt.a)(rt,ae.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(ae.a.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(Xt.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(Xt.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var $=this.getView();$&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Object(Xt.a)($,At.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(Xt.a)($,ae.a.CHANGE,this.handleViewPropertyChanged_,this),$.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Xt.c),this.layerGroupPropertyListenerKeys_=null);var $=this.getLayerGroup();$&&(this.layerGroupPropertyListenerKeys_=[Object(Xt.a)($,At.a.PROPERTYCHANGE,this.render,this),Object(Xt.a)($,ae.a.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var $=this.getLayerGroup().getLayerStatesArray(),tt=0,et=$.length;tt<et;++tt){var nt=$[tt].layer;nt.hasRenderer()&&nt.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function($){return this.getControls().remove($)},e.prototype.removeInteraction=function($){return this.getInteractions().remove($)},e.prototype.removeLayer=function($){return this.getLayerGroup().getLayers().remove($)},e.prototype.removeOverlay=function($){return this.getOverlays().remove($)},e.prototype.renderFrame_=function($){var tt=this,et=this.getSize(),nt=this.getView(),rt=this.frameState_,it=null;if(void 0!==et&&Object(wn.b)(et)&&nt&&nt.isDef()){var ot=nt.getHints(this.frameState_?this.frameState_.viewHints:void 0),at=nt.getState();it={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Object(Ot.z)(at.center,at.resolution,at.rotation,et),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:et,tileQueue:this.tileQueue_,time:$,usedTiles:{},viewState:at,viewHints:ot,wantedTiles:{}}}this.frameState_=it,this.renderer_.renderFrame(it),it&&(it.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,it.postRenderFunctions),rt&&(!this.previousExtent_||!Object(Ot.H)(this.previousExtent_)&&!Object(Ot.p)(it.extent,this.previousExtent_))&&(this.dispatchEvent(new Se("movestart",this,rt)),this.previousExtent_=Object(Ot.l)(this.previousExtent_)),this.previousExtent_&&!it.viewHints[an.a.ANIMATING]&&!it.viewHints[an.a.INTERACTING]&&!Object(Ot.p)(it.extent,this.previousExtent_)&&(this.dispatchEvent(new Se("moveend",this,it)),Object(Ot.d)(it.extent,this.previousExtent_))),this.dispatchEvent(new Se(Ze,this,it)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){tt.postRenderTimeoutHandle_=void 0,tt.handlePostRender()}),0))},e.prototype.setLayerGroup=function($){this.set(Ve,$)},e.prototype.setSize=function($){this.set(Ke,$)},e.prototype.setTarget=function($){this.set(tn,$)},e.prototype.setView=function($){this.set(en,$)},e.prototype.updateSize=function(){var $=this.getTargetElement();if($){var tt=getComputedStyle($);this.setSize([$.offsetWidth-parseFloat(tt.borderLeftWidth)-parseFloat(tt.paddingLeft)-parseFloat(tt.paddingRight)-parseFloat(tt.borderRightWidth),$.offsetHeight-parseFloat(tt.borderTopWidth)-parseFloat(tt.paddingTop)-parseFloat(tt.paddingBottom)-parseFloat(tt.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var $=this.getView();if($){var tt=void 0,et=getComputedStyle(this.viewport_);et.width&&et.height&&(tt=[parseInt(et.width,10),parseInt(et.height,10)]),$.setViewportSize(tt)}},e}(re.a),Rn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Pn=function($){function e(tt){var et=$.call(this)||this,nt=tt.element;return!nt||tt.target||nt.style.pointerEvents||(nt.style.pointerEvents="auto"),et.element=nt||null,et.target_=null,et.map_=null,et.listenerKeys=[],tt.render&&(et.render=tt.render),tt.target&&et.setTarget(tt.target),et}return Rn(e,$),e.prototype.disposeInternal=function(){Object(Vt.c)(this.element),$.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function($){this.map_&&Object(Vt.c)(this.element);for(var tt=0,et=this.listenerKeys.length;tt<et;++tt)Object(Xt.c)(this.listenerKeys[tt]);this.listenerKeys.length=0,this.map_=$,this.map_&&((this.target_?this.target_:$.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==it.c&&this.listenerKeys.push(Object(Xt.a)($,Ze,this.render,this)),$.render())},e.prototype.render=function($){},e.prototype.setTarget=function($){this.target_="string"==typeof $?document.getElementById($):$},e}(re.a),In=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Tn=function($){function e(tt){var et=this,nt=tt||{};(et=$.call(this,{element:document.createElement("div"),render:nt.render,target:nt.target})||this).ulElement_=document.createElement("ul"),et.collapsed_=void 0===nt.collapsed||nt.collapsed,et.userCollapsed_=et.collapsed_,et.overrideCollapsible_=void 0!==nt.collapsible,et.collapsible_=void 0===nt.collapsible||nt.collapsible,et.collapsible_||(et.collapsed_=!1);var rt=void 0!==nt.className?nt.className:"ol-attribution",it=void 0!==nt.tipLabel?nt.tipLabel:"Attributions",ot=void 0!==nt.expandClassName?nt.expandClassName:rt+"-expand",at=void 0!==nt.collapseLabel?nt.collapseLabel:"»",Ot=void 0!==nt.collapseClassName?nt.collapseClassName:rt+"-collpase";"string"==typeof at?(et.collapseLabel_=document.createElement("span"),et.collapseLabel_.textContent=at,et.collapseLabel_.className=Ot):et.collapseLabel_=at;var wt=void 0!==nt.label?nt.label:"i";"string"==typeof wt?(et.label_=document.createElement("span"),et.label_.textContent=wt,et.label_.className=ot):et.label_=wt;var St=et.collapsible_&&!et.collapsed_?et.collapseLabel_:et.label_,Ct=document.createElement("button");Ct.setAttribute("type","button"),Ct.title=it,Ct.appendChild(St),Ct.addEventListener(ae.a.CLICK,et.handleClick_.bind(et),!1);var Rt=rt+" "+Gt.d+" "+Gt.b+(et.collapsed_&&et.collapsible_?" "+Gt.a:"")+(et.collapsible_?"":" ol-uncollapsible"),Tt=et.element;return Tt.className=Rt,Tt.appendChild(et.ulElement_),Tt.appendChild(Ct),et.renderedAttributions_=[],et.renderedVisible_=!0,et}return In(e,$),e.prototype.collectSourceAttributions_=function($){for(var tt={},et=[],nt=!0,rt=$.layerStatesArray,it=0,ot=rt.length;it<ot;++it){var at=rt[it];if(Object(St.b)(at,$.viewState)){var Ot=at.layer.getSource();if(Ot){var wt=Ot.getAttributions();if(wt){var Ct=wt($);if(Ct)if(nt=nt&&!1!==Ot.getAttributionsCollapsible(),Array.isArray(Ct))for(var Rt=0,Tt=Ct.length;Rt<Tt;++Rt)Ct[Rt]in tt||(et.push(Ct[Rt]),tt[Ct[Rt]]=!0);else Ct in tt||(et.push(Ct),tt[Ct]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(nt),et},e.prototype.updateElement_=function($){if($){var tt=this.collectSourceAttributions_($),et=tt.length>0;if(this.renderedVisible_!=et&&(this.element.style.display=et?"":"none",this.renderedVisible_=et),!Object(vn.b)(tt,this.renderedAttributions_)){Object(Vt.b)(this.ulElement_);for(var nt=0,rt=tt.length;nt<rt;++nt){var it=document.createElement("li");it.innerHTML=tt[nt],this.ulElement_.appendChild(it)}this.renderedAttributions_=tt}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function($){$.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(Gt.a),this.collapsed_?Object(Vt.e)(this.collapseLabel_,this.label_):Object(Vt.e)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function($){this.collapsible_!==$&&(this.collapsible_=$,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function($){this.userCollapsed_=$,this.collapsible_&&this.collapsed_!==$&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function($){this.updateElement_($.frameState)},e}(Pn),An=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ln=function($){function e(tt){var et=this,nt=tt||{};et=$.call(this,{element:document.createElement("div"),render:nt.render,target:nt.target})||this;var rt=void 0!==nt.className?nt.className:"ol-rotate",it=void 0!==nt.label?nt.label:"⇧",ot=void 0!==nt.compassClassName?nt.compassClassName:"ol-compass";et.label_=null,"string"==typeof it?(et.label_=document.createElement("span"),et.label_.className=ot,et.label_.textContent=it):(et.label_=it,et.label_.classList.add(ot));var at=nt.tipLabel?nt.tipLabel:"Reset rotation",Ot=document.createElement("button");Ot.className=rt+"-reset",Ot.setAttribute("type","button"),Ot.title=at,Ot.appendChild(et.label_),Ot.addEventListener(ae.a.CLICK,et.handleClick_.bind(et),!1);var wt=rt+" "+Gt.d+" "+Gt.b,St=et.element;return St.className=wt,St.appendChild(Ot),et.callResetNorth_=nt.resetNorth?nt.resetNorth:void 0,et.duration_=void 0!==nt.duration?nt.duration:250,et.autoHide_=void 0===nt.autoHide||nt.autoHide,et.rotation_=void 0,et.autoHide_&&et.element.classList.add(Gt.c),et}return An(e,$),e.prototype.handleClick_=function($){$.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var $=this.getMap().getView();if($){var tt=$.getRotation();void 0!==tt&&(this.duration_>0&&tt%(2*Math.PI)!=0?$.animate({rotation:0,duration:this.duration_,easing:mn.b}):$.setRotation(0))}},e.prototype.render=function($){var tt=$.frameState;if(tt){var et=tt.viewState.rotation;if(et!=this.rotation_){var nt="rotate("+et+"rad)";if(this.autoHide_){var rt=this.element.classList.contains(Gt.c);rt||0!==et?rt&&0!==et&&this.element.classList.remove(Gt.c):this.element.classList.add(Gt.c)}this.label_.style.transform=nt}this.rotation_=et}},e}(Pn),Fn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Nn=function($){function e(tt){var et=this,nt=tt||{};et=$.call(this,{element:document.createElement("div"),target:nt.target})||this;var rt=void 0!==nt.className?nt.className:"ol-zoom",it=void 0!==nt.delta?nt.delta:1,ot=void 0!==nt.zoomInClassName?nt.zoomInClassName:rt+"-in",at=void 0!==nt.zoomOutClassName?nt.zoomOutClassName:rt+"-out",Ot=void 0!==nt.zoomInLabel?nt.zoomInLabel:"+",wt=void 0!==nt.zoomOutLabel?nt.zoomOutLabel:"−",St=void 0!==nt.zoomInTipLabel?nt.zoomInTipLabel:"Zoom in",Ct=void 0!==nt.zoomOutTipLabel?nt.zoomOutTipLabel:"Zoom out",Rt=document.createElement("button");Rt.className=ot,Rt.setAttribute("type","button"),Rt.title=St,Rt.appendChild("string"==typeof Ot?document.createTextNode(Ot):Ot),Rt.addEventListener(ae.a.CLICK,et.handleClick_.bind(et,it),!1);var Tt=document.createElement("button");Tt.className=at,Tt.setAttribute("type","button"),Tt.title=Ct,Tt.appendChild("string"==typeof wt?document.createTextNode(wt):wt),Tt.addEventListener(ae.a.CLICK,et.handleClick_.bind(et,-it),!1);var At=rt+" "+Gt.d+" "+Gt.b,Nt=et.element;return Nt.className=At,Nt.appendChild(Rt),Nt.appendChild(Tt),et.duration_=void 0!==nt.duration?nt.duration:250,et}return Fn(e,$),e.prototype.handleClick_=function($,tt){tt.preventDefault(),this.zoomByDelta_($)},e.prototype.zoomByDelta_=function($){var tt=this.getMap().getView();if(tt){var et=tt.getZoom();if(void 0!==et){var nt=tt.getConstrainedZoom(et+$);this.duration_>0?(tt.getAnimating()&&tt.cancelAnimations(),tt.animate({zoom:nt,duration:this.duration_,easing:mn.b})):tt.setZoom(nt)}}},e}(Pn),kn="active",Dn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}();function Ft($,tt,et,nt){var rt=$.getZoom();if(void 0!==rt){var it=$.getConstrainedZoom(rt+tt),ot=$.getResolutionForZoom(it);$.getAnimating()&&$.cancelAnimations(),$.animate({resolution:ot,anchor:et,duration:void 0!==nt?nt:250,easing:mn.b})}}var Gn=function($){function e(tt){var et=$.call(this)||this;return tt&&tt.handleEvent&&(et.handleEvent=tt.handleEvent),et.map_=null,et.setActive(!0),et}return Dn(e,$),e.prototype.getActive=function(){return this.get(kn)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function($){return!0},e.prototype.setActive=function($){this.set(kn,$)},e.prototype.setMap=function($){this.map_=$},e}(re.a),zn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Un=function($){function e(tt){var et=$.call(this)||this,nt=tt||{};return et.delta_=nt.delta?nt.delta:1,et.duration_=void 0!==nt.duration?nt.duration:250,et}return zn(e,$),e.prototype.handleEvent=function($){var tt=!1;if($.type==Re.DBLCLICK){var et=$.originalEvent,nt=$.map,rt=$.coordinate,it=et.shiftKey?-this.delta_:this.delta_;Ft(nt.getView(),it,rt,this.duration_),et.preventDefault(),tt=!0}return!tt},e}(Gn),Yn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}();function zt($){for(var tt=$.length,et=0,nt=0,rt=0;rt<tt;rt++)et+=$[rt].clientX,nt+=$[rt].clientY;return[et/tt,nt/tt]}var Bn=function($){function e(tt){var et=this,nt=tt||{};return et=$.call(this,nt)||this,nt.handleDownEvent&&(et.handleDownEvent=nt.handleDownEvent),nt.handleDragEvent&&(et.handleDragEvent=nt.handleDragEvent),nt.handleMoveEvent&&(et.handleMoveEvent=nt.handleMoveEvent),nt.handleUpEvent&&(et.handleUpEvent=nt.handleUpEvent),nt.stopDown&&(et.stopDown=nt.stopDown),et.handlingDownUpSequence=!1,et.trackedPointers_={},et.targetPointers=[],et}return Yn(e,$),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function($){return!1},e.prototype.handleDragEvent=function($){},e.prototype.handleEvent=function($){if(!$.originalEvent)return!0;var tt=!1;if(this.updateTrackedPointers_($),this.handlingDownUpSequence){if($.type==Re.POINTERDRAG)this.handleDragEvent($),$.originalEvent.preventDefault();else if($.type==Re.POINTERUP){var et=this.handleUpEvent($);this.handlingDownUpSequence=et&&this.targetPointers.length>0}}else if($.type==Re.POINTERDOWN){var nt=this.handleDownEvent($);this.handlingDownUpSequence=nt,tt=this.stopDown(nt)}else $.type==Re.POINTERMOVE&&this.handleMoveEvent($);return!tt},e.prototype.handleMoveEvent=function($){},e.prototype.handleUpEvent=function($){return!1},e.prototype.stopDown=function($){return $},e.prototype.updateTrackedPointers_=function($){if(function($){var tt=$.type;return tt===Re.POINTERDOWN||tt===Re.POINTERDRAG||tt===Re.POINTERUP}($)){var tt=$.originalEvent,et=tt.pointerId.toString();$.type==Re.POINTERUP?delete this.trackedPointers_[et]:($.type==Re.POINTERDOWN||et in this.trackedPointers_)&&(this.trackedPointers_[et]=tt),this.targetPointers=Object(gn.c)(this.trackedPointers_)}},e}(Gn);function Yt($){var tt=arguments;return function($){for(var et=!0,nt=0,rt=tt.length;nt<rt&&(et=et&&tt[nt]($));++nt);return et}}var Bt=function($){var tt=$.originalEvent;return tt.altKey&&!(tt.metaKey||tt.ctrlKey)&&tt.shiftKey},Wt=function($){return!$.map.getTargetElement().hasAttribute("tabindex")||function($){return $.target.getTargetElement().contains(document.activeElement)}($)},Wn=it.b,qt=function($){var tt=$.originalEvent;return 0==tt.button&&!(Ie.f&&Ie.d&&tt.ctrlKey)},Xn=(it.a,function($){var tt=$.originalEvent;return!tt.altKey&&!(tt.metaKey||tt.ctrlKey)&&!tt.shiftKey}),Zt=function($){var tt=$.originalEvent;return!tt.altKey&&!(tt.metaKey||tt.ctrlKey)&&tt.shiftKey},Kt=function($){var tt=$.originalEvent.target.tagName;return"INPUT"!==tt&&"SELECT"!==tt&&"TEXTAREA"!==tt},Ht=function($){var tt=$.originalEvent;return Object(dn.a)(void 0!==tt,56),"mouse"==tt.pointerType},Qt=function($){var tt=$.originalEvent;return Object(dn.a)(void 0!==tt,56),tt.isPrimary&&0===tt.button},qn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Zn=function($){function e(tt){var et=$.call(this,{stopDown:it.a})||this,nt=tt||{};et.kinetic_=nt.kinetic,et.lastCentroid=null,et.lastPointersCount_,et.panning_=!1;var rt=nt.condition?nt.condition:Yt(Xn,Qt);return et.condition_=nt.onFocusOnly?Yt(Wt,rt):rt,et.noKinetic_=!1,et}return qn(e,$),e.prototype.handleDragEvent=function($){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var tt=this.targetPointers,et=zt(tt);if(tt.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(et[0],et[1]),this.lastCentroid){var nt=[this.lastCentroid[0]-et[0],et[1]-this.lastCentroid[1]],rt=$.map.getView();Object(Ct.e)(nt,rt.getResolution()),Object(Ct.d)(nt,rt.getRotation()),rt.adjustCenterInternal(nt)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=et,this.lastPointersCount_=tt.length,$.originalEvent.preventDefault()},e.prototype.handleUpEvent=function($){var tt=$.map,et=tt.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var nt=this.kinetic_.getDistance(),rt=this.kinetic_.getAngle(),it=et.getCenterInternal(),ot=tt.getPixelFromCoordinateInternal(it),at=tt.getCoordinateFromPixelInternal([ot[0]-nt*Math.cos(rt),ot[1]-nt*Math.sin(rt)]);et.animateInternal({center:et.getConstrainedCenter(at),duration:500,easing:mn.b})}return this.panning_&&(this.panning_=!1,et.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function($){if(this.targetPointers.length>0&&this.condition_($)){var tt=$.map.getView();return this.lastCentroid=null,tt.getAnimating()&&tt.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Bn),Vn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Kn=function($){function e(tt){var et=this,nt=tt||{};return(et=$.call(this,{stopDown:it.a})||this).condition_=nt.condition?nt.condition:Bt,et.lastAngle_=void 0,et.duration_=void 0!==nt.duration?nt.duration:250,et}return Vn(e,$),e.prototype.handleDragEvent=function($){if(Ht($)){var tt=$.map,et=tt.getView();if(et.getConstraints().rotation!==ft){var nt=tt.getSize(),rt=$.pixel,it=Math.atan2(nt[1]/2-rt[1],rt[0]-nt[0]/2);if(void 0!==this.lastAngle_){var ot=it-this.lastAngle_;et.adjustRotationInternal(-ot)}this.lastAngle_=it}}},e.prototype.handleUpEvent=function($){return!Ht($)||($.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function($){return!(!Ht($)||!qt($)||!this.condition_($)||($.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(Bn),Hn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Qn=function($){function e(tt){var et=$.call(this)||this;return et.geometry_=null,et.element_=document.createElement("div"),et.element_.style.position="absolute",et.element_.style.pointerEvents="auto",et.element_.className="ol-box "+tt,et.map_=null,et.startPixel_=null,et.endPixel_=null,et}return Hn(e,$),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var $=this.startPixel_,tt=this.endPixel_,et=this.element_.style;et.left=Math.min($[0],tt[0])+"px",et.top=Math.min($[1],tt[1])+"px",et.width=Math.abs(tt[0]-$[0])+"px",et.height=Math.abs(tt[1]-$[1])+"px"},e.prototype.setMap=function($){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var tt=this.element_.style;tt.left="inherit",tt.top="inherit",tt.width="inherit",tt.height="inherit"}this.map_=$,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function($,tt){this.startPixel_=$,this.endPixel_=tt,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var $=this.startPixel_,tt=this.endPixel_,et=[$,[$[0],tt[1]],tt,[tt[0],$[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);et[4]=et[0].slice(),this.geometry_?this.geometry_.setCoordinates([et]):this.geometry_=new bn.a([et])},e.prototype.getGeometry=function(){return this.geometry_},e}(rt.a),Jn=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),$n=function($){function e(tt,et,nt){var rt=$.call(this,tt)||this;return rt.coordinate=et,rt.mapBrowserEvent=nt,rt}return Jn(e,$),e}(de.a),ar=function($){function e(tt){var et=$.call(this)||this,nt=tt||{};return et.box_=new Qn(nt.className||"ol-dragbox"),et.minArea_=void 0!==nt.minArea?nt.minArea:64,nt.onBoxEnd&&(et.onBoxEnd=nt.onBoxEnd),et.startPixel_=null,et.condition_=nt.condition?nt.condition:qt,et.boxEndCondition_=nt.boxEndCondition?nt.boxEndCondition:et.defaultBoxEndCondition,et}return Jn(e,$),e.prototype.defaultBoxEndCondition=function($,tt,et){var nt=et[0]-tt[0],rt=et[1]-tt[1];return nt*nt+rt*rt>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function($){this.box_.setPixels(this.startPixel_,$.pixel),this.dispatchEvent(new $n("boxdrag",$.coordinate,$))},e.prototype.handleUpEvent=function($){this.box_.setMap(null);var tt=this.boxEndCondition_($,this.startPixel_,$.pixel);return tt&&this.onBoxEnd($),this.dispatchEvent(new $n(tt?"boxend":"boxcancel",$.coordinate,$)),!1},e.prototype.handleDownEvent=function($){return!!this.condition_($)&&(this.startPixel_=$.pixel,this.box_.setMap($.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new $n("boxstart",$.coordinate,$)),!0)},e.prototype.onBoxEnd=function($){},e}(Bn),sr=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),lr=function($){function e(tt){var et=this,nt=tt||{},rt=nt.condition?nt.condition:Zt;return(et=$.call(this,{condition:rt,className:nt.className||"ol-dragzoom",minArea:nt.minArea})||this).duration_=void 0!==nt.duration?nt.duration:200,et.out_=void 0!==nt.out&&nt.out,et}return sr(e,$),e.prototype.onBoxEnd=function($){var tt=this.getMap(),et=tt.getView(),nt=tt.getSize(),rt=this.getGeometry().getExtent();if(this.out_){var it=et.calculateExtentInternal(nt),ot=Object(Ot.n)([tt.getPixelFromCoordinateInternal(Object(Ot.v)(rt)),tt.getPixelFromCoordinateInternal(Object(Ot.D)(rt))]),at=et.getResolutionForExtentInternal(ot,nt);Object(Ot.J)(it,1/at),rt=it}var wt=et.getConstrainedResolution(et.getResolutionForExtentInternal(rt,nt)),St=et.getConstrainedCenter(Object(Ot.x)(rt),wt);et.animateInternal({resolution:wt,center:St,duration:this.duration_,easing:mn.b})},e}(ar),_r=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),vr=function($){function e(tt){var et=$.call(this)||this,nt=tt||{};return et.defaultCondition_=function($){return Xn($)&&Kt($)},et.condition_=void 0!==nt.condition?nt.condition:et.defaultCondition_,et.duration_=void 0!==nt.duration?nt.duration:100,et.pixelDelta_=void 0!==nt.pixelDelta?nt.pixelDelta:128,et}return _r(e,$),e.prototype.handleEvent=function($){var tt=!1;if($.type==ae.a.KEYDOWN){var et=$.originalEvent,nt=et.keyCode;if(this.condition_($)&&(40==nt||37==nt||39==nt||38==nt)){var rt=$.map.getView(),it=rt.getResolution()*this.pixelDelta_,ot=0,at=0;40==nt?at=-it:37==nt?ot=-it:39==nt?ot=it:at=it;var Ot=[ot,at];Object(Ct.d)(Ot,rt.getRotation()),function($,tt,et){var nt=$.getCenterInternal();if(nt){var rt=[nt[0]+tt[0],nt[1]+tt[1]];$.animateInternal({duration:void 0!==et?et:250,easing:mn.d,center:$.getConstrainedCenter(rt)})}}(rt,Ot,this.duration_),et.preventDefault(),tt=!0}}return!tt},e}(Gn),br=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Or=function($){function e(tt){var et=$.call(this)||this,nt=tt||{};return et.condition_=nt.condition?nt.condition:Kt,et.delta_=nt.delta?nt.delta:1,et.duration_=void 0!==nt.duration?nt.duration:100,et}return br(e,$),e.prototype.handleEvent=function($){var tt=!1;if($.type==ae.a.KEYDOWN||$.type==ae.a.KEYPRESS){var et=$.originalEvent,nt=et.charCode;if(this.condition_($)&&(nt=="+".charCodeAt(0)||nt=="-".charCodeAt(0))){var rt=$.map,it=nt=="+".charCodeAt(0)?this.delta_:-this.delta_;Ft(rt.getView(),it,void 0,this.duration_),et.preventDefault(),tt=!0}}return!tt},e}(Gn),xr=function(){function t($,tt,et){this.decay_=$,this.minVelocity_=tt,this.delay_=et,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function($,tt){this.points_.push($,tt,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var $=Date.now()-this.delay_,tt=this.points_.length-3;if(this.points_[tt+2]<$)return!1;for(var et=tt-3;et>0&&this.points_[et+2]>$;)et-=3;var nt=this.points_[tt+2]-this.points_[et+2];if(nt<1e3/60)return!1;var rt=this.points_[tt]-this.points_[et],it=this.points_[tt+1]-this.points_[et+1];return this.angle_=Math.atan2(it,rt),this.initialVelocity_=Math.sqrt(rt*rt+it*it)/nt,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),wr=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Sr="trackpad",Er=function($){function e(tt){var et=this,nt=tt||{};(et=$.call(this,nt)||this).totalDelta_=0,et.lastDelta_=0,et.maxDelta_=void 0!==nt.maxDelta?nt.maxDelta:1,et.duration_=void 0!==nt.duration?nt.duration:250,et.timeout_=void 0!==nt.timeout?nt.timeout:80,et.useAnchor_=void 0===nt.useAnchor||nt.useAnchor,et.constrainResolution_=void 0!==nt.constrainResolution&&nt.constrainResolution;var rt=nt.condition?nt.condition:Wn;return et.condition_=nt.onFocusOnly?Yt(Wt,rt):rt,et.lastAnchor_=null,et.startTime_=void 0,et.timeoutId_,et.mode_=void 0,et.trackpadEventGap_=400,et.trackpadTimeoutId_,et.deltaPerZoom_=300,et}return wr(e,$),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function($){if(!this.condition_($))return!0;if($.type!==ae.a.WHEEL)return!0;var tt,et=$.map,nt=$.originalEvent;if(nt.preventDefault(),this.useAnchor_&&(this.lastAnchor_=$.coordinate),$.type==ae.a.WHEEL&&(tt=nt.deltaY,Ie.b&&nt.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(tt/=Ie.a),nt.deltaMode===WheelEvent.DOM_DELTA_LINE&&(tt*=40)),0===tt)return!1;this.lastDelta_=tt;var rt=Date.now();void 0===this.startTime_&&(this.startTime_=rt),(!this.mode_||rt-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(tt)<4?Sr:"wheel");var it=et.getView();if(this.mode_===Sr&&!it.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(it.getAnimating()&&it.cancelAnimations(),it.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),it.adjustZoom(-tt/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=rt,!1;this.totalDelta_+=tt;var ot=Math.max(this.timeout_-(rt-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,et),ot),!1},e.prototype.handleWheelZoom_=function($){var tt=$.getView();tt.getAnimating()&&tt.cancelAnimations();var et=-Object(_n.a)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(tt.getConstrainResolution()||this.constrainResolution_)&&(et=et?et>0?1:-1:0),Ft(tt,et,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function($){this.useAnchor_=$,$||(this.lastAnchor_=null)},e}(Gn),Mr=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Fr=function($){function e(tt){var et=this,nt=tt||{},rt=nt;return rt.stopDown||(rt.stopDown=it.a),(et=$.call(this,rt)||this).anchor_=null,et.lastAngle_=void 0,et.rotating_=!1,et.rotationDelta_=0,et.threshold_=void 0!==nt.threshold?nt.threshold:.3,et.duration_=void 0!==nt.duration?nt.duration:250,et}return Mr(e,$),e.prototype.handleDragEvent=function($){var tt=0,et=this.targetPointers[0],nt=this.targetPointers[1],rt=Math.atan2(nt.clientY-et.clientY,nt.clientX-et.clientX);if(void 0!==this.lastAngle_){var it=rt-this.lastAngle_;this.rotationDelta_+=it,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),tt=it}this.lastAngle_=rt;var ot=$.map,at=ot.getView();if(at.getConstraints().rotation!==ft){var Ot=ot.getViewport().getBoundingClientRect(),wt=zt(this.targetPointers);wt[0]-=Ot.left,wt[1]-=Ot.top,this.anchor_=ot.getCoordinateFromPixelInternal(wt),this.rotating_&&(ot.render(),at.adjustRotationInternal(tt,this.anchor_))}},e.prototype.handleUpEvent=function($){return!(this.targetPointers.length<2&&($.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function($){if(this.targetPointers.length>=2){var tt=$.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||tt.getView().beginInteraction(),!0}return!1},e}(Bn),kr=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Gr=function($){function e(tt){var et=this,nt=tt||{},rt=nt;return rt.stopDown||(rt.stopDown=it.a),(et=$.call(this,rt)||this).anchor_=null,et.duration_=void 0!==nt.duration?nt.duration:400,et.lastDistance_=void 0,et.lastScaleDelta_=1,et}return kr(e,$),e.prototype.handleDragEvent=function($){var tt=1,et=this.targetPointers[0],nt=this.targetPointers[1],rt=et.clientX-nt.clientX,it=et.clientY-nt.clientY,ot=Math.sqrt(rt*rt+it*it);void 0!==this.lastDistance_&&(tt=this.lastDistance_/ot),this.lastDistance_=ot;var at=$.map,Ot=at.getView();1!=tt&&(this.lastScaleDelta_=tt);var wt=at.getViewport().getBoundingClientRect(),St=zt(this.targetPointers);St[0]-=wt.left,St[1]-=wt.top,this.anchor_=at.getCoordinateFromPixelInternal(St),at.render(),Ot.adjustResolutionInternal(tt,this.anchor_)},e.prototype.handleUpEvent=function($){if(this.targetPointers.length<2){var tt=$.map.getView(),et=this.lastScaleDelta_>1?1:-1;return tt.endInteraction(this.duration_,et),!1}return!0},e.prototype.handleDownEvent=function($){if(this.targetPointers.length>=2){var tt=$.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||tt.getView().beginInteraction(),!0}return!1},e}(Bn),zr=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),Ur=function($){function e(tt){return(tt=Object(gn.a)({},tt)).controls||(tt.controls=function($){var tt={},et=new ie.a;return(void 0===tt.zoom||tt.zoom)&&et.push(new Nn(tt.zoomOptions)),(void 0===tt.rotate||tt.rotate)&&et.push(new Ln(tt.rotateOptions)),(void 0===tt.attribution||tt.attribution)&&et.push(new Tn(tt.attributionOptions)),et}()),tt.interactions||(tt.interactions=function($){var tt={onFocusOnly:!0}||{},et=new ie.a,nt=new xr(-.005,.05,100);return(void 0===tt.altShiftDragRotate||tt.altShiftDragRotate)&&et.push(new Kn),(void 0===tt.doubleClickZoom||tt.doubleClickZoom)&&et.push(new Un({delta:tt.zoomDelta,duration:tt.zoomDuration})),(void 0===tt.dragPan||tt.dragPan)&&et.push(new Zn({onFocusOnly:tt.onFocusOnly,kinetic:nt})),(void 0===tt.pinchRotate||tt.pinchRotate)&&et.push(new Fr),(void 0===tt.pinchZoom||tt.pinchZoom)&&et.push(new Gr({duration:tt.zoomDuration})),(void 0===tt.keyboard||tt.keyboard)&&(et.push(new vr),et.push(new Or({delta:tt.zoomDelta,duration:tt.zoomDuration}))),(void 0===tt.mouseWheelZoom||tt.mouseWheelZoom)&&et.push(new Er({onFocusOnly:tt.onFocusOnly,duration:tt.zoomDuration})),(void 0===tt.shiftDragZoom||tt.shiftDragZoom)&&et.push(new lr({duration:tt.zoomDuration})),et}()),$.call(this,tt)||this}return zr(e,$),e.prototype.createRenderer=function(){return new ne(this)},e}(En);tt.default=Ur},function($,tt,et){"use strict";et.r(tt);var nt,rt=et(8),it=et(55),ot="bottom-left",at="bottom-right",Ot="top-left",wt="top-right",St=et(13),Ct=et(84),Rt=et(51),Tt=et(9),At=et(43),Nt=et(14),kt=et(81),Dt=et(76),Gt=(nt=function($,tt){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)},function($,tt){function r(){this.constructor=$}nt($,tt),$.prototype=null===tt?Object.create(tt):(r.prototype=tt.prototype,new r)}),Ut=null,Xt=function($){function e(tt,et,nt,rt,it,ot){var at=$.call(this)||this;return at.hitDetectionImage_=null,at.image_=tt||new Image,null!==rt&&(at.image_.crossOrigin=rt),at.canvas_={},at.color_=ot,at.unlisten_=null,at.imageState_=it,at.size_=nt,at.src_=et,at.tainted_,at}return Gt(e,$),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===St.a.LOADED){Ut||(Ut=Object(Nt.a)(1,1)),Ut.drawImage(this.image_,0,0);try{Ut.getImageData(0,0,1,1),this.tainted_=!1}catch($){Ut=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(rt.a.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=St.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=St.a.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function($){return this.replaceColor_($),this.canvas_[$]?this.canvas_[$]:this.image_},e.prototype.getPixelRatio=function($){return this.replaceColor_($),this.canvas_[$]?$:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var $=this.size_[0],tt=this.size_[1],et=Object(Nt.a)($,tt);et.fillRect(0,0,$,tt),this.hitDetectionImage_=et.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==St.a.IDLE){this.imageState_=St.a.LOADING;try{this.image_.src=this.src_}catch($){this.handleImageError_()}this.unlisten_=Object(Dt.b)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function($){if(this.color_&&!this.canvas_[$]){var tt=document.createElement("canvas");this.canvas_[$]=tt,tt.width=Math.ceil(this.image_.width*$),tt.height=Math.ceil(this.image_.height*$);var et=tt.getContext("2d");if(et.scale($,$),et.drawImage(this.image_,0,0),et.globalCompositeOperation="multiply","multiply"===et.globalCompositeOperation||this.isTainted_())et.fillStyle=Object(Rt.b)(this.color_),et.fillRect(0,0,tt.width,tt.height),et.globalCompositeOperation="destination-in",et.drawImage(this.image_,0,0);else{for(var nt=et.getImageData(0,0,tt.width,tt.height),rt=nt.data,it=this.color_[0]/255,ot=this.color_[1]/255,at=this.color_[2]/255,Ot=this.color_[3],wt=0,St=rt.length;wt<St;wt+=4)rt[wt]*=it,rt[wt+1]*=ot,rt[wt+2]*=at,rt[wt+3]*=Ot;et.putImageData(nt,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(At.a),Vt=et(2),Jt=function(){var t=function($,tt){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,tt){$.__proto__=tt}||function($,tt){for(var et in tt)Object.prototype.hasOwnProperty.call(tt,et)&&($[et]=tt[et])})($,tt)};return function($,tt){function n(){this.constructor=$}t($,tt),$.prototype=null===tt?Object.create(tt):(n.prototype=tt.prototype,new n)}}(),ne=function($){function e(tt){var et=this,nt=tt||{},rt=void 0!==nt.opacity?nt.opacity:1,ot=void 0!==nt.rotation?nt.rotation:0,at=void 0!==nt.scale?nt.scale:1,wt=void 0!==nt.rotateWithView&&nt.rotateWithView;(et=$.call(this,{opacity:rt,rotation:ot,scale:at,displacement:void 0!==nt.displacement?nt.displacement:[0,0],rotateWithView:wt})||this).anchor_=void 0!==nt.anchor?nt.anchor:[.5,.5],et.normalizedAnchor_=null,et.anchorOrigin_=void 0!==nt.anchorOrigin?nt.anchorOrigin:Ot,et.anchorXUnits_=void 0!==nt.anchorXUnits?nt.anchorXUnits:it.a.FRACTION,et.anchorYUnits_=void 0!==nt.anchorYUnits?nt.anchorYUnits:it.a.FRACTION,et.crossOrigin_=void 0!==nt.crossOrigin?nt.crossOrigin:null;var Ct=void 0!==nt.img?nt.img:null,At=void 0!==nt.imgSize?nt.imgSize:null,Nt=nt.src;Object(Tt.a)(!(void 0!==Nt&&Ct),4),Object(Tt.a)(!Ct||Ct&&At,5),void 0!==Nt&&0!==Nt.length||!Ct||(Nt=Ct.src||Object(Vt.c)(Ct)),Object(Tt.a)(void 0!==Nt&&Nt.length>0,6);var Dt=void 0!==nt.src?St.a.IDLE:St.a.LOADED;return et.color_=void 0!==nt.color?Object(Rt.a)(nt.color):null,et.iconImage_=function($,tt,et,nt,rt,it){var ot=kt.a.get(tt,nt,it);return ot||(ot=new Xt($,tt,et,nt,rt,it),kt.a.set(tt,nt,it,ot)),ot}(Ct,Nt,At,et.crossOrigin_,Dt,et.color_),et.offset_=void 0!==nt.offset?nt.offset:[0,0],et.offsetOrigin_=void 0!==nt.offsetOrigin?nt.offsetOrigin:Ot,et.origin_=null,et.size_=void 0!==nt.size?nt.size:null,et}return Jt(e,$),e.prototype.clone=function(){var $=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray($)?$.slice():$,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var $=this.anchor_,tt=this.getSize();if(this.anchorXUnits_==it.a.FRACTION||this.anchorYUnits_==it.a.FRACTION){if(!tt)return null;$=this.anchor_.slice(),this.anchorXUnits_==it.a.FRACTION&&($[0]*=tt[0]),this.anchorYUnits_==it.a.FRACTION&&($[1]*=tt[1])}if(this.anchorOrigin_!=Ot){if(!tt)return null;$===this.anchor_&&($=this.anchor_.slice()),this.anchorOrigin_!=wt&&this.anchorOrigin_!=at||($[0]=-$[0]+tt[0]),this.anchorOrigin_!=ot&&this.anchorOrigin_!=at||($[1]=-$[1]+tt[1])}return this.normalizedAnchor_=$,this.normalizedAnchor_},e.prototype.setAnchor=function($){this.anchor_=$,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function($){return this.iconImage_.getImage($)},e.prototype.getPixelRatio=function($){return this.iconImage_.getPixelRatio($)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var $=this.offset_,tt=this.getDisplacement();if(this.offsetOrigin_!=Ot){var et=this.getSize(),nt=this.iconImage_.getSize();if(!et||!nt)return null;$=$.slice(),this.offsetOrigin_!=wt&&this.offsetOrigin_!=at||($[0]=nt[0]-et[0]-$[0]),this.offsetOrigin_!=ot&&this.offsetOrigin_!=at||($[1]=nt[1]-et[1]-$[1])}return $[0]+=tt[0],$[1]+=tt[1],this.origin_=$,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function($){this.iconImage_.addEventListener(rt.a.CHANGE,$)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function($){this.iconImage_.removeEventListener(rt.a.CHANGE,$)},e}(Ct.default);tt.default=ne}]);